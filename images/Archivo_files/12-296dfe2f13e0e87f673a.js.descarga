(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"06dA":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r("D57K");a.__exportStar(r("lzqC"),t),a.__exportStar(r("1AZD"),t),a.__exportStar(r("8P/k"),t),a.__exportStar(r("L8Wa"),t)},"0zYl":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;const a=r("eqO1");t.styles=e=>(0,a.createStyles)({pillInput:{textAlign:"center",border:"none",fontWeight:e.typography.fontWeightSemiBold,boxSizing:"border-box",lineHeight:1.2,backgroundColor:"inherit","&:focus":{outline:"none",boxShadow:"none"}}})},"1AZD":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RubricEvaluationScore=t.RubricEvaluation=t.RubricEvaluationPanel=void 0;var a=r("Bifh");Object.defineProperty(t,"RubricEvaluationPanel",{enumerable:!0,get:function(){return a.RubricEvaluationPanel}});var i=r("wD1L");Object.defineProperty(t,"RubricEvaluation",{enumerable:!0,get:function(){return i.RubricEvaluation}});var n=r("coSB");Object.defineProperty(t,"RubricEvaluationScore",{enumerable:!0,get:function(){return n.RubricEvaluationScore}})},"29Bi":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStyles=void 0;const a=r("eqO1"),i=r("Mwye");t.useStyles=(0,a.makeStyles)(e=>(0,a.createStyles)({criterionOverview:{cursor:"pointer",paddingTop:"16px",paddingBottom:"8px",...(0,i.criterionOverviewDescription)(e)},titleCriterion:{},percentageCriterion:{}}))},"2uT4":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Score=t.BaseScore=void 0;const a=r("D57K"),i=a.__importStar(r("ERkP")),n=r("ppko"),o=r("FS8K"),s=r("ys6O"),c=a.__importDefault(r("7O4Y")),l=r("WJCM"),d=r("eqO1"),u=r("ECG1"),p=r("/n7R");class m extends i.Component{componentDidMount(){this.focusScore()}getGradingPillColorClass(){const{studentGrade:e,gradePercentageColor:t,isGroupGradeMultiple:r,gradingPillColor:a,showInput:i,classes:n}=this.props;return""!==e&&"number"==typeof t&&(!i&&a)&&!r?a(t):n.pillEmpty}focusScore(){const{shouldFocusScore:e,showInput:t,hasMultipleAttempts:r}=this.props;t&&!r||!e||this.scoreRef.focus()}getInfoMessage(){const{classes:e,localize:{translate:t}}=this.props;return i.createElement("div",null,i.createElement("p",{className:e.infoTitle},t("rubrics.score.info.title")),i.createElement("p",null,t("rubrics.score.info.message")))}handleClick(e){e.stopPropagation()}renderPillContent(){const{children:e,rubricMaxScore:t,isGroupGradeMultiple:r,isGradingInProgress:a,classes:n,localize:{translate:o,formatNumber:s}}=this.props;return a?i.createElement("span",null,o("rubrics.score.inProgress")):r?i.createElement("span",null,o("rubrics.score.multiple")):i.createElement(i.Fragment,null,e,i.createElement("span",{className:n.gradeLabel},o("rubrics.score.maxScore",{maxScore:s(t)})))}render(){const{contentIconName:e,hasError:t,showInput:r,submissionLabel:a,submissionDetail:n,classes:o,shouldShowIcon:l}=this.props;return i.createElement("button",{tabIndex:0,"aria-label":a,className:o.rubricEvaluationScore,ref:e=>this.scoreRef=e},i.createElement("div",{className:o.gradepillWrapper},i.createElement("div",{className:o.description},i.createElement("span",{className:o.icon},l&&i.createElement(s.ScoreIcon,{iconName:e})),i.createElement("div",{className:o.maximumScore},i.createElement("span",{className:o.maximumScoreTitle},a),i.createElement("span",{className:(0,c.default)(o.maximumScorePercentage,{[o.maximumScorePercentageEllipsis]:r})},n))),i.createElement("div",{id:"rubric-pill-container",className:(0,c.default)(o.pill,{[o.pillError]:t},this.getGradingPillColorClass())},this.renderPillContent())),i.createElement("div",{onClick:this.handleClick},i.createElement(p.AnalyticsTooltip,{id:"grade-discrepancy-info-rubric",placement:"top",title:this.getInfoMessage(),analyticsId:"components.rubrics.score.base.discrepancy.info.tooltip"},i.createElement(u.Information,{className:o.infoIcon}))))}}t.BaseScore=m,t.Score=(0,n.withContext)((0,o.localizedComponentWrapper)((0,d.withStyles)(l.styles,{name:"Score"})(m)))},"3h+s":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CriterionAchievement=t.BaseCriterionAchievement=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("l6Yy"),n=r("ppko"),o=r("M/Db"),s=r("FS8K"),c=r("eqO1"),l=r("4cWt");class d extends a.Component{constructor(e){super(e),this.reserveInput=e=>{e?this.setState({achievementIdUnderEdit:e}):this.setState({achievementIdUnderEdit:null})},this.state={achievementIdUnderEdit:null}}render(){const{achievementIdUnderEdit:e}=this.state,{analyticsId:t,achievements:r,criterionPercentage:n,criterionId:s,classes:c,hasMultipleAttempts:l,rubricIsEditable:d,gradeIsOverridden:u,hasUnsavedFeedback:p,decimalsLength:m,localize:{formatNumber:b,parseNumber:h}}=this.props,g=`${t}.achievement`,v=e=>e?{minValue:h(b(e.minValue,{maximumFractionDigits:m})),maxValue:h(b(e.maxValue,{maximumFractionDigits:m}))}:e,S=e=>e?h(b(e,{maximumFractionDigits:m})):e,y=e=>e?h(b(e,{maximumFractionDigits:m})):e,f=t=>a.createElement(o.EditableAchievement,{analyticsId:g,score:y(t.score),rangeScoreValue:S(t.rangeScoreValue),rangeScore:v(t.rangeScore),title:t.title,isSelected:t.isSelected,description:t.description,criterionPercentage:n,criterionId:s,hasUnsavedFeedback:p,value:t.value,achievementId:t.id,colorPercentage:t.colorPercentage,achievementIdUnderEdit:e,reserveInput:this.reserveInput});return a.createElement("div",{className:c.evaluationCriterionAchievement},r.map(e=>a.createElement("div",{key:e.id},!d||u&&!l?(e=>a.createElement(i.Achievement,{score:y(e.score),rangeScoreValue:S(e.rangeScoreValue),rangeScore:v(e.rangeScore),title:e.title,isSelected:e.isSelected,description:e.description,colorPercentage:e.colorPercentage}))(e):f(e))))}}t.BaseCriterionAchievement=d,t.CriterionAchievement=(0,n.withContext)((0,s.localizedComponentWrapper)((0,c.withStyles)(l.styles,{name:"CriterionAchievement"})(d)))},"3l0L":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStyles=void 0;const a=r("eqO1"),i=r("Mwye"),n=r("THXI");t.useStyles=(0,a.makeStyles)(e=>(0,a.createStyles)({achievement:{cursor:"pointer",...(0,i.achievement)(e),...(0,i.gradingPillColors)(),"& .color-disabled":{backgroundColor:n.bbDefaultPalette.white}},achievementSelected:{backgroundColor:e.palette.background.b9},titleAchievement:{},paragraph:{},label:{},descriptionAchievement:{},descriptionSelected:{color:e.palette.primary.contrastText},scoreAchievement:{height:"30px",minWidth:"50px",...(0,i.gradePill)(e).gradePill},scoreIsRange:{minWidth:"80px"},scoreContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}))},"4cWt":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;const a=r("eqO1");t.styles=()=>(0,a.createStyles)({evaluationCriterionAchievement:{margin:"12px 0"}})},"7CBr":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStyles=void 0;const a=r("eqO1"),i=r("Mwye");t.useStyles=(0,a.makeStyles)(e=>(0,a.createStyles)({evaluationCriterionOverview:{cursor:"pointer",paddingTop:"16px",paddingBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center",...(0,i.criterionOverviewDescription)(e),...(0,i.gradingPillColors)()},titleCriterion:{},percentageCriterion:{},description:{display:"flex",flexDirection:"column",alignItems:"flex-start",marginRight:"5px"},pill:{height:"25px",minWidth:"50px",...(0,i.gradePill)(e).gradePill},pillLabel:{margin:"5px",fontWeight:e.typography.fontWeightSemiBold},pillAndFeedback:{display:"inline-flex",alignItems:"center",justifyContent:"flex-end"},feedbackIcon:{height:"16px",marginLeft:"11px"}}))},"8P/k":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RubricInline=void 0;var a=r("VhZA");Object.defineProperty(t,"RubricInline",{enumerable:!0,get:function(){return a.RubricInline}})},"93g4":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStyles=void 0;const a=r("eqO1"),i=r("Mwye");t.useStyles=(0,a.makeStyles)(e=>(0,a.createStyles)({rubricViewScore:{...(0,i.scoreContainer)(e)},description:{},icon:{},maximumScore:{fontWeight:e.typography.fontWeightBold},points:{padding:"0 15px",borderLeft:`1px solid ${e.palette.border.main}`,display:"flex",alignItems:"center"}}))},"98Mk":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Regrader=t.BaseRegrader=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("ppko"),n=r("FS8K"),o=r("myse"),s=r("XVeL"),c=r("eqO1");class l extends a.Component{constructor(){super(...arguments),this.executeRegrade=()=>{const{updateRubric:e,rubricMaxScore:t,gradeIsOverridden:r,rubricCriteria:a,calculateCompletion:n,rubricType:o}=this.props,s=(0,i.calculateGrade)(a);e({grade:s,gradeColorPercentage:n(s,t),rubricGrade:s,isGradeOverridden:!r,criteria:a,isGradingInProgress:!1,isGroupGradeMultiple:!1,rubricType:o})}}render(){const{analyticsId:e,classes:t,analyticsEventAugmentor:r,localize:{translate:i}}=this.props,n=`${e}.regrader.link`,s=r(o.AnalyticsEventTypes.CLICK_EVENT,this.executeRegrade,n);return a.createElement("button",{tabIndex:0,className:t.regrader,"data-analytics-id":n,onClick:s},a.createElement("span",{className:t.overrideWrapText},i("rubrics.score.overriddenScore")),a.createElement("span",{className:t.link},i("rubrics.score.regradeScore")))}}t.BaseRegrader=l,t.Regrader=(0,i.withContext)((0,o.withAnalytics)((0,c.withStyles)(s.styles)((0,n.localizedComponentWrapper)(l))))},"9aLw":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;const a=r("eqO1");t.styles=e=>(0,a.createStyles)({gradeLabel:{minWidth:"19px",lineHeight:1.2,textAlign:"center",marginRight:"3px",fontWeight:e.typography.fontWeightSemiBold},gradingInputCallout:{maxWidth:"200px"},overrideBlocked:{marginTop:"12px",marginBottom:"10px",fontStyle:"italic"},errorMessage:{color:e.palette.error.main,margin:"8px 12px 8px 12px"}})},"9om9":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GradingInput=t.BaseGradingInput=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("nsO7"),n=r("myse"),o=r("eqO1"),s=r("0zYl"),c=r("FS8K");class l extends a.Component{constructor(e){super(e),this.handleChange=e=>{let t;const{onChange:r,allowDecimals:a,localize:{parseNumber:n}}=this.props,o=new RegExp("^(\\d{0,5}(\\.\\d{0,2})?)$"),s=new RegExp("^(\\d{0,5})$"),c=a?o:s,l=e.target.value;let d=l;if(""!==l&&(t=a?n(l):(0,i.toInteger)(n(l)),d=(0,i.toString)(n(l))),this.setState({inputValue:l,grade:t}),!c.test(d))return this.setState({hasError:!0}),void this.handleError();this.setState({hasError:!1}),r&&r(t)},this.handleKeyDown=e=>{13===e.keyCode&&(e.preventDefault(),this.submit())},this.handleBlur=()=>{this.submit()},this.submit=()=>{const{grade:e,inputValue:t}=this.state,{onSubmit:r,allowEmptyValue:a}=this.props;(""!==t||a)&&(this.isValidInput()?r(e):this.handleError())};const{initialValue:t}=e;this.state={inputValue:(null!=t?t:"").toString(),grade:this.parseInitialValue(t),hasError:!1}}componentDidMount(){this.inputRef.focus()}parseInitialValue(e){const{localize:{parseNumber:t}}=this.props;if((0,i.isString)(e)){const r=t(e);if((0,i.isFinite)(r))return r}return e}inputSize(e){const{isExpandable:t}=this.props;return t?0===e?1:e>8?8:e:5}isValidInput(){const{grade:e,inputValue:t,hasError:r}=this.state,{minValue:a=0,maxValue:i,allowEmptyValue:n}=this.props;return!r&&(!(!n||e||""!==t)||(i?a<=e&&e<=i:a<=e))}handleError(){const{onError:e}=this.props;e&&e()}render(){const{inputValue:e}=this.state,{analyticsId:t,analyticsEventAugmentor:r,ariaLabel:i,onClick:o,classes:{pillInput:s}}=this.props,c=`${t}.input.text`,l=r(n.AnalyticsEventTypes.CLICK_EVENT,o||n.defaultOnClick,c),d=r(n.AnalyticsEventTypes.CLICK_EVENT,this.handleKeyDown||n.defaultOnClick,c),u=r(n.AnalyticsEventTypes.CLICK_EVENT,this.handleBlur||n.defaultOnClick,c);return a.createElement("input",{tabIndex:0,"data-analytics-id":c,className:s,value:e,placeholder:"--",ref:e=>this.inputRef=e,onChange:this.handleChange,onKeyDown:d,onBlur:u,onClick:l,size:this.inputSize(e.length),"aria-label":i})}}t.BaseGradingInput=l,t.GradingInput=(0,n.withAnalytics)((0,c.localizedComponentWrapper)((0,o.withStyles)(s.styles,{name:"GradingInput"})(l)))},Bifh:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RubricEvaluationPanel=t.BaseRubricEvaluationPanel=void 0;const a=r("D57K"),i=a.__importStar(r("ERkP")),n=r("FS8K"),o=r("wD1L"),s=r("coSB"),c=r("Zwiy"),l=r("E1pj"),d=r("ppko"),u=r("eqO1"),p=a.__importDefault(r("7O4Y")),m=r("cp5W");class b extends i.Component{constructor(e){super(e),this.updateRubric=e=>{const{contextData:t}=this.state,{onRubricUpdate:r}=this.props;e.criterionFeedbackWasUpdated&&"criteria"in e?this.updateRubricWithFeedback(e):(this.setState({contextData:{...t,...(0,d.filterContextData)(e)}}),r(e))},this.updateFeedback=(e,t)=>{const{contextData:r}=this.state;this.setState({contextData:{...r,...(0,d.updateCriteronWithFeedback)(e,r,t)}},()=>{this.updateRubricDataInUltra(!0)})},this.removeFeedbackOnCriterion=e=>{const{contextData:t}=this.state;this.setState({contextData:{...t,...(0,d.removeFeedbackByCriterion)(e,t)}},()=>{this.updateRubricDataInUltra(!0)})};const{getGradingPillColor:t,showConfirmationModal:r}=e;this.state={contextData:{showConfirmationModal:r,...(0,d.getContextData)(e),updateRubric:this.updateRubric,updateFeedback:this.updateFeedback,removeFeedbackOnCriterion:this.removeFeedbackOnCriterion,gradingPillColor:t}}}componentDidUpdate(e){const{contextData:t}=this.state,{shouldUndoOverride:r,maxScore:a,okConfirmationClicked:i,confirmationHandledForCriterionId:n,shouldUpdateCriterionFeedback:o,criteria:s,isSavingRubric:c}=this.props;if(c===e.isSavingRubric)if(t.okConfirmationClicked===i)if(r&&t.gradeIsOverridden){const e=(0,d.calculateGrade)(t.rubricCriteria);this.setState({contextData:{...(0,d.setGradeAndGradeColor)(t,e,a),gradeIsOverridden:!1}},()=>{this.updateRubricDataInUltra()})}else o&&!e.shouldUpdateCriterionFeedback&&this.setState({contextData:{...(0,d.updateLastSavedStatus)(s,t),currentlySavingFeedback:!1}},()=>{this.updateRubricDataInUltra()});else this.setState({contextData:{...t,okConfirmationClicked:i,confirmationHandledForCriterionId:n}});else this.setState({contextData:{...t,isSavingRubric:c}})}getSmallHeaderTitle(){const{smallTitle:e,UltraWindowSize:t}=this.props;return t.isSmallBreakpoint()?void 0:e}updateRubricWithFeedback(e){const{contextData:t}=this.state,{onRubricUpdate:r}=this.props;if((0,d.userIsOffline)()){const r=(0,d.setOfflineErrorOnCriteria)(e,!0);return void this.setState({contextData:{...t,...(0,d.filterContextData)(r)}})}const a=(0,d.setOfflineErrorOnCriteria)(e,!1),i=(0,d.filterCriteriaWithValidFeedback)(a);0!==i.criteria.length?(this.setState({contextData:{...t,...(0,d.filterContextData)(a),currentlySavingFeedback:!0}}),r(i)):this.setState({contextData:{...t,...(0,d.filterContextData)(a)}})}updateRubricDataInUltra(e){const{contextData:t}=this.state,{onRubricPostUpdate:r}=this.props;r((0,d.getRubricFromContext)(t),{isUpdatingFeedback:e})}render(){const{contextData:e}=this.state,{analyticsId:t,localize:{translate:r},smallTitle:a,contentIconName:n,courseColorClass:l,classes:u,isExternalSubmission:m}=this.props,b=`${t}.rubrics.components.rubricEvaluationPanel`;return i.createElement("div",{className:(0,p.default)("panel-wrap",u.rubricEvaluationPanel,l)},i.createElement("div",{className:(0,p.default)("panel-header","simple-header",u.header)},i.createElement(c.BbPanelHeader,{analyticsId:`${b}.header`,title:r("rubrics.title"),type:c.BbPanelType.full,smallHeaderTitle:this.getSmallHeaderTitle()})),i.createElement(d.RubricContext.Provider,{value:{...e}},i.createElement("div",{className:(0,p.default)("panel-body","panel-content",u.body)},i.createElement(s.RubricEvaluationScore,{analyticsId:b,contentIconName:n,isExternalSubmission:m,shouldShowIcon:!0}),i.createElement(o.RubricEvaluation,{analyticsId:b}))))}}t.BaseRubricEvaluationPanel=b,t.RubricEvaluationPanel=(0,l.windowResizingResponsiveComponentWrapper)((0,n.localizedComponentWrapper)((0,u.withStyles)(m.styles,{name:"RubricEvaluationPanel"})(b)))},FbJS:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RubricView=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("dh4P"),n=r("n1lm");t.RubricView=({analyticsId:e,criteria:t,isUsingAnalyticContext:r,decimalsLength:o,rubricType:s,maxScore:c})=>{const l=(0,n.useStyles)(),d=r?`${e}.rubricView`:`${e}.rubrics.components.rubricView`;return a.createElement("ul",{className:l.rubricViewRubric},t.map(e=>a.createElement(i.RubricCriterion,{key:e.id,title:e.title,value:e.value,achievements:e.achievements,decimalsLength:o,analyticsId:d,rubricType:s,maxScore:c,criterionId:e.id})))}},He8U:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CriterionFeedback=t.BaseCriterionFeedback=void 0;const a=r("D57K"),i=a.__importStar(r("ERkP")),n=a.__importDefault(r("7O4Y")),o=r("ppko"),s=r("FS8K"),c=r("ERsv"),l=r("ml91"),d=r("np6O"),u=r("eqO1"),p=r("tN4z"),m=r("YMjC"),b=r("n7/H");class h extends i.Component{constructor(e){super(e),this.MemoizedBbEditor=i.memo(({autoSaveMilliseconds:e,bbml:t,isReadOnly:r,placeholder:a,autoSaveCallback:n,onBlur:o,onChange:s,isDisabled:l,ariaLabelledBy:d})=>i.createElement(c.BbEditor,{bbml:t,onChange:s,autoSaveCallback:n,autoSaveMilliseconds:e,isReadOnly:r,placeholder:a,onBlur:o,isDisabled:l,disablePasteFormat:!0,isToolbarHidden:!0,ariaLabelledBy:d}),(e,t)=>{const r=e.isReadOnly!==t.isReadOnly,a=(""===t.studentGrade||null==t.studentGrade)&&""===t.bbml,i=e.isDisabled!==t.isDisabled;return!(r||a||i)}),this.saveFeedback=()=>{const{updateRubric:e,rubricCriteria:t,studentGrade:r,rubricType:a}=this.props;e({grade:r,rubricGrade:r,criterionFeedbackWasUpdated:!0,criteria:t,rubricType:a})},this.bbmlOnBlur=()=>{const{currentFeedback:e,lastFeedbackSaved:t}=this.state;e!==t&&(this.saveFeedback(),this.setState({lastFeedbackSaved:e}))},this.bbmlOnAutoSave=()=>{const{lastFeedbackSaved:e,currentFeedback:t}=this.state;t!==e&&(this.saveFeedback(),this.setState({lastFeedbackSaved:t}))},this.bbmlOnChange=e=>{const t=e.toBbML(),{updateFeedback:r,criterionId:a,feedback:i}=this.props;this.setState({currentFeedback:t}),i!==t&&r(t,a)},this.getBbmlStyleClass=()=>{const{feedback:e,rubricIsEditable:t,classes:r,lastSaveFailed:a}=this.props,{wasPencilSelected:i,currentFeedback:n}=this.state;return!e||i||n?t&&a?`${r.bbmlEditable} ${r.bbmlSmallMargin}`:t&&!a?`${r.bbmlEditable} ${r.bbmlLargeMargin}`:"":r.bbmlReadOnly},this.getPencilStyleClass=()=>{const{classes:e}=this.props;return this.shouldShowSavingMessage()?"":e.titleLargeMargin},this.getTitleStyleClass=()=>{const{classes:e}=this.props;return this.shouldShowSavingMessage()?`${e.feedbackTitle} ${e.titleSmallMargin}`:`${e.feedbackTitle} ${e.titleLargeMargin}`},this.getHeaderStyleClass=()=>{const{classes:e}=this.props;return this.shouldShowSavingMessage()?`${e.feedbackHeader} ${e.feedbackHeaderSmallHeight}`:`${e.feedbackHeader} ${e.feedbackHeaderLargeHeight}`},this.getBbmlText=()=>{const{feedback:e}=this.props;return e||""},this.isBbmlReadOnly=()=>{const{feedback:e}=this.props,{wasPencilSelected:t,currentFeedback:r}=this.state;return!(!e||t||r)},this.isBbmlDisabled=()=>{const{gradeIsOverridden:e,rubricIsEditable:t}=this.props;return!(!e||!t)},this.shouldShowPencil=()=>{const{feedback:e,rubricIsEditable:t,gradeIsOverridden:r}=this.props,{wasPencilSelected:a,currentFeedback:i}=this.state;return!(!t||!e||a||i||r)},this.shouldShowSavingMessage=()=>{const{currentlySavingFeedback:e,lastFeedbackSaveDate:t,hasUnsavedFeedback:r,rubricIsEditable:a}=this.props;return a&&(e&&r||t)},this.setBbmlEditMode=()=>{this.setState({wasPencilSelected:!0,shouldFocusBbml:!0})},this.getSavingMessage=()=>{const{localize:{translate:e,formatTime:t},lastFeedbackSaveDate:r}=this.props;if(r){return e("rubrics.criterion.savedMessage",{time:t(r,b.ILocaleTimeFormat.Short)})}return e("rubrics.criterion.savingMessage")},this.state={wasPencilSelected:!1,shouldFocusBbml:!1,lastFeedbackSaved:null,currentFeedback:null},this.editorReference=i.createRef()}componentDidUpdate(e,t){const{shouldFocusBbml:r}=this.state;if(r&&r!==t.shouldFocusBbml){const e=this.editorReference.current.getElementsByClassName("bb-editor")[0];e&&e.focus(),this.setState({shouldFocusBbml:!1})}}render(){const{rubricIsEditable:e,feedback:t,localize:{translate:r},analyticsId:a,classes:o,studentGrade:s,lastSaveFailed:c,showLoader:u,criterionId:m}=this.props,b=`rubrics-criterion${m}-feedback-title`;return i.createElement(i.Fragment,null,(e||t)&&i.createElement(i.Fragment,null,i.createElement("div",{className:this.getHeaderStyleClass()},i.createElement("h3",{id:b,className:this.getTitleStyleClass()},r("rubrics.criterion.feedbackTitle")),this.shouldShowPencil()&&i.createElement(d.AnalyticsIconButton,{onClick:this.setBbmlEditMode,"aria-label":r("rubrics.criterion.pencilAriaLabel"),analyticsId:`${a}.feedback.edit`,className:this.getPencilStyleClass()},i.createElement(l.Edit,{color:"primary","aria-hidden":"true"}))),this.shouldShowSavingMessage()&&i.createElement("h4",{className:(0,n.default)("js-feedback-time",o.savingMessage)},this.getSavingMessage()),u&&i.createElement(p.AnalyticsCircularProgress,{ariaLabel:r("rubrics.criterion.loadingAriaLabel"),size:"small",id:"rubrics-criterion-feedback-loader"}),i.createElement("div",{className:this.getBbmlStyleClass(),ref:this.editorReference},i.createElement(this.MemoizedBbEditor,{bbml:this.getBbmlText(),studentGrade:s,onChange:this.bbmlOnChange,autoSaveCallback:this.bbmlOnAutoSave,autoSaveMilliseconds:5e3,isReadOnly:this.isBbmlReadOnly(),placeholder:r("rubrics.criterion.feedbackPlaceHolder"),onBlur:this.bbmlOnBlur,isDisabled:this.isBbmlDisabled(),ariaLabelledBy:b})),c&&i.createElement("p",{className:o.errorMessage},r("rubrics.criterion.connectionMessage"))))}}t.BaseCriterionFeedback=h,t.CriterionFeedback=(0,s.localizedComponentWrapper)((0,o.withContext)((0,u.withStyles)(m.styles)(h)))},"JP+r":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStyles=void 0;const a=r("eqO1"),i=r("Mwye");t.useStyles=(0,a.makeStyles)(e=>(0,a.createStyles)({criterionAchievement:{...(0,i.achievement)(e)},titleAchievement:{},paragraph:{},label:{},descriptionAchievement:{},scoreAchievement:{height:"30px",minWidth:"50px",...(0,i.gradePill)(e).gradePill},scoreIsRange:{minWidth:"80px"}}))},L8Wa:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"M/Db":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableAchievement=t.BaseEditableAchievement=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("ppko"),n=r("pqvb"),o=r("l6Yy"),s=r("myse"),c=r("FS8K");t.BaseEditableAchievement=({analyticsId:e,analyticsEventAugmentor:t,score:r,rangeScore:c,title:l,isSelected:d,rangeScoreValue:u,description:p,criterionPercentage:m,criterionId:b,value:h,achievementId:g,achievementIdUnderEdit:v,reserveInput:S,updateCriteria:y,updateRubric:f,calculateCompletion:C,rubricCriteria:E,rubricMaxScore:x,rubricType:k,colorPercentage:I,hasUnsavedFeedback:P})=>{const R=()=>{const e=y(E,x,b,g,k,m),t=(0,i.calculateGrade)(e),r=C(t,x);f({grade:t,gradeColorPercentage:r,rubricGrade:t,criteria:e,criterionFeedbackWasUpdated:P})},w=`${e}.percentage`,O=t(s.AnalyticsEventTypes.CLICK_EVENT,e=>{e.preventDefault(),R()},w),D=t(s.AnalyticsEventTypes.CLICK_EVENT,e=>{32===e.keyCode&&(e.preventDefault(),R())},w);return a.createElement(a.Fragment,null,c?(()=>a.createElement(n.EditableRangeAchievement,{analyticsId:w,rangeScore:c,criterionPercentage:m,value:h,title:l,isSelected:d,colorPercentage:I,rangeScoreValue:u,description:p,criterionId:b,hasUnsavedFeedback:P,achievementId:g,achievementIdUnderEdit:v,reserveInput:S}))():(()=>a.createElement("div",{onClick:O,onKeyDown:D},a.createElement(o.Achievement,{score:r,title:l,isSelected:d,rangeScoreValue:u,description:p,colorPercentage:I})))())},t.EditableAchievement=(0,i.withContext)((0,c.localizedComponentWrapper)((0,s.withAnalytics)(t.BaseEditableAchievement)))},Mwye:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gradingPillColors=t.scoreContainer=t.rubricPanelContainer=t.rubricContainer=t.criterionOverviewDescription=t.achievement=t.gradePill=t.overflowEllipsis=void 0;const a=r("eqO1"),i=r("THXI");t.overflowEllipsis=()=>(0,a.createStyles)({styles:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}});t.gradePill=e=>(0,a.createStyles)({gradePill:{background:e.palette.background.b4,borderRadius:"30px",display:"flex",justifyContent:"center",alignItems:"center"}});t.achievement=e=>({padding:"10px",paddingLeft:"14px",backgroundColor:e.palette.background.b2,borderRadius:"2px",border:`1px solid ${e.palette.border.main}`,marginBottom:"10px","& button":{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},"& $titleAchievement":{fontSize:e.typography.fontSizeDefault,fontWeight:e.typography.fontWeightSemiBold},"& $paragraph":{margin:0,fontWeight:e.typography.fontWeightLight},"& $label":{margin:"5px",whiteSpace:"nowrap",fontWeight:e.typography.fontWeightSemiBold},"& $descriptionAchievement":{wordBreak:"break-word",marginRight:"5px",textAlign:"left"}});t.criterionOverviewDescription=e=>({"& $titleCriterion$titleCriterion":{margin:0,fontSize:e.typography.fontSizeMedium,fontWeight:e.typography.fontWeightSemiBold,wordBreak:"break-word"},"& $percentageCriterion":{margin:0,fontSize:e.typography.fontSizeSmall,color:e.palette.text.secondary}}),t.rubricContainer={paddingLeft:0,margin:0,"& li":{listStyleType:"none"},"& .bb-AccordionTab-Icon-Button-Class":{flexShrink:0}};t.rubricPanelContainer=e=>(0,a.createStyles)({styles:{"& $header":{[e.breakpoints.up("sm")]:{"& .ms-Panel-commands":{backgroundColor:e.palette.common.white}},"& .ms-Panel-header":{boxShadow:"none",[e.breakpoints.up("sm")]:{alignItems:"flex-end",minHeight:0,"& .header-actions":{margin:0,flex:0}},"& .ms-Panel-titles-container":{maxWidth:"100%",[e.breakpoints.up("sm")]:{position:"static"},"& .ms-Panel-subTitle":{display:"block",...(0,t.overflowEllipsis)().styles},"& .ms-Panel-headerText":{...(0,t.overflowEllipsis)().styles,textAlign:"center",[e.breakpoints.up("sm")]:{fontSize:e.typography.fontSizeXXLarge,fontFamily:e.typography.fontFamilySerif,color:e.palette.text.primary,textAlign:"initial"}}}}},"& $body":{paddingBottom:"0 !important",paddingTop:0}}});t.scoreContainer=e=>({marginTop:"24px",marginBottom:"3px",height:"62px",backgroundColor:e.palette.background.b2,display:"flex",justifyContent:"space-between",border:`1px solid ${e.palette.border.main}`,"& $description":{display:"flex",alignItems:"center"},"& $icon":{margin:"0 10px"}});t.gradingPillColors=()=>({"& .green":{backgroundColor:i.bbGradePalette.green},"& .yellowgreen":{backgroundColor:i.bbGradePalette.yellowGreen},"& .yellow":{backgroundColor:i.bbGradePalette.yellow},"& .orange":{backgroundColor:i.bbGradePalette.brightOrange},"& .red":{backgroundColor:i.bbGradePalette.red},"& .color-disabled":{backgroundColor:i.bbDefaultPalette.black,color:i.bbDefaultPalette.white}})},NOGW:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStyles=void 0;const a=r("eqO1");t.useStyles=(0,a.makeStyles)(()=>(0,a.createStyles)({criterionContent:{margin:"12px 0"}}))},PWcG:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CriterionOverview=t.BaseCriterionOverview=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("myse"),n=r("FS8K"),o=r("29Bi"),s=r("ppko");t.BaseCriterionOverview=({analyticsId:e,analyticsEventAugmentor:t,criterionId:r,title:n,value:c,decimalsLength:l,rubricType:d,rubricMaxScore:u,maxScore:p,localize:{translate:m,formatNumber:b},onClick:h})=>{const g=b(c,{maximumFractionDigits:l}),v=b((0,s.getPercentageOfTotalGrade)(c,u||p),{maximumFractionDigits:l}),S=(0,o.useStyles)(),y=`${e}.criterionOverview.button`,f=t(i.AnalyticsEventTypes.CLICK_EVENT,h,y);return a.createElement("div",{className:S.criterionOverview,"data-analytics-id":y,onClick:f},a.createElement("h2",{className:S.titleCriterion,id:r},n),a.createElement("p",{className:S.percentageCriterion},!(0,s.isPointsOrPointsRangeRubric)(d)&&m("rubrics.criterion.percentage",{percentage:g}),(0,s.isPointsOrPointsRangeRubric)(d)&&m("rubrics.criterion.possiblePoints",{points:g,percentage:v})))},t.CriterionOverview=(0,i.withAnalytics)((0,n.localizedComponentWrapper)(t.BaseCriterionOverview))},"Px+F":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RubricViewPanel=t.BaseRubricViewPanel=void 0;const a=r("D57K"),i=a.__importStar(r("ERkP")),n=r("q2bX"),o=r("FbJS"),s=r("FS8K"),c=r("Zwiy"),l=a.__importDefault(r("7O4Y")),d=r("u3d2"),u=r("eqO1");t.BaseRubricViewPanel=({analyticsId:e,smallTitle:t,contentIconName:r,maxScore:a,criteria:s,decimalsLength:p,rubricType:m,localize:{translate:b},hideNavMenu:h})=>{const g=(0,d.useStyles)(),v=`${e}.rubrics.components.rubricViewPanel`,S=(0,u.useMediaQuery)((0,u.useTheme)().breakpoints.down("xs"));return i.createElement("div",{className:(0,l.default)("panel-wrap",g.rubricViewPanel)},i.createElement("div",{className:(0,l.default)("panel-header","simple-header",g.header)},i.createElement(c.BbPanelHeader,{analyticsId:`${v}.header`,title:b("rubrics.title"),smallHeaderTitle:(()=>S?void 0:t)(),type:c.BbPanelType.full,hideNavMenu:!!h})),i.createElement("div",{className:(0,l.default)("panel-body","panel-content",g.body)},i.createElement(n.RubricViewScore,{contentIconName:r,maxScore:a,shouldShowIcon:!0}),i.createElement(o.RubricView,{isUsingAnalyticContext:!0,analyticsId:v,criteria:s,decimalsLength:p,maxScore:a,rubricType:m})))},t.RubricViewPanel=(0,s.localizedComponentWrapper)(t.BaseRubricViewPanel)},"T+7x":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableScore=t.BaseEditableScore=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("AuQm"),n=r("MC1S"),o=r("2uT4"),s=r("9om9"),c=r("98Mk"),l=r("ppko"),d=r("FS8K"),u=r("eqO1"),p=r("9aLw");class m extends a.Component{constructor(e){super(e),this.handleSelect=()=>{this.setState({showInput:!0})},this.handleGradingInputSubmit=e=>{var t,r;const a=this.props.studentGrade?Number(this.props.studentGrade):null;null===(r=(t=this.props).onGradeInputUpdate)||void 0===r||r.call(t,e),null!=e?a!==Number(e)?this.setState({hasError:!1,showInput:!1},()=>{this.updateRubricValue(e)}):this.setState({showInput:!1}):this.setState({clearConfirmationIsVisible:!0})},this.handleGradingInputError=()=>{this.setState({hasError:!0})},this.handleGradingInputChange=()=>{this.setState({hasError:!1})},this.onClearRubricSuccess=()=>{const{rubricCriteria:e,updateRubric:t}=this.props;this.setState({showInput:!1,clearConfirmationIsVisible:!1}),t({grade:"",criteria:(0,l.cleanCriteria)(e),isGradeOverridden:!1})},this.onClearRubricDismiss=()=>{this.setState({showInput:!1,clearConfirmationIsVisible:!1})},this.state={showInput:!1,hasError:!1,clearConfirmationIsVisible:!1},this.gradingInputErrorRef=a.createRef()}updateRubricValue(e){const{rubricCriteria:t,updateRubric:r,rubricMaxScore:a,calculateCompletion:i}=this.props,{gradeIsAnonymous:n}=this.props,o={grade:e,rubricGrade:n?(0,l.calculateGrade)(t):e,gradeColorPercentage:i(Number(e),a),isGradeOverridden:!0};n&&(o.criteria=t),r(o)}render(){const{showInput:e,hasError:t,clearConfirmationIsVisible:r}=this.state,{analyticsId:d,contentIconName:u,rubricMaxScore:p,studentGrade:m,isExternalSubmission:b,gradeIsOverridden:h,children:g,hasMultipleAttempts:v,shouldFocusScore:S,shouldShowIcon:y,localize:{translate:f,formatNumber:C},classes:{overrideBlocked:E,gradingInputCallout:x,errorMessage:k}}=this.props,I={label:f(b?"rubrics.score.externalSubmission":"rubrics.score.submission"),detail:`${f("rubrics.score.maxScoreLabel")}: ${f("rubrics.score.maxScorePoints",{maxScore:C(p)})}`},P={title:f("rubrics.score.clearRubricConfirmationCallout.title"),body:f("rubrics.score.clearRubricConfirmationCallout.body"),primaryButtonText:f("rubrics.score.clearRubricConfirmationCallout.primaryButtonText"),secondaryButtonText:f("rubrics.score.clearRubricConfirmationCallout.secondaryButtonText")},R=m?f("rubrics.score.inputLabelGraded",{grade:m,total:C(p)}):f("rubrics.score.inputLabelEmpty"),w=`${d}.editableScore`,O=m||0===m?C((0,l.studentGradeToNumber)(m)):m;return a.createElement(a.Fragment,null,a.createElement("div",{onClick:this.handleSelect,ref:this.gradingInputErrorRef},a.createElement(o.Score,{contentIconName:u,hasError:t,submissionLabel:I.label,submissionDetail:I.detail,showInput:e,shouldFocusScore:S,shouldShowIcon:y},e&&!v?(()=>a.createElement(s.GradingInput,{ariaLabel:R,analyticsId:w,allowEmptyValue:!0,allowDecimals:!0,isExpandable:!0,initialValue:O,onSubmit:this.handleGradingInputSubmit,onError:this.handleGradingInputError,onChange:this.handleGradingInputChange}))():g)),a.createElement(i.ConfirmationCalloutDialog,{target:"#rubric-pill-container",onSuccess:this.onClearRubricSuccess,onDismiss:this.onClearRubricDismiss,textContent:P,analyticsId:`${w}.clearRubricConfirmation`,isVisible:r}),h&&!v&&a.createElement(c.Regrader,{analyticsId:d}),v&&a.createElement("p",{className:E},f("rubrics.score.overrideBlocked")),t&&a.createElement(n.Callout,{className:x,target:this.gradingInputErrorRef.current},a.createElement("div",{className:k},f("rubrics.criterion.scoreInputError"))))}}t.BaseEditableScore=m,t.EditableScore=(0,l.withContext)((0,d.localizedComponentWrapper)((0,u.withStyles)(p.styles,{name:"EditableScore"})(m)))},"UPI/":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CriterionContent=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("wb1J"),n=r("NOGW");t.CriterionContent=({achievements:e,decimalsLength:t,rubricType:r})=>{const o=(0,n.useStyles)();return a.createElement("div",{className:o.criterionContent},e.map(e=>a.createElement("div",{key:e.id},(e=>a.createElement(i.CriterionAchievement,{title:e.title,description:e.description,score:e.score,rangeScore:e.rangeScore,decimalsLength:t,rubricType:r}))(e))))}},VhZA:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RubricInline=t.BaseRubricInline=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("1AZD"),n=r("lzqC"),o=r("ppko"),s=r("eqO1"),c=r("vOu0");class l extends a.Component{constructor(e){super(e),this.updateRubric=e=>{const{contextData:t}=this.state,{onRubricUpdate:r}=this.props;e.criterionFeedbackWasUpdated&&"criteria"in e?this.updateRubricWithFeedback(e):(this.setState({contextData:{...t,...(0,o.filterContextData)(e)}}),r(e))},this.updateFeedback=(e,t)=>{const{contextData:r}=this.state;this.setState({contextData:{...r,...(0,o.updateCriteronWithFeedback)(e,r,t)}},()=>{this.updateRubricDataInUltra(!0)})},this.removeFeedbackOnCriterion=e=>{const{contextData:t}=this.state;this.setState({contextData:{...t,...(0,o.removeFeedbackByCriterion)(e,t)}},()=>{this.updateRubricDataInUltra(!0)})};const{getGradingPillColor:t,showConfirmationModal:r}=e;this.state={contextData:{showConfirmationModal:r,...(0,o.getContextData)(e),updateRubric:this.updateRubric,updateFeedback:this.updateFeedback,removeFeedbackOnCriterion:this.removeFeedbackOnCriterion,gradingPillColor:t}}}componentDidUpdate(e){const{contextData:t}=this.state,{shouldUndoOverride:r,grade:a,maxScore:i,shouldEmptyRubric:n,shouldPerformOverride:s,okConfirmationClicked:c,confirmationHandledForCriterionId:l,shouldUpdateCriterionFeedback:d,criteria:u,isSavingRubric:p,isGroupGradeMultiple:m,isGradeOverridden:b}=this.props;if(p===e.isSavingRubric)if(t.okConfirmationClicked===c)if(r&&!s&&t.gradeIsOverridden){const e=(0,o.calculateGrade)(t.rubricCriteria);this.setState({contextData:{...(0,o.setGradeAndGradeColor)(t,e,i),gradeIsOverridden:!1,isGroupGradeMultiple:m}},()=>{this.updateRubricDataInUltra()})}else!s||r||t.gradeIsOverridden?n&&null!=t.studentGrade&&""!==t.studentGrade?this.setState({contextData:(0,o.setRubricAsEmpty)(t)},()=>{this.updateRubricDataInUltra()}):t.gradeIsOverridden&&s&&a&&t.studentGrade!==a?this.setState({contextData:{...(0,o.setGradeAndGradeColor)(t,a,i),isGroupGradeMultiple:m}},()=>{this.updateRubricDataInUltra()}):(b!==e.isGradeOverridden&&this.setState({contextData:{...t,gradeIsOverridden:b}}),d&&!e.shouldUpdateCriterionFeedback&&this.setState({contextData:{...(0,o.updateLastSavedStatus)(u,t),currentlySavingFeedback:!1}},()=>{this.updateRubricDataInUltra()})):this.setState({contextData:{...(0,o.setGradeAndGradeColor)(t,a,i),gradeIsOverridden:!0}},()=>{this.updateRubricDataInUltra()});else this.setState({contextData:{...t,okConfirmationClicked:c,confirmationHandledForCriterionId:l}});else this.setState({contextData:{...t,isSavingRubric:p}})}updateRubricWithFeedback(e){const{contextData:t}=this.state,{onRubricUpdate:r}=this.props;if((0,o.userIsOffline)()){const r=(0,o.setOfflineErrorOnCriteria)(e,!0);return void this.setState({contextData:{...t,...(0,o.filterContextData)(r)}})}const a=(0,o.setOfflineErrorOnCriteria)(e,!1),i=(0,o.filterCriteriaWithValidFeedback)(a);0!==i.criteria.length?(this.setState({contextData:{...t,...(0,o.filterContextData)(a),currentlySavingFeedback:!0}}),r(i)):this.setState({contextData:{...t,...(0,o.filterContextData)(a)}})}updateRubricDataInUltra(e){const{contextData:t}=this.state,{onRubricPostUpdate:r}=this.props;r((0,o.getRubricFromContext)(t),{isUpdatingFeedback:e})}render(){const{contextData:e}=this.state,{analyticsId:t,criteria:r,shouldRenderRubricEvaluation:s,contentIconName:c,maxScore:l,isExternalSubmission:d,decimalsLength:u,rubricType:p,classes:m,onGradeInputUpdate:b}=this.props,h=`${t}.rubrics.components.rubricInline`;return a.createElement(a.Fragment,null,s&&a.createElement("div",{className:m.rubricEvaluationInline},a.createElement(o.RubricContext.Provider,{value:{...e}},a.createElement(i.RubricEvaluationScore,{analyticsId:h,contentIconName:c,isExternalSubmission:d,onGradeInputUpdate:b}),a.createElement(i.RubricEvaluation,{analyticsId:h}))),!s&&r&&a.createElement(a.Fragment,null,a.createElement(n.RubricViewScore,{contentIconName:c,maxScore:l}),a.createElement(n.RubricView,{analyticsId:h,criteria:r,decimalsLength:u,maxScore:l,rubricType:p})))}}t.BaseRubricInline=l,t.RubricInline=(0,s.withStyles)(c.styles,{name:"rubricEvaluationInline"})(l)},WJCM:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;const a=r("eqO1"),i=r("Mwye");t.styles=e=>(0,a.createStyles)({rubricEvaluationScore:{width:"100%",alignItems:"center",...(0,i.scoreContainer)(e),...(0,i.gradingPillColors)()},description:{},icon:{},maximumScore:{display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},maximumScoreTitle:{fontWeight:e.typography.fontWeightBold},maximumScorePercentage:{margin:0,fontSize:e.typography.fontSizeSmall,color:e.palette.text.secondary,lineHeight:1.4},maximumScorePercentageEllipsis:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"122px"},pill:{height:"30px",minWidth:"80px",marginRight:"9px",boxSizing:"border-box",padding:"0 10px",...(0,i.gradePill)(e).gradePill},pillEmpty:{border:`1px solid ${e.palette.common.black}`,background:e.palette.primary.contrastText},pillError:{border:"none",boxShadow:`inset 0 0 0 1px ${e.palette.error.main}, inset 0 0 0 4px ${a.colorManipulator.fade(e.palette.error.main,.1)}`},gradeLabel:{lineHeight:1.2,whiteSpace:"nowrap",fontWeight:e.typography.fontWeightSemiBold},infoIcon:{verticalAlign:"middle",marginRight:"8px"},infoTitle:{fontWeight:e.typography.fontWeightBold,fontSize:e.typography.fontSizeMedium},gradepillWrapper:{justifyContent:"space-between",display:"flex",flex:"auto"}})},XVeL:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;const a=r("eqO1");t.styles=e=>(0,a.createStyles)({regrader:{margin:"10px 0",fontStyle:"italic",flexWrap:"wrap",cursor:"pointer",display:"flex"},link:{color:e.palette.link.active,textDecoration:`underline ${e.palette.link.active}`,textAlign:"left",lineHeight:"1.5"},overrideWrapText:{overflowWrap:"break-word",textAlign:"left",marginRight:"4px",lineHeight:"1.5"}})},YMjC:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;const a=r("7j24");t.styles=e=>(0,a.createStyles)({bbmlEditable:{"& .bb-editor-root":{"& .ql-container":{boxShadow:"none",borderTop:`1px solid ${e.palette.border.dark}`,borderColor:e.palette.border.dark,"& .ql-editor":{height:"132px"}},"& .has-focus":{boxShadow:"none",borderTop:`1px solid ${e.palette.focus.light}`,borderColor:e.palette.focus.light},"& .has-keyboard-focus":{boxShadow:"none",border:`2px solid ${e.palette.focus.light}`}}},bbmlSmallMargin:{marginBottom:"12px"},bbmlLargeMargin:{marginBottom:"20px"},bbmlReadOnly:{"& .bb-editor-root":{"& .ql-container":{"& .ql-editor":{padding:0,minHeight:"0px"}}},marginBottom:"26px"},titleSmallMargin:{marginBottom:"0"},titleLargeMargin:{marginBottom:"12px"},feedbackTitle:{fontSize:e.typography.fontSizeDefault,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightSemiBold,marginTop:"2px"},savingMessage:{fontSize:e.typography.fontSizeSmall,color:e.palette.text.secondary,margin:"2px 0 12px 0"},feedbackHeader:{display:"flex",alignItems:"center",justifyContent:"space-between"},feedbackHeaderSmallHeight:{height:"21px"},feedbackHeaderLargeHeight:{height:"33px"},errorMessage:{fontSize:e.typography.fontSizeSmall,color:e.palette.error.main,marginBottom:"20px"}})},ZlNE:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CriterionContent=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("3h+s"),n=r("He8U");t.CriterionContent=({feedback:e,criterionId:t,hasUnsavedFeedback:r,analyticsId:o,achievements:s,criterionPercentage:c,lastFeedbackSaveDate:l,lastSaveFailed:d,showLoader:u})=>{const p=`${o}.criterionContent`;return a.createElement("div",null,a.createElement(i.CriterionAchievement,{analyticsId:p,achievements:s,criterionPercentage:c,criterionId:t,hasUnsavedFeedback:r}),a.createElement(n.CriterionFeedback,{feedback:e,lastSaveFailed:d,lastFeedbackSaveDate:l,criterionId:t,analyticsId:p,showLoader:u,hasUnsavedFeedback:r}))}},coSB:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RubricEvaluationScore=t.BaseRubricEvaluationScore=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("2uT4"),n=r("T+7x"),o=r("ppko"),s=r("FS8K"),c=r("eqO1"),l=r("9aLw");t.BaseRubricEvaluationScore=({analyticsId:e,contentIconName:t,rubricIsEditable:r,canOverride:s,studentGrade:c,isExternalSubmission:l,classes:d,rubricIsFullyGraded:u,shouldShowIcon:p,localize:{translate:m,formatNumber:b},onGradeInputUpdate:h})=>{const g=()=>a.createElement("span",{id:"rubric-evaluation-score-value",className:d.gradeLabel},c||0===c?b((0,o.studentGradeToNumber)(c)):"--");return a.createElement(a.Fragment,null,s?(()=>a.createElement(n.EditableScore,{analyticsId:e,contentIconName:t,isExternalSubmission:l,shouldFocusScore:u,shouldShowIcon:p,onGradeInputUpdate:h},a.createElement(g,null)))():(()=>a.createElement(i.Score,{contentIconName:t,submissionLabel:m("rubrics.score.yourScore"),shouldFocusScore:u,shouldShowIcon:p},a.createElement(g,null)))())},t.RubricEvaluationScore=(0,o.withContext)((0,s.localizedComponentWrapper)((0,c.withStyles)(l.styles,{name:"RubricEvaluationscore"})(t.BaseRubricEvaluationScore)))},cp5W:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;const a=r("eqO1"),i=r("Mwye");t.styles=e=>(0,a.createStyles)({rubricEvaluationPanel:{"&::before":{content:'""',display:"block",position:"absolute",height:"5px",left:"-1px",right:"-1px",top:"-1px"},...(0,i.rubricPanelContainer)(e).styles},header:{},body:{}})},dXVy:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CriterionOverview=t.BaseCriterionOverview=void 0;const a=r("D57K"),i=a.__importStar(r("ERkP")),n=r("ppko"),o=r("FS8K"),s=r("myse"),c=r("7CBr"),l=r("0x+l"),d=r("THXI"),u=a.__importDefault(r("7O4Y"));t.BaseCriterionOverview=({analyticsId:e,analyticsEventAugmentor:t,title:r,feedback:a,value:o,scoreValue:p,colorPercentage:m,isStudent:b,gradingPillColor:h,decimalsLength:g,rubricType:v,rubricMaxScore:S,onClick:y,localize:{translate:f,formatNumber:C},criterionId:E})=>{const x=p||0===p,k=C(o,{maximumFractionDigits:g}),I=C((0,n.getPercentageOfTotalGrade)(o,S),{maximumFractionDigits:g}),P=!b||a&&""!==a,R=(0,c.useStyles)(),w=`${e}.criterionOverview.button`,O=t(s.AnalyticsEventTypes.CLICK_EVENT,y,w);return i.createElement("div",{"data-analytics-id":w,onClick:O,className:R.evaluationCriterionOverview},i.createElement("div",{className:R.description},i.createElement("h2",{className:R.titleCriterion,id:E},r),i.createElement("p",{className:R.percentageCriterion},!(0,n.isPointsOrPointsRangeRubric)(v)&&f("rubrics.criterion.percentage",{percentage:k}),(0,n.isPointsOrPointsRangeRubric)(v)&&f("rubrics.criterion.possiblePoints",{points:k,percentage:I}))),i.createElement("div",{className:R.pillAndFeedback},i.createElement("div",{className:(0,u.default)("js-rubric-evaluation-criterion-score",R.pill,x&&void 0!==h?h(m):"")},i.createElement("span",{className:R.pillLabel},(()=>x?C(p,{round:"truncate",maximumFractionDigits:g}):"-")())),P&&i.createElement("div",{className:R.feedbackIcon},(()=>a&&""!==a?i.createElement(l.Feedback,{htmlColor:d.bbDefaultPalette.purpleDark}):b?"":i.createElement(l.AddFeedback,{color:"primary"}))())))},t.CriterionOverview=(0,n.withContext)((0,s.withAnalytics)((0,o.localizedComponentWrapper)(t.BaseCriterionOverview)))},dh4P:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RubricCriterion=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("Al7u"),n=r("PWcG"),o=r("UPI/");class s extends a.Component{constructor(e){super(e),this.onToggleCallBack=()=>{const{shouldOpenAccordion:e}=this.state;this.setState({shouldOpenAccordion:!e})},this.state={shouldOpenAccordion:!1}}render(){const{title:e,value:t,achievements:r,analyticsId:s,decimalsLength:c,rubricType:l,maxScore:d,criterionId:u}=this.props,{shouldOpenAccordion:p}=this.state,m=`${s}.accordionTab`,b=`criterion${u}`;return a.createElement(i.AccordionTab,{showExpander:!0,expanded:p,ariaLabelledby:b,contents:a.createElement(o.CriterionContent,{achievements:r,decimalsLength:c,rubricType:l}),analyticsId:m,title:a.createElement(n.CriterionOverview,{criterionId:b,analyticsId:m,title:e,value:t,onClick:this.onToggleCallBack,rubricType:l,decimalsLength:c,maxScore:d})})}}t.RubricCriterion=s},l6Yy:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Achievement=t.BaseAchievement=void 0;const a=r("D57K"),i=a.__importStar(r("ERkP")),n=r("ppko"),o=r("FS8K"),s=a.__importDefault(r("7O4Y")),c=r("3l0L");t.BaseAchievement=({rangeScoreValue:e,score:t,rangeScore:r,rubricType:a,title:o,isSelected:l,description:d,colorPercentage:u,gradingPillColor:p,children:m,localize:{translate:b,formatNumber:h}})=>{const g=(0,c.useStyles)();return i.createElement("div",{className:(0,s.default)("js-rubric-evaluation-achievement",g.achievement,{[g.achievementSelected]:l})},i.createElement("button",{"aria-label":o,tabIndex:0},i.createElement("div",{className:(0,s.default)(g.descriptionAchievement,{[g.descriptionSelected]:l})},i.createElement("span",{className:g.titleAchievement},o),i.createElement("p",{className:g.paragraph},d)),i.createElement("div",{className:(0,s.default)("js-rubric-evaluation-achievement-score",g.scoreContainer)},m||i.createElement("div",{className:(0,s.default)(g.scoreAchievement,void 0!==p&&null!=u?p(u):"",{[g.scoreIsRange]:r})},i.createElement("div",{className:g.label},(()=>{const i=(0,n.isPointsOrPointsRangeRubric)(a)?"rubrics.criterion.pointsRangeScore":"rubrics.criterion.percentageRangeScore";return null!=e||null!=t?h(null!=e?e:t):b(i,{minValue:r.minValue,maxValue:r.maxValue})})())))))},t.Achievement=(0,n.withContext)((0,o.localizedComponentWrapper)(t.BaseAchievement))},lHQj:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStyles=void 0;const a=r("eqO1"),i=r("Mwye");t.useStyles=(0,a.makeStyles)(e=>(0,a.createStyles)({rubricEvaluation:{...i.rubricContainer},saveMessage:{marginTop:"12px",marginBottom:"4px",fontSize:e.typography.fontSizeSmall}}))},lzqC:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RubricViewPanel=t.RubricViewScore=t.RubricView=void 0;var a=r("FbJS");Object.defineProperty(t,"RubricView",{enumerable:!0,get:function(){return a.RubricView}});var i=r("q2bX");Object.defineProperty(t,"RubricViewScore",{enumerable:!0,get:function(){return i.RubricViewScore}});var n=r("Px+F");Object.defineProperty(t,"RubricViewPanel",{enumerable:!0,get:function(){return n.RubricViewPanel}})},n1lm:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStyles=void 0;const a=r("eqO1"),i=r("Mwye");t.useStyles=(0,a.makeStyles)(()=>(0,a.createStyles)({rubricViewRubric:{...i.rubricContainer}}))},ppko:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withContext=t.setRubricAsEmpty=t.isAnyRubricCriterionGraded=t.calculateGrade=t.removeFeedbackByCriterion=t.updateCriteronWithFeedback=t.setOfflineErrorOnCriteria=t.filterContextData=t.getRubricFromContext=t.getContextData=t.userIsOffline=t.rubricIsComplete=t.getPercentageOfTotalGrade=t.studentGradeToNumber=t.setGradeAndGradeColor=t.filterCriteriaWithValidFeedback=t.updateLastSavedStatus=t.cleanCriteria=t.isPointsOrPointsRangeRubric=t.RubricContext=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("nsO7"),n=r("zGdY"),o=r("ZQFV");t.RubricContext=a.createContext({});const s=(e,t)=>{if("number"==typeof e)return e/t*100},c=(e,t,r,a,i,o)=>{let c=0;switch(a){case n.RubricType.PERCENTAGE:c=r*i/100;break;case n.RubricType.POINTS:c=i;break;case n.RubricType.PERCENTAGE_RANGE:c=r*i/100,t.score=c*o/100,t.rangeScoreValue=o;break;case n.RubricType.POINTS_RANGE:c=i,t.score=o,t.rangeScoreValue=o}e.scoreValue=t.score,t.colorPercentage=s(e.scoreValue,c),e.colorPercentage=t.colorPercentage},l=(e,t,r)=>e.map(e=>(e.achievements.map(a=>(a.isSelected&&c(e,a,t,r,e.value,a.rangeScoreValue),a)),e)),d=(e,t)=>""!==e?s(Number(e),t):void 0,u=e=>{e.scoreValue=null,e.colorPercentage=null,e.achievements.map(e=>(e.isSelected=!1,"number"==typeof e.colorPercentage&&delete e.colorPercentage,e.rangeScore&&(e.score=null,e.rangeScoreValue=null),e))};t.isPointsOrPointsRangeRubric=e=>e===n.RubricType.POINTS||e===n.RubricType.POINTS_RANGE;t.cleanCriteria=e=>{const t=(0,i.cloneDeep)(e);return t.forEach(e=>{u(e),e.feedback="",e.hasUnsavedFeedback=!1,e.lastFeedbackSaveDate=void 0,e.lastSaveFailed=!1}),t};t.updateLastSavedStatus=(e,t)=>{const r=(0,i.cloneDeep)(t);return e.forEach(e=>{const t=r.rubricCriteria.find(t=>t.id===e.id);t.lastFeedbackSaveDate=e.lastFeedbackSaveDate,t.hasUnsavedFeedback=!1}),r};t.filterCriteriaWithValidFeedback=e=>{const t=(0,i.cloneDeep)(e);t.criteria=[];const r=e.criteria.filter(e=>(e.scoreValue||0===e.scoreValue)&&e.hasUnsavedFeedback),a=e.criteria.filter(e=>(e.scoreValue||0===e.scoreValue)&&!e.hasUnsavedFeedback);return r.length>0&&(t.criteria=[...r,...a]),t};t.setGradeAndGradeColor=(e,t,r)=>{if(e.hasMultipleAttempts)return e;const a=(0,i.cloneDeep)(e);return a.studentGrade=t,a.gradePercentageColor=d(t,r),a};t.studentGradeToNumber=e=>(0,i.isNumber)(e)&&(0,i.isFinite)(e)?e:(0,i.toNumber)(e);t.getPercentageOfTotalGrade=(e,t)=>0===t?100:e/t*100;t.rubricIsComplete=e=>{if(!e.criteria)return!1;return e.criteria.filter(e=>null!=e.scoreValue).length===e.criteria.length};t.userIsOffline=()=>!window.navigator.onLine;t.getContextData=(e,r=!0)=>{var a;let i=e;return r&&(i=(e=>{const{criteria:t,maxScore:r,grade:a,rubricType:i}=e;return{...e,gradeColorPercentage:d(a,r),criteria:t?l(t,r,i):[]}})(e)),{rubricCriteria:null!==(a=i.criteria)&&void 0!==a?a:[],studentGrade:i.grade,gradePercentageColor:i.gradeColorPercentage,rubricMaxScore:i.maxScore,gradeIsOverridden:i.isGradeOverridden,gradeIsAnonymous:i.isAnonymousGrading,hasMultipleAttempts:i.isMultipleAttempts,rubricIsEditable:i.isEditable,isStudent:i.isStudent,canOverride:i.isOverrideAvailable,isGroupGradeMultiple:i.isGroupGradeMultiple,isGradingInProgress:i.isGradingInProgress,rubricIsFullyGraded:(0,t.rubricIsComplete)(i),okConfirmationClicked:i.okConfirmationClicked,confirmationHandledForCriterionId:i.confirmationHandledForCriterionId,decimalsLength:i.decimalsLength,isSavingRubric:i.isSavingRubric,rubricType:i.rubricType,onGradeInputUpdate:i.onGradeInputUpdate}};t.getRubricFromContext=e=>({criteria:e.rubricCriteria,isEditable:e.rubricIsEditable,grade:e.studentGrade,isGradeOverridden:e.gradeIsOverridden,isMultipleAttempts:e.hasMultipleAttempts,isGroupGradeMultiple:e.isGroupGradeMultiple,isGradingInProgress:e.isGradingInProgress,isAnonymousGrading:e.gradeIsAnonymous,rubricType:e.rubricType,onGradeInputUpdate:e.onGradeInputUpdate});t.filterContextData=e=>{const r=(0,i.omitBy)((0,t.getContextData)(e,!1),i.isNil);return(0,i.omitBy)(r,e=>(0,i.isArray)(e)&&(0,i.isEmpty)(e))};t.setOfflineErrorOnCriteria=(e,t)=>{const r=(0,i.cloneDeep)(e);return r.criteria.forEach(e=>{e.lastSaveFailed=t}),r};t.updateCriteronWithFeedback=(e,t,r)=>{const a=(0,i.cloneDeep)(t),n=a.rubricCriteria.find(e=>e.id===r);return n.feedback=e,n.hasUnsavedFeedback=!0,a};t.removeFeedbackByCriterion=(e,t)=>{const r=(0,i.cloneDeep)(t),a=r.rubricCriteria.find(t=>t.id===e);return a.feedback=null,a.hasUnsavedFeedback=!1,r};t.calculateGrade=e=>{const t=o.Utils.sumFloatValues(e.map(e=>{var t;return null===(t=e.achievements.find(({isSelected:e})=>e))||void 0===t?void 0:t.score}).filter(e=>void 0!==e));return"number"==typeof t?(e=>{const t=Math.trunc(e),r=Math.floor(Math.log(t)*Math.LOG10E+1);return r<=3?(0,i.floor)(e,2):4===r?(0,i.floor)(e,1):(0,i.floor)(e)})(t):""};t.isAnyRubricCriterionGraded=e=>{return 0!==e.filter(e=>null!=e.scoreValue).length};t.setRubricAsEmpty=e=>{const r=(0,i.cloneDeep)(e);return r.studentGrade="",r.gradeIsOverridden=!1,(0,t.isAnyRubricCriterionGraded)(r.rubricCriteria)&&(r.rubricCriteria=(0,t.cleanCriteria)(r.rubricCriteria)),r};t.withContext=e=>{const r=(e,t,r,a,n,o,s)=>{const l=(0,i.cloneDeep)(e),d=l.find(e=>e.id===r);return u(d),((e,t,r,a,i,n)=>{const o=e.achievements.find(e=>e.id===r);o.isSelected=!0,c(e,o,t,a,i,n)})(d,t,a,n,o,s),l};return i=>{const n={calculateCompletion:s,updateCriteria:r};return a.createElement(t.RubricContext.Consumer,null,t=>a.createElement(e,{...i,...t,...n}))}}},pqvb:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableRangeAchievement=t.BaseEditableRangeAchievement=void 0;const a=r("D57K"),i=a.__importStar(r("ERkP")),n=r("0x+l"),o=r("l6Yy"),s=r("9om9"),c=r("ppko"),l=r("FS8K"),d=r("myse"),u=a.__importDefault(r("7O4Y")),p=r("eqO1"),m=r("xfjE");class b extends i.Component{constructor(e){super(e),this.handleClick=e=>{e.preventDefault(),this.select()},this.handleKeyDown=e=>{32===e.keyCode&&(e.preventDefault(),this.select())},this.handleGradingInputError=()=>{this.setState({hasError:!0})},this.handleGradingInputChange=e=>{const{rangeScore:{minValue:t,maxValue:r}}=this.props;e||0===e?e<t||e>r?this.setState({hasError:!0}):e>=t&&e<=r&&this.setState({hasError:!1}):this.setState({hasError:!1})},this.updateRangeGrade=e=>{const{rangeScoreValue:t,reserveInput:r}=this.props;if(r(null),t===e)return void this.setState({showInput:!1});const{updateCriteria:a,criterionId:i,achievementId:n,criterionPercentage:o,updateRubric:s,rubricCriteria:l,rubricMaxScore:d,rubricType:u,calculateCompletion:p,hasUnsavedFeedback:m}=this.props,b=a(l,d,i,n,u,o,e),h=(0,c.calculateGrade)(b),g=p(h,d);this.setState({showInput:!1},()=>{s({grade:h,gradeColorPercentage:g,rubricGrade:h,rubricType:u,criteria:b,criterionFeedbackWasUpdated:m})})},this.state={showInput:!1,hasError:!1}}componentDidUpdate(e){const{achievementId:t,achievementIdUnderEdit:r}=this.props;e.achievementId===e.achievementIdUnderEdit&&t!==r&&this.setState({hasError:!1})}select(){const{achievementId:e,reserveInput:t}=this.props;t(e),this.setState({showInput:!0})}gradingInputCanBeDisplayed(){const{showInput:e}=this.state,{achievementId:t,achievementIdUnderEdit:r}=this.props;return e&&t===r}isActiveOrSelected(){const{achievementId:e,achievementIdUnderEdit:t,isSelected:r}=this.props;return e===t||r&&null==t}render(){const{hasError:e}=this.state,{analyticsId:t,analyticsEventAugmentor:r,rangeScore:a,title:l,description:p,rangeScoreValue:m,colorPercentage:b,localize:{translate:h},classes:{pill:g,pillSelected:v,pillError:S,rangeLabel:y,error:f,errorLabel:C}}=this.props,E=`${t}.range`,x=r(d.AnalyticsEventTypes.CLICK_EVENT,this.handleClick,E),k=r(d.AnalyticsEventTypes.CLICK_EVENT,this.handleKeyDown,E);return i.createElement(i.Fragment,null,i.createElement("div",{onClick:x,onKeyDown:k},i.createElement(o.Achievement,{rangeScore:a,title:l,isSelected:this.isActiveOrSelected(),rangeScoreValue:m,description:p,colorPercentage:b},this.gradingInputCanBeDisplayed()&&i.createElement(i.Fragment,null,i.createElement("div",{id:"rubric-evaluation-editable-achievement-range-pill",className:(0,u.default)(g,{[v]:this.isActiveOrSelected()},{[S]:this.gradingInputCanBeDisplayed()&&e})},i.createElement(s.GradingInput,{ariaLabel:h("rubrics.criterion.inputRange"),analyticsId:E,initialValue:m,minValue:a.minValue,maxValue:a.maxValue,onSubmit:this.updateRangeGrade,onError:this.handleGradingInputError,onChange:this.handleGradingInputChange,allowDecimals:(0,c.isPointsOrPointsRangeRubric)(this.props.rubricType)})),i.createElement("span",{id:"rubric-evaluation-editable-achievement-range-label",className:y},h("rubrics.criterion.rangeScoreLabel",{minValue:a.minValue,maxValue:a.maxValue}))))),e&&this.gradingInputCanBeDisplayed()&&i.createElement("div",{id:"rubric-evaluation-editable-achievement-range-error",className:f},i.createElement(n.Attention,{color:"inherit"}),i.createElement("span",{className:C},h("rubrics.criterion.valueOutOfRange",{minValue:a.minValue,maxValue:a.maxValue}))))}}t.BaseEditableRangeAchievement=b,t.EditableRangeAchievement=(0,c.withContext)((0,d.withAnalytics)((0,l.localizedComponentWrapper)((0,p.withStyles)(m.styles,{name:"EditableRangeAchievement"})(b))))},q2bX:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RubricViewScore=t.BaseRubricViewScore=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("FS8K"),n=r("93g4"),o=r("ys6O");t.BaseRubricViewScore=({maxScore:e,contentIconName:t,shouldShowIcon:r,localize:{translate:i,formatNumber:s}})=>{const c=(0,n.useStyles)(),l=i("rubrics.score.maxScoreLabel"),d=i("rubrics.score.maxScorePoints",{maxScore:s(e)});return a.createElement("div",{className:c.rubricViewScore},a.createElement("div",{className:c.description},a.createElement("span",{className:c.icon},r&&a.createElement(o.ScoreIcon,{iconName:t})),a.createElement("span",{className:c.maximumScore},l)),a.createElement("div",{className:c.points},a.createElement("span",{className:"js-rubric-view-score-value"},d)))},t.RubricViewScore=(0,i.localizedComponentWrapper)(t.BaseRubricViewScore)},u3d2:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStyles=void 0;const a=r("eqO1"),i=r("Mwye");t.useStyles=(0,a.makeStyles)(e=>(0,a.createStyles)({rubricViewPanel:{...(0,i.rubricPanelContainer)(e).styles},header:{},body:{}}))},vOu0:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;const a=r("eqO1");t.styles=()=>(0,a.createStyles)({rubricEvaluationInline:{}})},wD1L:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RubricEvaluation=t.BaseRubricEvaluation=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("xH69"),n=r("ppko"),o=r("lHQj"),s=r("FS8K");t.BaseRubricEvaluation=({analyticsId:e,rubricCriteria:t,rubricIsEditable:r,localize:{translate:s}})=>{const c=(0,o.useStyles)(),l=`${e}.rubricEvaluation.rubric`,d=e=>t.findIndex(t=>t.id===e.id),u=e=>"number"!=typeof e.scoreValue&&(!((0,n.isAnyRubricCriterionGraded)(t)||!(e=>0===d(e))(e))||!!(e=>{const r=d(e),a=t[r-1];return a&&null!=a.scoreValue})(e));return a.createElement(a.Fragment,null,r&&a.createElement("p",{className:c.saveMessage},s("rubrics.saveMessage")),a.createElement("ul",{className:c.rubricEvaluation},t.map(e=>a.createElement(i.RubricCriterion,{key:e.id,lastSaveFailed:e.lastSaveFailed,isExpanded:u(e),criterionId:e.id,lastFeedbackSaveDate:e.lastFeedbackSaveDate,title:e.title,value:e.value,scoreValue:e.scoreValue,feedback:e.feedback,hasUnsavedFeedback:e.hasUnsavedFeedback,achievements:e.achievements,analyticsId:l,colorPercentage:e.colorPercentage}))))},t.RubricEvaluation=(0,s.localizedComponentWrapper)((0,n.withContext)(t.BaseRubricEvaluation))},wb1J:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CriterionAchievement=t.BaseCriterionAchievement=void 0;const a=r("D57K"),i=a.__importStar(r("ERkP")),n=r("ppko"),o=r("FS8K"),s=a.__importDefault(r("7O4Y")),c=r("JP+r");t.BaseCriterionAchievement=({title:e,description:t,score:r,rangeScore:a,decimalsLength:o,rubricType:l,localize:{translate:d,formatNumber:u,parseNumber:p}})=>{const m=(0,c.useStyles)(),b=null!=r,h=(0,n.isPointsOrPointsRangeRubric)(l)?"rubrics.criterion.pointsRangeScore":"rubrics.criterion.percentageRangeScore",g=b?u(r,{maximumFractionDigits:o}):d(h,{minValue:p(u(a.minValue,{maximumFractionDigits:o})),maxValue:p(u(a.maxValue,{maximumFractionDigits:o}))});return i.createElement("div",{className:m.criterionAchievement},i.createElement("button",{"aria-label":`${e} ${g}`,tabIndex:0},i.createElement("div",{className:m.descriptionAchievement},i.createElement("span",{className:m.titleAchievement},e),i.createElement("p",{className:m.paragraph},t)),i.createElement("div",{className:(0,s.default)("js-rubric-view-achievement-score",m.scoreAchievement,{[m.scoreIsRange]:!b})},i.createElement("div",{className:m.label},g))))},t.CriterionAchievement=(0,o.localizedComponentWrapper)(t.BaseCriterionAchievement)},xH69:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RubricCriterion=t.BaseRubricCriterion=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("Al7u"),n=r("dXVy"),o=r("ppko"),s=r("ZlNE");class c extends a.Component{constructor(e){super(e),this.onToggleCallBack=()=>{const{showConfirmationModal:e,criterionId:t,hasUnsavedFeedback:r,scoreValue:a}=this.props;if(this.shouldShowConfirmationModal())return void e(t,!0);if(r&&"number"==typeof a)return void this.setState({showLoader:!0});const{shouldOpenAccordion:i}=this.state;this.setState({shouldOpenAccordion:!i})};const{isExpanded:t}=this.props;this.state={shouldOpenAccordion:t||!1,showLoader:!1}}componentDidUpdate(e){const{showLoader:t}=this.state,{isExpanded:r,studentGrade:a,okConfirmationClicked:i,criterionId:n,hasUnsavedFeedback:o,removeFeedbackOnCriterion:s,confirmationHandledForCriterionId:c,isSavingRubric:l}=this.props,{shouldOpenAccordion:d}=this.state,u=null==a||""===a,p=e.studentGrade!==a;u&&p&&d!==r&&this.setState({shouldOpenAccordion:r});const m=e.okConfirmationClicked!==i&&i,b=this.shouldShowConfirmationModal()&&c===n;if(m&&b){const{shouldOpenAccordion:e}=this.state;this.setState({shouldOpenAccordion:!e},()=>{s(n)})}t&&o!==e.hasUnsavedFeedback&&this.setState({showLoader:!1,shouldOpenAccordion:!1}),l!==e.isSavingRubric&&this.setState({showLoader:l})}shouldShowConfirmationModal(){const{scoreValue:e,hasUnsavedFeedback:t,feedback:r}=this.props;return"number"!=typeof e&&t&&!(""===r||null==r)}render(){const{showLoader:e}=this.state,{analyticsId:t,title:r,value:o,criterionId:c,scoreValue:l,colorPercentage:d,achievements:u,feedback:p,lastFeedbackSaveDate:m,lastSaveFailed:b,hasUnsavedFeedback:h}=this.props,{shouldOpenAccordion:g}=this.state,v=`${t}.criterion.accordionTab`,S=`criterion${c}`;return a.createElement(i.AccordionTab,{showExpander:!0,delegateToggleAction:!0,expanded:g,onToggle:this.onToggleCallBack,analyticsId:v,ariaLabelledby:S,contents:a.createElement(s.CriterionContent,{analyticsId:t,feedback:p,lastSaveFailed:b,lastFeedbackSaveDate:m,achievements:u,criterionPercentage:o,criterionId:c,hasUnsavedFeedback:h,showLoader:e}),title:a.createElement(n.CriterionOverview,{criterionId:S,analyticsId:v,title:r,feedback:p,value:o,scoreValue:l,colorPercentage:d,onClick:this.onToggleCallBack})})}}t.BaseRubricCriterion=c,t.RubricCriterion=(0,o.withContext)(c)},xfjE:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;const a=r("eqO1"),i=r("Mwye");t.styles=e=>(0,a.createStyles)({rangeLabel:{color:e.palette.primary.contrastText},error:{margin:"-3px 0 5px 11px",display:"flex",justifyContent:"flex-start",alignItems:"center",color:e.palette.error.main},errorLabel:{paddingLeft:"4px",fontSize:e.typography.fontSizeSmall},pill:{height:"30px",minWidth:"80px",padding:"0 10px",...(0,i.gradePill)(e).gradePill},pillError:{border:`1px solid ${e.palette.border.main}`,boxShadow:`inset 0 0 0 1px ${e.palette.error.main}, inset 0 0 0 4px ${a.colorManipulator.fade(e.palette.error.main,.1)}`},pillSelected:{background:e.palette.background.b1}})},ys6O:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScoreIcon=void 0;const a=r("D57K").__importStar(r("ERkP")),i=r("Gvux");t.ScoreIcon=({iconName:e})=>{let t=i.DocumentBlank;switch(e){case"assignment":t=i.Assignments;break;case"attendance":t=i.Attendance;break;case"audio":t=i.Audio;break;case"blog":t=i.Blog;break;case"calculation":t=i.Calculation;break;case"discussion":t=i.Discussion;break;case"document-blank":t=i.DocumentBlank;break;case"document-text":t=i.DocumentText;break;case"folder":case"folder-open":t=i.Folder;break;case"homework":t=i.Homework;break;case"journal":t=i.Journal;break;case"learning-module":t=i.LearningModule;break;case"link":t=i.Link;break;case"lti":t=i.Lti;break;case"overall-grade":t=i.OverallGrade;break;case"pdf":t=i.Pdf;break;case"photo":t=i.Photo;break;case"presentation":t=i.Presentation;break;case"scormengine":t=i.Scormengine;break;case"spreadsheet":t=i.Spreadsheet;break;case"survey":t=i.Survey;break;case"test":case"quiz":case"exam":t=i.Test;break;case"textbook":t=i.Textbook;break;case"video":t=i.Video;break;case"zip":t=i.Zip}return a.createElement(t,{color:"primary"})}}}]);