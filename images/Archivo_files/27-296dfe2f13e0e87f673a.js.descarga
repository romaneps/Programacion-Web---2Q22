(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"4J8k":function(a,e,t){"use strict";t.d(e,"a",(function(){return n}));var s=t("zYa8"),i=t("dmkk");const n="ultra.components.directives.bbUiIcon.large.AvatarMultiple";Object(s.a)(i.a,n,"bbUiIconLargeAvatarMultiple")},"9Ss5":function(a,e){a.exports='<div class="element-image avatar no-select" aria-hidden="true"\n     ng-class="avatarsClasses"\n     bb-load-bundle="components/directives/avatar" bb-cache-compilation="avatar">\n  <div class="avatar-inner" ng-if="isAvatarRender && (!autoUpdate || !autoUpdate())">\n    <div ng-if="::(!first && !second)" class="first avatar-single">\n      \x3c!-- If no user is set --\x3e\n      <div class="initials">\n        <bb-translate>components.directives.avatar.notAssignedInitials</bb-translate>\n      </div>\n    </div>\n\n    <div ng-if="::(first && first.avatarUrl)" class="first avatar-single image-avatar">\n      <img ng-src="{{::first.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      \x3c!-- If first user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="::(first && !first.avatarUrl && first.userInitials)"\n         class="first avatar-single {{::first.avatarBg}}">\n      \x3c!-- If first user is set, but does not have avatar image, but has non-CJK name Will still render default--\x3e\n      <img ng-src="{{::first.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n    </div>\n\n    <div ng-if="::(first && !first.avatarUrl && !first.userInitials)"\n         class="first avatar-single avatar-placeholder">\n      \x3c!-- If first user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="::(!first.isAllMembers)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <div class="all-members" ng-if="::(first.isAllMembers)">\n        <bb-ui-icon-large-users></bb-ui-icon-large-users>\n      </div>\n    </div>\n\n    <div ng-if="::(second && second.avatarUrl && participants == 2)" class="second avatar-single image-avatar">\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      \x3c!-- If second user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="::(second && !second.avatarUrl && participants == 2 && second.userInitials)"\n         class="second avatar-single {{::second.avatarBg}}">\n      \x3c!-- If second user is set, but does not have avatar image, but has non-CJK name. Will still render default --\x3e\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n    </div>\n\n    <div ng-if="::(second && !second.avatarUrl && participants == 2 && !second.userInitials)"\n         class="second avatar-single avatar-placeholder">\n      \x3c!-- If second user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="::(!second.isAllMembers)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      <div class="all-members" ng-if="::(second.isAllMembers)">\n        <bb-ui-icon-large-avatar-multiple></bb-ui-icon-large-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="participants > 2" class="second avatar-single">\n      \x3c!-- If more than 2 participants involved, show `+3` type of avatar for right side --\x3e\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.twoPlusAvatar">\n        <bb-translate translate-values=\'{num: participants - 1}\' aria-hidden="true">components.directives.avatar.twoPlusInitials</bb-translate>\n      </div>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n  </div>\n\n  <div class="avatar-inner" ng-if="isAvatarRender && autoUpdate && autoUpdate()">\n\n    <div ng-if="!first && !second" class="first avatar-single">\n      \x3c!-- If no user is set --\x3e\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n        <bb-translate>components.directives.avatar.notAssignedInitials</bb-translate>\n      </div>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n\n    <div ng-if="first && first.avatarUrl" class="first avatar-single image-avatar">\n      <img ng-src="{{first.avatarUrl}}" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      \x3c!-- If first user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="first && !first.avatarUrl && first.userInitials"\n         class="first avatar-single {{first.avatarBg}}">\n      \x3c!-- If first user is set, but does not have avatar image, but has non-CJK name --\x3e\n      \x3c!-- Show default image --\x3e\n      <img src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n    </div>\n\n    <div ng-if="first && !first.avatarUrl && !first.userInitials"\n         class="first avatar-single avatar-placeholder">\n      \x3c!-- If first user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="!first.isAllMembers" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <div class="all-members" ng-if="first.isAllMembers">\n        <bb-ui-icon-large-avatar-multiple></bb-ui-icon-large-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="second && second.avatarUrl && participants == 2" class="second avatar-single image-avatar">\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      \x3c!-- If second user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="second && !second.avatarUrl && participants == 2 && second.userInitials"\n         class="second avatar-single {{second.avatarBg}}">\n      \x3c!-- If second user is set, but does not have avatar image, but has non-CJK name --\x3e\n      \x3c!-- Show default image --\x3e\n      <img src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n    </div>\n\n    <div ng-if="second && !second.avatarUrl && participants == 2 && !second.userInitials"\n         class="second avatar-single avatar-placeholder">\n      \x3c!-- If second user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="!second.isAllMembers" src="./static/images/avatar-placeholder.svg"  bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      <div class="all-members" ng-if="second.isAllMembers">\n        <bb-ui-icon-large-avatar-multiple></bb-ui-icon-large-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="participants > 2" class="second avatar-single">\n      \x3c!-- If more than 2 participants involved, show `+3` type of avatar for right side --\x3e\n      \x3c!-- htmlhint:analytics-id:disable --\x3e\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.twoPlusAvatar : null">\n        <bb-translate translate-values=\'{num: participants - 1}\' aria-hidden="true">components.directives.avatar.twoPlusInitials</bb-translate>\n      </div>\n      \x3c!-- htmlhint:analytics-id:enable --\x3e\n    </div>\n  </div>\n</div>\n'},NMEb:function(a,e,t){"use strict";var s=t("Llzl");var i=class{static convertToGrayscale(a){const e=document.createElement("canvas"),t=e.getContext("2d"),s=a.naturalWidth,i=a.naturalHeight;e.width=s,e.height=i,t.drawImage(a,0,0);const n=t.getImageData(0,0,s,i);let r;const c=n.data.length;for(let a=0;a<c;a+=4)r=(n.data[a]+n.data[a+1]+n.data[a+2])/3,n.data[a]=r,n.data[a+1]=r,n.data[a+2]=r;return t.putImageData(n,0,0,0,0,n.width,n.height),e.toDataURL()}};t.d(e,"a",(function(){return n}));const n="ultra.components.directives.imageGrayscale";class r{constructor(a,e,t){this.scope=a,this.element=e,this.attributes=t,"true"===this.attributes.bbImageGrayscale&&l()&&e.one("load",this.onLoadCallback())}onLoadCallback(){return()=>{const a=i.convertToGrayscale(this.element[0]);this.element[0].src=a}}}class c{constructor(){this.restrict="A",this.link=(a,e,t)=>new r(a,e,t)}}function l(){const a=document.documentMode;return 10===a||11===a}const o=s.module(n,[]);l()&&o.directive("bbImageGrayscale",["$injector",a=>a.instantiate(c)])},SSV0:function(a,e,t){var s=t("ziER"),i=t("5JeM"),n=new s({id:"icon-small-accommodation",use:"icon-small-accommodation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-accommodation"><circle cx="8" cy="8" r="7" stroke-width="2" /><path d="M4 6l1 2 5-3M12 10l-1-2-5 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(n);a.exports=n},Sgjf:function(a,e,t){"use strict";var s=t("D57K"),i=(t("ptBS"),t("SSV0"),t("5iHu")),n=t("Llzl"),r=t("jciN"),c=t("0JpG"),l=t("fYJU"),o=t("pjml"),d=t("+4Px"),u=t("OvxF"),v=t("lUN/"),m=t("TnpK"),g=t("qeC2"),b=t("aHpC"),p=t("nmzr");t.d(e,"a",(function(){return h}));const h="ultra.components.directives.usercard";class f{constructor(a,e,t,s,i,n,r,c,l,o){this.$modal=a,this.$q=e,this.scope=t,this.element=s,this.attrs=i,this.bbLocalize=n,this.CourseModel=r,this.contextUser=c,this.$userModelService=l,this.ultraState=o,this.current=this.contextUser.userModel,null==this.scope.autoUpdate&&(this.scope.autoUpdate=!0),this.scope.showcard=!1,v.a(),this.$userModelService.$mixHook("after-save",(function(){this.id===t.user.id&&(t.userNames={givenName:this.givenName,familyName:this.familyName})}),t)}canSendMessage(){const a=this.scope.canSendMessage;return!a||a()}hasDueDateException(){const a=this.scope.hasDueDateException;return!!a&&a()}canEditDueDateException(){const a=this.scope.canEditDueDateException;return!!a&&a()}sendMessage(){this.ultraState.goPeekState(this.getMessagePeekState(),{courseId:this.scope.courseId,recipientIds:this.scope.user.id})}getMessagePeekState(){return this.scope.messagePeekState||p.CourseRoutes.COURSE_MESSAGE}getUserNameLabel(){return this.userName=this.scope.userNames,this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.usercard.ariaButtonLabel",params:{user:this.userName},noWrap:!0,noEscape:!0})}keyDown(a){if(a.keyCode===d.t&&a.preventDefault(),this.scope.showcard){let e=!1;if(a.keyCode===d.g)e=!0;else if(a.keyCode===d.u){const t=i(".usercard").find(":tabbable");e=t.length<1||(!(!a.shiftKey||!i(".usercard-clickable").is(":focus"))||(a.shiftKey?document.activeElement===t[0]:document.activeElement===t[t.length-1]))}e&&(a.stopImmediatePropagation(),this.hide())}}hide(){this.scope.showcard&&(this.scope.showcard=!1,this.toggleFloatingContainer(),this.element.find(".usercard-trigger").focus())}show(){this.scope.showcard=!!this.canShow(),this.toggleFloatingContainer()}toggleFloatingContainer(){i(".floating-column-container").css("overflow",this.scope.showcard?"visible":"hidden")}canShow(){return!!this.scope.user&&!!this.scope.user.id&&!this.isSameUser()}isSameUser(){return!(!this.current||!this.scope.user)&&this.scope.user.id===this.current.id}getCourseRoleLocalizeId(){return this.scope.inactive&&this.scope.inactive()?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.usercard.unavailable"}):this.scope.courseRole()}sendMessageViaSpaceBar(a){this.scope.showcard&&a.keyCode===d.t&&(a.stopPropagation(),this.sendMessage())}}f.$inject=["$modal","$q","scope","element","attrs",c.serviceName,o.m.serviceName,l.b,o.Jb.serviceName,m.d],Object(s.__decorate)([Object(b.d)("locale","userNames")],f.prototype,"getUserNameLabel",null);class y{constructor(a,e,t){this.$injector=a,this.bbLocalize=e,this.ultraState=t,this.restrict="E",this.template=g,this.scope={user:"=",panel:"@?",courseId:"@",messagePeekState:"@?",courseRole:"&",usercardShow:"@",recipientIds:"=",canSendMessage:"&?",hasDueDateException:"&?",canEditDueDateException:"&?",membershipId:"=?",inactive:"&?",autoUpdate:"=?"},this.link=(a,e,t)=>{a.attr=t,a.bbUsercard=this.$injector.instantiate(f,{scope:a,element:e,attrs:t}),a.user&&(a.userName=this.bbLocalize.formatUsernameSync(a.user,c.ILocaleUsernameFormat.Short,a,{noWrap:!0}),a.userNames=a.user)}}}y.$inject=["$injector",c.serviceName],n.module(h,[r.a,c.moduleName,o.N,l.a,u.a,m.b]).directive("bbUsercard",["$injector",a=>a.instantiate(y)])},jciN:function(a,e,t){"use strict";(function(a){t.d(e,"a",(function(){return g}));var s=t("D57K"),i=(t("SSV0"),t("Llzl")),n=t("oVrE"),r=t("g66W"),c=t("5MwF"),l=t("0JpG"),o=t("NMEb"),d=t("4J8k"),u=t("aHpC"),v=t("9Ss5"),m=t("VdDF");const g="ultra.directives.avatar";class b{constructor(a,e,t,s,i){this.scope=a,this.$element=e,this.attributes=t,this.bbLocalize=s,this.$timeout=i,this.backgroundColors=12;const n=this.scope.$watchGroup(["user.givenName","user.familyName","user.ui.displayName","user.avatar.permanentUrl","user","inactive()"],()=>{void 0!==this.scope.user&&(this.renderAvatars(),this.scope.autoUpdate&&this.scope.autoUpdate()||n())}),r=this.scope.$watchCollection("users",()=>{this.scope.users&&(this.renderAvatars(),this.scope.autoUpdate&&this.scope.autoUpdate()||r())})}getAvatarBG(a){return"default-avatar-"+(parseInt((a&&a.id||"0").replace(/[^\d]/g,""),10)%this.backgroundColors+1)}avatarParticipantsClass(a){switch(a){case 0:return"no-participants";case 1:return"one-participant";case 2:return"two-participants";default:return"two-plus-participants"}}canDisplayAvatarForUser(a){return!!a&&(!!(a.givenName||a.familyName||this.isAnonymousStudent(a))||!(!a.avatar||!a.avatar.permanentUrl||"default"===a.avatar.permanentUrl))}getInitials(a){return!a||this.isAnonymousStudent(a)||!a.givenName||!a.familyName||Object(r.h)(a.givenName)||Object(r.h)(a.familyName)||Object(r.i)(a.givenName)||Object(r.i)(a.familyName)?null:(a.givenName.charAt(0)+a.familyName.charAt(0)).toLowerCase()}buildAvatarData(a){const e={};if(!this.canDisplayAvatarForUser(a))return null;if(e.avatarBg=this.getAvatarBG(a),e.userInitials=this.getInitials(a),a.ui&&a.ui.displayName?e.username=a.ui.displayName:a.givenName||a.familyName||this.isAnonymousStudent(a)?this.bbLocalize.formatUsername(a,l.ILocaleUsernameFormat.Long,this.scope,{noWrap:!0,noEscape:!0}).then(a=>{e.username=a}):e.username=null,a.avatar&&a.avatar.permanentUrl&&"default"!==a.avatar.permanentUrl){if(/^https?/.test(a.avatar.permanentUrl)&&-1===a.avatar.permanentUrl.indexOf("ts=")){const e=(m.a.isValidDate(a.lastModifiedAt)?a.lastModifiedAt:new Date).getTime();a.avatar.permanentUrl=a.avatar.permanentUrl+(a.avatar.permanentUrl.indexOf("?")>=0?"&ts=":"?ts=")+encodeURIComponent(e)}e.avatarUrl=a.avatar.permanentUrl}return e.isAllMembers=Object(n.f)(a),e}isAnonymousStudent(a){if(a.isAnonymousStudent)return a.isAnonymousStudent()}renderAvatars(){let a=this.scope.users;if(!a&&this.scope.user&&(a=this.scope.user),i.isArray(a)||(a=null!=a?[a]:[]),0===a.length)return this.scope.first=null,this.scope.second=null,this.scope.participants=0,void(this.scope.isAvatarRender=!0);this.scope.participants=a.length,this.scope.avatarsClasses={},i.isDefined(this.scope.inactive)&&(this.scope.avatarsClasses.inactive=this.scope.inactive()),!this.scope.avatarsClasses.inactive&&i.isDefined(this.scope.customizedActiveStyle)&&(this.scope.avatarsClasses.outline=!0,this.scope.avatarsClasses[this.scope.customizedActiveStyle]=!0),this.scope.avatarsClasses[this.avatarParticipantsClass(a.length)]=!0,this.scope.first=this.buildAvatarData(a[0]),2===a.length?this.scope.second=this.buildAvatarData(a[1]):a.length>2&&(this.scope.second={}),this.scope.isAvatarRender=!0}}let p=class{constructor(a,e){this.bbLocalize=a,this.$timeout=e,this.restrict="E",this.template=v,this.scope={user:"=?",inactive:"&?",users:"=?",autoUpdate:"&?",isGray:"&?",hasException:"&?",customizedActiveStyle:"@?",analyticsIdTagPrefix:"@"},this.link=(a,e,t)=>new b(a,e,t,this.bbLocalize,this.$timeout)}};p=Object(s.__decorate)([Object(s.__param)(0,Object(u.b)(l.serviceName)),Object(s.__param)(1,Object(u.b)("$timeout"))],p),c.a.features.newAvatar?i.module(g,[d.a]).directive("bbAvatar",["$compile",e=>({restrict:"E",scope:!1,priority:Number.MAX_VALUE,terminal:!0,link(t,s,i){const n=Object.prototype.hasOwnProperty.call(i,"users")?"bb-user-avatar-group":"bb-user-avatar",r=a(s[0].outerHTML.replace(/bb\-avatar/g,n));s.replaceWith(r),e(r)(t)}})]):i.module(g,[o.a,d.a]).directive("bbAvatar",["$injector",a=>a.instantiate(p)])}).call(this,t("5iHu"))},ptBS:function(a,e,t){var s=t("ziER"),i=t("5JeM"),n=new s({id:"icon-medium-messages",use:"icon-medium-messages-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-messages"><path d="M1 4v16h22V4H1z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 4l8.4419 7.6744L12 14l2.5581-2.3256L23 4M23 20c-3.3676-3.5207-5.5754-5.3288-8.4418-8.3256M1 20l8.4419-8.3256" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(n);a.exports=n},qeC2:function(a,e){a.exports='<div bb-load-bundle="components/directives/usercard" bb-cache-compilation="user-card" title="{{::userName}}">\n\n    <div ng-if="user.ui.anonymousStudent" class="anonymous-student-avatar">\n      <bb-avatar user="user" role="presentation" auto-update="::autoUpdate" inactive="inactive()"></bb-avatar>\n    </div>\n\n    <div ng-if="!user.ui.anonymousStudent"\n         ng-click="bbUsercard.show()"\n         ng-keydown="bbUsercard.keyDown($event)"\n         ng-mouseleave="bbUsercard.hide()"\n         tabindex="{{::bbUsercard.canShow() ? 0 : -1}}"\n         class="usercard-trigger"\n         ng-class="::{\'usercard-clickable\': bbUsercard.canShow(), \'usercard-not-clickable\': !bbUsercard.canShow()}"\n         role="button"\n         aria-expanded="{{showcard}}"\n         analytics-id="components.directives.usercard.showCard"\n    >\n        <div ng-switch="usercardShow" tabindex="-1">\n            <span ng-switch-when="username" class="usercard-button">\n                <bb-username class="name-title" user="user" ng-attr-format="{{attr.format}}" auto-update="{{autoUpdate}}" show-pronouns="true"\n                             ng-class="{ inactive: inactive() }"></bb-username>\n            </span>\n            <span ng-switch-when="avatar" class="usercard-button">\n                <bb-avatar user="user" role="presentation" auto-update="::autoUpdate"\n                  inactive="inactive()"></bb-avatar>\n            </span>\n            <span ng-switch-when="combined" class="usercard-button">\n              <bb-avatar user="user" role="presentation" auto-update="::autoUpdate" inactive="inactive()"></bb-avatar>\n              <bb-username user="user" format="short" auto-update="::autoUpdate" show-pronouns="true" ng-class="{ inactive: inactive() }"></bb-username>\n            </span>\n            <span ng-switch-when="outline" class="usercard-button">\n                <bb-avatar user="user" role="presentation" auto-update="::autoUpdate" inactive="inactive()"></bb-avatar>\n                <div class="element-details">\n                  <div class="name ellipsis">\n                      <bb-username user="user" format="short" auto-update="::autoUpdate" show-pronouns="true" ng-class="{ inactive: inactive() }"></bb-username>\n                  </div>\n                  <div class="content ellipsis">\n                    <p class="user-name js-course-role" bb-translate>{{bbUsercard.getCourseRoleLocalizeId()}}</p>\n                  </div>\n                </div>\n            </span>\n        </div>\n        <div ng-if="showcard" bb-click-outside="bbUsercard.hide()" is-active="showcard"\n             role="region" aria-label="{{bbUsercard.getUserNameLabel()}}"\n             class="element-card usercard usercard-not-clickable" ng-class="{\'showcard\': showcard }" bb-focus>\n            <div class="header">\n                <bb-avatar user="user" ng-attr-auto-update="::autoUpdate" inactive="inactive()"></bb-avatar>\n                <div class="element-details">\n                    <div class="name">\n                        <bb-username class="name-title" user="user" ng-class="{ inactive: inactive() }" show-pronouns="true"\n                                     ng-attr-format="{{attr.format}}" ng-attr-auto-update="{{::autoUpdate}}"></bb-username>\n                    </div>\n                  <div class="userId ellipse" ng-if="user.userName && !user.studentId" title="{{user.userName}}">{{user.userName}}</div>\n                  <div class="userId ellipse" ng-if="!user.userName && user.studentId" bb-translate translate-values="{ studentId: user.studentId }">components.directives.usercard.studentId</div>\n                  <div class="userId ellipse" ng-if="user.userName && user.studentId" bb-translate translate-values="{ username: user.userName, studentId: user.studentId }">components.directives.usercard.usernameAndId</div>\n                  <div class="profile ellipsis" bb-translate>{{bbUsercard.getCourseRoleLocalizeId()}}</div>\n                    <div class="profile exception-link" ng-if="bbUsercard.hasDueDateException()">\n                      <div class="clickable ellipsis" ng-if="bbUsercard.canEditDueDateException()" bb-translate bb-peek-sref="accommodation({membershipId: membershipId})">\n                        components.directives.usercard.studentExceptions\n                      </div>\n                      <span ng-if="!bbUsercard.canEditDueDateException()" bb-translate>\n                        components.directives.usercard.studentExceptions\n                      </span>\n                    </div>\n                </div>\n            </div>\n            <div class="buttons">\n              \x3c!-- I don\'t use one time binding, as user can open a peek panel to config this attribute. This configuration has to take effect immediately--\x3e\n              <button aria-hidden="{{!showcard}}" ng-if="bbUsercard.canSendMessage()"\n                      type="button"\n                      ng-click="bbUsercard.sendMessage()"\n                      class="button large clear mail-button"\n                      title="{{user.mail}}"\n                      bb-translate-attrs="{\'aria-label\': \'components.directives.usercard.sendMessage\'}"\n                      tabindex="{{showcard ? 0 : -1}}"\n                      ng-keydown="bbUsercard.sendMessageViaSpaceBar($event)"\n                      analytics-id="components.directives.usercard.sendMessage.button"\n              >\n                <bb-svg-icon size="medium" icon="messages"></bb-svg-icon>\n              </button>\n            </div>\n        </div>\n    </div>\n\n</div>\n'}}]);