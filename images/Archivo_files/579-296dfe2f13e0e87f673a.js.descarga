(window.webpackJsonp=window.webpackJsonp||[]).push([[579],{"0rzL":function(e,n,t){"use strict";t.d(n,"a",(function(){return b}));var i=t("D57K"),a=(t("eWdw"),t("Llzl")),o=t("nbDY"),s=t.n(o),l=t("ckcj"),r=t("dJ97"),c=t("aHpC"),d=t("Bu0u"),g=t("UODz"),u=t("zGdY");const b="ultra.components.directives.submissionCard";class p extends s.a{}p.ATTEMPT=new p("ATTEMPT"),p.GRADE=new p("GRADE"),p.INFO=new p("INFO");let h=class{constructor(e){if(this.scope=e,!e.gradingColumn&&!e.gradeDetail)throw new d.a({message:"gradingColumn or gradeDetail must be provided."});if(this.scope.gradeDetail&&!this.scope.gradeDetail.column)throw new d.a({message:"gradeDetail.column must be provided to display attempt mode."});let n,t;switch(this.scope.gradeDetail&&(this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt)&&(this.attempt=this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt,this.currentGradeStatus=this.scope.gradeDetail.ui.attempt.status),(!e.gradeDetail||e.gradeDetail&&!this.attempt)&&e.gradingColumn?this.scope.mode=p.INFO:e.gradeDetail&&this.attempt&&(this.scope.mode=p.ATTEMPT,this.scope.gradingColumn=this.scope.gradeDetail.column),this.showLate=!e.showLate||e.showLate(),e.mode){case p.INFO:t=e.gradingColumn.dueDate?"DUE":"NO_DUE_DATE",n=this.showLate?"UNOPENED_LATE":"UNOPENED";break;case p.ATTEMPT:t=this.attempt.status.toString(),e.hasAttempt=!0,n=u.AttemptStatus.InProgress===this.attempt.status&&this.showLate?"SUBMISSION_LATE":"SUBMISSION";break;case p.GRADE:}e.status="components.directives.submission-card.attemptStatus."+t,e.title="components.directives.submission-card.title."+n}shouldExpandForRubricIcon(){return(this.scope.showRubricButton&&this.scope.showRubricButton()||this.scope.showRubricDiv&&this.scope.showRubricDiv())&&this.scope.gradingColumn.hasRubricAssociation&&this.scope.gradingColumn.hasRubricAssociation()}get showLateIcon(){return this.showLate&&(!this.scope.gradeDetail||!this.attempt||this.attempt.isInProgress())}};h=Object(i.__decorate)([Object(i.__param)(0,Object(c.b)("scope"))],h);let m=class{constructor(e){this.$injector=e,this.restrict="AE",this.template=g,this.scope={gradeDetail:"=?",gradingColumn:"=?",inline:"@?",clickable:"=?",showLate:"&?",showRubricButton:"&?",showRubricDiv:"&?"},this.link=e=>{e.submissionCard=this.$injector.instantiate(h,{scope:e})}}};m=Object(i.__decorate)([Object(i.__param)(0,Object(c.b)("$injector"))],m),a.module(b,[l.a,r.a]).directive("bbSubmissionCard",["$injector",e=>e.instantiate(m)])},"0wep":function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var i=t("zYa8"),a=t("IEHd");const o="ultra.components.directives.bbUiIcon.large.Goal";Object(i.a)(a.a,o,"bbUiIconLargeGoal")},"1jPR":function(e,n){e.exports='\x3c!-- Goals--\x3e\n<div class="goal" ng-class="{\'goal-peek\': !openPeekPanel}">\n  <div class="row hide-for-small" ng-if="!openPeekPanel">\n    <div class="goal-panel">\n      <div class="goal-white-icon" >\n        <bb-svg-icon size="medium" icon="goal" bb-translate-attrs="{\'aria-label\': \'course.goal-alignment.goal.sr-only.goalImage\'}"></bb-svg-icon>\n      </div>\n      <div class="goal-head">\n        <h3 tabindex="-1" class="goal-title" bb-translate>course.goal-alignment.goal.header</h3>\n      </div>\n      <button class="button super-clear icon"\n              ng-click="hideGoals()"\n              analytics-id="course.goalAlignment.goal.closeGoals.button">\n        <i class="icon-times-bold"></i>\n        <span class="sr-only" bb-translate>course.goal-alignment.goal.sr-only.closeGoals</span>\n      </button>\n    </div>\n  </div>\n  <div class="goal-content-container">\n    <div class="row add-goal" ng-if="canAlignGoals() && !isCourseComplete()">\n      <a href="javascript:void(0);"\n         bb-focus="shouldFocus({elementId: \'add-goals\'})"\n         tabindex="0"\n         class="button button--dashed -full-width"\n         ng-if="!isMobile"\n         ng-click="addGoals()"\n         bb-translate\n         analytics-id="course.goal-alignment.goal.addGoalsButton">\n        course.goal-alignment.goal.addGoalsButton\n      </a>\n    </div>\n\n    <div class="goal-alignable-content"\n      ng-repeat="(contentIndex, content) in contents track by content.getContentIdForGoalAlignment()"\n      ng-class="[\'goal-aligned-content-\'+$index]"\n      ng-if="content.alignedGoals.length > 0">\n\n      <h3 class="goal-aligned-label"  ng-class="{\'goal-stu\': !(canAlignGoals() && !isCourseComplete())}">\n        <span>{{content.getContentTitleForGoalAlignment()}}</span>\n        <span bb-translate translate-values="{length: content.alignedGoals.length}">course.goal-alignment.goal.alignedGoalsLength</span>\n      </h3>\n\n      <ul class="goal-ul">\n        <li class="row goal-list" id="goal-{{::alignedGoal.goalId}}"\n            ng-repeat="alignedGoal in content.alignedGoals | orderBy: [\'(alignedGoal.content || content).getContentTitleForGoalAlignment()\', \'goal.goalTitle\', \'goal.goalText\'] track by (alignedGoal.goalId + (alignedGoal.content || content).getContentIdForGoalAlignment())">\n\n          <div class="columns small-12 single-goal"\n            ng-class="{\n              \'is-compacted\': !(alignedGoal.isShowDetails = alignedGoal.isShowDetails === undefined ? false:alignedGoal.isShowDetails),\n              \'goal-specific\': !(canAlignGoals() && !isCourseComplete())\n            }">\n            <div class="goal-icon">\n              <bb-ui-icon-large-goal color="primary" bb-translate-attrs="{\'aria-label\': \'course.goal-alignment.goal.sr-only.goalImage\'}"></bb-ui-icon-large-goal>\n            </div>\n            <div class="goal-description goal-details" ng-class="{\'goal-specific\': !(canAlignGoals() && !isCourseComplete())}">\n              <span class="goal-type js-goal-title" ng-class="{\'ellipse\':!alignedGoal.isShowDetails}">{{alignedGoal.goal.goalTitle}}</span>\n              <div class="goal-content-title" ng-class="{\'ellipse\':!alignedGoal.isShowDetails}" ng-bind="(alignedGoal.content || content).getContentTitleForGoalAlignment()"></div>\n              <span class="goal-content" ng-class="{\'ellipse\':!alignedGoal.isShowDetails}">{{alignedGoal.goal.goalText}}</span>\n              <div class="goal-category" ng-show="alignedGoal.isShowDetails">\n                <span class="goal-type" bb-translate>course.goal-alignment.goal.setAndCategory</span>\n                <span class="goal-category-title vertical-bar js-goal-set">{{alignedGoal.goal.goalSetTitle}}</span>\n                <span class="goal-category-title js-goal-category">{{alignedGoal.goal.goalCategoryTitle}}</span>\n              </div>\n              <button role="button"\n                      class="button anchor js-show-details"\n                      ng-click="alignedGoal.isShowDetails=!alignedGoal.isShowDetails"\n                      analytics-id="course.goalAlignment.goal.showDetails.button">\n                <span bb-translate ng-if="alignedGoal.isShowDetails" translate-attrs-values="{goalName: alignedGoal.goal.goalTitle}" bb-translate-attrs="{\'aria-label\': \'course.goal-alignment.goal.sr-only.showLess\'}">course.goal-alignment.goal.showLess</span>\n                <span bb-translate ng-if="!alignedGoal.isShowDetails" translate-attrs-values="{goalName: alignedGoal.goal.goalTitle}" bb-translate-attrs="{\'aria-label\': \'course.goal-alignment.goal.sr-only.showMore\'}">course.goal-alignment.goal.showMore</span>\n              </button>\n            </div>\n          </div>\n          <div bb-foundation-defer>\n            <bb-overflow-menu element-id="{{ generateControlId((alignedGoal.content || content), alignedGoal) + \'-\' + contentIndex }}"\n                              element-name="{{alignedGoal.goal.goalTitle}}"\n                              is-single-mode="true"\n                              menu-items="getOverflowMenuItems(content, alignedGoal)"\n                              analytics-id-tag-prefix="course.goal-alignment.goal.overflowMenu">\n            </bb-overflow-menu>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n'},"5Yfa":function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return o})),t.d(n,"d",(function(){return s}));const i="bb-goal-selection-changed",a="bb-goal-alignment-saved",o="bb-goal-alignment-legacy-picker-saved";function s(e){return i+":"+e.getContentIdForGoalAlignment()}},"5cjn":function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var i=t("D57K"),a=t("aHpC");const o="ultra.components.directives.bbInView";let s=class{constructor(e){this.$parse=e,this.restrict="A"}link(e,n,t){const i=new IntersectionObserver(a=>{a[0].intersectionRatio<=0||(i.unobserve(n[0]),this.$parse(t.bbInView)(e))},{threshold:1});i.observe(n[0]),e.$on("$destroy",()=>{i.unobserve(n[0])})}};s=Object(i.__decorate)([Object(i.__param)(0,Object(a.b)("$parse"))],s),angular.module(o,[]).directive("bbInView",["$injector",e=>e.instantiate(s)])},"6mvz":function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));var i=t("Llzl"),a=t("06dA"),o=t("1ZbL"),s=t("0JpG");const l="ultra.components.directives.rubric.rubricView",r={Class:a.RubricView,bindingNames:["analyticsId","criteria","decimalsLength","rubricType","maxScore"],renderLocalized:!0};i.module(l,[s.moduleName]).component("bbRubricView",Object(o.a)(r))},Gyfs:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var i=t("1ZbL"),a=t("kcGO");const o="ultra.components.services.contentTabs",s={Class:a.ContentTabs,attributes:["analyticsId"],bindingNames:["value","onChange","isOrganization"],renderLocalized:!0,withProvider:!0};angular.module(o,[]).component("bbUiContentTabs",Object(i.a)(s))},Jygx:function(e,n){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(e){this.message=e}i.prototype=new Error,i.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var n=String(e).replace(/=+$/,"");if(n.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var a,o,s=0,l=0,r="";o=n.charAt(l++);~o&&(a=s%4?64*a+o:o,s++%4)?r+=String.fromCharCode(255&a>>(-2*s&6)):0)o=t.indexOf(o);return r}},QyCV:function(e,n,t){"use strict";t("q1bP"),t("sZYy"),t("dV61");var i=t("nsO7"),a=t("Llzl"),o=t("Qbdf"),s=t("5Yfa"),l=t("0JpG"),r=t("JNtI"),c=t("TnpK"),d=t("gkef"),g=t("1jPR"),u=t("0wep");t.d(n,"a",(function(){return b}));const b="ultra.components.directives.bbGoalAlignment";class p{constructor(e,n,t,o,l){this.$injector=e,this.contextCourse=n,this.localize=t,this.ultraState=o,this.windowSize=l,this.scope={contents:"=",hideGoals:"&",shouldFocus:"&"},this.restrict="E",this.template=g,this.link=(e,n,t)=>{a.extend(e,{generateControlId:(e,n)=>`x-${e.getContentIdForGoalAlignment()}-${n.goalId}`.replace(/[\.;]/g,"-"),openPeekPanel:!!t.openPeekPanel&&e.$eval(t.openPeekPanel),canAlignGoals:()=>e.primaryContent.isCurrentUserEligibleToAlignGoals(),addGoals:()=>{this.ultraState.goPeekState("goal-picker-legacy",{goalAlignableContent:e.primaryContent})},deleteGoal:(n,t)=>{i.remove(n.alignedGoals,e=>e===t);const a=t.content||n;i.remove(a.alignedGoals,e=>e.goalId===t.goalId);const o=i.compact(a.alignedGoals.map(e=>e.goal));e.$root.$broadcast(s.a,a,o),e.$root.$broadcast(s.d(a),o)},isCourseComplete:()=>this.contextCourse.course&&this.contextCourse.course.isComplete(),isMobile:window.Modernizr.touch&&!this.windowSize.isLargeBreakpoint(),getOverflowMenuItems:(n,t)=>{return[{icon:"trash",labelKey:"global.delete",ariaLabel:()=>this.localize.translateSync({locale:this.localize.getLocale(e),key:"course.goal-alignment.goal.sr-only.delete",params:{goalName:t.goal.goalTitle},noWrap:!0}),show:()=>t.content&&t.content.isCurrentUserEligibleToAlignGoals&&t.content.isCurrentUserEligibleToAlignGoals()&&!e.isCourseComplete(),onClick:()=>{e.deleteGoal(n,t)},confirmationOptions:r.a("x-bb-delete-goal-alignment")}]}});let o=a.noop;const l=function(){const n={title:"",alignedGoals:[],isCurrentUserEligibleToAlignGoals:()=>!1,getContentIdForGoalAlignment:()=>"x"};e.primaryContent=(e.contents||[n])[0]||n,e.primaryContent!==n&&e.$root.$broadcast("EVENT_GOAL_PICKER_RESTORE",e.primaryContent),o(),o=e.$on(s.c,(n,t)=>{const a=e.primaryContent.coreContent||e.primaryContent,o=i.zipObject(a.alignedGoals.map(e=>e.goalId),a.alignedGoals),l=t.sort((e,n)=>e.goalTitle.localeCompare(n.goalTitle)).map(e=>Object.prototype.hasOwnProperty.call(o,e.id)?o[e.id]:{goalId:e.id,isVisibleToStudent:!0,goal:e,content:a});e.primaryContent.alignedGoals=l,e.primaryContent.coreContent&&(e.primaryContent.coreContent.alignedGoals=l),e.$root.$broadcast(s.a,a,t),e.$root.$broadcast(s.d(a),t)})};e.$watch("contents",l),l()}}}p.$inject=["$injector",o.e,l.serviceName,c.d,d.b],a.module(b,[d.a,"dibari.angular-ellipsis",l.moduleName,r.b,u.a]).directive("bbGoalAlignment",["$injector",e=>e.instantiate(p)])},SY8P:function(e,n,t){var i=t("Llzl");i.module("dibari.angular-ellipsis",[]).directive("ellipsis",["$timeout","$window","$sce",function(e,n,t){var a=function(n){var t=null,i=[];this.remove=function(n){-1!==i.indexOf(n)&&(i.splice(i.indexOf(n),1),0===i.length&&(e.cancel(t),t=null))},this.add=function(a){-1===i.indexOf(a)&&i.push(a),t||(t=e((function(){var e=i.slice();t=null,i.length=0,e.forEach((function(e){e()}))}),n))}},o=new a(0),s=new a(75);return{restrict:"A",scope:{ngShow:"=",ngBind:"=",ngBindHtml:"=",ellipsisAppend:"@",ellipsisAppendClick:"&",ellipsisSymbol:"@",ellipsisSeparator:"@",useParent:"@",ellipsisSeparatorReg:"=",ellipsisFallbackFontSize:"@"},compile:function(e,a,l){return function(e,a,l){function r(){var n=e.ngBind||e.ngBindHtml,o=!1;if(t.isEnabled()&&i.isObject(n)&&t.getTrustedHtml(n)&&(o=!0,n=t.getTrustedHtml(n)),n){var s=!e.ngBind&&!!e.ngBindHtml,r=0,d=void 0!==l.ellipsisSymbol?l.ellipsisSymbol:"&hellip;",g=void 0!==e.ellipsisSeparator?l.ellipsisSeparator:" ",u=void 0!==e.ellipsisSeparatorReg&&e.ellipsisSeparatorReg,b=void 0!==e.ellipsisAppend&&""!==e.ellipsisAppend?d+"<span class='angular-ellipsis-append'>"+e.ellipsisAppend+"</span>":d,p=u?n.match(u):n.split(g);if(l.isTruncated=!1,s?a.html(n):a.text(n),void 0!==l.ellipsisFallbackFontSize&&c(a)&&a.css("font-size",l.ellipsisFallbackFontSize),c(a,e.useParent)){var h=p.length,m=e.useParent?function(e){var n=0;return i.forEach(e.parent().children(),(function(t){t!=e[0]&&(n+=t.clientHeight)})),e.parent()[0].clientHeight-n}(a):a[0].clientHeight;for(s?a.html(n+b):a.text(n).html(a.html()+b),a.attr("data-overflowed","true");r<h;r++){var v=p.pop();if(0===p.length&&(p[0]=v.substring(0,Math.min(v.length,5))),s?a.html(p.join(g)+b):a.text(p.join(g)).html(a.html()+b),(e.useParent?a.parent()[0]:a[0]).scrollHeight<m||!1===c(a,e.useParent)){l.isTruncated=!0;break}}d!=b&&void 0!==e.ellipsisAppendClick&&""!==e.ellipsisAppendClick&&a.find("span.angular-ellipsis-append").bind("click",(function(n){e.$apply((function(){e.ellipsisAppendClick.call(e,{event:n})}))})),!o&&t.isEnabled()&&t.trustAsHtml(n)}else a.attr("data-overflowed","false")}}function c(e,n){return(e=n?e.parent():e)[0].scrollHeight>e[0].clientHeight}function d(){l.lastWindowResizeWidth==window.innerWidth&&l.lastWindowResizeHeight==window.innerHeight||r(),l.lastWindowResizeWidth=window.innerWidth,l.lastWindowResizeHeight=window.innerHeight}l.lastWindowResizeTime=0,l.lastWindowResizeWidth=0,l.lastWindowResizeHeight=0,l.lastWindowTimeoutEvent=null,l.isTruncated=!1,e.$watch("ngShow",(function(){o.add(r)})),e.$watch("ngBind",(function(){o.add(r)})),e.$watch("ngBindHtml",(function(){o.add(r)})),e.$watch("ellipsisAppend",(function(){r()})),e.$watch((function(){return 0!=a[0].offsetWidth&&0!=a[0].offsetHeight}),(function(){s.add(r)}));var g=e.$on("dibari:refresh-ellipsis",(function(){o.add(r)}));function u(){s.add(d)}var b=i.element(n);b.bind("resize",u),e.$on("$destroy",(function(){b.unbind("resize",u),o.remove(r),s.remove(d),g&&(g(),g=null)}))}}}}])},UODz:function(e,n){e.exports='<div class="submission-card" ng-class="{\'is-late\': isLate, \'inline\': inline}" bb-load-bundle="components/directives/submission-card">\n  <div class="panel" ng-class="{\'clickable-panel\': clickable}">\n    <bb-ui-icon-large-assignments class="submission-card__icon" ng-if="!inline" color="{{::submissionCard.showLateIcon ? \'error\' : \'inherit\'}}"></bb-ui-icon-large-assignments>\n    <div class="info" ng-class="{\'completed\': submissionCard.attempt.isCompleted(), \'rubric-icon-spacing\': submissionCard.shouldExpandForRubricIcon()}">\n      <span class="name ellipsis" bb-translate ng-if="!inline">{{title}}</span>\n      <span class="detail">\n        <span class="test-status ellipsis" ng-show="!!status">\n          <span class="inline-status" ng-if="inline && !hasAttempt && showLate" bb-translate>\n            components.directives.submission-card.outlineStatus.late\n          </span>\n          <span class="inline-status" ng-if="inline && !hasAttempt && !showLate" bb-translate>\n            components.directives.submission-card.outlineStatus.new\n          </span>\n          <span ng-if="inline && !hasAttempt"> - </span>\n          <span bb-translate class="status">{{status}}</span>\n          <ng-switch on="submissionCard.attempt.status" ng-if="submissionCard.attempt">\n            <bb-datetime class="date" format="Short" ng-switch-when="COMPLETED" value="::submissionCard.attempt.attemptLastGradedDate"></bb-datetime>\n            <bb-datetime class="date" format="Short" ng-switch-default value="::submissionCard.attempt.attemptDate"></bb-datetime>\n          </ng-switch>\n          <bb-datetime class="date" format="Short" ng-if="!submissionCard.attempt && gradingColumn.dueDate" value="::gradingColumn.dueDate"></bb-datetime>\n        </span>\n      </span>\n    </div>\n    <div class="grade-container">\n      <ng-switch on="gradeDetail.isPosted()">\n        <bb-display-grade ng-switch-when="true"\n                          grade-detail="gradeDetail"\n                          column="gradingColumn"\n                          display-type="GradeColor"\n                          show-rubric-button="showRubricButton()"\n                          show-rubric-div="showRubricDiv()"></bb-display-grade>\n        <bb-display-grade ng-switch-default\n                          attempt="submissionCard.attempt"\n                          display-type="AttemptStatus"></bb-display-grade>\n      </ng-switch>\n    </div>\n  </div>\n</div>\n'},WSu0:function(e,n,t){"use strict";var i=t("aY38");function a(e){this.message=e}a.prototype=new Error,a.prototype.name="InvalidTokenError",e.exports=function(e,n){if("string"!=typeof e)throw new a("Invalid token specified");var t=!0===(n=n||{}).header?0:1;try{return JSON.parse(i(e.split(".")[t]))}catch(e){throw new a("Invalid token specified: "+e.message)}},e.exports.InvalidTokenError=a},aY38:function(e,n,t){var i=t("Jygx");e.exports=function(e){var n=e.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(i(e).replace(/(.)/g,(function(e,n){var t=n.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t})))}(n)}catch(e){return i(n)}}},ckcj:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var i=t("zYa8"),a=t("69Wd");const o="ultra.components.directives.bbUiIcon.large.Assignments";Object(i.a)(a.Assignments,o,"bbUiIconLargeAssignments")},eWdw:function(e,n,t){},q1bP:function(e,n,t){t("Llzl");t("SY8P"),e.exports="dibari.angular-ellipsis"},sZYy:function(e,n,t){var i=t("ziER"),a=t("5JeM"),o=new i({id:"icon-medium-goal",use:"icon-medium-goal-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-goal"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M1 1h22v4H1zM6 20h12v3H6z" /><path d="M10 14v6M14 14v6" stroke-width="2" /><path d="M4 5c0 6 3 9 8 9s8-3 8-9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M4 8H1c0 9.5 9 9 9 9M20 8h3c0 9.5-9 9-9 9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});a.add(o);e.exports=o},tZPv:function(e,n){e.exports='<div ng-cloak id="file-view-panel" class="content-base">\n  <div class="panel-wrap has-bb-panel-header">\n    <header class="black-panel-header">\n      <div class="black-header-contents">\n        <button class="left-off-canvas-toggle menu-toggle standard-button dark-background"\n                type="button"\n                analytics-id="course.content.file.menuToggle.button">\n          <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n          <span class="sr-only" bb-translate>course.content.menu</span>\n        </button>\n        <h1 class="panel-title">{{controller.title}}</h1>\n        <a class="standard-button dark-background"\n            ng-if="controller.showSettings()"\n            bb-peek-sref="preview-file-edit({id: controller.newContent.id})"\n            analytics-id="course.content.file.file.showSettings.link">\n          <bb-svg-icon size="small" icon="settings"></bb-svg-icon>\n        </a>\n      </div>\n    </header>\n    <section class="panel-content panel-file-content">\n      <bb-panel-header\n        auto-title="true"\n        can-edit="controller.canEdit()"\n        content="controller.newContent"\n        localization-key="x-bb-file"\n        max-length="333"\n        panel-title="controller.title"\n        onchange-func-visibility="controller.onVisibilityChanged()"\n        onblur-func-title="controller.saveTitle()"\n        on-restricted-selected-func-title="controller.onRestrictedSelected()"\n        open-panel-on-restricted="false"\n        settings-disabled="controller.settingsDisabled()"\n        settings-peek-ref="preview-file-edit"\n        settings-label="components.directives.header.settings"\n        show-conversations="controller.showConversations()"\n        show-course="true"\n        show-delete="false"\n        show-settings="controller.showSettings()"\n        show-slider="false"\n        show-visibility="controller.shouldShowVisibility()"\n        show-empty-title-reminder="true"\n        show-ally-icon="controller.canShowAllyAlternativeFormats"\n      >\n      </bb-panel-header>\n      <bb-content-navigator content="controller.newContent"></bb-content-navigator>\n      <bb-ui-content-tabs\n        ng-if="controller.canViewProgress()"\n        value="controller.currentTabId"\n        on-change="controller.changeTab"\n        is-organization="contentCreateItem.isOrganization"\n      ></bb-ui-content-tabs>\n      <div\n        ng-if="!!controller.file && !!controller.newContent"\n        ng-show="controller.currentTabId === \'content\'"\n        role="tabpanel"\n        id="content-tab-panel-content"\n        aria-labelledby="content-tab-content"\n        class="panel-row large-12 columns panel-content-inner"\n      >\n        <div bb-in-view="controller.markCompleted()"></div>\n        <bb-file-preview\n          ng-if="controller.canDisplayPreview"\n          file="controller.file"\n          analytics-id="course.content.file.preview"\n          grow-iframe="false"\n        >\n        </bb-file-preview>\n        <bb-content-item-base\n          ng-if="!controller.canDisplayPreview"\n          class="course-navigator-placeholder"\n          content="controller.newContent"\n          show-review-state-icon="false"\n          hide-visibility-selector="true"\n        ></bb-content-item-base>\n      </div>\n      <div\n        ng-if="controller.currentTabId === \'progress\' && controller.newContent.id"\n        role="tabpanel"\n        id="content-tab-panel-progress"\n        aria-labelledby="content-tab-progress"\n      >\n        <bb-ui-content-progress-view\n          course-id="controller.courseId"\n          content-id="controller.newContent.id"\n          is-organization="contentCreateItem.isOrganization"\n          requires-manual-marking="!controller.newContent.inSequence"\n          analytics-id="course.content.file.progress"\n        ></bb-ui-content-progress-view>\n      </div>\n    </section>\n    \x3c!-- /panel-content --\x3e\n  </div>\n  \x3c!-- /panel-wrap --\x3e\n  <div ui-view="file-preview-peek"></div>\n</div>\n'},uJ9h:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var i=t("1ZbL"),a=t("kcGO");const o="ultra.components.services.contentProgressView",s={Class:a.ContentProgressView,attributes:["analyticsId"],bindingNames:["courseId","contentId","requiresManualMarking","isOrganization"],renderLocalized:!0,withProvider:!0};angular.module(o,[]).component("bbUiContentProgressView",Object(i.a)(s))},vFEc:function(e,n,t){"use strict";t.r(n);t("sZYy"),t("JzsJ");var i=t("Llzl"),a=t("D57K"),o=t("RPob"),s=t("zGdY"),l=t("AuQm"),r=t("IbyE"),c=t("1hyT"),d=t("9zo4"),g=t("0JpG"),u=t("w9Zy"),b=t("nYZ0"),p=t("Qbdf"),h=t("pjml"),m=t("lEL+"),v=t("TnpK"),w=t("jhBu"),f=t("36CG"),C=t("MUzn"),y=t("aHpC"),O=t("kcGO");const G="ultra.features.course.content.file.view.controller";let j=class extends C.b{constructor(e,n,t,i,a,o,s,l,r,c,d,g,u,b,p,h,m){super(e,n,t,i,a,o,s,l,r,c,d,g,u,b,p,m),this.$injector=e,this.$modal=n,this.$q=t,this.$ngRedux=i,this.$rootScope=a,this.$scope=o,this.$stateParams=s,this._accessibility=l,this._bbLocalize=r,this._bbOffcanvas=c,this._content=d,this.contextCourse=g,this._CourseModel=u,this._ultraState=b,this.currentContent=p,this._timeout=h,this.entitlementService=m,this.currentTabId=O.ContentTabId.Content,this.onVisibilityChanged=()=>{this.persist()},this.changeTab=e=>{this.currentTabId=e,this._ultraState.search("view",e)},o.controller=this,this.getBasicContent().then(()=>{this.derivePreviewFile();const e=()=>this.handleContentUpdate();this.newContent.$on("after-save",e),this.$scope.$on("$destroy",()=>{this.newContent.$off("after-save",e)})}),"progress"===s.view&&(this.currentTabId=O.ContentTabId.Progress),this.loadCourseProgressConfiguration(g.courseId)}handleContentUpdate(){var e,n,t;(null===(t=null===(n=null===(e=this.newContent)||void 0===e?void 0:e.contentDetail)||void 0===n?void 0:n[s.ContentHandlerHandle.File])||void 0===t?void 0:t.fileAssociationMode)===s.FileAssociationMode.Link?this._ultraState.leavePeekState():this.derivePreviewFile()}derivePreviewFile(){var e,n,t,i,a,l,r,d;const g=null===(e=this.newContent)||void 0===e?void 0:e.contentDetail;g&&(this.file={resourceUrl:Object(o.convertToAbsoluteUrl)(null===(n=g[s.ContentHandlerHandle.File])||void 0===n?void 0:n.file.permanentUrl),viewerUrl:Object(o.convertToAbsoluteUrl)(null===(t=g[s.ContentHandlerHandle.File])||void 0===t?void 0:t.file.viewerUrl),fileName:null===(i=g[s.ContentHandlerHandle.File])||void 0===i?void 0:i.file.fileName,alternativeText:this.newContent.description,render:Object(c.fileAssociationModeToFileRenderType)(null!==(l=null===(a=g[s.ContentHandlerHandle.File])||void 0===a?void 0:a.fileAssociationMode)&&void 0!==l?l:s.FileAssociationMode.Embed),displayName:null===(r=g[s.ContentHandlerHandle.File])||void 0===r?void 0:r.file.fileName,mimeType:null===(d=g[s.ContentHandlerHandle.File])||void 0===d?void 0:d.file.mimeType})}get canShowAllyAlternativeFormats(){var e;return(null===(e=this.file)||void 0===e?void 0:e.render)!==r.FileRenderType.InlineOnly}get canDisplayPreview(){return!!this.file&&(this.file.render===r.FileRenderType.Inline||this.file.render===r.FileRenderType.InlineOnly)&&Object(l.canFileBeRenderedInline)(this.file,!0)}showSettings(){return"content"===this.currentTabId&&this.canEdit()}shouldShowVisibility(){var e,n;return this.currentTabId===O.ContentTabId.Content&&(null===(e=this.newContent)||void 0===e?void 0:e.canEditAvailability())&&!(null===(n=this.newContent)||void 0===n?void 0:n.shouldRestrict())}markCompleted(){var e,n,t,i;(null===(n=null===(e=this.newContent)||void 0===e?void 0:e.permissions)||void 0===n?void 0:n.canHaveReviewState)&&(null===(t=this.newContent)||void 0===t?void 0:t.state)!==s.ContentReviewState.Completed&&(null===(i=this.newContent)||void 0===i?void 0:i.inSequence)&&this._timeout(()=>{this.newContent.updateState(s.ContentReviewState.Completed,!0)},this.$rootScope,1e3)}};j.$inject=[],j=Object(a.__decorate)([Object(a.__param)(0,Object(y.b)("$injector")),Object(a.__param)(1,Object(y.b)("$modal")),Object(a.__param)(2,Object(y.b)("$q")),Object(a.__param)(3,Object(y.b)("$ngRedux")),Object(a.__param)(4,Object(y.b)("$rootScope")),Object(a.__param)(5,Object(y.b)("$scope")),Object(a.__param)(6,Object(y.b)("$stateParams")),Object(a.__param)(7,Object(y.b)(d.c)),Object(a.__param)(8,Object(y.b)(g.serviceName)),Object(a.__param)(9,Object(y.b)(u.e)),Object(a.__param)(10,Object(y.b)(b.f)),Object(a.__param)(11,Object(y.b)(p.e)),Object(a.__param)(12,Object(y.b)(h.m.serviceName)),Object(a.__param)(13,Object(y.b)(v.d)),Object(a.__param)(14,Object(y.b)(f.g)),Object(a.__param)(15,Object(y.b)(m.b)),Object(a.__param)(16,Object(y.b)(w.b))],j);class S extends j{}var T=t("QyCV"),I=t("bF8R"),A=t("5RJJ"),k=t("u4ux"),_=t("p7NW"),$=t("6mvz"),D=t("0rzL"),P=t("ftvW"),z=t("5cjn"),x=t("Gyfs"),E=t("uJ9h"),R=t("1ZbL");const F="ultra.components.directives.filePreview",L={Class:l.FilePreview,renderLocalized:!0,withProvider:!0,attributes:["analyticsId"],bindingNames:["file","disableMediaModal","inlineMediaAdditionalAttributes"]};i.module(F,[g.moduleName]).component("bbFilePreview",Object(R.a)(L));var H=t("tZPv");t.d(n,"moduleName",(function(){return M})),t.d(n,"controllerName",(function(){return N})),t.d(n,"template",(function(){return H}));const M="ultra.features.course.content.file.view",N=G;i.module(M,[T.a,I.a,A.a,k.b,_.f,$.a,D.a,v.b,P.a,z.a,F,x.a,E.a]).controller(G,j)}}]);