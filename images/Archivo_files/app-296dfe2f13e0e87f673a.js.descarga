!function(e){function t(t){for(var n,i,a=t[0],l=t[1],c=t[2],d=0,h=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&h.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);h.length;)h.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],n=!0,i=1;i<s.length;i++){var l=s[i];0!==r[l]&&(n=!1)}n&&(o.splice(t--,1),e=a(a.s=s[0]))}return e}var n={},i={235:0,536:0},r={235:0,536:0},o=[];function a(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.e=function(e){var t=[];const s=function(s){i[e]?t.push(i[e]):0!==i[e]&&{0:1,1:1,2:1,3:1,4:1,5:1,7:1,10:1,11:1,14:1,17:1,18:1,21:1,22:1,23:1,26:1,27:1,28:1,29:1,31:1,32:1,33:1,34:1,35:1,36:1,37:1,39:1,40:1,41:1,42:1,43:1,44:1,45:1,46:1,47:1,51:1,52:1,53:1,55:1,56:1,57:1,58:1,59:1,60:1,61:1,62:1,63:1,64:1,65:1,67:1,68:1,69:1,70:1,72:1,113:1,114:1,115:1,116:1,117:1,118:1,119:1,120:1,121:1,122:1,123:1,124:1,125:1,126:1,128:1,129:1,130:1,131:1,133:1,134:1,137:1,140:1,141:1,142:1,143:1,148:1,534:1,540:1,541:1,542:1,543:1,544:1,545:1,546:1,547:1,548:1,549:1,550:1,551:1,552:1,553:1,554:1,555:1,556:1,557:1,558:1,559:1,560:1,561:1,562:1,563:1,564:1,565:1,567:1,568:1,569:1,570:1,571:1,572:1,573:1,574:1,575:1,576:1,577:1,578:1,579:1,581:1,582:1,583:1,584:1,585:1,587:1,589:1,590:1,591:1,592:1,593:1,594:1,595:1,596:1,597:1,598:1,599:1,600:1,601:1,602:1,603:1,604:1,605:1,606:1,607:1,608:1,609:1,610:1,611:1,612:1,613:1,614:1,615:1,618:1,619:1,620:1,621:1,622:1,623:1,624:1,625:1,626:1,627:1,628:1,629:1,630:1,631:1,632:1,634:1,636:1,637:1,638:1,639:1,640:1,641:1,642:1,645:1,648:1,649:1,650:1,655:1,656:1,657:1,659:1,661:1,662:1,663:1,664:1,665:1,666:1,667:1,668:1,669:1,670:1,671:1,672:1,673:1,676:1,677:1,678:1,679:1,680:1,681:1,682:1,683:1,686:1,687:1,688:1,689:1,691:1,694:1,696:1,699:1,700:1,701:1,727:1}[e]&&t.push(i[e]=new Promise((function(t,s){var n=e+"-296dfe2f13e0e87f673a.css";n="rtl"===document.getElementsByTagName("html")[0].getAttribute("dir")?n.replace(".css",".rtl.css"):n;for(var r=a.p+n,o=document.getElementsByTagName("link"),l=0;l<o.length;l++){var c=(u=o[l]).getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(c===n||c===r))return t()}var d=document.getElementsByTagName("style");for(l=0;l<d.length;l++){var u;if((c=(u=d[l]).getAttribute("data-href"))===n||c===r)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css";h.onerror=h.onload=function(n){if(h.onerror=h.onload=null,"load"===n.type)t();else{var o=n&&n.target&&n.target.href||r,a=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete i[e],h.parentNode.removeChild(h),s(a)}},h.href=r,document.head.appendChild(h)})).then((function(){i[e]=0})))};document.getElementsByTagName("html")[0].hasAttribute("has-applied-locale-text-direction")?s():document.addEventListener("initializePageDirection",s);var n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,s){n=r[e]=[t,s]}));t.push(n[2]=o);var l,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=function(e){return a.p+""+({74:"locale-ar-sa",75:"locale-az-az",76:"locale-cs-cz",77:"locale-cy-gb",78:"locale-da-dk",79:"locale-de-de",80:"locale-en",81:"locale-en-au",82:"locale-en-cd",83:"locale-en-gb",84:"locale-en-sa",85:"locale-en-sb",86:"locale-en-sc",87:"locale-en-sm",88:"locale-en-us-k12",89:"locale-en-us-pro",90:"locale-en-za",91:"locale-es-es",92:"locale-fr-ca",93:"locale-fr-fr",94:"locale-he-il",95:"locale-it-it",96:"locale-ja-jp",97:"locale-ko-kr",98:"locale-ms-my",99:"locale-nb-no",100:"locale-nl-nl",101:"locale-nn-no",102:"locale-pl-pl",103:"locale-pt-br",104:"locale-pt-pt",105:"locale-ru-ru",106:"locale-sv-se",107:"locale-th-th",108:"locale-tr-tr",109:"locale-uk-ua",110:"locale-zh-cn",111:"locale-zh-tw",236:"app_develop",237:"cldrdata-ar",238:"cldrdata-ar-001",239:"cldrdata-ar-AE",240:"cldrdata-ar-BH",241:"cldrdata-ar-DJ",242:"cldrdata-ar-DZ",243:"cldrdata-ar-EG",244:"cldrdata-ar-EH",245:"cldrdata-ar-ER",246:"cldrdata-ar-IL",247:"cldrdata-ar-IQ",248:"cldrdata-ar-JO",249:"cldrdata-ar-KM",250:"cldrdata-ar-KW",251:"cldrdata-ar-LB",252:"cldrdata-ar-LY",253:"cldrdata-ar-MA",254:"cldrdata-ar-MR",255:"cldrdata-ar-OM",256:"cldrdata-ar-PS",257:"cldrdata-ar-QA",258:"cldrdata-ar-SA",259:"cldrdata-ar-SD",260:"cldrdata-ar-SO",261:"cldrdata-ar-SS",262:"cldrdata-ar-SY",263:"cldrdata-ar-TD",264:"cldrdata-ar-TN",265:"cldrdata-ar-YE",266:"cldrdata-bg",267:"cldrdata-bg-BG",268:"cldrdata-ca",269:"cldrdata-ca-AD",270:"cldrdata-ca-ES",271:"cldrdata-ca-ES-VALENCIA",272:"cldrdata-ca-FR",273:"cldrdata-ca-IT",274:"cldrdata-cs",275:"cldrdata-cs-CZ",276:"cldrdata-cy",277:"cldrdata-cy-GB",278:"cldrdata-da",279:"cldrdata-da-DK",280:"cldrdata-da-GL",281:"cldrdata-dav",282:"cldrdata-dav-KE",283:"cldrdata-de",284:"cldrdata-de-AT",285:"cldrdata-de-BE",286:"cldrdata-de-CH",287:"cldrdata-de-DE",288:"cldrdata-de-LI",289:"cldrdata-de-LU",290:"cldrdata-en",291:"cldrdata-en-001",292:"cldrdata-en-150",293:"cldrdata-en-AG",294:"cldrdata-en-AI",295:"cldrdata-en-AS",296:"cldrdata-en-AU",297:"cldrdata-en-BB",298:"cldrdata-en-BE",299:"cldrdata-en-BM",300:"cldrdata-en-BS",301:"cldrdata-en-BW",302:"cldrdata-en-BZ",303:"cldrdata-en-CA",304:"cldrdata-en-CC",305:"cldrdata-en-CK",306:"cldrdata-en-CM",307:"cldrdata-en-CX",308:"cldrdata-en-DG",309:"cldrdata-en-DM",310:"cldrdata-en-ER",311:"cldrdata-en-FJ",312:"cldrdata-en-FK",313:"cldrdata-en-FM",314:"cldrdata-en-GB",315:"cldrdata-en-GD",316:"cldrdata-en-GG",317:"cldrdata-en-GH",318:"cldrdata-en-GI",319:"cldrdata-en-GM",320:"cldrdata-en-GU",321:"cldrdata-en-GY",322:"cldrdata-en-HK",323:"cldrdata-en-IE",324:"cldrdata-en-IM",325:"cldrdata-en-IN",326:"cldrdata-en-IO",327:"cldrdata-en-JE",328:"cldrdata-en-JM",329:"cldrdata-en-KE",330:"cldrdata-en-KI",331:"cldrdata-en-KN",332:"cldrdata-en-KY",333:"cldrdata-en-LC",334:"cldrdata-en-LR",335:"cldrdata-en-LS",336:"cldrdata-en-MG",337:"cldrdata-en-MH",338:"cldrdata-en-MO",339:"cldrdata-en-MP",340:"cldrdata-en-MS",341:"cldrdata-en-MT",342:"cldrdata-en-MU",343:"cldrdata-en-MW",344:"cldrdata-en-MY",345:"cldrdata-en-NA",346:"cldrdata-en-NF",347:"cldrdata-en-NG",348:"cldrdata-en-NR",349:"cldrdata-en-NU",350:"cldrdata-en-NZ",351:"cldrdata-en-PG",352:"cldrdata-en-PH",353:"cldrdata-en-PK",354:"cldrdata-en-PN",355:"cldrdata-en-PR",356:"cldrdata-en-PW",357:"cldrdata-en-RW",358:"cldrdata-en-SB",359:"cldrdata-en-SC",360:"cldrdata-en-SD",361:"cldrdata-en-SG",362:"cldrdata-en-SH",363:"cldrdata-en-SL",364:"cldrdata-en-SS",365:"cldrdata-en-SX",366:"cldrdata-en-SZ",367:"cldrdata-en-TC",368:"cldrdata-en-TK",369:"cldrdata-en-TO",370:"cldrdata-en-TT",371:"cldrdata-en-TV",372:"cldrdata-en-TZ",373:"cldrdata-en-UG",374:"cldrdata-en-UM",375:"cldrdata-en-US",376:"cldrdata-en-US-POSIX",377:"cldrdata-en-VC",378:"cldrdata-en-VG",379:"cldrdata-en-VI",380:"cldrdata-en-VU",381:"cldrdata-en-WS",382:"cldrdata-en-ZA",383:"cldrdata-en-ZM",384:"cldrdata-en-ZW",385:"cldrdata-es",386:"cldrdata-es-419",387:"cldrdata-es-AR",388:"cldrdata-es-BO",389:"cldrdata-es-CL",390:"cldrdata-es-CO",391:"cldrdata-es-CR",392:"cldrdata-es-CU",393:"cldrdata-es-DO",394:"cldrdata-es-EA",395:"cldrdata-es-EC",396:"cldrdata-es-ES",397:"cldrdata-es-GQ",398:"cldrdata-es-GT",399:"cldrdata-es-HN",400:"cldrdata-es-IC",401:"cldrdata-es-MX",402:"cldrdata-es-NI",403:"cldrdata-es-PA",404:"cldrdata-es-PE",405:"cldrdata-es-PH",406:"cldrdata-es-PR",407:"cldrdata-es-PY",408:"cldrdata-es-SV",409:"cldrdata-es-US",410:"cldrdata-es-UY",411:"cldrdata-es-VE",412:"cldrdata-fi",413:"cldrdata-fi-FI",414:"cldrdata-fr",415:"cldrdata-fr-BE",416:"cldrdata-fr-BF",417:"cldrdata-fr-BI",418:"cldrdata-fr-BJ",419:"cldrdata-fr-BL",420:"cldrdata-fr-CA",421:"cldrdata-fr-CD",422:"cldrdata-fr-CF",423:"cldrdata-fr-CG",424:"cldrdata-fr-CH",425:"cldrdata-fr-CI",426:"cldrdata-fr-CM",427:"cldrdata-fr-DJ",428:"cldrdata-fr-DZ",429:"cldrdata-fr-FR",430:"cldrdata-fr-GA",431:"cldrdata-fr-GF",432:"cldrdata-fr-GN",433:"cldrdata-fr-GP",434:"cldrdata-fr-GQ",435:"cldrdata-fr-HT",436:"cldrdata-fr-KM",437:"cldrdata-fr-LU",438:"cldrdata-fr-MA",439:"cldrdata-fr-MC",440:"cldrdata-fr-MF",441:"cldrdata-fr-MG",442:"cldrdata-fr-ML",443:"cldrdata-fr-MQ",444:"cldrdata-fr-MR",445:"cldrdata-fr-MU",446:"cldrdata-fr-NC",447:"cldrdata-fr-NE",448:"cldrdata-fr-PF",449:"cldrdata-fr-PM",450:"cldrdata-fr-RE",451:"cldrdata-fr-RW",452:"cldrdata-fr-SC",453:"cldrdata-fr-SN",454:"cldrdata-fr-SY",455:"cldrdata-fr-TD",456:"cldrdata-fr-TG",457:"cldrdata-fr-TN",458:"cldrdata-fr-VU",459:"cldrdata-fr-WF",460:"cldrdata-fr-YT",461:"cldrdata-ga",462:"cldrdata-ga-IE",463:"cldrdata-he",464:"cldrdata-he-IL",465:"cldrdata-it",466:"cldrdata-it-CH",467:"cldrdata-it-IT",468:"cldrdata-it-SM",469:"cldrdata-ja",470:"cldrdata-ja-JP",471:"cldrdata-ko",472:"cldrdata-ko-KP",473:"cldrdata-ko-KR",474:"cldrdata-kok",475:"cldrdata-kok-IN",476:"cldrdata-ms",477:"cldrdata-ms-Latn",478:"cldrdata-ms-Latn-BN",479:"cldrdata-ms-Latn-MY",480:"cldrdata-ms-Latn-SG",481:"cldrdata-nb",482:"cldrdata-nb-NO",483:"cldrdata-nb-SJ",484:"cldrdata-nl",485:"cldrdata-nl-AW",486:"cldrdata-nl-BE",487:"cldrdata-nl-BQ",488:"cldrdata-nl-CW",489:"cldrdata-nl-NL",490:"cldrdata-nl-SR",491:"cldrdata-nl-SX",492:"cldrdata-nn",493:"cldrdata-nn-NO",494:"cldrdata-pl",495:"cldrdata-pl-PL",496:"cldrdata-pt",497:"cldrdata-pt-AO",498:"cldrdata-pt-BR",499:"cldrdata-pt-CV",500:"cldrdata-pt-GW",501:"cldrdata-pt-MO",502:"cldrdata-pt-MZ",503:"cldrdata-pt-PT",504:"cldrdata-pt-ST",505:"cldrdata-pt-TL",506:"cldrdata-ru",507:"cldrdata-ru-BY",508:"cldrdata-ru-KG",509:"cldrdata-ru-KZ",510:"cldrdata-ru-MD",511:"cldrdata-ru-RU",512:"cldrdata-ru-UA",513:"cldrdata-sv",514:"cldrdata-sv-AX",515:"cldrdata-sv-FI",516:"cldrdata-sv-SE",517:"cldrdata-th",518:"cldrdata-th-TH",519:"cldrdata-tr",520:"cldrdata-tr-CY",521:"cldrdata-tr-TR",522:"cldrdata-vi",523:"cldrdata-vi-VN",524:"cldrdata-zh",525:"cldrdata-zh-Hans",526:"cldrdata-zh-Hans-CN",527:"cldrdata-zh-Hans-HK",528:"cldrdata-zh-Hans-MO",529:"cldrdata-zh-Hans-SG",530:"cldrdata-zh-Hant",531:"cldrdata-zh-Hant-HK",532:"cldrdata-zh-Hant-MO",533:"cldrdata-zh-Hant-TW",534:"courses",535:"datepicker-locales",539:"vendors~app_develop"}[e]||e)+"-296dfe2f13e0e87f673a.js"}(e);var d=new Error;l=function(t){c.onerror=c.onload=null,clearTimeout(u);var s=r[e];if(0!==s){if(s){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",d.name="ChunkLoadError",d.type=n,d.request=i,s[1](d)}r[e]=void 0}};var u=setTimeout((function(){l({type:"timeout",target:c})}),12e4);c.onerror=c.onload=l,document.head.appendChild(c)}return Promise.all(t)},a.m=e,a.c=n,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(s,n,function(t){return e[t]}.bind(null,n));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=c;o.push(["e6ZA",112,538]),s()}({"+4Px":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"e",(function(){return a})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return c})),s.d(t,"i",(function(){return d})),s.d(t,"j",(function(){return u})),s.d(t,"l",(function(){return h})),s.d(t,"m",(function(){return m})),s.d(t,"p",(function(){return p})),s.d(t,"q",(function(){return g})),s.d(t,"r",(function(){return b})),s.d(t,"s",(function(){return f})),s.d(t,"t",(function(){return v})),s.d(t,"u",(function(){return S})),s.d(t,"v",(function(){return y})),s.d(t,"w",(function(){return C})),s.d(t,"h",(function(){return I})),s.d(t,"k",(function(){return $})),s.d(t,"o",(function(){return w})),s.d(t,"n",(function(){return T})),s.d(t,"x",(function(){return E})),s.d(t,"y",(function(){return k})),s.d(t,"A",(function(){return P})),s.d(t,"z",(function(){return A}));const n=8,i=188,r=46,o=40,a=35,l=13,c=27,d=36,u=37,h=110,m=108,p=34,g=33,b=190,f=39,v=32,S=9,y=38,C=48,I=53,$=57,w=96,T=105;function E(e){const t=e.keyCode;return t===y||t===o||t===u||t===f}function k(e){return e.keyCode===l||e.keyCode===m}function P(e){return e.keyCode===S&&!e.shiftKey}function A(e){return e.keyCode===S&&e.shiftKey}},"+IM5":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s("QLzv");var n=s("yCC5"),i=s("Rjd/"),r=s("nkTj"),o=s("zGdY");const a=n.Ub;i.a.factory(a,["restmod",r.d,e=>e.model().mix({ui:{init:()=>({rendered:!1})},$extend:{Record:{getContentIdForGoalAlignment(){return`blackboard.data.qti.asi.AsiObject;${this.id}`},getContentTitleForGoalAlignment(){return this.title},isCurrentUserEligibleToAlignGoals(){return this.permissions&&!0===this.permissions.edit},saveAlignedGoals(e){return e&&(this.alignedGoals=e.map(e=>({goalId:e.id,isVisibleToStudent:!0,goal:e}))),this.$send({method:"PATCH",url:this.$url(),data:{alignedGoals:this.alignedGoals,questionType:this.questionType}}).$then(()=>{this.$getPreviousVersion()&&(this.$getPreviousVersion().alignedGoals=this.alignedGoals)})},isPresentationOnly(){return o.QuestionType.PresentationOnly===this.questionType}},Collection:{getInsertIndex(e){let t=-1;const s=e.positionBefore,n=e.positionAfter;return null!=s&&(t="start"===s.toLowerCase()?0:this.indexOfItemById(s)),t<0&&null!=n&&("end"===n.toLowerCase()?t=this.length:(t=this.indexOfItemById(n))>=0&&t++),t},indexOfItemById(e){return this.$indexOf(t=>t.id===e)}}}})])},"+O05":function(e,t,s){"use strict";s.d(t,"g",(function(){return p})),s.d(t,"h",(function(){return g})),s.d(t,"c",(function(){return b})),s.d(t,"f",(function(){return f})),s.d(t,"d",(function(){return v})),s.d(t,"e",(function(){return S})),s.d(t,"b",(function(){return y})),s.d(t,"a",(function(){return C}));var n=s("D57K"),i=s("nsO7"),r=s("Llzl"),o=s("pjml"),a=s("12mu"),l=s("0JpG"),c=s("IbyE"),d=s("zGdY"),u=s("5Dl8"),h=s("aHpC"),m=s("klG7");const p="ultra.services.assessment",g="assessment",b="components.services.assessment.feedbackModeDisplay.noneSpecified",f="course.content.assessment.feedbackOption",v=[d.AssessmentFeedbackOption.UserAnswers,d.AssessmentFeedbackOption.InstructorFeedback,d.AssessmentFeedbackOption.Score,d.AssessmentFeedbackOption.CorrectAnswers],S={[d.AssessmentFeedbackOption.UserAnswers]:{visible:"visible",invisible:"invisible"},[d.AssessmentFeedbackOption.InstructorFeedback]:{visible:"feedback",invisible:"feedback"},[d.AssessmentFeedbackOption.Score]:{visible:"grade",invisible:"grade"},[d.AssessmentFeedbackOption.CorrectAnswers]:{visible:"check-circle",invisible:"check-circle"}};var y;!function(e){e.FOLDER="folder",e.ASSESSMENT="assessment",e.BANK="bank"}(y||(y={}));let C=class{constructor(e,t,s,n,i,r){this.modal=e,this.$rootScope=t,this.$q=s,this.localizeService=n,this.AttemptModel=i,this.GroupAttemptModel=r}static isAssessment(e){return o.p.ContentHandler.TestLink.isEqualTo(e.contentHandler)||o.p.ContentHandler.SurveyLink.isEqualTo(e.contentHandler)}static isExternalSubmissionsAssessment(e){return c.ContentHelper.isExternalSubmissionsAssessment(e)}static isExternalSubmissionByDeployedAssessment(e){var t;return!!(null===(t=null==e?void 0:e.deploymentSettings)||void 0===t?void 0:t.isCollectExternalSubmissions)}static getQuestionsForAttempt(e,t){if(!e.getToolAttemptDetailItem(t))return[];const s=e.getToolAttemptDetailItem(t).questionAttempts;return s&&s.length>0?s.map(e=>e.question):[]}static studentCanViewAttemptGradeAndFeedback(e,t){return t?!!(e&&e.isSubmitted()&&t.isPosted()):this.studentCanViewAttemptResults(e)}static studentCanViewAttemptResults(e){return!!(null==e?void 0:e.isCompleted())}static attemptHasFeedback(e){const t=e&&e.getFeedbackToUser();return!!t&&!!t.rawText}static groupAttemptHasIndividualFeedback(e){const t=e&&e.attempts&&e.attempts[0].getGroupIndividualFeedbackToUser();return!!t&&!!t.rawText}static canViewAssessmentException(e,t,s,n){return!e&&!t&&s&&!n}static getSubmissionListAllExceptions(e,t){return null==e||null==t?null:e.assessments.$buildRaw(t.getDeployedAssessment().assessment).exceptions.$resolve().$allow([404]).$asPromise()}static initAssessmentExceptionsIndicators(e,t){if(null==e||null==t||void 0===t.getDeployedAssessment())return null;const s={},n=e.assessments.$buildRaw(t.getDeployedAssessment().assessment);return this.getSubmissionListAllExceptions(e,t).then(t=>{const i=this.setAssessmentExceptionStyleTag(n.id)();return t.length&&t.forEach(t=>{this.setAssessmentExceptionClass(i,e.id,t,!0,s)}),i})}static updateAssessmentExceptionIndicator(e,t,s=!0,n){if(null==e||null==t)return;const i=e.assessments.$buildRaw(t.getDeployedAssessment().assessment),r=this.setAssessmentExceptionStyleTag(i.id)();this.setAssessmentExceptionClass(r,e.id,n,s)}static setAssessmentExceptionStyleTag(e){const t="css_assessment_exceptions"+e;return i.once(()=>{let e=r.element(document).find(`#${t}`);return 0===e.length&&(e=r.element(`<style id="${t}"></style>`).appendTo("head")),e})}static setAssessmentExceptionClass(e,t,s,n=!0,r){const o=new u.a,a=n?"inline-block":"none",l=s.target.id,c=s.target.type;let h;c===d.AssessmentExceptionTypePubV1.User&&o.selector(`.cc${t} .assessment-exception bb-username.course_user${l}:before`).rule("display",a),c===d.AssessmentExceptionTypePubV1.Group&&(o.selector(`.cc${t} .assessment-exception .show-exceptions.submission_row_group${l}:before`).rule("display",a),o.selector(`.cc${t} .slick_title${l} .assessment-exception .show-exceptions:before`).rule("display",a),o.selector(`.cc${t} .assign_group${l}.show-exceptions:before`).rule("display",a)),r&&(r[l]=o.build(),h=i(r).sortBy().map((e,t)=>e).join("\n")),h&&h!==e.text()&&e.text(h),h||(h=e.text(),e.text([h,o.build()].join("\n")))}static getSubmissionRowException(e,t,s,n){const i=e.assessments.$buildRaw(t.getDeployedAssessment().assessment);return s===d.AssessmentExceptionTypePubV1.Group?i.groupExceptions.$new(n).$resolve().$allow([404]).$asPromise():s===d.AssessmentExceptionTypePubV1.User?i.userExceptions.$new(n).$resolve().$allow([404]).$asPromise():void 0}static deleteException(e,t,s,n){const i=e.assessments.$buildRaw(t.getDeployedAssessment().assessment);return s===d.AssessmentExceptionTypePubV1.User?i.userExceptions.$new(n).deleteException():s===d.AssessmentExceptionTypePubV1.Group?i.groupExceptions.$new(n).deleteException():void 0}static setSubmissionRowException(e,t,s,n,i){const r=e.assessments.$buildRaw(t.getDeployedAssessment().assessment),o={start:i.start,end:i.end,attempts:i.attempts};return s===d.AssessmentExceptionTypePubV1.User?r.userExceptions.$new(n).saveException(o):s===d.AssessmentExceptionTypePubV1.Group?r.groupExceptions.$new(n).saveException(o):void 0}static isFeedbackOptionEnabled(e,t){const{mode:s}=c.FeedbackSettings.getFeedbackModeByOption(e,t);return null!=s}isUserAnswersOption(e){return e===d.AssessmentFeedbackOption.UserAnswers}getFeedbackModeLabelByOption(e,t){const{mode:s,associatedDate:n}=c.FeedbackSettings.getFeedbackModeByOption(e,t);return s?this.localizeService.loadBundle("components/services/assessment").then(()=>{switch(s){case d.AssessmentFeedbackMode.AfterAttemptGraded:return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"components.services.assessment.feedbackModeDisplay.afterPosted"});case d.AssessmentFeedbackMode.AfterDueDate:return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"components.services.assessment.feedbackModeDisplay.afterDueDate"});case d.AssessmentFeedbackMode.AfterSubmission:{const t=e===d.AssessmentFeedbackOption.Score||e===d.AssessmentFeedbackOption.CorrectAnswers;return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:t?"components.services.assessment.feedbackModeDisplay.afterIndividualGradePosted":"components.services.assessment.feedbackModeDisplay.afterSubmission"})}case d.AssessmentFeedbackMode.OnSpecifiedDate:return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"components.services.assessment.feedbackModeDisplay.onSpecificDate",params:{date:n},noWrap:!0});case d.AssessmentFeedbackMode.AfterIndividualGradeIsPosted:return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"components.services.assessment.feedbackModeDisplay.afterIndividualGradePosted"});default:console.error(`Feedback mode: ${s} is not yet supported`)}}):this.$q.resolve(null)}getFeedbackModeLabels(e,t){const s=e.map(e=>this.getFeedbackModeLabelByOption(e,t));return this.$q.all(s)}isAfterIndividualGradeIsPostedFeedbackMode(e,t){switch(e){case d.AssessmentFeedbackOption.UserAnswers:return c.FeedbackSettings.getFeedbackModeByOption(e,t).mode===d.AssessmentFeedbackMode.AfterIndividualGradeIsPosted;case d.AssessmentFeedbackOption.CorrectAnswers:case d.AssessmentFeedbackOption.Score:return c.FeedbackSettings.getFeedbackModeByOption(e,t).mode===d.AssessmentFeedbackMode.AfterSubmission;default:return!1}}isAfterAllGradesArePostedFeedbackMode(e,t){return c.FeedbackSettings.getFeedbackModeByOption(e,t).mode===d.AssessmentFeedbackMode.AfterAttemptGraded}isExternallyRefQuestionsAPIError(e){return 409===e.status&&i.includes(e.code,d.ASSESSMENT_EXTERNALLY_REF_QUESTION_ERROR_CODE)}openHasExternallyRefQuestionsModal(e){const t=this.$rootScope.$new();t.translateOpts={title:{key:`components.services.assessment.modal.error-external-questions.${e.toString()}.title`}},t.descriptionKey=`components.services.assessment.modal.error-external-questions.${e.toString()}.description`;const s={scope:t,template:m,resolve:{translations:[l.serviceName,e=>e.loadBundle("components/services/assessment")]}};this.modal.open(s)}launchAttempt(e,t,s,n){const i={scoreProviderHandle:c.ScoreProviderHandle.Test,status:d.AttemptStatus.InProgress,toolAttemptDetail:{"resource/x-bb-assessment":{type:d.AssessmentType.Test,password:t}}},r=s?this.GroupAttemptModel.$build(i):this.AttemptModel.$build(i);return e.launchAttempt(r,{},s,n).then(e=>{var t,s;return(null===(s=null===(t=null==e?void 0:e.$response)||void 0===t?void 0:t.data)||void 0===s?void 0:s.status)===d.HttpStatus.Forbidden?e.$asPromise():e.$fetch({expand:"toolAttemptDetail,alignedGoals"}).$asPromise()})}};C=Object(n.__decorate)([Object(n.__param)(0,Object(h.b)(a.b)),Object(n.__param)(1,Object(h.b)("$rootScope")),Object(n.__param)(2,Object(h.b)("$q")),Object(n.__param)(3,Object(h.b)(l.serviceName)),Object(n.__param)(4,Object(h.b)(o.A.serviceName)),Object(n.__param)(5,Object(h.b)(o.E.serviceName))],C);class I extends C{}r.module(p,[a.a]).service(g,C)},"+brj":function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),s.d(t,"c",(function(){return h})),s.d(t,"a",(function(){return m}));s("qY1S");var n=s("Llzl"),i=s("nbDY"),r=s.n(i),o=s("dzwE"),a=s("Ymz8"),l=s("Fvsw"),c=s("TnpK"),d=s("fYJU");const u="ultra.components.services.browserStorage",h="browserStorage";class m extends r.a{}m.LocalStorage=new m("localStorage"),m.SessionStorage=new m("sessionStorage");class p{constructor(e,t,s,n,i,r){this.$rootScope=e,this.$q=t,this.DSCacheFactory=s,this.context=n,this.ultraState=i,this.contextUser=r,this.QUOTA_EXCEEDED_ERR=22,this.QUOTA_EXCEEDED_ERR_FIREFOX=22,this.BROWSER_STORAGE_PREFERENCE_KEY="ultraui.browserstorage.key",this.CACHE_PREFIX="ultraui.browserstorage",this.sjcl=a,this.crypto=window.crypto,this.BROWSER_STORAGE_RECORD_MAX_AGE=864e5,this.BROWSER_STORAGE_RECORD_MAX_COUNT=10,this._isEncryptNativeSupported=(()=>this.crypto&&this.crypto.subtle?this.crypto.subtle.digest({name:"SHA-256"},this._stringToArrayBuffer("x")).then(()=>this.$q.when(!0)).catch(()=>this.$q.when(!1)):this.$q.when(!1))()}serializeCurrentRouteScopes(e,t){return this.saveToStorage(this._getCurrentRouterStateObject(),t,e,(function(e,t){if(!(t&&t instanceof Array&&t.length>=1e9)&&"_userModel"!==e&&(t&&t.$type&&t.$type===t.constructor&&"$pk"in t&&(t.ui.isRestModObject=!0),("_"!==e[0]||this.ui&&!0===this.ui.isRestModObject||t&&t.ui&&!0===t.ui.isRestModObject)&&("$"!==e[0]||-1!==["$viewValue","$modelValue"].indexOf(e))))return t}))}deserializeCurrentRouteScopes(e,t){return this.getFromStorage(this._getCurrentRouterStateObject(),e)}deleteCurrentRouteScopes(e){return this.deleteFromStorage(this._getCurrentRouterStateObject(),e)}_getCurrentRouterStateObject(){return{componentState:this.ultraState.current.name.slice(this.ultraState.getBaseState().length+1),stateParams:this.ultraState.getCurrentUrlParams()}}saveToStorage(e,t,s,n){const i=this._getBrowserStorageCache(s);i.removeExpired();const r=o.stringify(t,n);return this._getUserEncryptionPassword().then(t=>this._encrypt(t,r).then(t=>{try{return i.put(this._toSortedKeyJSON(e),t)}catch(e){e.code&&e.code===this.QUOTA_EXCEEDED_ERR||e.code===this.QUOTA_EXCEEDED_ERR_FIREFOX?console.warn("Local storage is at capacity",e):console.warn("Local storage not permitted.",e),this.saveToStorage=(e,t,s)=>this.$q.when(void 0)}}))}getFromStorage(e,t,s){const n=this._getBrowserStorageCache(t).get(this._toSortedKeyJSON(e));return null!=n?this._getUserEncryptionPassword().then(e=>this._decrypt(e,n).then(e=>o.parse(e,s))):this.$q.when(void 0)}updateStorageKey(e,t,s,n){return this.getFromStorage(e,s).then(i=>{this.deleteFromStorage(e,s);const r=n||i;if(r)return this.saveToStorage(t,r,s)})}deleteFromStorage(e,t){const s=this._getBrowserStorageCache(t);return s.removeExpired(),!!s.remove(this._toSortedKeyJSON(e))}_toSortedKeyJSON(e){return JSON.stringify(e,(e,t)=>"object"!=typeof t?t:Object.keys(t).sort().reduce((e,s)=>(e[s]=t[s],e),{}))}_getBrowserStorageCache(e){const t=this.CACHE_PREFIX+"."+e.toString()+"."+this.contextUser.userId;let s=this.DSCacheFactory.get(t);if(!s)switch(e){case m.LocalStorage:s=this.DSCacheFactory.createCache(t,{capacity:this.BROWSER_STORAGE_RECORD_MAX_COUNT,maxAge:this.BROWSER_STORAGE_RECORD_MAX_AGE,storageMode:m.LocalStorage.toString()});break;case m.SessionStorage:s=this.DSCacheFactory.createCache(t,{capacity:this.BROWSER_STORAGE_RECORD_MAX_COUNT,storageMode:m.SessionStorage.toString()})}return s}_getUserEncryptionPassword(){this._sjclForceReady();const e=this.sjcl.codec.base64.fromBits(this.sjcl.random.randomWords(6));return this.storageKeyPromise=this.storageKeyPromise||this.context.getPreference(this.BROWSER_STORAGE_PREFERENCE_KEY,e).then(e=>(e.value&&!e.$resolved&&e.$save(),e.value))}_sjclForceReady(){if(!this.sjcl.random.isReady()){const e=[];for(let t=0;t<32;t++)e.push(Math.floor(4294967296*Math.random()));this.sjcl.random.addEntropy(e,1024,"IE10 fallback entrophy")}}_encrypt(e,t){return this._isEncryptNativeSupported.then(s=>s?this._subtleCryptoEncrypt(e,t).then(e=>({SubtleCryptoEncrypted:e})):this.$q.when(this.sjcl.encrypt(e,t)).then(e=>({SjclCipherEncrypted:e})))}_decrypt(e,t){return this._isEncryptNativeSupported.then(s=>s?this._subtleCryptoDecrypt(e,t.SubtleCryptoEncrypted):this.$q.when(this.sjcl.decrypt(e,t.SjclCipherEncrypted)))}_subtleCryptoEncrypt(e,t){return this._subtleCryptoGetPasswordKey(e).then(e=>{const s=this.crypto.getRandomValues(new Uint8Array(16));return this.crypto.subtle.encrypt({name:"AES-CBC",iv:s},e,this._stringToArrayBuffer(t)).then(e=>({vector:this._arrayBufferToBase64(s),encrypted:this._arrayBufferToBase64(e)}))})}_subtleCryptoDecrypt(e,t){return this._subtleCryptoGetPasswordKey(e).then(e=>{const s=this._base64ToArrayBuffer(t.vector);return this.crypto.subtle.decrypt({name:"AES-CBC",iv:s},e,this._base64ToArrayBuffer(t.encrypted)).then(e=>this._arrayBufferToString(e))})}_subtleCryptoGetPasswordKey(e){return this.crypto.subtle.digest({name:"SHA-256"},this._stringToArrayBuffer(e)).then(e=>this.crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["encrypt","decrypt"]))}_arrayBufferToString(e,t){const s=t&&new Uint8Array(e)||new Uint16Array(e);let n="";for(let e=0;e<s.length;e++)n+=String.fromCharCode(s[e]);return n}_arrayBufferToBase64(e){return window.btoa(this._arrayBufferToString(e,!0))}_stringToArrayBuffer(e,t){const s=t&&new ArrayBuffer(e.length)||new ArrayBuffer(2*e.length),n=t&&new Uint8Array(s)||new Uint16Array(s);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return s}_base64ToArrayBuffer(e){return this._stringToArrayBuffer(window.atob(e),!0)}}p.$inject=["$rootScope","$q","DSCacheFactory",l.b,c.d,d.b];class g extends p{}n.module(u,["angular-data.DSCacheFactory",l.a,c.b]).service(h,p)},"+e2k":function(e,t,s){"use strict";var n,i,r=s("D57K"),o=(s("DlnX"),s("yC9S")),a=s("aHpC");!function(e){e[e.LeftToRight=0]="LeftToRight",e[e.Bidirectional=1]="Bidirectional"}(n||(n={})),function(e){e.Small="small",e.Medium="medium",e.Large="large",e.Custom="custom"}(i||(i={}));const l={directionality:n.Bidirectional},c=e=>e.reduce((e,t)=>({...e,[t]:{...l}}),{}),d={[i.Small]:c(["peer-review","history","time","timer","reminder","add-reminder","no-time-limit","faster","slower","help","information","search","accommodation","away","add-circle-extended","invisible","netstats-unavailable","text","camera","type-size","close-captioning","bulk-edit","draw","edit","highlighter","erase","link","unlinked","check","attempts","attendance","square-checked","complete","play-start","volume-low","volume-medium","volume-mute","volume","mute-audio","telephony","mute-phone","audio","collab","collab-off","mute-video","record","recording","stop-recording","video","start","stop","raise-hands","lower-hand","hand-pointer","approval","disapproval","status-approval","edit-tool","course-complete","notes","safe-assign","app","broken-app","custom-content","whiteboard","format_text_default","format_text","italicize_default","italicize","subscript_default","subscript","superscript_default","superscript","underline_default","underline","bold_default","bold","calculation","strikethrough","insert_formula"]),[i.Medium]:c(["peer-review","hand-raise","shape-line","history","time","timer","reminder","add-reminder","no-time-limit","help","help-circle","information","search","zoom-in","zoom-out","exempt","disabled","status-away","invisible","risk-low","text","camera","capture","type-size","close-captioning","download-captions","link","pencil","highlighter","erase","tools","pen","brush","check","check-circle","attempts","audio-mute","cam-mic","audio","telephony","mute-phone","hang-up","sound-on","sound-off","collab","download-recording","video","record","stop-recording","video","video-mute","stop-action","play-start","raise-hand","lower-hand","hand-pointer","pan","asl-interpreter","edit-tool","course-complete","content-view","safe-assign","grades","attendance","wiki","app","app-off","calculation","whiteboard"]),[i.Large]:c(["app-c","attendance-a","attendance","audio-a","audio-c","audio","calculation-a","calculation-c","calculation","certification-a","certification-c","certification","check-circle-c","check-circle","collaborate-a","collaborate-c","collaborate","coming-soon","course-complete","database-connected","diploma-a","diploma-c","diploma","field-work-a","field-work-c","field-work","fill-in-the-blank-a","fill-in-the-blank","grades-a","grades-c","grades","help-a","help-c","help","information","raise-hand-a","raise-hand-c","raise-hand","record-a","record-c","record","reminder-a","reminder-c","reminder","rubric-a","rubric-c","rubric","scormengine-a","scormengine-sco-a","scormengine-sco","scormengine","stop-recording-a","stop-recording-c","stop-recording","support-document-a","support-document-c","support-document","technical-diploma-a","technical-diploma-c","technical-diploma","text-box-a","text-box","timer-a","timer-c","timer","video-a","video-c","video","whiteboard-a","whiteboard-c","whiteboard","wiki-a","wiki-c","wiki"]),[i.Custom]:{}};var u=s("ZzR9");s.d(t,"a",(function(){return m}));const h=["active","alert","success","warning"],m="ultra.components.directives.svgIcon";let p=class{constructor(e,t){this.$rootScope=e,this.$element=t}$onInit(){this.windowHref=window.location.href,this.updateIconState(),this.setStatusStyles(),this.destroyLocationChangeListener=this.$rootScope.$on(u.a.$locationChangeSuccess,()=>{this.windowHref=window.location.href,this.updateIconState()})}$onChanges(){this.updateIconState()}$onDestroy(){this.destroyLocationChangeListener()}updateIconState(){var e,t;this.directionalStyles=(null===(t=null===(e=d[this.size])||void 0===e?void 0:e[this.icon])||void 0===t?void 0:t.directionality)===n.Bidirectional?"":"directional-icon",this.iconHref=`${this.windowHref}#icon-${this.size}-${this.icon}`}setStatusStyles(){this.color?this.statusStyles="color":null!=h.find(e=>this.status)?this.statusStyles=this.status:this.statusStyles="default"}};p=Object(r.__decorate)([Object(o.a)({moduleName:m,componentName:"bbSvgIcon",template:'\n    <svg\n      class="svg-icon svg-icon-directive {{::$ctrl.size}}-icon {{::$ctrl.statusStyles}} {{\n        $ctrl.directionalStyles\n      }}"\n      focusable="false"\n      aria-hidden="true"\n      bb-cache-compilation="svg-icon"\n    >\n      <use xlink:href="" ng-href="{{ $ctrl.iconHref }}"></use>\n    </svg>\n  ',bindings:{icon:"@",color:"<",size:"@",status:"@"}}),Object(r.__param)(0,Object(a.b)("$rootScope")),Object(r.__param)(1,Object(a.b)("$element"))],p)},"+g6d":function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return r}));s("MFWY");var n=s("Llzl"),i=s("lEL+");const r="ultra.components.directives.clickToInvokeChild",o="bbClickToInvokeChild";class a{constructor(t,s,n,i){if(this.scope=t,this.element=s,this.attrs=n,this.timeout=i,this.linkSelector=n[o],!this.linkSelector&&void 0!==this.linkSelector)throw new Error(o+" has no child selector specified.");this.setClickableStyle(),t.$on("click-to-invoke-child-directive-init",()=>{this.setClickableStyle()}),s.on("click",t=>{if(!e(t.target).closest("a, button, [ng-click], .stop-click-propagation, [bb-click-to-invoke-child]",this.element.get(0)).length){const e=this.element.find(this.linkSelector).get(0);e&&(e.click(),n.stopPropagation&&"true"===n.stopPropagation&&t.stopPropagation())}})}setClickableStyle(){this.timeout(()=>{this.element.find(this.linkSelector).first().length?(void 0===this.element.attr("tabindex")&&this.element.attr("tabindex","-1"),this.element.addClass("child-is-invokable")):(this.element.removeAttr("tabindex"),this.element.removeClass("child-is-invokable"))},this.scope,0,!1)}}a.$inject=["scope","element","attrs",i.b];class l{constructor(e){this.$injector=e,this.scope=!1,this.restrict="A",this.link=(e,t,s)=>{this.$injector.instantiate(a,{scope:e,element:t,attrs:s})}}}l.$inject=["$injector"],n.module(r,[i.a]).directive(o,["$injector",e=>e.instantiate(l)])}).call(this,s("5iHu"))},"/J7e":function(e,t,s){"use strict";function n(e){if(null==e)return!1;if("boolean"==typeof e)return e;if("string"==typeof e){const t=e.trim();return"true"===t.toLowerCase()||"1"===t}if("number"==typeof e)return 0!==e;throw new Error('Cannot convert "'+e+'" to boolean')}s.d(t,"a",(function(){return n}))},"/KQw":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("Llzl");const i="ultra.components.directives.cacheCompilation";class r{constructor(e){this.$compile=e,this.compiled=Object.create(null),this.priority=2e3}compile(e,t){const s=t.bbCacheCompilation;if(!s)throw new Error("Cache compilation key is required");const n=e.contents();return e.empty(),null==this.compiled[s]&&(this.compiled[s]=this.$compile(n)),(e,t)=>{this.compiled[s](e,(function(e,s){t.append(e)}))}}}r.$inject=["$compile"],n.module(i,[]).directive("bbCacheCompilation",["$injector",e=>e.instantiate(r)])},"/jNt":function(e,t,s){"use strict";s("t04/"),s("kH1j");var n=s("Llzl"),i=s("UP3t"),r=s("pjml"),o=s("z6Q5"),a=s("TnpK"),l=s("gkef"),c=s("ZzYr"),d=s("0JpG");s.d(t,"c",(function(){return u})),s.d(t,"a",(function(){return h})),s.d(t,"b",(function(){return m}));const u="ultra.directives.courseCatalogLink",h="course",m="org",p="ultraui.coursecatalog.link",g="classic_course_catalog_link_ind",b="classic_course_catalog_link",f={[p]:"Disabled",[g]:"N",[b]:""};class v{constructor(e,t,s,n,r,o,a,l){this.scope=e,this.attrs=t,this.$q=s,this.SystemPreferenceModel=n,this.batchService=r,this.ultraState=o,this.windowSizeService=a,this.bbLocalize=l,this.template=i,r.performBatch(()=>{s.all([n.$find(p).$allow([404]).$asPromise(),n.$find(g).$allow([404]).$asPromise(),n.$find(b).$allow([404]).$asPromise()]).then(e=>{this.handleSystemPreferencesResponse(e)})});const c=t.catalogType===m?"base.organization-catalog":"base.course-catalog";e.handleCatalogLink=()=>{o.goToRoute(c)},e.windowSizeService=a,a.isLargeBreakpoint()||this.bbLocalize.loadBundle("base/baseCourses").then(()=>{e.ariaLabel=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"base.baseCourses.link"})})}handleSystemPreferencesResponse(e){const t=this.getPreferenceValueByKey(e,p)||f[p];this.scope.shouldDisplayCatalogLink="Enabled"===t;const s=this.getPreferenceValueByKey(e,g)||f[g];this.scope.isExternalCatalog="Y"===s,this.scope.externalCatalogUrl=this.getPreferenceValueByKey(e,b)||f[b]}getPreferenceValueByKey(e,t){const s=e.find(e=>e.key===t);return s?s.value:null}}v.$inject=["scope","attrs","$q",r.qb.serviceName,o.b,a.d,l.b,d.serviceName];class S{constructor(e){this.$injector=e,this.template=i,this.link=(e,t,s)=>{e.courseCatalogLink=this.$injector.instantiate(v,{scope:e,element:t,attrs:s})}}}S.$inject=["$injector"],n.module(u,[r.N,o.a,a.b,l.a,c.a]).directive("bbCourseCatalogLink",["$injector",e=>e.instantiate(S)])},"/qpZ":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("Llzl"),i=s("+4Px");const r="ultra.directives.accessibility.keyboardEnter";class o{constructor(){this.restrict="A",this.link=(e,t,s)=>{t.on("keydown keypress",n=>{n.keyCode===i.f&&(s.bbBlurBeforeEnter&&t.blur(),e.$apply((function(){e.$eval(s.bbKeyboardEnter,{$event:n})})),n.preventDefault())})}}}n.module(r,[]).directive("bbKeyboardEnter",["$injector",e=>e.instantiate(o)])},0:function(e,t){},"0+Qs":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("Llzl"),i=s("5MwF");const r="ultra.services.interval",o="interval";n.module(r,[]).factory(o,["$interval",e=>{const t=(t,s,n,r,o)=>{if(!i.a.production&&n<5e3&&!r&&(null==o||o)){if(n<1e3)throw new Error("Short duration interval, repeating indefinitely, which invokes apply was registered!");console.warn("Short duration interval, repeating indefinitely, which invokes apply was registered!\n"+(new Error).stack)}const a=e(t,n,r,o);return a.__bb_unregister_scope_destroy__=s.$on("$destroy",()=>{e.cancel(a)}),a};return t.cancel=t=>{t&&t.__bb_unregister_scope_destroy__&&(t.__bb_unregister_scope_destroy__(),t.__bb_unregister_scope_destroy__=null),e.cancel(t)},t}])},"07uq":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("Llzl");const i="ultra.directives.bbMouseLeaveEnter";class r{constructor(e){this.$rootScope=e,this.restrict="A",this.link=(e,t,s)=>{const n=()=>{e.$apply(()=>{this.$rootScope.$broadcast(s.bbMouseLeaveEnter+"-mouse-enter")})},i=()=>{e.$apply(()=>{this.$rootScope.$broadcast(s.bbMouseLeaveEnter+"-mouse-leave")})};e.$on("$destroy",()=>{t.off("mouseenter",n),t.off("mouseleave",i)}),t.on("mouseenter",n),t.on("mouseleave",i)}}}r.$inject=["$rootScope"],n.module(i,[]).directive("bbMouseLeaveEnter",["$injector",e=>e.instantiate(r)])},"0B2D":function(e,t){e.exports='<bb-modal class="notification" modal-title-key="course.content.assessment.alreadySubmitted.title"\n  analytics-id-tag-prefix="course.content.assessment.alreadySubmitted">\n  <div name="modal-contents">\n    <p bb-translate>course.content.assessment.alreadySubmitted.backend</p>\n  </div>\n  <button name="modal-footer-button-primary" ng-click="$parent.$close(); customClose();"\n    class="button confirm-ok js-primary-button ng-scope" bb-translate\n    analytics-id="course.content.groupAttempt.edit.alreadySubmitted.dismiss">\n    course.content.groupAttempt.edit.alreadySubmitted.dismiss\n  </button>\n</bb-modal>\n'},"0JpG":function(e,t,s){"use strict";s.d(t,"moduleName",(function(){return h})),s.d(t,"serviceName",(function(){return m})),s.d(t,"providerName",(function(){return p})),s.d(t,"localeQuerystringRegex",(function(){return g})),s.d(t,"Service",(function(){return v}));var n=s("D57K"),i=s("nsO7"),r=s("Llzl"),o=s("5MwF"),a=s("lAEu"),l=s("n7/H"),c=s("m2oH"),d=s("C3Ga"),u=s("tfZW");s.o(l,"ILocaleComposedDurationFormat")&&s.d(t,"ILocaleComposedDurationFormat",(function(){return l.ILocaleComposedDurationFormat})),s.o(l,"ILocaleDateFormat")&&s.d(t,"ILocaleDateFormat",(function(){return l.ILocaleDateFormat})),s.o(l,"ILocaleDatetimeFormat")&&s.d(t,"ILocaleDatetimeFormat",(function(){return l.ILocaleDatetimeFormat})),s.o(l,"ILocaleTimeFormat")&&s.d(t,"ILocaleTimeFormat",(function(){return l.ILocaleTimeFormat})),s.o(l,"ILocaleTimezoneFormat")&&s.d(t,"ILocaleTimezoneFormat",(function(){return l.ILocaleTimezoneFormat})),s.o(l,"LocaleCategory")&&s.d(t,"LocaleCategory",(function(){return l.LocaleCategory})),s.o(l,"PreferredDisplayName")&&s.d(t,"PreferredDisplayName",(function(){return l.PreferredDisplayName})),s.d(t,"ILocaleUsernameFormat",(function(){return l.ILocaleUsernameFormat}));const h="ultra.services.BbLocalize",m="bbLocalize",p=m+"Provider",g=/setLang=([^&]*)/,b=function(e,t,s){const n=s.value;s.value=function(...e){return this.$q.when(n.apply(this,e))}};class f{constructor(e,t){this.$q=e,this.$rootScope=t,this.defaultLocale="en",this.percentageFormatters={},this.currencyFormatters={},this.bundlePromises={},this.intl=d.a.getInstance(),this.frmt=new a.a(this.intl,{production:f.production,urlRoot:f.urlRoot,defaultLocale:this.defaultLocale}),this.overrideLoader=u.a.getInstance()}isRTL(e){if(!o.a.features.rightToLeftSupport)return!1;const t=this.getAppLocale();return Object(c.a)(t)}getDecimalStringForScope(e){const t=this.getLocale(e);return this.frmt.number.getDecimalStringSync(t)}getGroupingStringForScope(e){const t=this.getLocale(e);return this.frmt.number.getGroupingStringSync(t)}isValidNumber(e,t){const s=this.getLocale(t);return this.frmt.number.isValidSync(e,s)}loadBundle(e,t){null==t&&(t=this.getLocale(null));const s="locales/[locale]/"+e+".json";return this.intl.addBundles(s),this.intl.loadBundles(t)}loadAllBundles(e){return this.intl.loadBundles(e)}insertLocaleData(e,t){return this.intl.storeLocaleData(e,t)}resetLocaleData(){return this.intl.reset()}translateSync(e){let t=e?{...e.params}:{};return Object.keys(t).forEach(e=>{void 0===t[e]&&(t[e]="")}),t=this.frmt.processTranslationParams(t,{locale:e.locale,noWrap:e.noWrap,noEscape:e.noEscape}),this.intl.translateSync(e.locale||this.getLocale(null),e.key,t)}translate(e){let t=e?e.params:{};return t=this.frmt.processTranslationParams(t,{locale:e.locale,noWrap:e.noWrap,noEscape:e.noEscape}),this.intl.translate(e.locale||this.getLocale(null),e.key,t)}_getFormatter(e){return this.frmt.getFormatterSync(e)}getAppLocale(){return this.intl.normalizeLocale(this.getUserLocale()||this.defaultLocale)}getAppLocaleISO(){return this.getUserLocale()||this.defaultLocale}getLocale(e){if(!e)return this.getAppLocale();let t=e.locale;for(;!t&&e.$parent;)t=(e=e.$parent).locale;return this.intl.normalizeLocale(t)||this.getAppLocale()}getUserLocale(){return this.userLocale}preProcessFormatterLocale(e){return this.frmt.preProcessFormatterLocale(e)}getPreferredLocales(e){return this.intl.normalizeLocales(this.frmt.getPreferredLocales(e))}validateLocale(e){try{this.intl.getMf("isLocaleExists",this.intl.normalizeLocale(e))}catch(e){return!1}return!0}setLocale(e,t){return t||(t=this.getAppLocale()),e&&(e.locale=t),this.loadLocale(t).then(()=>{this.$rootScope.$broadcast("$translateChangeSuccess",{language:t})})}setUserLocale(e){this.userLocale=e}setSystemDefaultLocale(e){this.defaultLocale=e}addOverride(e,t){this.overrideLoader.addOverrideBundle(e,t)}loadLocale(e){return this.frmt.loadLocale(e)}formatNumber(e,t,s){const n=this.getLocale(t);return this.frmt.number.format(e,n,s)}formatNumberSync(e,t,s){const n=this.getLocale(t);return this.frmt.number.formatSync(e,n,s)}regroupNumber(e,t){const s=this.getLocale(t);return this.frmt.number.regroup(e,s)}regroupNumberSync(e,t){const s=this.getLocale(t);return this.frmt.number.regroupSync(e,s)}parseNumber(e,t){const s=this.getLocale(t);return this.frmt.number.parse(e,s)}parseNumberSync(e,t){const s=this.getLocale(t);return this.frmt.number.parseSync(e,s)}formatDate(e,t,s){const n=this.getLocale(s);return this.frmt.datetime.formatDate(e,t,n)}formatDateSync(e,t,s){const n=this.getLocale(s);return this.frmt.datetime.formatDateSync(e,t,n)}parseDate(e,t,s,n){const i=this.getLocale(s);return this.frmt.datetime.parseDate(e,t,i,n)}parseDateSync(e,t,s,n){const i=this.getLocale(s);return this.frmt.datetime.parseDateSync(e,t,i,n)}formatTime(e,t,s){const n=this.getLocale(s);return this.frmt.datetime.formatTime(e,t,n)}formatTimeSync(e,t,s){const n=this.getLocale(s);return this.frmt.datetime.formatTimeSync(e,t,n)}getDayPeriodsFormatSync(e){return this.frmt.getFormatterSync(e).cldr.main("dates").calendars.gregorian.dayPeriods.format.abbreviated}getTimePattern(e,t){const s=this.getLocale(t);return this.frmt.datetime.getTimePattern(e,s)}getTimePatternSync(e,t){const s=this.getLocale(t);return this.frmt.datetime.getTimePatternSync(e,s)}parseTime(e,t,s,n){const i=this.getLocale(s);return this.frmt.datetime.parseTime(e,t,i,n)}parseTimeSync(e,t,s,n){const i=this.getLocale(s);return this.frmt.datetime.parseTimeSync(e,t,i,n)}formatDatetime(e,t,s){const n=this.getLocale(s);return this.frmt.datetime.formatDatetime(e,t,n)}formatDatetimeSync(e,t,s){const n=this.getLocale(s);return this.frmt.datetime.formatDatetimeSync(e,t,n)}formatDurationBetweenSync(e,t,s,n){const i=this.getLocale(s);return this.frmt.datetime.formatDurationBetweenSync(e,t,i,n)}formatDuration(e,t,s,n){const i=this.getLocale(t);return this.frmt.datetime.formatDuration(e,i,s,n)}formatComposedDurationSync(e,t,s){const n=this.getLocale(s);return this.frmt.datetime.formatComposedDurationSync(e,t,n)}formatTimezone(e,t,s){const n=this.getLocale(s);return this.frmt.datetime.formatTimezone(e,t,n)}formatTimezoneSync(e,t,s){const n=this.getLocale(s);return this.frmt.datetime.formatTimezoneSync(e,t,n)}formatUsername(e,t,s,n){const i=this.getLocale(s);return this.frmt.username.format(e,t,i,n)}formatUsernameSync(e,t,s,n){const i=this.getLocale(s);return this.frmt.username.formatSync(e,t,i,n)}formatUsernameList(e,t,s,n){const i=this.getLocale(s);return this.frmt.username.formatList(e,t,i,n)}formatItems(e,t,s,n,i){const r=this.getLocale(s);return this.frmt.items.format(e,e.length,t,r,n,i)}formatItemsSync(e,t,s,n,i,r){const o=this.getLocale(n);return this.frmt.items.formatSync(e,t,s,o,i,r)}getFormatEnum(e,t){if(!t)return null;const s=e[t=t.charAt(0).toUpperCase()+t.slice(1)];if(null==s)throw new Error("Invalid format `"+t+"` is used");return s}getFormatId(e,t){if(null==t)return 0;const s=e[t=t.charAt(0).toUpperCase()+t.toLowerCase().slice(1)];if(null==s)throw new Error("Invalid format `"+t+"` is used");return s}formatPercentage(e,t){const s=this.getLocale(t);return this.frmt.number.format(e,s,{style:"percent"})}formatPercentageSync(e,t,s){const n=this.getLocale(t);return this.frmt.number.formatSync(e,n,{style:"percent",maximumFractionDigits:s})}formatCurrency(e,t,s,n){const i=this.getLocale(t);return this.frmt.currency.format(e,i,s,n)}formatCurrencySync(e,t,s,n){const i=this.getLocale(t);return this.frmt.currency.formatSync(e,i,s,n)}getReactBabelfishParams(e){return{locale:this.getLocale(e),babelfishInstance:this.intl,babelfishFormatter:this.frmt,isRtl:this.isRTL()}}}f.$inject=["$q","$rootScope"],f.production=!1,f.urlRoot=".",f.defaultDecimalPrecision=l.Number.defaultDecimalPrecision,f.minDecimalPrecision=1,f.maxDecimalPrecision=4,Object(n.__decorate)([b],f.prototype,"loadBundle",null),Object(n.__decorate)([b],f.prototype,"translate",null),Object(n.__decorate)([b],f.prototype,"formatNumber",null),Object(n.__decorate)([b],f.prototype,"regroupNumber",null),Object(n.__decorate)([b],f.prototype,"parseNumber",null),Object(n.__decorate)([b],f.prototype,"formatUsername",null),Object(n.__decorate)([b],f.prototype,"formatUsernameList",null),Object(n.__decorate)([b],f.prototype,"formatPercentage",null);class v extends f{}class S{constructor(){this.$get=["$injector",e=>e.instantiate(f)]}setOptions(e={}){i.forOwn(e,(e,t)=>{f[t]=e})}}class y extends S{}r.module(h,[]).provider(m,S)},"0Y4C":function(e,t,s){var n=s("ziER"),i=s("5JeM"),r=new n({id:"icon-small-collab",use:"icon-small-collab-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-collab"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3h10v3l4-1.974V12l-4-2v3H1V3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M4 6l1 2-1 2M7.5 6l1 2-1 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(r);e.exports=r},"0fB1":function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return a}));var n=s("nsO7"),i=s("Llzl"),r=s("5MwF"),o=s("w9Zy");const a="ultra.offcanvas-scope.offcanvas-scope-pausal-scope",l="bbOffcanvasPausalScope";class c{constructor(){this.restrict="A",this.link=function(t,s,i){const a=function(e){return e.hasClass("bb-offcanvas-overlay")&&(e=>e.hasClass("bb-offcanvas-panel")&&(e.hasClass("full")||(e=>n.findIndex([void 0,"none"],t=>t===e)>=0)(e.css("max-width"))))(e.next())};t.$newOffcanvasScope=function(...e){const t=this.constructor.prototype.$new.apply(this,e);return t.$$__digestPaused=!1,t};const c=()=>{t.$$__digestPaused=function(){const t=s.is(".hide-in-background")?s:s.parents(".hide-in-background");return"true"===t.attr("aria-hidden")&&(()=>{const s=t.nextAll();for(let t=0;t<s.length;t+=2)if(a(e(s.get(t))))return!0;return!1})()}(),!1!==t.$$__digestPaused||t.$root.$$phase||t.$digest()};if(t.$on(o.c,c),t.$on(o.b,c),!r.a.production){const e=function(t){return t?e(t.$parent)+"."+t.$id+(t.$$digestPaused?"P":"A"):""},s=function(){i.$set(l,e(t))};t.$on(o.c,s),t.$on(o.b,s),s()}}}}i.module(a,[]).directive(l,["$injector",e=>e.instantiate(c)])}).call(this,s("5iHu"))},"0wat":function(e,t){e.exports='<div id="body-content" class="tools-frame" ng-controller="ultra.legacy.tool.controller">\n  <div id="side-panel" class="tools-overlay full bb-offcanvas-right side-panel">\n    <div class="panel-wrap">\n      <header class="panel-header">\n        <div class="columns" id="global-title">\n          <h1 class="panel-title ng-scope" bb-translate="{{tool.getToolTitleByKey(legacyTool.toolName)}}"></h1>\n          <button class="left-off-canvas-toggle menu-toggle" aria-expanded="true"\n                  analytics-id="base.tools.frame.menu.button">\n            <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n            <span class="sr-only" bb-translate>base.menu</span>\n          </button>\n        </div>\n      </header>\n      <div class="iframe-wrapper">\n        <iframe name="legacy-tool-iframe" bb-iframe-max-height seamless="seamless" ng-src="{{::legacyTool.getUrl()}}"\n                bb-iframe-event-repeater="keydown"\n                bb-translate-attrs="{\'title\': \'{{tool.getToolTitleByKey(legacyTool.toolName)}}\'}"></iframe>\n      </div>\n    </div>\n  </div>\n</div>\n'},1:function(e,t){},"1/43":function(e,t,s){"use strict";s.r(t),s.d(t,"EmailSettingGeneralSettingValue",(function(){return n})),s.d(t,"SmsSettingGeneralSettingValue",(function(){return i})),s.d(t,"PushNotificationGeneralSettingValue",(function(){return r})),s.d(t,"serviceName",(function(){return d}));s("QLzv");var n,i,r,o=s("5MwF"),a=s("yCC5"),l=s("Rjd/"),c=s("nkTj");!function(e){e.Digest="D",e.Immediate="I",e.None="N"}(n||(n={})),function(e){e.Enabled="A",e.Disabled="N"}(i||(i={})),function(e){e.Everyone="E",e.Instructor="I"}(r||(r={}));const d=a.sb;l.a.factory(d,["restmod",c.d,e=>e.model().mix({$url:()=>o.a.apiBasePath+"/v1/notification/settings/generalSettings/course"})])},"12mu":function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return h}));s("imME");var n=s("Llzl"),i=s("w9Zy"),r=s("9zo4"),o=s("H8CZ"),a=s("wWlP"),l=s("cQcs"),c=s("A4cK"),d=s("fmWv");const u="mm.foundation.modal",h="$modal";n.module(u,[i.d]).directive("modalBackdrop",["$modalStack","$timeout",function(e,t){return{restrict:"EA",replace:!0,template:l,link(s){s.animate=!1,t((function(){s.animate=!0})),s.close=function(t){const s=e.getTop();s&&s.value.backdrop&&"static"!==s.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(s.key,"backdrop click"))}}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,template:c,link(e,s,n){e.windowClass=n.windowClass||"",t((function(){e.animate=!0,s[0].querySelectorAll("[autofocus]").length>0?s[0].querySelectorAll("[autofocus]")[0].focus():s[0].querySelector("div").focus()}))}}}]).factory("$modalStack",["$window","$timeout","$document","$compile","$rootScope",i.e,r.c,function(t,s,i,r,l,c,d){const u="modal-open";let h,m;const p=a.a,g={};function b(){let e=-1;const t=p.keys();for(let s=0;s<t.length;s++)p.get(t[s]).value.backdrop&&(e=s);return e}function f(e,t){const s=i.find("body").eq(0),n=p.get(e).value;p.remove(e),v(n.modalDomEl,n.modalScope,300,(function(){n.modalScope.$destroy(),s.toggleClass(u,p.length()>0),function(e){if(h&&-1===b()){let t=m;v(h,m,150,(function(){t.$destroy(),t=null,e()})),h=void 0,m=void 0}else e()}(t),d.revertAccessibilityHandling()}))}function v(e,t,n,i){const r=s(a,n);function a(){a.done||(a.done=!0,e.remove(),i&&i())}o.a(e,(function(){s.cancel(r),a(),t.$apply()})),t.animate=!1}return l.$watch(b,(function(e){m&&(m.index=e)})),g.open=function(s,o){p.add(s,{deferred:o.deferred,modalScope:o.scope,backdrop:o.backdrop,keyboard:o.keyboard});const a=i.find("body").eq(0),f=b();f>=0&&!h&&((m=l.$new(!0)).index=f,h=r("<div modal-backdrop></div>")(m),a.append(h));const v=n.element('<div class="reveal-modal" style="z-index:-1""></div>');a.append(v[0]);const S=parseInt(getComputedStyle(v[0]).top,10)||0;v.remove();const y=(t.pageYOffset||0)+S;function C(e){let t;27===e.which&&(t=p.top())&&t.value.keyboard&&l.$apply((function(){g.dismiss(t.key)}))}return c.getTopElement().then(e=>{const t=n.element('<div modal-window style="visibility: visible; top:'+y+'px;"></div>');t.attr("window-class",o.windowClass),t.attr("index",p.length()-1),t.attr("animate","animate"),e&&e.name&&t.attr("data-base-state-name",e.name),t.append(o.content);const i=r(t)(o.scope);d.applyAccessibilityHandlingForPanel(i),p.top().value.modalDomEl=i,i&&!p.get(s).value.modalDomEl&&(p.get(s).value.modalDomEl=i),a.append(i),a.addClass(u)}),m&&(m.darkenBackdrop=o.darkenBackdrop),i.bind("keydown",C),o.scope.$on("$destroy",(function(){e(document).off("keydown",C)})),p},g.close=function(e,t){if(!p.get(e))return;const s=p.get(e).value;s&&f(e,()=>{s.deferred.resolve(t)})},g.dismiss=function(e,t){if(!p.get(e))return;const s=p.get(e).value;s&&f(e,()=>{s.deferred.reject(t)})},g.dismissAll=function(e){let t=this.getTop();for(;t;)this.dismiss(t.key,e),t=this.getTop()},g.getTop=function(){return p.top()},g}]).provider(h,(function(){const e={options:{backdrop:!0,keyboard:!0,darkenBackdrop:!1},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,s,i,r,o,l,c){new d.a(a.a).start();const u={};return u.open=function(r){const o=i.defer(),a=i.defer(),d={result:o.promise,opened:a.promise,close(e){c.close(d,e)},dismiss(e){c.dismiss(d,e)}};if((r=n.extend({},e.options,r)).resolve=r.resolve||{},!r.template)throw new Error("Template is required. Use requireJs to load template string if needed.");const u=i.all([i.when(r.template)].concat(function(e){const s=[];return n.forEach(e,(function(e,r){(n.isFunction(e)||n.isArray(e))&&s.push(i.when(t.invoke(e)))})),s}(r.resolve)));return u.then((function(e){const t=(r.scope||s).$new();t.$close=d.close,t.$dismiss=d.dismiss;const i={};let a=1;r.controller&&(i.$scope=t,i.$modalInstance=d,n.forEach(r.resolve,(function(t,s){i[s]=e[a++]})),l(r.controller,i)),c.open(d,{scope:t,deferred:o,content:e[0],backdrop:r.backdrop,keyboard:r.keyboard,windowClass:r.windowClass,darkenBackdrop:r.darkenBackdrop})}),(function(e){o.reject(e)})),u.then((function(){a.resolve(!0)}),(function(){a.reject(!1)})),d},u}]};return e}))}).call(this,s("5iHu"))},"1I+h":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s("JzsJ");var n=s("Llzl"),i=s("5MwF"),r=s("0JpG"),o=s("TnpK");const a="ultra.course.collab.router";n.module(a,[r.moduleName,o.b]).config([o.c,e=>{i.a.features.collab&&e.peekState("collab",{url:"/collab/:launchType",require:()=>s.e(704).then(s.bind(null,"6DVw")),pageTitle:"course.outline.collab.ultraCollabTitle",panelClass:"full",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/collab/course-collab")]},onExit:["$rootScope",e=>{e.$broadcast("collab-exit")}]})}])},"1ZbL":function(e,t,s){"use strict";s.d(t,"a",(function(){return w}));var n=s("5MwF"),i=s("nsO7"),r=s("ERkP"),o=s("7nmT"),a=s("0JpG"),l=s("k9iv"),c=s("Qbdf"),d=s("VAMW"),u=s("/5AG"),h=s("4JTD"),m=s("6PRJ"),p=s("uDfI"),g=s("A4Z1");class b{constructor(){this.__isFirstRender=!0,this.state={},this.props={}}$onChanges(e){const t=this.props,s=Object(i.mapValues)(e,"currentValue"),n=Object(i.assign)({},this.props,s);if(this.__isFirstRender)Object(i.assign)(this,{props:n}),this.componentWillMount(),this.render(),this.__isFirstRender=!1;else{if(!this.didPropsChange(s,t))return;this.componentWillReceiveProps(n);const e=this.shouldComponentUpdate(n,this.state);if(Object(i.assign)(this,{props:n}),!e)return;this.componentWillUpdate(this.props,this.state),this.render(),this.componentDidUpdate(this.props,this.state)}}$postLink(){this.componentDidMount()}$onDestroy(){this.componentWillUnmount()}didPropsChange(e,t){return Object(i.some)(e,(e,s)=>e!==t[s])}componentWillMount(){}componentDidMount(){}componentWillReceiveProps(e){}shouldComponentUpdate(e,t){return!0}componentWillUpdate(e,t){}componentDidUpdate(e,t){}componentWillUnmount(){}render(){}}function f(e){return e.withProvider}function v(e){return e.withThemeProvider||!!e.renderLocalized}function S(e){return v(e)||!!e.withTransitScope}function y(e){return e.withErrorModalBoundary}function C(e){return e.withCurrentCourse}function I(e,t,s){let i=e;if(t.renderLocalized){const{localize:e,$scope:o}=s;let a={locale:e.getLocale(o),babelfishInstance:e.intl,babelfishFormatInstance:e.frmt,isRtl:e.isRTL()};const l=t.renderLocalized;"object"==typeof l&&(a={...a,...l}),i=function(e,t){let s;return n.a.unitTesting&&(s=Object(m.a)()),r.createElement(h.a,{...t,mockLocalize:s},e)}(i,a)}if(t.withProvider){const{store:e}=s;i=function(e,t){const s={store:t};return r.createElement(p.Provider,s,e)}(i,e)}if(t.withThemeProvider&&(i=function(e,t){const s={theme:"light",isRtl:t.isRTL(),cssReset:"none",zIndex:{modal:1350}};return r.createElement(g.AnalyticsJssThemeProvider,s,e)}(i,s.localize)),t.withErrorModalBoundary){const{errorModalService:e}=s;i=function(e,t){const s={errorModalService:t};return r.createElement(l.a,s,e)}(i,e)}if(t.withCurrentCourse){const{currentCourseService:e}=s;i=function(e,t){return r.createElement(u.CurrentCourseContext.Provider,{value:t.courseId},e)}(i,e)}if(t.withTransitScope){const{$scope:e}=s;i=function(e,t){return r.createElement(d.TransitScopeProvider,{value:t},e)}(i,e)}return i}function $(e,t){return class extends b{constructor(s,...n){super(),this.$element=s,this.injectedProps={},this.injectedModules={},t.forEach((e,t)=>{this.injectedModules[e]=n[t]}),(e.injectNames||[]).forEach(e=>{this.injectedProps[e]=this.injectedModules[e]})}render(){const t={};f(e)&&(t.store=this.injectedModules.$ngRedux),y(e)&&(t.errorModalService=this.injectedModules[l.d]),v(e)&&(t.localize=this.injectedModules[a.serviceName]),S(e)&&(t.$scope=this.injectedModules.$scope),C(e)&&(t.currentCourseService=this.injectedModules[c.e]);let s=r.createElement(e.Class,{...this.injectedProps,...this.props},null);s=I(s,e,t),Object(o.render)(s,this.$element[0])}componentWillUnmount(){Object(o.unmountComponentAtNode)(this.$element[0])}}}function w(e){var t;e.injectNames=e.injectNames||[],e.withThemeProvider=null===(t=e.withThemeProvider)||void 0===t||t;const s=e.bindingNames||e.Class.propTypes&&Object.keys(e.Class.propTypes)||[],n=e.attributes||[],r=[];y(e)&&r.push(l.d),v(e)&&r.push(a.serviceName),S(e)&&r.push("$scope"),f(e)&&r.push("$ngRedux"),C(e)&&r.push(c.e);const o=Object(i.uniq)([...r,...e.injectNames]);return{bindings:{...Object(i.fromPairs)(s.map(e=>[e,"<"])),...Object(i.fromPairs)(n.map(e=>[e,"@"]))},controller:["$element",...o,$(e,o)]}}},"1ZiP":function(e,t,s){"use strict";s.d(t,"a",(function(){return b}));s("JzsJ");var n=s("Llzl"),i=s("pjml"),r=s("w9Zy"),o=s("0JpG"),a=s("Is+C"),l=s("Qbdf"),c=s("TnpK"),d=s("bF8R"),u=s("Fvsw"),h=s("gkef"),m=s("36CG"),p=s("+O05"),g=s("nmzr");const b="ultra.course.content.scorm.routes",f={onEnter:["contentData","attempt",r.e,c.d,"$stateParams",h.b,(e,t,s,n,i,r)=>{if(!i.forceOpenFeedbackPanel||i.skipTransitionEvents)return;n.isPeekPanelOpen()&&s.expandTopPanel();const o=p.a.attemptHasFeedback(t),a=p.a.studentCanViewAttemptGradeAndFeedback(t,e.gradeDetail),l=n.next.name.indexOf("assessment-submission-feedback")>=0,c=!n.prev.name,d=r.isSmallBreakpoint();!o||!a||d||l||c||n.goPeekState("assessment-submission-feedback",{attemptId:t.id})}],onExit:["contentData",r.e,c.d,"$q","$stateParams",(e,t,s,n,i)=>{if(!i.skipTransitionEvents&&e.gradingColumn.isMultipleAttempts()){let i=n.when();s.isPeekPanelOpen()&&(i=t.shrinkTopPanel()),i.then(()=>{s.goPeekState("scorm-overview.student.multiple-attempt",{contentId:e.courseContent.id,columnId:e.gradingColumn.id,gradeId:e.gradeDetail.id,courseId:e.courseContent.courseId})})}}]};n.module(b,[o.moduleName,c.b,l.b,m.a]).config([c.c,l.c,m.b,(e,t)=>{e.peekState("scorm",{abstract:!0,url:"/scorm"}).peekState("scorm.open",{url:"/open",params:{contentId:null,courseId:null},routingFunction:[c.d,a.c,(e,t)=>{t.scormLaunch({courseId:e.nextParams.courseId,contentId:e.nextParams.contentId,showPreLaunchPanel:!0})}]}).peekState("scorm-settings",{url:"/scorm/settings?parentId&positionBefore&positionAfter&contentId",pageTitle:"course.content.scorm.settings.panelTitle",require:[()=>Promise.all([s.e(0),s.e(1),s.e(2),s.e(574)]).then(s.bind(null,"7Six"))],resolve:{[l.d]:t.resolve,translations:[o.serviceName,e=>e.loadBundle("features/course/content/scorm/scorm")]},peekViewName:"scorm-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy",g.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL,"content-collection-picker"]}).peekState("scorm-launch-frame",{url:"/scorm/launchFrame?toolHref&courseId&contentId",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/course/content/scorm/scorm")]},panelClass:"full",require:[()=>Promise.all([s.e(35),s.e(649)]).then(s.bind(null,"26hv"))],pageTitle:"course.content.scorm.launch.frameTitle"}).peekState("gradebook-item.scorm-submissions",{pageTitle:"course.content.scorm.settings.gradingTitle",url:"/scorm/:contentId/columns/:columnId/submissions?courseId&gradeitemView",panelClass:"full",resolve:{translations:["$q",o.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/scorm/scorm"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/gradebook-item/submissions"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/goal-alignment/goal")])]},views:{"gradebook-item-scorm-slider@":{require:()=>s.e(696).then(s.bind(null,"2eYu"))},"gradebook-item-students@":{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(42)]).then(s.bind(null,"hmMQ"))}},onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],peekStates:["conversations",g.CourseRoutes.COURSE_MESSAGE,g.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL,"scorm-settings","scorm-launch-frame",g.GradeRoutes.SUBMISSION_GRADING,g.CourseRoutes.COURSE_GRADES_MULTIPLE_ATTEMPT],peekViewName:"gradebook-item-panel@"}).peekState("scorm-overview",{abstract:!0,resolve:{[l.d]:t.resolve,contentData:[l.d,d.b,c.d,m.c,(e,t,s,n)=>t.loadContentAndGrades({course:e,contentId:s.nextParams.contentId}).then(e=>(n.setCurrentContent(e.courseContent),e))],translations:["$q",o.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/scorm/scorm"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])]},onEnter:["contentData",u.b,(e,t)=>{t.column=e.gradingColumn}],onExit:[u.b,e=>{e.column=null}],require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(12),s.e(0),s.e(1),s.e(2),s.e(4),s.e(540)]).then(s.bind(null,"HwBC"))}).peekState("scorm-overview.student",{url:"/scorm/overview/{contentId:_[0-9]+_1}?courseId",peekViewName:"assessment-overview-peek@",allowChildPeekStates:!0,peekStates:["conversations",g.CourseRoutes.COURSE_MESSAGE],views:{"scorm-grading-section@":{require:()=>s.e(707).then(s.bind(null,"all8"))}}}).peekState("scorm-overview.student.multiple-attempt",{url:"/scorm-attempts/:columnId/:gradeId",resolve:{scormContentData:[l.d,"contentData",a.c,d.b,c.d,(e,t,s,n,i)=>{const r=s.currentContentData||t&&t.gradingColumn.id===i.nextParams.columnId&&t;return r||n.loadContentAndGrades({course:e,contentId:i.nextParams.contentId,columnId:i.nextParams.columnId})}],translations:["$q",o.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assessment/assessment")])]},pageTitle:"course.content.assessment.overview.multiple-attempt.pageTitle",require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(552)]).then(s.bind(null,"x3h6"))}).peekState("scorm-overview.student.attempt",{url:"/column/{columnId:_[0-9]+_1}/attempt/{attemptId:_[0-9]+_1}",panelClass:"full",resolve:{contentData:["contentData",l.d,d.b,c.d,(e,t,s,n)=>e.gradeDetail.ui.groupAttempt?e:s.loadContentAndGrades({course:t,contentId:n.nextParams.contentId,columnId:n.nextParams.columnId})],currentContent:["contentData",e=>e.courseContent],currentColumn:["contentData",e=>e.gradingColumn],attempt:["$q","contentData",i.m.serviceName,c.d,i.A.serviceName,i.E.serviceName,(e,t,s,n)=>{const i=n.nextParams.attemptId;return s.$buildRaw({id:t.courseContent.courseId}).gradebook.attempts.$find(i,{expand:["toolAttemptDetail","alignedGoals"].join(",")}).$then(e=>{t.attempt=e}).$asPromise()}]},require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(114)]).then(s.bind(null,"H0q3")),...f,params:{commentPanelInitiallyOpen:!1,forceOpenFeedbackPanel:!1,skipTransitionEvents:!1,peekStateToOpen:null},peekViewName:"assessment-attempt-review-peek",peekStates:["assessment-submission-feedback","conversations",g.CourseRoutes.COURSE_MESSAGE]}).peekState("scorm-analytics-report",{url:"/scorm-report/{contentId:_[0-9]+_1}?courseId",resolve:{[l.d]:t.resolve,content:[l.d,c.d,i.m.serviceName,(e,t,s)=>s.$new(e.id).contents.$find(t.nextParams.contentId).$asPromise()],translations:[o.serviceName,e=>e.loadBundle("features/course/content/scorm/scorm")]},panelClass:"full",require:()=>s.e(628).then(s.bind(null,"0rof")),pageTitle:"course.content.scorm.report.pageTitle"})}])},2:function(e,t){},"2Tae":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return l}));var n=s("Llzl"),i=s("3bn4"),r=s("0JpG"),o=s("TnpK");const a="ultra.course.rubric.rubric-goal-alignment",l="rubric-goal-alignment",c=["course","goal-alignment","goal"];class d extends i.a{constructor(){super(...arguments),this.url="/goalAlignment/:rowId",this.panelClass="peek rubric-goal-peek"}resolveGoalAlignableContent(){return["$q","currentCourse","currentRubric",r.serviceName,o.d,(e,t,s,n,i)=>e.when(n.loadBundle(`features/${c.join("/")}`)).then(()=>t.rubrics.$find(s.id,{expand:"rows.alignedGoals,permissions"}).$asPromise().then(e=>{e.rows.forEach(e=>{e.id&&i.nextParams&&i.nextParams.rowId&&e.id===i.nextParams.rowId&&(this.rubricRow=e)})})).then(()=>this.rubricRow?this.setupGoalAlignableContent(this.rubricRow,n):e.when([]))]}getPeekStateName(){return l}getOverrideSubTitle(){return["currentRubric",o.d,(e,t)=>{let s="";return e.rows.forEach(e=>{e.id&&t.nextParams&&t.nextParams.rowId&&e.id===t.nextParams.rowId&&(s=e.header)}),s}]}setupGoalAlignableContent(e,t){return[{getContentTitleForGoalAlignment:()=>t.translateSync({locale:null,key:`${c.join(".")}.goalsAlignedWithRubricCriteria`}),getContentIdForGoalAlignment:()=>e.getContentIdForGoalAlignment(),isCurrentUserEligibleToAlignGoals:()=>e.isCurrentUserEligibleToAlignGoals(),alignedGoals:(()=>e.alignedGoals.map(t=>(t.content=e,t)))()}]}}d.$inject=["$injector","$q"],n.module(a,[o.b,r.moduleName]).config([o.c,e=>{const t=new d;e.peekState(t.getPeekStateName(),t)}])},"2qV7":function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return le}));s("JzsJ"),s("h3Te");var n=s("nsO7"),i=s("Llzl"),r=s("TnpK"),o=s("pjml"),a=s("Fvsw"),l=s("fYJU"),c=s("0JpG"),d=s("neh4"),u=s("vWx0"),h=s("VfFK"),m=s("OMme"),p=s("jj6p"),g=s("cacA"),b=s("sb+l"),f=s("Nrpd"),v=s("rmtn"),S=s("iAaI"),y=s("qOsI"),C=s("qtHE"),I=s("Sjpn"),$=s("DDbI"),w=s("P43K"),T=s("YVo+"),E=s("iwI+"),k=s("yGso"),P=s("YfM7"),A=s("pUR+"),R=s("Hbkz"),O=s("CPqS"),D=s("GNXM"),_=s("3hz+"),N=s("FE+f"),L=s("fzj8"),M=s("yXB1"),x=s("1I+h"),j=s("JRp+"),G=s("gOJg"),U=s("y3by"),F=s("uNsL"),B=s("8HGT"),q=s("jnoB"),H=s("7oqQ"),z=s("RJ/U"),V=s("7QJo"),K=s("UiBk"),W=s("YRs5"),J=s("U8wS"),Y=s("sNuB"),Q=s("BrA8"),Z=s("IVtk"),X=s("hWgD"),ee=s("IVCC"),te=s("1ZiP"),se=s("cwoR"),ne=s("j2IR"),ie=s("Q/M7"),re=s("tfZW"),oe=s("5MwF"),ae=s("7/CN");const le="ultra.routes",ce=e=>e.location;function de(e,t){return{systemInfo:[a.b,e=>e.getSystemInfo().$asPromise()],currentUser:[l.b,e=>e.userModel.$asPromise()],languages:["currentUser",o.J.serviceName,(e,s)=>{if(t&&e.locale)return s.$collection().$fetch({limit:1e4}).$asPromise()}],user:["currentUser","languages",(e,s)=>(t&&e.locale&&!n.find(s,{locale:e.locale})&&(e.locale=null),e.$patch().$asPromise())],localize:["$q","$rootScope","user","systemInfo",c.serviceName,"$cookies","$window",(t,s,n,i,r,o,a)=>{let l=n.locale||i.defaultLocaleIdentifier;const d=o.get("guest.session.locale");n.isGuest()&&d&&(l=d);const u=re.a.getInstance();if(i.siteId&&i.ultraCustomLocaleLocation&&u.setOverrideLocation(i.ultraCustomLocaleLocation,i.siteId),i.ultraLocaleData){const e=Object.keys(i.ultraLocaleData);e.forEach(e=>{const t=i.ultraLocaleData[e];t.ultraOverrideCode&&r.addOverride(e,t.ultraOverrideCode)}),e.indexOf(l)<0&&(l=i.defaultLocaleIdentifier)}const h=ce(a).href.match(c.localeQuerystringRegex);h&&oe.a.features.devtools_enableSetLangQuery&&(l=h[1]),r.setUserLocale(l),r.setSystemDefaultLocale(i.defaultLocaleIdentifier),ae.g.initialize(r.isRTL()?ae.b.RightToLeft:ae.b.LeftToRight);const m=[r.setLocale(s,l),...e.map(e=>r.loadBundle(e)),t.when(ae.g.getCSSLoadedPromise())];return t.all(m)}]}}i.module(le,[o.N,a.a,l.a,c.moduleName,r.b,d.a,u.a,h.a,m.a,P.a,C.a,p.a,g.a,I.a,$.a,w.a,T.a,E.a,b.a,f.a,v.a,S.a,y.a,k.a,R.a,O.a,D.a,_.a,N.a,L.a,M.a,x.a,j.a,G.a,U.a,F.a,B.a,q.a,H.a,z.a,V.a,K.a,W.a,J.a,Y.a,A.a,Q.a,X.a,ee.a,te.a,se.a,ne.a,"ngCookies"]).config([r.c,t=>{t.state("base",{abstract:!0,resolve:de(["features/base/base","global","common/grades-common","components/services/grade"]),require:()=>Promise.all([s.e(18),s.e(586),s.e(13),s.e(28),s.e(24),s.e(49),s.e(66),s.e(572)]).then(s.bind(null,"03Un"))}).state("welcome",{resolve:de(["features/welcome"],!0),require:()=>s.e(688).then(s.bind(null,"IYP1")),pageTitle:"welcome.welcome.title"}).state("register-succeeded",{url:"/startLearn?registerStatusCode?courseId?enrollStatusCode",require:()=>s.e(724).then(s.bind(null,"90MB"))}).state("base.not-found",{resolve:{translations:[c.serviceName,e=>e.loadBundle("features/base/not-found/base-not-found")]},require:()=>s.e(691).then(s.bind(null,"A15Z")),pageTitle:"base.not-found.pageNotFoundTitle"}).state("logout",{url:"^/logout",onEnter:()=>{e("body").addClass("bb-logout"),window.location.href=ie.c("/webapps/login/?action=logout")}}).state("classicRedirect",{url:"/classicRedirect?legacyUrl",onEnter:[r.d,e=>{const t=e.nextParams.legacyUrl,s=t?ie.b(t).course_id:null;s&&e.goPeekState("course.classic.outline",{courseId:s,legacyUrl:t})}]}).state("mobileApiCall",{url:"^/mobileApiCall?action&courseId&contentId&attemptId&columnId",onEnter:[r.d,e=>{Z.a(e)}]})}])}).call(this,s("5iHu"))},3:function(e,t){},"36CG":function(e,t,s){"use strict";s.d(t,"d",(function(){return m})),s.d(t,"g",(function(){return p})),s.d(t,"e",(function(){return g})),s.d(t,"f",(function(){return b})),s.d(t,"a",(function(){return f})),s.d(t,"c",(function(){return v})),s.d(t,"b",(function(){return S}));var n=s("D57K"),i=s("pjml"),r=s("lVRt"),o=s("TnpK"),a=s("Qbdf"),l=s("kcGO"),c=s("zGdY"),d=s("aHpC"),u=s("yC9S"),h=s("ZzR9");const m="ultra.service.course-context.content",p="currentContentModel",g=p+"Provider",b=r.b,f=m,v=p,S=g;let y=class{constructor(e,t,s){this.$q=e,this.$rootScope=t,this.$ngRedux=s,this.dispatchContentOpened=()=>{},this.dispatchContentClosed=()=>{},this.onStateHasContentInContextChanged=(e,t,s)=>{s&&!t&&this.clear()},this.connectToRedux(),u.b.OnRootScope(t,h.b.$stateHasContentInContextChanged,this.onStateHasContentInContextChanged)}get contentId(){return this._contentId}get content(){return this._content}connectToRedux(){this.$ngRedux.connect(null,e=>({dispatchContentOpened:t=>{e(Object(l.contentOpened)(t))},dispatchContentClosed:t=>{e(Object(l.contentClosed)(t))}}))(this)}setCurrentContent(e){e!==this.content&&(e||this.content)&&(this.content&&this.dispatchContentClosed(this.content),this._contentId=e?e.id:null,this._content=e,this.content&&this.dispatchContentOpened(this.content))}clear(){this.setCurrentContent(null)}load(e,t){return e?this.contentId===t&&this.content?this.content.$asPromise():this.loadContent(e,t).then(e=>(this.setCurrentContent(e),e.$asPromise())).catch(e=>this.$q.reject(e)):this.$q.when(null)}loadContent(e,t){return e.$find(t).$allow([404]).$asPromise().then(e=>{const s=e.$response;return s&&s.status===c.HttpStatus.NotFound?this.$q.reject(new Error(`Content  ${t} not found`)):e.$asPromise()})}};y=Object(n.__decorate)([Object(n.__param)(0,Object(d.b)("$q")),Object(n.__param)(1,Object(d.b)("$rootScope")),Object(n.__param)(2,Object(d.b)("$ngRedux"))],y);class C extends y{}const I=[i.N];angular.module(m,I).provider(p,class{constructor(){this.$get=["$injector",e=>e.instantiate(y)],this.name=b,this.resolve=["$q",o.d,p,a.d,(e,t,s,n)=>{var r;const o=null!==(r=t.nextParams.contentId)&&void 0!==r?r:t.nextParams.id;return o&&o!==i.p.CREATE_CONTENT_ID?s.load(n.contents,o):e.resolve(void 0)}]}})},"3FFP":function(e,t,s){"use strict";var n=s("nsO7"),i=s("5iHu"),r=s("Llzl"),o=s("nbDY"),a=s.n(o),l=s("rxY8"),c=s("lEL+"),d=s("0JpG"),u=s("yC9S"),h=s("LsF/"),m=s("DyQT"),p=s("yo/t");s.d(t,"b",(function(){return g})),s.d(t,"a",(function(){return b}));const g="ultra.components.directives.saveTray";class b extends a.a{constructor(e,t,s,n){super(e),this.template=t,this.msgKeysSuffix=s,this.eventName=n}getTemplateHtml(){return this.template}static getTrayType(e){switch(e){case"LoadMoreResults":return b.LoadMoreResults;case"Toast":return b.Toast;default:return b.Default}}}b.Default=new b("Default",h,{inProgress:"saving",success:"success",error:"error"},"bb-save-tray-start"),b.LoadMoreResults=new b("LoadMoreResults",m,{inProgress:"loadingMoreItems",success:"itemsLoaded",error:"itemsFailedToLoad"},"bb-load-more-results-start"),b.Toast=new b("Toast",p);class f{constructor(e,t,s,r,o){if(this.scope=e,this.spinner=s,this.timeout=r,this.bbLocalize=o,this.inProgress=!1,this.localizationKeysPrefix=e.trayLocalizationKeysPrefix||"components.directives.save-tray",this.footer=t.closest("footer"),e.toastMessage&&e.toastMessage()){if(t.find(".notification-container span.progress-status").html(e.toastMessage()),e.toastShortMessage&&e.toastShortMessage()){let s,r=!1,o=!1,a=!0;const l=t.find(".notification-container span.progress-status"),c=()=>{const t=i(window).width();l[0].offsetWidth<l[0].scrollWidth?(r||(s=t),r=!0,a&&(o=!0),l.html(e.toastShortMessage())):t>s&&!o&&(r=!1,l.html(e.toastMessage())),a=!1};this.timeout(c,e,0);const d=n.debounce(c,100);u.b.OnWindow("resize",d,e)}}else this.spinnerArgs={canvasSize:43,scaleX:1.5,scaleY:1.5,successCallback:()=>{this.status="success",this.inProgress=!1,this.sendStatusMessage(e,this.status),this.sendMessageToScreenReader(e,e.trayType.msgKeysSuffix.success),e.$apply()},errorCallback:()=>{this.status="error",this.inProgress=!1,this.sendStatusMessage(e,this.status),this.sendMessageToScreenReader(e,e.trayType.msgKeysSuffix.error),e.$apply()}},e.$on("save-tray-spinner-status-update",(e,t)=>{if(this.spinnerObject)return t?this.spinnerObject.complete():this.spinnerObject.error()}),e.$on(e.trayType.eventName,(s,n,i,r,o,a)=>{e.trayId===n&&(this.status="",this.canvasElement||(this.canvasElement=t.find(".canvas")),r&&(this.spinnerArgs=r),this.footer.addClass("is-active"),this.spinnerObject||(this.spinnerObject=this.spinner.initInlineLoader(this.canvasElement,this.spinnerArgs)),this.inProgress||(this.spinnerObject.start(),this.inProgress=!0),this.timeoutComplete=!1,this.activeTimeout&&!this.timeoutComplete&&this.timeout.cancel(this.activeTimeout),this.sendMessageToScreenReader(e,e.trayType.msgKeysSuffix.inProgress,0),i.then(()=>{o?(this.activeTimeout=this.timeout(()=>{this.footer.removeClass("is-active"),this.timeoutComplete=!0,this.scope.$root.$broadcast("bbSaveTrayComplete")},e,a||f.ACTIVE_TIMEOUT_LENGTH,!0),this.spinnerObject.complete()):this.spinnerObject.error()},e=>{e&&"canceled"===e.$status||this.spinnerObject.error()}))})}sendMessageToScreenReader(e,t,s){t&&e.$root.$emit("read-info-directive-alert",this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.localizationKeysPrefix+"."+t}),s)}sendStatusMessage(e,t){"true"===e.emitStatusEvent&&e.$root.$emit("save-tray-status-event",t)}}f.$inject=["scope","element",l.b,c.b,d.serviceName],f.ACTIVE_TIMEOUT_LENGTH=6e3;class v{constructor(e,t){this.$injector=e,this.$compile=t,this.restrict="E",this.scope={trayId:"@?",trayLocalizationKeysPrefix:"@?",toastMessage:"&?",toastShortMessage:"&?",toastClass:"&?",toastIcon:"&?",toastStatus:"&?",emitStatusEvent:"@?"},this.link=(e,t,s)=>{s.trayType?e.trayType=b.getTrayType(s.trayType):e.trayType=e.toastMessage&&e.toastMessage()?b.Toast:b.Default,t.append(this.$compile(e.trayType.getTemplateHtml())(e)),e.saveTray=this.$injector.instantiate(f,{scope:e,element:t})}}}v.$inject=["$injector","$compile"],r.module(g,[l.a,c.a,d.moduleName]).directive("bbSaveTray",["$injector",e=>e.instantiate(v)])},"3PCF":function(e,t,s){"use strict";var n;s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i})),function(e){e.None="",e.SafeAssign="SafeAssign",e.Integration="Integration"}(n||(n={}));const i="mdb-sa"},"3bn4":function(e,t,s){"use strict";var n=s("nsO7"),i=s("0JpG");t.a=class{constructor(){this.panelClass="peek",this.url="/goalAlignment",this.require=()=>Promise.all([s.e(0),s.e(607)]).then(s.bind(null,"lQY5")),this.pageTitle="course.goal-alignment.goal.header",this.allowChildPeekStates=!0,this.peekViewName="goal-alignment-peek",this.params={noAutoGo:!1},this.peekStates=["goal-picker-legacy"],this.resolve={translations:[i.serviceName,e=>e.loadBundle("features/course/goal-alignment/goal")],goalAlignableContents:(()=>{const e=this.resolveGoalAlignableContent(),t=e[e.length-1];return e[e.length-1]=function(...e){return t.apply(null,e).then(e=>n.isArray(e)?e:[e])},e})(),overrideSubTitle:(()=>this.getOverrideSubTitle())()}}getOverrideSubTitle(){return[()=>null]}}},"3hz+":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("nmzr"),i=s("Llzl"),r=s("0JpG"),o=s("TnpK");const a="ultra.course.books-and-tools.router";i.module(a,[r.moduleName,o.b]).config([o.c,e=>{e.peekState("books-and-tools",{url:"/booksAndTools?parentId",require:()=>Promise.all([s.e(62),s.e(620)]).then(s.bind(null,"cFJh")),resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/books-and-tools/books-and-tools")]},panelClass:"peek",pageTitle:"course.booksAndTools.tab.title",peekStates:[n.ContentMarketRoutes.CONTENT_MARKET,"partner-tools","proctoring-lti-tool"]})}])},"3uIF":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));s("QLzv");var n=s("5MwF"),i=s("yCC5"),r=s("Rjd/");const o=i.zb;r.a.factory(o,["restmod",e=>{const t=n.a.partnerCloudBasePath+"/v1/courses";return e.model(t).mix({$extend:{Model:{delete(e,t){return this.$build().$send({method:"DELETE",url:this.$url()+"/"+e+"/linkRefId/"+t},(function(e){})).$asPromise()}}}})}])},"3vti":function(e,t,s){"use strict";s("4lO8"),s("my/J");var n=s("5iHu"),i=s("Llzl"),r=s("yC9S"),o=s("nbDY"),a=s.n(o),l=s("+4Px"),c=s("0JpG");s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return u}));const d="ultra.components.directives.bbSortable";class u extends a.a{}u.Horizontal=new u("Horizontal"),u.Vertical=new u("Vertical");const h={containerSelector:"[sortable-container]",itemSelector:"[sortable-item]",containerPath:"[sortable-parent]:first",placeholder:'<div class="placeholder">&nbsp;</div>',handle:"i.icon-reorder",onDragStart(e,t,s,n){t.rootGroup.placeholder=e.clone().addClass("placeholder").removeAttr("sortable-item"),t.rootGroup.placeholder.find("[sortable-container], [sortable-item]").removeAttr("sortable-container sortable-item"),s(e,t)},triggerKey:l.f,orientation:u.Vertical,placeholderClass:"placeholder",moveKeyHandler:(e,t,s,n)=>{const i=t.options;if(u.Horizontal.isEqualTo(i.orientation)){const t=i.isRTL?l.j:l.s,s=i.isRTL?l.s:l.j;n.keyCode===s?(n.stopPropagation(),e.insertBefore(e.prev(i.itemSelector)),e.find(i.handle).focus()):n.keyCode===t&&(e.insertAfter(e.next(i.itemSelector)),e.find(i.handle).focus(),n.stopPropagation())}else n.keyCode===l.v?(n.stopPropagation(),e.insertBefore(e.prev(i.itemSelector)),e.find(i.handle).focus()):n.keyCode===l.d&&(e.insertAfter(e.next(i.itemSelector)),e.find(i.handle).focus(),n.stopPropagation())},cancelHandler:(e,t,s,n,i)=>{const r=e.index();r>s?e.insertAfter(e.parent().find(t.options.itemSelector+":nth-child("+s+")")):r<s&&e.insertAfter(e.parent().find(t.options.itemSelector+":nth-child("+(s+1)+")"))},saveHandler:(e,t,s,n)=>{e.focus(),t.options.onDrop&&"function"==typeof t.options.onDrop&&t.options.onDrop(e,t,s,n)}};class m{constructor(e){this.localize=e,this.scope={sortableOptions:"=?"},this.restrict="A",this.link=(e,t,s)=>{const i=e.$watch("sortableOptions",()=>{e.sortableOptions=n.extend({},h,e.sortableOptions),e.sortableOptions.isRTL=this.localize.isRTL(e);const s=t.parents("[bb-sortable]");t.on("touchstart",e.sortableOptions.handle,e=>{n(e.target).trigger("click")}),0!==s.length?(s.sortable("destroy"),s.last().sortable(e.sortableOptions)):t.sortable(e.sortableOptions),t.find(e.sortableOptions.itemSelector).each((t,s)=>{this.keyboardDragAndDrop(n(s),e)}),r.b.OnRootScope(e,"sortable-item-inserted",(t,s)=>{const n=this.keyboardDragAndDrop(s,e);s.hasClass(e.sortableOptions.placeholderClass)&&!s.data("axHandlersAdded")&&this.triggerAccessibilityMode(n,e)}),i()})}}keyboardDragAndDrop(e,t){const s=n(e).find(t.sortableOptions.handle);return s.on("keyup",e=>{if(e.keyCode===t.sortableOptions.triggerKey){const s=n(e.target),i=s.closest(t.sortableOptions.itemSelector),r=i.parents(t.sortableOptions.containerSelector).last().data("sortable");if(i.hasClass(t.sortableOptions.placeholderClass))return;e.stopImmediatePropagation(),i.addClass(t.sortableOptions.placeholderClass),t.sortableOptions.onEnter&&t.sortableOptions.onEnter(i,r),this.triggerAccessibilityMode(s,t)}}),s}triggerAccessibilityMode(e,t){const s=e.closest(t.sortableOptions.itemSelector),i=s.parents(t.sortableOptions.containerSelector).last().data("sortable"),r=s.index();let o,a,l;const c=()=>{n(document).off("click focusin",a),e.off("keydown",o),e.off("keyup",l),s.data("axHandlersAdded",!1),s.removeClass(t.sortableOptions.placeholderClass),t.sortableOptions.onExit&&t.sortableOptions.onExit(s,i)};o=e=>{t.sortableOptions.moveKeyHandler(s,i,n.noop,e)},a=o=>{n(o.target).is(e)||(c(),t.sortableOptions.cancelHandler(s,i,r,n.noop,o))},l=e=>{e.keyCode===t.sortableOptions.triggerKey&&(c(),e.stopImmediatePropagation(),t.sortableOptions.saveHandler(s,i,n.noop,e))},e.on("keyup",l),e.on("keydown",o),n(document).on("click focusin",a),t.$on("$destroy",c),s.data("axHandlersAdded",!0)}}m.$inject=[c.serviceName],i.module(d,[c.moduleName]).directive("bbSortable",["$injector",e=>e.instantiate(m)])},"43zP":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("nbDY"),i=s.n(n);class r extends i.a{}r.NoChanges=new r("noChanges"),r.NotSaved=new r("notSaved"),r.Saved=new r("saved"),r.Saving=new r("saving"),r.Cancelling=new r("cancelling"),r.Deleting=new r("deleting")},"4GL6":function(e,t,s){"use strict";(function(e){s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return u}));s("pGZF");var n=s("nsO7"),i=s("Llzl"),r=s("0JpG"),o=s("lEL+"),a=s("gkef"),l=s("fGgA"),c=s("+4Px");const d="ultra.components.directives.tooltip.complexTooltip";function u(e=""){return'<ul class="complex-tooltip-list '+e+'"><li ng-repeat="item in items track by $index">{{item}}</li></ul>'}class h extends l.a{constructor(e,t,s,r,o,a,l){super(e,t,s,o,a,l),this.scope=e,this.element=t,this.attrs=s,this.$compile=r,this.localizeService=o,this.timeoutService=a,this.windowSizeService=l,this.scopeChanged=!1;const c=this.scope.$watch("tooltipScope()",e=>{e&&(this.tooltipScope=this.scope.tooltipScope(),this.content=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope),c())}),d=this.scope.$watch("tooltipScope().items",(e,t)=>{e&&t&&n.difference(e,t).length&&(this.tooltipScope=this.scope.tooltipScope(),this.content=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope),this.scopeChanged=!0,this.tooltipScope.$parent.$on("$destroy",()=>{this.tooltipScope.$destroy()}),(i.isUndefined(this.scope.tooltipAutoUpdate)||"false"===this.scope.tooltipAutoUpdate)&&d())})}showTooltip(){"true"===this.scope.tooltipAutoUpdate&&this.tooltipCreated&&this.scopeChanged&&(this.updateTooltipContent(super.getTooltip()),this.tooltipCreated=!1,this.scopeChanged=!1),super.showTooltip()}addTooltipContent(t){this.content=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope),this.tooltipScope.$apply(),t.on("keydown",e=>{e.which===c.g?(this.element.focus(),this.hideTooltip()):e.which!==c.u||e.shiftKey?e.which===c.u&&e.shiftKey&&i.element(e.target).closest(".tooltip-first-tabbable").length>0&&(this.getTooltip().find(".tooltip-last-tabbable").focus(),e.preventDefault(),e.stopPropagation()):i.element(e.target).closest(".tooltip-last-tabbable").length>0&&(this.getTooltip().find(".tooltip-first-tabbable").focus(),e.preventDefault(),e.stopPropagation())}),t.append(e('<div class="'+h.TOOLTIP_CONTENT_CLASS+'"></div>').append(this.content))}updateTooltipContent(e){this.content=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope),e.find("."+h.TOOLTIP_CONTENT_CLASS).empty().append(this.content)}addTooltipStyles(e){e.removeClass("tooltip-center-content"),this.attrs.tooltipMaxWidth&&(e.removeClass("tooltip-max-width"),e.css({"max-width":this.attrs.tooltipMaxWidth})),"true"===this.attrs.tooltipDisablePadding&&e.addClass("tooltip-unpadded"),"true"===this.attrs.tooltipDarkTheme&&e.addClass("tooltip-dark-theme")}addTooltipEvents(e){e.on("mouseleave",e=>{this.timeoutMS>0?this.timeout=this.timeoutService(()=>{this.hideTooltip()},this.scope,this.timeoutMS):this.hideTooltip()}),e.on("mouseover",e=>{this.timeout&&this.timeoutService.cancel(this.timeout)}),e.on("click",e=>{e.stopPropagation()})}postShowTooltip(){i.isDefined(this.attrs.tooltipFocusSelector)&&this.timeoutService(()=>{this.getTooltip().find(this.attrs.tooltipFocusSelector).eq(0).focus()},this.scope,120)}}h.$inject=["scope","element","attrs","$compile",r.serviceName,o.b,a.b],h.TOOLTIP_CONTENT_CLASS="complex-tooltip-content";class m{constructor(e){this.$injector=e,this.restrict="A",this.scope={tooltipScope:"&",tooltipTemplate:"@",tooltipAutoUpdate:"@?"},this.link=(e,t,s)=>{e.complexTooltip=this.$injector.instantiate(h,{scope:e,element:t,attrs:s})}}}m.$inject=["$injector"],i.module(d,[r.moduleName,o.a,l.b,a.a]).directive("bbComplexTooltip",["$injector",e=>e.instantiate(m)])}).call(this,s("5iHu"))},"4HBD":function(e,t,s){"use strict";var n=s("D57K"),i=s("Llzl"),r=s("n7/H"),o=s("1ZbL"),a=s("50Q+"),l=s("0JpG");const c="ultra.components.directives.react-toolkit.username",d={Class:a.LocalizedUsername,attributes:["subtext"],bindingNames:["user","format","ariaHidden","showPronouns","showPronunciation"],renderLocalized:!0,withProvider:!0};i.module(c,[l.moduleName]).component("bbUiUsername",Object(o.a)(d));var u=s("gCXj"),h=s("pjml"),m=s("oVrE"),p=s("aHpC"),g=s("4eVg"),b=s("Zjmk");s.d(t,"a",(function(){return f}));const f="ultra.components.directives.bbUsername";let v=class{constructor(e,t,s,n){this.$scope=e,this.element=t,this.attributes=s,this.bbLocalize=n,t.addClass("username"),this.initialize()}initialize(){this.unbind=this.$scope.$watchGroup(["user.id","user.familyName","user.givenName","user.title","user.email","user.pronouns","user.pronunciation","user.pronunciationAudio","user.preferredDisplayName","user.otherName"],()=>this.update())}update(){if(!this.$scope.user)return;var e;this.user=(e=this.$scope.user)&&{id:e.id,title:e.title,givenName:e.givenName,familyName:e.familyName,otherName:e.otherName,preferredDisplayName:e.preferredDisplayName,pronouns:Object(b.normalizePronouns)(e),pronunciation:e.pronunciation,pronunciationAudio:e.pronunciationAudio,email:e.email,ui:e.ui};const t=this.$scope.user;t.$asPromise&&!t.$resolved?t.$asPromise().then(()=>this.updateDom()):this.updateDom(),null!=this.attributes.autoUpdate&&"false"!==this.attributes.autoUpdate||this.unbind()}isAnonymousUser(e){return Object(m.g)(e)}cleanUpClassNames(e){return e.split(/\s+/).filter(e=>!/^course_user.+$/.test(e)).join(" ")}updateDom(){const e=this.$scope.user;this.shouldAllowLabel="true"===this.attributes.shouldAllowLabel,this.showInlineUsername="true"===this.attributes.showInlineUsername,this.showPronouns="true"===this.attributes.showPronouns,this.showPronunciation="true"===this.attributes.showPronunciation,this.isAnonymousUser(e)&&(e.givenName=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"anonymous.postedName"}),e.familyName=""),this.element[0].className=this.cleanUpClassNames(this.element[0].className),e.id&&this.element.addClass("course_user"+e.id);const t=this.bbLocalize.getFormatId(r.ILocaleUsernameFormat,this.attributes.format);this.$scope.format=t;try{this.accessibilityName=this.bbLocalize.formatUsernameSync(e,t,this.$scope,{noWrap:!0,noEscape:!0}),"true"===this.attributes.hasTitleAttr?this.element.attr("title",this.accessibilityName):this.element.removeAttr("title"),this.textAccommodation=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"components.directives.username.msg-has-accommodations",params:{fullname:this.accessibilityName},noWrap:!0})}catch(e){console.error(e)}}};v=Object(n.__decorate)([Object(n.__param)(0,Object(p.b)("$scope")),Object(n.__param)(1,Object(p.b)("$element")),Object(n.__param)(2,Object(p.b)("$attrs")),Object(n.__param)(3,Object(p.b)(l.serviceName))],v);class S{constructor(){this.controllerAs="un",this.scope={user:"="},this.restrict="AE",this.template=g,this.controller=v}}i.module(f,[l.moduleName,u.a,h.N,c]).config([u.b+"Provider",function(e){e.onStyleRefresh((function(e,t){var s,n;const i=t.permissions,r=null===(n=null===(s=t.course)||void 0===s?void 0:s.memberships)||void 0===n?void 0:n.permissions,o=(null==r?void 0:r.viewDueDateException)||(null==r?void 0:r.viewTimeLimitException),a=(null==i?void 0:i.editDueDateException)||(null==i?void 0:i.editTimeLimitException),l=o||a;e.selector(`bb-username.course_user${t.userId}:before`).rule("display",t.accommodation().hasAccommodation&&l?"inline-block":"none!important"),e.selector(`bb-username.course_user${t.userId}:before`).rule("vertical-align",t.accommodation().hasAccommodation&&l?"middle":"none"),e.selector(`bb-username.course_user${t.userId}`).selector(".sr-only:before").rule("content",t.accommodation().hasAccommodation&&l?"attr(aria-label-if-has-accommodation)":"attr(aria-label-if-no-accommodation)"),e.selector(`bb-username.course_user${t.userId} bb-ui-username`).rule("width",t.accommodation().hasAccommodation&&l?"calc(100% - .75rem)":"100%"),e.selector(`.bb-group-user .highlight .course_user${t.userId}`).rule("overflow",t.accommodation().hasAccommodation&&l?"visible":"hidden"),e.selector(`.element-card .element-details .course_user${t.userId}`).rule("display",t.accommodation().hasAccommodation&&l?"flex":"inline"),e.selector(`.user-info bb-username.course_user${t.userId}`).rule("display",t.accommodation().hasAccommodation&&l?"flex":"block")}))}]).directive("bbUsername",["$injector",e=>e.instantiate(S)])},"4HXK":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return a}));var n=s("Llzl"),i=s("5MwF"),r=s("w9mJ");const o="ultra.services.logger",a="logger";class l{constructor(e,t){this.$http=e,this.promiseQueueService=t,this.$http=e,this.queue=t.getQueue("telemetry")}logToServer(e,t,s){if(e){const n="string"==typeof e?new Error(e):e,r={applicationId:i.a.telemetryAppId,component:"",message:n.message,data:s,cause:n.stack,level:t};r.cause||(r.cause="Stack trace is unavailable"),this.queue.enqueue(()=>this.$http.post(i.a.telemetryApiBasePath+"/v1/browser/logs",r,{timeout:i.a.telemetryApiTimeoutMS}).catch(e=>{console.error("Failed to send logs to server. \nResponse: "+e+" Status: "+e.status)}))}else console.error("Unable to send empty log entry to server")}debug(e,t){this.logToServer(e,"debug",t)}info(e,t){this.logToServer(e,"info",t)}error(e,t){this.logToServer(e,"error",t)}critical(e,t){this.logToServer(e,"critical",t)}warn(e,t){this.logToServer(e,"warn",t)}}l.$inject=["$http",r.b];class c extends l{}n.module(o,[r.a]).service(a,l)},"4eVg":function(e,t){e.exports='<bb-ui-username\n  ng-if="un.user"\n  class="bb-ui-username"\n  user="un.user"\n  format="un.format"\n  aria-hidden="!un.shouldAllowLabel"\n  show-pronouns="un.showPronouns"\n  show-pronunciation="un.showPronunciation"\n  subtext="{{ un.showInlineUsername ? user.userName : undefined }}"\n></bb-ui-username>\n<span\n  ng-if="un.user"\n  class="sr-only"\n  ng-attr-aria-hidden="{{ !un.shouldAllowLabel || undefined }}"\n  aria-label-if-no-accommodation="{{ un.accessibilityName }}"\n  aria-label-if-has-accommodation="{{ un.textAccommodation }}"\n></span>\n'},"4nF1":function(e,t,s){"use strict";s.d(t,"b",(function(){return T})),s.d(t,"a",(function(){return D}));var n=s("Llzl"),i=s("nsO7"),r=s("pjml"),o=s("Y3OE"),a=s("nbDY"),l=s.n(a),c=s("Q/M7"),d=s("nmzr"),u=s("zGdY"),h=s("CY5M"),m=s("AuQm"),p=s("kcGO");class g extends l.a{}g.BbPage=new g("resource/x-bb-page"),g.LtiLaunch=new g("ltilaunch"),g.ScormLaunch=new g("scormlaunch"),g.ContentUrl=new g("contenturl"),g.FileUrl=new g("fileurl"),g.None=new g("none");class b{constructor(e,t){this.content=e,this.isFromCourseLink=t}deleteKey(){return this.content.contentHandler.toString()}iconClass(){const e=o.a.parse(this.content.contentHandler.toString());return null!=e?e.iconClass:null}linkAction(){let e=this.content.contentHandler.toString();this.isFromCourseLink&&(e=o.a.CourseLink.toString());let t=g.parse(e);return t||(t=new g(e)),t}viewHandler(){return this.content.contentHandler.toString()}getTargetCourseContentDisplay(){return null}getEditSref(){return null}getEditState(){return null}getEditStateParams(){return null}usesEditButton(){return null!=this.getEditSref()}canUseEditButton(){return this.usesEditButton()&&!(!this.content.permissions||!this.content.permissions.edit&&!this.content.permissions.modifyAvailability)}canDownload(){return!1}isLtiLink(){return!1}contentUrl(){throw new Error("contentUrl() is not supported for "+this.content.contentHandler.toString())}supportsConversations(){return!1}isXplorLtiLink(){return!1}getContentProgressRoute(){}}class f extends b{getEditState(){return"gradebook-item.assignment"}getEditStateParams(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details"}}getEditSref(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details"})'}}class v extends b{getEditState(){return"gradebook-item.assignment"}getEditStateParams(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details"}}getEditSref(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details"})'}supportsConversations(){return!0}}class S extends b{deleteKey(){if(this.content.getAssociatedGradingColumn){const e=this.content.getAssociatedGradingColumn();if(e&&e.gradebookCategory)switch(e.gradebookCategory.title){case u.KnownGradebookCategoryTitle.Assignment:return o.a.UltraAssignment.toString();default:return o.a.TestLink.toString()}}return this.content.contentHandler.toString()}getEditState(){return d.GradeRoutes.GRADEBOOK_ITEM_ASSESSMENT}getEditStateParams(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details",assessmentType:"test"}}canUseEditButton(){const e=this.content.getDeployedAssessment().permissions;return!(!e||!e.modify&&!e.view)}getEditSref(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details",assessmentType: "test"})'}supportsConversations(){return!0}}class y extends b{getEditState(){return"discussion.view.with-grading"}getEditStateParams(){return{courseId:this.content.courseId,contentId:this.content.id}}getEditSref(){return this.getEditState()+"({courseId: content.courseId,contentId: content.id})"}}class C extends b{constructor(e){super(e),this.content=e,e.contentDetail&&(this.targetContent=e.getLinkContentSource())}getTargetCourseContentDisplay(){if(!(this.targetContent&&this.targetContent.$resolved&&this.targetContent.contentHandler))return new b(this.content,!0);switch(D.normalize(this.targetContent.contentHandler.toString())){case o.a.Discussion.toString():return new y(this.targetContent,!0);default:return new b(this.targetContent,!0)}}}class I extends b{constructor(e,t){super(e),this.options=t}getEditState(){return d.FileRoutes.EDIT_FILE}getEditStateParams(){return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}canDownload(){var e,t;if(!(null===(e=this.options)||void 0===e?void 0:e.supportsInlineRender))return!0;const s=null===(t=this.content.contentDetail)||void 0===t?void 0:t[r.p.ContentHandler.File.toString()];return Object(u.fileAssociationModeAllowsDownload)(null==s?void 0:s.fileAssociationMode)}linkAction(){var e;if(!this.content.contentDetail||!(null===(e=this.options)||void 0===e?void 0:e.supportsInlineRender))return g.ContentUrl;const t=this.content.contentDetail[r.p.ContentHandler.File.toString()],s=null==t?void 0:t.fileAssociationMode,n=(null==t?void 0:t.file)&&Object(m.makeFileFromLearnSingleFile)(t.file,this.content.description);return n&&"LINK"!==s&&Object(m.canFileBeRenderedInline)(n,!0)?g.FileUrl:g.ContentUrl}contentUrl(){var e,t;const s=null===(e=this.content.contentDetail)||void 0===e?void 0:e[r.p.ContentHandler.File.toString()];return c.c(null===(t=null==s?void 0:s.file)||void 0===t?void 0:t.permanentUrl)}getContentProgressRoute(){return{stateName:d.FileRoutes.PREVIEW_FILE,args:{id:this.content.id,courseId:this.content.courseId,view:p.ContentTabId.Progress}}}}class $ extends b{getEditState(){return d.ContentRoutes.EDIT_FOLDER}getEditStateParams(){return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}getContentProgressRoute(){return{stateName:d.ContentRoutes.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}class w extends b{getEditState(){return"content-manage.edit.learning-module"}getEditStateParams(){return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}getContentProgressRoute(){return{stateName:d.ContentRoutes.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}class T extends ${static get EDIT_STATE_SREF(){return d.ContentRoutes.DOCUMENT}getEditState(){return T.EDIT_STATE_SREF}getIconClass(){return o.a.Document.iconClass}supportsConversations(){return!0}linkAction(){return g.BbPage}viewHandler(){return o.a.Page.toString()}getContentProgressRoute(){return{stateName:d.ContentRoutes.DOCUMENT,args:{id:this.content.id,courseId:this.content.courseId,view:p.ContentTabId.Progress}}}}class E extends b{getEditState(){return"content-manage.edit.link"}getEditStateParams(){return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}contentUrl(){const e=r.p.ContentHandler.ExternalLink.toString();let t=Object(i.get)(this.content,["contentDetail",e,"url"],null);return t&&(t=Object(i.unescape)(t)),E.PROTOCOL_CHECK.test(t)?t:"http://"+t}linkAction(){return g.ContentUrl}getContentProgressRoute(){return{stateName:d.ContentRoutes.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}E.PROTOCOL_CHECK=/^\w+\:{1}/;class k extends b{isCloudDocument(){var e;return this.content.contentDetail&&h.LtiItemOrigin.CloudDocument===(null===(e=this.getContentDetail())||void 0===e?void 0:e.itemOrigin)}getContentDetail(){var e;return this.content.contentDetail[null===(e=this.content.contentHandler)||void 0===e?void 0:e.toString()]}getEditState(){return this.isCloudDocument()?d.Routes.Lti.LTI_LAUNCH_PEEK:"content-manage.edit.lti"}getEditStateParams(){var e;if(this.isCloudDocument()){let t=c.c(null===(e=this.getContentDetail())||void 0===e?void 0:e.launchLink);return t=c.a(t,"from_ultra","true"),{courseId:this.content.courseId,contentId:this.content.id,toolHref:t}}return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}linkAction(){return g.LtiLaunch}isLtiLink(){return!0}isXplorLtiLink(){var e,t,s,n,i;const r=null===(i=null===(t=null===(e=this.content)||void 0===e?void 0:e.contentDetail)||void 0===t?void 0:t[null===(n=null===(s=this.content)||void 0===s?void 0:s.contentHandler)||void 0===n?void 0:n.toString()])||void 0===i?void 0:i.url;return r&&r.indexOf("://xplor")>-1}supportsConversations(){return!0}getContentProgressRoute(){return{stateName:d.ContentRoutes.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}class P extends b{deleteKey(){return o.a.LtiPlacement.toString()}getEditState(){return"content-manage.edit.placement"}getEditStateParams(){return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}linkAction(){return g.LtiLaunch}isLtiLink(){return!0}supportsConversations(){return!0}canUseEditButton(){return super.canUseEditButton()&&n.isDefined(this.content.contentDetail)&&n.isDefined(this.content.contentDetail[this.content.contentHandler.toString()])&&n.isDefined(this.content.contentDetail[this.content.contentHandler.toString()].placement)}getContentProgressRoute(){return{stateName:d.ContentRoutes.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}class A extends b{getEditState(){return"scorm-settings"}getEditStateParams(){return{contentId:this.content.id}}getEditSref(){return this.getEditState()+"({contentId:content.id})"}linkAction(){return g.ScormLaunch}supportsConversations(){return!0}getContentProgressRoute(){return{stateName:d.ContentRoutes.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}class R extends b{getEditState(){return d.Routes.Journal.JOURNAL_VIEW_WITH_PARTICIPATION}getEditStateParams(){return{courseId:this.content.courseId,contentId:this.content.id}}getEditSref(){return this.getEditState()+"({courseId: content.courseId,contentId: content.id})"}}class O extends b{linkAction(){return g.LtiLaunch}isLtiLink(){return!0}}class D{static normalize(e){return null!=e&&0===e.indexOf(o.a.LtiPlacement.toString())?o.a.LtiPlacement.toString():e}static matchesHandlers(e,t){const s=this.normalize(e);return Object(i.findIndex)(t,e=>s===e.toString())>=0}static create(e,t){switch(this.normalize(e.contentHandler.toString())){case o.a.ClassicAssignment.toString():return new f(e);case o.a.File.toString():return new I(e,t);case o.a.Folder.toString():if(e.contentDetail){const t=e.contentDetail[o.a.Folder.toString()];if(t&&t.isBbPage)return new T(e)}return new $(e);case o.a.ExternalLink.toString():return new E(e);case o.a.LtiLink.toString():return new k(e);case o.a.LtiPlacement.toString():return new P(e);case o.a.Page.toString():return new T(e);case o.a.PartnerCloud.toString():return new O(e);case o.a.TestLink.toString():return new S(e);case o.a.RusticiScorm.toString():return new A(e);case o.a.UltraAssignment.toString():return new v(e);case o.a.Discussion.toString():return new y(e);case o.a.CourseLink.toString():return new C(e).getTargetCourseContentDisplay();case o.a.LearningModule.toString():return new w(e);case o.a.Journal.toString():return new R(e);default:return new b(e)}}}},"4vd5":function(e,t,s){"use strict";var n=s("ERkP"),i=s("td+C"),r=s("oPIA"),o=s("v6Sp"),a=s("tN4z"),l=s("nmzr");const c=e=>{const[t,s]=Object(n.useState)("#");return Object(n.useEffect)(()=>{s(l.router.getHref(l.IntegrationRoutes.INTEGRATION_BASE,{routeName:e}))},[e]),t},d=e=>{const{isRtl:t,to:s,analyticsId:i,className:r,children:o,...l}=e,d=c(s),u=i?`integration.${i}`:"integration.link";return n.createElement(a.AnalyticsJssThemeProvider,{theme:"light",isRtl:t},n.createElement(a.AnalyticsLink,{...l,className:`uef-link ${r}`,analyticsId:u,href:d},o))},u=e=>{const{analyticsId:t,children:s,isRtl:i,to:r,...o}=e,l=c(r),d=t?`integration.${t}`:"integration.button.link";return n.createElement(a.AnalyticsJssThemeProvider,{theme:"light",isRtl:i},n.createElement(a.AnalyticsPrimaryButton,{...o,analyticsId:d,href:l,variant:"contained",color:"primary"},s))},h=/^[a-z0-9-]*$/i,m=new Map([["uef--base-nav-button","integration-navigation-button-content themed-background-primary-alt-fill-only theme-border-left-active"],["uef--base-nav-button-v2","integration-navigation-button-content-v2 themed-background-primary-alt-fill-only theme-border-left-active"],["uef--button","button button--primary"],["uef--button--secondary","button button--secondary"]]),p=new Map([["classname",e=>Object(o.h)(e,m)]]);t.a=new class{constructor(e){this.integrationService=e,this.onIntegrationRegistration=(e,t)=>{const s=this.validateBaseNavigationRequest(e);s.status===r.p.Success?(this.registeredRoutes.set(t.id,{integrationId:t.id,routes:[e.routeName],displayName:e.displayName,initialContents:e.initialContents}),this.listeners.forEach(e=>{try{e(this.registeredRoutes.get(t.id))}catch(e){console.error(e)}}),this.integrationService.sendMessage(s,t)):this.integrationService.sendMessage(s,t)},this.registeredRoutes=new Map,this.listeners=new Set}init(e){this.initializeWhitelist(),this.integrationService.addIntegrationMessageType(r.d,this.onIntegrationRegistration),this.bbLocalize=e}initializeWhitelist(){const e={props:{to:!0,className:!1},isValid:(e,t)=>!!this.isRouteRegistered(e.props.to,t)||(console.warn(`${e.props.to} has not been registered`),!1),render:(e,t,s)=>n.createElement(d,{...t,isRtl:this.bbLocalize.isRTL(null)}," ",s," "),transformers:p},t={props:{to:!0,className:!1},isValid:(e,t)=>!!this.isRouteRegistered(e.props.to,t)||(console.warn(`${e.props.to} has not been registered`),!1),render:(e,t,s)=>n.createElement(u,{...t,isRtl:this.bbLocalize.isRTL(null)}," ",s," "),transformers:p};o.b.addGlobalComponent(r.q.Link,e),o.b.addGlobalComponent(r.q.ButtonLink,t)}onIntegrationAdded(e){return this.listeners.add(e),()=>{this.removeIntegrationAdded(e)}}removeIntegrationAdded(e){this.listeners.delete(e)}getRegisteredRecords(){return Array.from(this.registeredRoutes.values())}getRecordForRoute(e){return Array.from(this.registeredRoutes.values()).find(t=>t.routes.indexOf(e)>=0)}isValidRouteName(e){return h.test(e)}validateBaseNavigationRequest(e){return this.getRecordForRoute(e.routeName)?{type:r.d,status:r.p.Failure,error:r.t.ExistingRouteName,errorMessage:`${e.routeName} as already been registered`}:this.isValidRouteName(e.routeName)?{type:r.d,status:r.p.Success}:{type:r.d,status:r.p.Failure,error:r.t.InvalidRouteName,errorMessage:`${e.routeName} has invalid characters in it.`}}isRouteRegistered(e,t){var s;const n=null===(s=this.registeredRoutes.get(t))||void 0===s?void 0:s.routes;return!!n&&-1!==n.indexOf(e)}}(i.a)},"5Dl8":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));var n=s("nsO7");function i(e){return e&&`${e/16}rem`||"0"}class r{constructor(e){this.parent=e,this.curSelector=null,this.pool=null==e?{}:null}selector(e){const t=new r(this);return t.curSelector=e,t}rule(e,t){return this.subRule(null,e,t),this}build(){return n.map(this.pool,(e,t)=>{const s=[];return e.forEach(e=>s.push(e)),`${s.join(",")}{${t}}`}).join("\n")}subRule(e,t,s){const i=n.compact([this.curSelector,e]).join(" ");if(null!=this.parent)this.parent.subRule(i,t,s);else{const e=`${t}:${s}`;this.pool[e]=this.pool[e]||new Set,this.pool[e].add(i)}}}},"5KgE":function(e,t,s){"use strict";var n=s("D57K"),i=s("Llzl"),r=s("w9Zy"),o=s("Fvsw"),a=s("Qbdf"),l=s("lEL+"),c=s("aHpC"),d=s("g66W"),u=s("5MwF"),h=s("wDWF");const m=1,p=u.a.features.devtools_disableFtue?-1:2,g="ftue.",b=".show.",f=".visited",v="hide",S="show";class y{constructor(e,t,s,n){this.$q=e,this.context=t,this.offCanvas=s,this.contextCourse=n}shouldShow(e,t,s){return u.a.disableAllFtueGuidance?this.$q.when(!1):s?this.$q.when(this.isShownInCurrentSession(e)):this.$q.all([this.offCanvas.getElement(t),this.offCanvas.getTopElement(),this.getSessionNumber(e)]).then(t=>{const s=t[0],n=t[1],i=t[2];return n&&s!==n?this.$q.when(!1):this.shouldShowImpl(e,i)})}shouldShowImpl(e,t){if(t>p)return this.$q.when(!1);if(this.isLastSessionCurrent(e))return this.$q.when(this.isShownInCurrentSession(e));const s=++t<=p;return sessionStorage.setItem(this.getSessionStorageKey(e),s?S:v),this.setSessionNumber(e,t).then(()=>s),this.$q.when(s)}hide(e,t){sessionStorage.setItem(this.getSessionStorageKey(e),v),t&&this.getSessionNumber(e).then(t=>{this.setSessionNumber(e,++t)})}getSessionNumber(e){const t=g+e+f;if(!this.isPredictComponent(e)){const e=e=>{const t=parseInt(e.value,10);return Number.isNaN(t)?0:t};return this.context.getPreference(t,"0").then(e)}return this.context.getPredictPreference(t,"0").then(e=>{const t=parseInt(e.value,10);return Number.isNaN(t)?p:t})}isLastSessionCurrent(e){const t=sessionStorage.getItem(this.getSessionStorageKey(e));return t===S||t===v}isShownInCurrentSession(e){return sessionStorage.getItem(this.getSessionStorageKey(e))!==v}setSessionNumber(e,t){const s=g+e+f;return this.isPredictComponent(e)?this.context.setPredictPreference(s,t.toString()):this.context.setPreference(s,t.toString())}getSessionStorageKey(e){return g+e+b+h.a(this.context.sessionId)}isPredictComponent(e){return!!e&&0===e.toLowerCase().indexOf("predict.")}}class C extends y{shouldShowImpl(e,t){return this.courseId=this.contextCourse.courseId&&this.contextCourse.courseId.replace(/_/g,"."),this.getSessionNumber(e+this.courseId).then(s=>{if(t>p&&s>m)return this.$q.when(!1);if(this.isLastSessionCurrent(e+this.courseId))return this.$q.when(this.isShownInCurrentSession(e)||this.isShownInCurrentSession(e+this.courseId));let n=!1,i=!1;s++,n=++t<=p,sessionStorage.setItem(this.getSessionStorageKey(e),n?S:v),i=s<=m,sessionStorage.setItem(this.getSessionStorageKey(e+this.courseId),i?S:v);const r=[];return t<=p+1&&r.push(this.setSessionNumber(e,t)),s<=m+1&&r.push(this.setSessionNumber(e+this.courseId,s)),this.$q.all(r).then(()=>n||i),this.$q.when(n||i)})}hide(e){sessionStorage.setItem(this.getSessionStorageKey(e),v),this.courseId||(this.courseId=this.contextCourse.courseId&&this.contextCourse.courseId.replace(/_/g,".")),sessionStorage.setItem(this.getSessionStorageKey(e+this.courseId),v)}}s.d(t,"b",(function(){return I})),s.d(t,"c",(function(){return $})),s.d(t,"a",(function(){return w}));const I="ultra.service.firstTimeHelper",$="firstTimeHelper",w=/[_-]/g;let T;const E=Symbol("default");let k=class{constructor(e){this.timeout=e,this.TIME_TO_SHOW_FIRST_BUTTON=5e3}shouldShow(e,t,s){return this.convertAngularPromise((T.get(e)||T.get(E)).shouldShow(e,t,s))}hasBeenShown(e){return(T.get(e)||T.get(E)).getSessionNumber(e).then(e=>e>0)}hide(e,t){(T.get(e)||T.get(E)).hide(e,t)}fadeAddContentButton(e,t,s){this.shouldShow(t,s).then(t=>{const s=e.$on("add-content-button-ready",()=>{const n=t?this.TIME_TO_SHOW_FIRST_BUTTON:0;s(),this.timeout(()=>{e.$broadcast("always-show-time-expires")},e,n)})})}hasMultiTargetSupport(e){return!!e&&0===e.toLowerCase().indexOf("predict.")}convertAngularPromise(e){return new Promise((t,s)=>{e.then(t).catch(s)})}};k=Object(n.__decorate)([Object(n.__param)(0,Object(c.b)(l.b))],k);class P extends k{}i.module(I,[o.a,a.b,r.d]).run(["$q",o.b,a.e,r.e,(e,t,s,n)=>{const i=new C(e,t,n,s),r=new y(e,t,n,s);T=(new Map).set(function(e){return d.a(e,w)}("components.features.course.content.assessment.ftue.group-conversation"),i).set(E,r)}]).service($,k)},"5MwF":function(e,t,s){"use strict";var n={};s.r(n),s.d(n,"default",(function(){return r}));var i=s("nsO7"),r={},o={batchRestAPI:!0,collab:!0,componentDemos:!1,courseNotice:!1,devtools_allyMock:!1,devtools_digestHub:!0,devtools_disableFtue:!1,devtools_enableSetLangQuery:!1,externalCourse:!1,httpEase:!0,journal:!1,learnApiCaching:!0,organizationA4L:!1,organizationPredict:!1,overallGradeAlert:!1,predictSisCards:!1,reactAssessmentsSettings:!1,rightToLeftSupport:!0,useReactRendererForDocumentEditor:!1,multipleAttemptsInGroupAssessments:!0};const a={externalCourse:!1,reactAssessmentsSettings:!1,devtools_allyMock:!1,devtools_disableFtue:!1},l={externalCourse:!1,reactAssessmentsSettings:!1,devtools_allyMock:!1,devtools_disableFtue:!1},c={devtools_enableSetLangQuery:!0},d=function(e,t,s){return!(e in s)||s[e]};var u={"^(https://ultra-integ.int.bbpd.io)$":(e,t)=>d(e,0,a),"^(https://ultra-canary.bbpd.io)$":(e,t)=>d(e,0,l),".*(bbpd.io)":(e,t)=>((e,t,s)=>e in s?s[e]:o[e])(e,0,c)},h=s("Q/M7");var m=(()=>{const e={...o},t=h.j(),s=u[Object.keys(u).find(e=>!!t.match(e))];if("all"===s)for(const t of Object.keys(e))e[t]=!0;else if("function"==typeof s)for(const t of Object.keys(e))e[t]=s(t,e[t]);else null!=s&&Object.assign(e,s);return e})();var p={};var g={production:!0};const b={apiBasePath:"/learn/api",basePath:"/ultra",buildInfo:"undefined"!=typeof window&&window.__buildInfo||{},chartsApiBasePath:"/charts/api",institutionApiBasePath:"/institution/api",partnerCloudBasePath:"/webapps/partner-cloud/app",defaultBasePage:"base.recentActivity",localeLoader:{fallbackLocales:["en-us","en"]},directivesPerf:!1,features:Object.assign(m,p),storageKeyForFeatureFlags:"bb_feature_flags",showFeaturePrototypes:!1,errorDetails:!1,infiniteScrollThrottleMS:500,production:!0,unitTesting:!1,showComingSoonScreens:!0,showDigestHud:!0,streamLoadingInterval:12e4,telemetryApiBasePath:"/telemetry/api",telemetryApiTimeoutMS:2e3,telemetryAppId:"ultra",trialSiteSuggestionsUrl:"https://community.blackboard.com/community/ideas",trialSiteContactSalesUrl:"http://bbbb.blackboard.com/EducatorPreviewcontact",trialSiteLiveChatUrl:"https://chat.edusupportcenter.com/chat/websiteChat?short_name=educatorpreview&key=educatorpreview1707",trialSiteSupportPhone:"1-844-435-2162",cloudStorageIntegrationServices:[],mockApiEndpoints:[],disableAllFtueGuidance:!1,allyAutoUpdateInterval:500,allyClearCacheInterval:1e4,allyInitializationTimeout:1e4,cloudStorageIntegrationInitializationTimeout:1e4},f=JSON.parse(sessionStorage.getItem(b.storageKeyForFeatureFlags)||"{}");i.isEmpty(f)||(console.warn("Attention! Feature flags are overridden by client setting!",f),console.warn("To clear, please logout and re-login"),Object.assign(b.features,f)),n&&Object.assign(b,n),b.production=g.production;t.a=b},"5RJJ":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return c}));var n=s("Llzl"),i=s("yC9S"),r=s("oVrE"),o=s("pjml"),a=s("zGdY");const l="ultra.service.courseMembership",c="courseMembership";class d{constructor(e,t,s,n){this.$q=e,this.$rootScope=t,this.CourseModel=s,this.CourseMembershipModel=n,this.userCourseAvailabilities={},this.msgToolAvailability={},this.fetchToolAvailabilityPromiseCache={},i.b.OnRootScope(this.$rootScope,"membership.update",(e,t,s,n,i,r,o,a)=>{this.getUserCourseAvailabilities(a).then(()=>{this.userCourseAvailabilities[a][o.id]=t.isAvailable})}),i.b.OnRootScope(this.$rootScope,"deleteMembership",(e,t,s,n)=>{this.getUserCourseAvailabilities(n).then(()=>{this.userCourseAvailabilities[n][t.id]=!1})}),i.b.OnRootScope(this.$rootScope,"roster.enroll.new.membership",(e,t,s,n)=>{this.getUserCourseAvailabilities(s).then(()=>{this.userCourseAvailabilities[s][n]=t.isAvailable})})}getUserCourseAvailabilities(e){if(this.userCourseAvailabilities[e])return this.$q.when(this.userCourseAvailabilities[e]);const t=this.$q.defer();return this.userCourseAvailabilities[e]={},this.CourseModel.$new(e).memberships.$refresh().$then(s=>{s.forEach(t=>{this.userCourseAvailabilities[e][t.userId]=t.isAvailable}),this.userCourseAvailabilities[e][r.c()]=!0,this.userCourseAvailabilities[e][r.e()]=!1,t.resolve(this.userCourseAvailabilities[e])}),t.promise}getMsgToolAvailability(e,t){if(!e)return;if(t||null==this.msgToolAvailability[e.id]){if(!e.isUltra()){let t=this.fetchToolAvailabilityPromiseCache[e.id];return t||(t=e.tools.$find("messages").$asPromise().then(t=>(this.msgToolAvailability[e.id]=t.isVisible,t.isVisible),e=>{console.error("Fetch ToolAvailability error!")}).finally(()=>{delete this.fetchToolAvailabilityPromiseCache[e.id]}),this.fetchToolAvailabilityPromiseCache[e.id]=t,t)}this.msgToolAvailability[e.id]=!0}const s=this.$q.defer();return s.resolve(this.msgToolAvailability[e.id]),s.promise}isUserCourseAvailable(e,t){return this.userCourseAvailabilities[e][t]}createGuestMembership(e,t){return this.CourseMembershipModel.$build({userId:t.id,course:e,user:t,role:a.KnownCourseRoleIdentifier.Guest})}}d.$inject=["$q","$rootScope",o.m.serviceName,o.t.serviceName];class u extends d{}n.module(l,[o.N]).service(c,d)},"5uPl":function(e,t,s){"use strict";s.d(t,"a",(function(){return h})),s.d(t,"b",(function(){return m}));var n=s("D57K"),i=s("nsO7"),r=s("Llzl"),o=s("pjml"),a=s("0JpG"),l=s("Q/M7"),c=s("vJBG"),d=s("aHpC"),u=s("3PCF");const h="ultra.service.originalityReport",m="originalityReport";let p=class{constructor(e,t){this.localize=e,this.$q=t,this.columnOriginalityAverageScoreDict={}}setCourseContent(e,t){this.courseContent=e,this.isPrivileged=t}clearCourseContent(){this.courseContent=void 0,this.isPrivileged=void 0}updateReport(e,t,s){this.columnId=s,this.attempt=e,this.openOriginalityReport=!0,this.shouldFetchOriginality()&&(t&&(this.gradedQuestionAttempts=t.map(e=>i.pick(e,["questionAttempt.question.position","questionAttempt.visibleQuestionNumber"]))),this.fetchOriginality())}clearReport(){this.gradedQuestionAttempts=void 0,this.attempt=void 0,this.originality=void 0,this.openOriginalityReport=void 0,this.columnId=void 0,this.reports=void 0,this.personalMaxScore=void 0,this.personalMaxScoreReportName=void 0,this.personalAverageScore=void 0,this.classAverageScore=void 0}isSafeAssignEnabled(e){var t;return!!(null===(t=null!=e?e:this.courseContent)||void 0===t?void 0:t.isSafeAssignEnabled())}retrieveOriginalityIntegration(e){var t;const s=e||this.courseContent;return s?(this.setCourseContent(s,!0),this.$q.when(c.a.fetchDefaultOriginalityReportSubmissionService(s.courseId,null===(t=s.getAssociatedGradingColumn())||void 0===t?void 0:t.id)).then(e=>(this.defaultOriginalityIntegrationService=e,this.portalIntegrationId=this.getOriginalityIntegrationByUniqueId(null==e?void 0:e.uniqueHandle),e))):this.$q.resolve(void 0)}fetchIsOriginalityIntegrationEnabled(e){return this.retrieveOriginalityIntegration(e).then(e=>e?this.isOriginalityIntegrationEnabled():this.$q.resolve(!1))}fetchIsOriginalityEnabled(e){return this.fetchIsOriginalityIntegrationEnabled(e).then(e=>e)}isOriginalityIntegrationEnabled(){var e,t;const s=this.defaultOriginalityIntegrationService;return!!(null===(t=null===(e=null==s?void 0:s.capabilities)||void 0===e?void 0:e.OriginalityReport)||void 0===t?void 0:t.enabled)}saveOriginalityConfiguration(e){return this.$q.when(c.a.saveOriginalityConfiguration(this.courseContent,e))}isOriginalityReportEnabled(){return this.defaultOriginalityIntegrationService&&this.defaultOriginalityIntegrationService.uniqueHandle!==u.b?this.isOriginalityIntegrationEnabled():this.isSafeAssignEnabled()}getCurrentOriginalityReportProviderType(e){return e?e.uniqueHandle===u.b?u.a.SafeAssign:u.a.Integration:u.a.None}getOriginalityDisplayName(){var e;return null===(e=this.defaultOriginalityIntegrationService)||void 0===e?void 0:e.displayName}isOriginalityReportProviderActive(){return this.getCurrentOriginalityReportProviderType(this.defaultOriginalityIntegrationService)!==u.a.None}isSafeAssignActiveOriginalityProvider(){return this.getCurrentOriginalityReportProviderType(this.defaultOriginalityIntegrationService)===u.a.SafeAssign}isIntegrationActiveOriginalityProvider(){return this.getCurrentOriginalityReportProviderType(this.defaultOriginalityIntegrationService)===u.a.Integration}getOriginalityReportLinkAnalyticsId(){var e;const t=null===(e=this.defaultOriginalityIntegrationService)||void 0===e?void 0:e.uniqueHandle;return t?`course.content.originalityReport.settings.${t}.link`:"course.content.originalityReport.settings.link"}getOriginalityReportLinkText(e){const t=this.defaultOriginalityIntegrationService,s=null==t?void 0:t.displayName;return s?this.isOriginalityReportEnabled()?this.localizeProviderLinkText("course.content.originalityReport.settings.providerEnabled",s):e?this.localizeProviderLinkText("course.content.originalityReport.settings.enableProvider",s):this.localizeProviderLinkText("course.content.originalityReport.settings.providerDisabled",s):this.localize.translateSync({locale:this.localize.getAppLocale(),key:"course.content.originalityReport.settings.originalityDisabled",noWrap:!0})}localizeProviderLinkText(e,t){return this.localize.translateSync({locale:this.localize.getAppLocale(),key:e,noWrap:!0,params:{originalityProvider:t},noEscape:!0})}canStudentViewReports(){return this.courseContent&&this.courseContent.canStudentViewReports()}isReportSectionOpen(){var e;return this.openOriginalityReport&&((null===(e=this.originality)||void 0===e?void 0:e.canShowReportPanel())||this.isOriginalityIntegrationEnabled())}shouldFetchOriginality(){return this.isPrivileged&&this.isSafeAssignEnabled()||!this.isPrivileged&&this.canStudentViewReports()}setOriginalityAverageScore(e,t){let s=0,n=0;e.forEach(e=>{e.originalityProcessed&&!i.isUndefined(e.originalityScore)&&(s+=1,n+=e.originalityScore)}),s&&(this.columnOriginalityAverageScoreDict[t]=n/s)}fetchOriginality(){const e=this.attempt;e.originality.$fetch().$then(t=>{this.attempt===e&&(this.originality=t,this.generateReport())})}hasValidReports(){return this.reports&&this.reports.some(e=>!e.invalid)}generateReport(){const e=this.originality.answerOriginalities;if(this.gradedQuestionAttempts){const t=()=>this.gradedQuestionAttempts.some((e,t)=>e.questionAttempt.question.position!==t+1);if(this.isPrivileged&&t()){const t=i.sortBy(this.gradedQuestionAttempts,e=>e.questionAttempt.question.position),s=[];i.map(t,"questionAttempt.visibleQuestionNumber").forEach((e,t)=>s[e-1]=t),e.forEach(e=>e.order=s[e.order-1]+1),e.sort((e,t)=>e.order-t.order)}}this.reports=i.flatMap(e,e=>e.attachments.map(t=>({...t,isQuestionAnswerContent:!0,visibleQuestionNumber:e.order}))),this.originality.attemptOriginality&&this.reports.push(...this.originality.attemptOriginality.attachments),this.hasValidReports()&&this.calculateScore()}calculateScore(){const e=this.reports.filter(e=>!e.invalid);let t=0;this.personalMaxScore=e[0].score,this.personalMaxScoreReportName=e[0].name,e.forEach(e=>{e.reportLink=Object(l.c)(e.reportLink),this.personalMaxScore<e.score&&(this.personalMaxScore=e.score,this.personalMaxScoreReportName=e.name),t+=e.score}),this.personalAverageScore=Math.floor(t/e.length),i.isUndefined(this.columnOriginalityAverageScoreDict[this.columnId])||(this.classAverageScore=Math.floor(this.columnOriginalityAverageScoreDict[this.columnId]))}getOriginalityIntegrationByUniqueId(e){var t;return null===(t=c.a.getOriginalityIntegrationByUniqueId(e))||void 0===t?void 0:t.integrationId}};p=Object(n.__decorate)([Object(n.__param)(0,Object(d.b)(a.serviceName)),Object(n.__param)(1,Object(d.b)("$q"))],p);class g extends p{}r.module(h,[o.N]).service(m,p)},"65PF":function(e,t){e.exports='<td class="table-cell"\n    ng-show="tableCell.column.visible">\n  <div class="sr-only alternate-contents"></div>\n  <div class="transclude-container"></div>\n</td>\n'},"67oV":function(e,t,s){var n=s("ziER"),i=s("5JeM"),r=new n({id:"icon-small-close",use:"icon-small-close-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-close"><path d="M15 1L1 15M1 1l14 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(r);e.exports=r},"6BRP":function(e,t,s){var n=s("ziER"),i=s("5JeM"),r=new n({id:"icon-small-attention",use:"icon-small-attention-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-attention"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 4v5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="12" r=".5" /></symbol>'});i.add(r);e.exports=r},"6Ksg":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return d}));var n=s("5iHu"),i=s("Llzl"),r=s("nsO7"),o=s("0JpG");const a="ultra.directives.validate.bbmlmarkup",l={img:["id"]};class c{constructor(e,t){this.$q=e,this.$http=t,this.whitelist=null,this.whitelistInitializer=null,this.require="ngModel",this.restrict="A",this.initialWhitelist=()=>(null===this.whitelistInitializer&&(this.whitelistInitializer=this.$http.get("/learn/api/v1/utilities/bbml/whitelist").then(e=>{this.whitelist={};const t=(e.data[":all"]||[]).concat(l[":all"]||[]);r.forEach(e.data,(e,s)=>{const n={};r.each(e.concat(t,l[s]||[]),e=>{n[e]=e}),this.whitelist[s]=n})},()=>{this.whitelist=null})),this.whitelistInitializer),this.validate=e=>{if(null===this.whitelist)return!0;if(1!==e[0].nodeType)return!0;const t=e[0].tagName.toLowerCase();if(!Object.prototype.hasOwnProperty.call(this.whitelist,t))return!1;const s=this.whitelist[t];return r.every(e[0].attributes,e=>Object.prototype.hasOwnProperty.call(s,e.name.toLowerCase()))&&r.every(e.children(),e=>this.validate(n(e)))},this.getValidator=(e,t,s,i)=>e=>{const s=this.$q.defer();return this.initialWhitelist().then(()=>{r.every(t.children(),e=>this.validate(n(e)))?s.resolve():s.reject()}),s.promise},this.link=(e,t,s,n)=>{n.$asyncValidators.bbmlMarkup=this.getValidator(e,t,s,n)}}}c.$inject=["$q","$http"];class d extends c{}i.module(a,[o.moduleName]).directive("bbValidateBbmlMarkup",["$injector",e=>e.instantiate(c)])},"6fZB":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>new Promise((t,s)=>{e.then(e=>t(e)).catch(e=>s(e))})},"6jv3":function(e,t){e.exports='<div class="save-buttons">\n  <footer class="panel-footer" ng-if="!(hideCancel() || hideSave() || hideDelete())">\n    \x3c!--footer tag is removed, and its children appended to parent if the directive is marked as \'isInline\'--\x3e\n    <div ng-class="{\'inline\':isInline(), \'panel-footer-right\':!isInline()}" class="buttons-2 equal-buttons">\n      <button ng-if="!(hideDelete() != null ? hideDelete() : true)"\n              class="button js-delete js-primary-button non-first-focus" ng-class="{\'small clear icon\':isInline}"\n              bb-confirmation-needed="{{ deleteConfirmationResourceType }}"\n              show-type="{{mustShowDeleteConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isDeleteDisabled()"\n              ng-click="saveButtons.deleteAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="button"\n              choices="{{choices()}}"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.delete.button">\n                <span ng-if="!isInline()">{{saveButtons.deleteButtonStatus}}</span>\n                <span ng-if="isInline()"><i class="icon-trash"></i></span>\n      </button>\n      <button ng-if="!hideCancel()"\n              class="button button--secondary js-cancel js-secondary-button non-first-focus"\n              bb-confirmation-needed="{{ saveButtons.isCancelNowADelete() ? deleteConfirmationResourceType : \'\' }}"\n              show-type="{{mustShowDeleteConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isCancelDisabled()"\n              ng-click="saveButtons.cancelAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="button"\n              choices="{{choices}}"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.cancel.button">{{saveButtons.cancelButtonStatus}}</button>\n      <button ng-if="!hideSave()"\n              class="button js-save js-primary-button non-first-focus"\n              bb-confirmation-needed="{{ saveConfirmationResourceType }}"\n              show-type="{{mustShowSaveConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isSaveDisabled()"\n              ng-click="saveButtons.saveAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="submit"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.save.button">{{saveButtons.saveButtonStatus}}</button>\n    </div>\n  </footer>\n</div>'},"6vR2":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("nsO7"),i=s("IbyE");function r(e){const t=new Set;return JSON.parse(JSON.stringify(e,(e,s)=>{if("object"!=typeof s||!t.has(s))return"object"!=typeof s?s:(t.add(s),s)}))}function o(e){return Array.isArray(e)?e.map(e=>o(e)):Object(n.isPlainObject)(e)?Object(n.mapValues)(e,e=>o(e)):Object(i.deserializeISODateString)(e)}},"6ynb":function(e,t,s){"use strict";class n extends Error{constructor(e){let t="string"==typeof e?e:"";e&&e.message&&(t=e.message),super(t),this.name="Exception",this.message=t,this.stack=(new Error).stack;const s=Error;e&&e.stack?this.stack=e.stack:s.captureStackTrace&&s.captureStackTrace(this,n)}}t.a=n},"7+Tq":function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return l}));var n=s("Llzl"),i=s("0+Qs"),r=s("XGja"),o=s("+4Px");const a="ultra.services.dropdownInit",l="dropdownInitService";n.module(a,[i.a]).factory(l,[i.b,t=>{const s=(e,t)=>{t.focus()};return(n,i)=>{n.find("[data-dropdown]").each((n,a)=>{const l=e(a),c=l.attr("data-dropdown"),d=e("#"+c);if(!d.length)return;l.attr("aria-haspopup","true"),d.attr("role")||(d.attr("role","menu"),d.find("li a").each((function(){e(this).attr("role")||e(this).attr("role","menuitem")}))),d.off("keydown.fndtn.dropdown"),d.on("keydown.fndtn.dropdown",e=>{if(d.hasClass("open")){let t,n=!0,i=d.find("li a:focus").closest("li");if(0===i.length&&(i=d.find(":focus"),n=!1),e.keyCode===o.g&&!d.hasClass("bb-foundation-dropdown-close-esc-override")||e.keyCode===o.u&&!d.hasClass("bb-foundation-dropdown-tab-override"))l.click(),e.keyCode===o.g&&(s(0,l),e.stopPropagation());else if(e.keyCode===o.d||e.keyCode===o.v||e.keyCode===o.u)return n?(e.keyCode===o.d||e.keyCode===o.u&&!e.shiftKey?(t=i.nextAll().not(".scroll-control").find(":tabbable").first().closest("li"))&&0!==t.length||(t=d.find(":tabbable").closest("li").not(".scroll-control").first()):(e.keyCode===o.v||e.keyCode===o.u&&e.shiftKey)&&((t=i.prevAll().not(".scroll-control").find(":tabbable").last().closest("li"))&&0!==t.length||(t=d.find(":tabbable").closest("li").not(".scroll-control").last())),t.length>0&&t.find(":tabbable").focus()):e.keyCode===o.d||e.keyCode===o.u&&!e.shiftKey?r.b(d,i):(e.keyCode===o.v||e.keyCode===o.u&&e.shiftKey)&&r.c(d,i),!1}});let u=!0;d.off("keyup.fndtn.dropdown"),d.on("keyup.fndtn.dropdown",t=>{if((t.keyCode===o.f||t.keyCode===o.t)&&!d.hasClass("bb-foundation-dropdown-enter-override")){if(!u)return u=!0,!1;if(e(t.target).closest("input[type=checkbox]").length)return!0;if(e(t.target).closest("button").length)return!0;if("-1"===e(t.target).attr("tabindex"))return!0;if(d.hasClass("open")){const e=d.find("li a:focus").closest("li");return e.length>0?e.find("a").click():l.click(),s(0,l),!1}}}),l.off("keydown.fndtn.dropdown"),l.on("keydown.fndtn.dropdown",e=>{if((e.keyCode===o.f||e.keyCode===o.t)&&!d.hasClass("open")){l.click(),u=!1;let e=d.find("li a:focus").closest("li");return 0===e.length&&(e=d.find("li").not(".scroll-control").find(":tabbable").first().closest("li")),e.find("a:visible").length?e.find("a:visible").focus():d.find(":tabbable").first().focus(),!1}}),l.off("click.fndtn.dropdown"),l.on("click.fndtn.dropdown",e=>{let s=d.find("li a:focus").closest("li");0===s.length&&(s=d.find("li").not(".scroll-control").find(":tabbable").first().closest("li"));const n=t(()=>{"false"===d.attr("aria-hidden")&&(s.find("a:visible").length?s.find("a:visible").focus():d.find("*:focus").length||d.find(":tabbable").first().focus(),t.cancel(n))},i,50,100,!1)})})}}])}).call(this,s("5iHu"))},"7/0s":function(e,t){e.exports='<a\n  href="javascript:void(0);"\n  class="skip-link"\n  bb-focus-next="{{ bbSkipLinkFocusNext }}"\n  bb-translate\n  bb-load-bundle="components/directives/skip-link"\n  analytics-id="components.directives.skip-link.message">\n  components.directives.skip-link.message\n</a>\n'},"7/CN":function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),s.d(t,"d",(function(){return m})),s.d(t,"c",(function(){return p})),s.d(t,"h",(function(){return g})),s.d(t,"j",(function(){return b})),s.d(t,"f",(function(){return f})),s.d(t,"i",(function(){return v})),s.d(t,"a",(function(){return h})),s.d(t,"e",(function(){return y})),s.d(t,"g",(function(){return I}));var n=s("5iHu"),i=s("lUN/"),r=s("MC1S");const o=".bb-offcanvas-panel, #main-content-inner",a=".bb-close",l=".reveal-modal-bg, .wrs_modal_overlay",c="has-applied-locale-text-direction",d="initializePageDirection";var u,h;function m(e){let t=n(e),s=0;for(;t.length;){if(t.is(a))s++;else if(t.is(o)){if(s<=0)return t[0];s--}t=t.parent()}return document.body}function p(){const e=n(l);return e&&e.length}function g(e){const t=(e||"0").split(" ");return{top:parseInt(t[0],10),right:parseInt(t[1]||t[0],10),bottom:parseInt(t[2]||t[0],10),left:parseInt(t[3]||t[1]||t[0],10)}}function b(e){const t=e.view,s=e.el;e.viewHeight=null==e.viewHeight?t.get(0).clientHeight:e.viewHeight,e.viewWidth=null==e.viewWidth?t.get(0).clientWidth:e.viewWidth,e.height=null==e.height?s.height():e.height,e.width=null==e.width?s.width():e.width;const n=t.offset(),i=s.offset(),r=t.scrollTop(),o=t.scrollLeft(),a=i.top-n.top-e.padding.top,l=i.left-n.left-e.padding.left,c=i.top+e.height+e.padding.bottom-n.top-e.viewHeight,d=i.left+e.width+e.padding.right-n.left-e.viewWidth;e.height<=e.viewHeight?a<0?t.scrollTop(r+a):c>0&&t.scrollTop(r+c):a>0?t.scrollTop(r+a):c<0&&t.scrollTop(r+c),e.width<=e.viewWidth?l<0?t.scrollLeft(o+l):d>0&&t.scrollLeft(o+d):l>0?t.scrollLeft(o+l):d<0&&t.scrollLeft(o+d)}function f(e){e.attr("aria-hidden","true"),function(e){i.a(),e.find(":tabbable").each((function(){const e=n(this);e.addClass("bb-element-inaccessible"),e.data("bb-element-inaccessible",{tabindex:e.attr("tabindex")}),e.attr("tabindex","-1")}))}(e)}function v(e){e.removeAttr("aria-hidden"),e.find(".bb-element-inaccessible").each((function(){const e=n(this);e.removeClass("bb-element-inaccessible"),e.data("bb-element-inaccessible")&&(null!=e.data("bb-element-inaccessible").tabindex?e.attr("tabindex",e.data("bb-element-inaccessible").tabindex):e.removeAttr("tabindex"))}))}let S;function y(){if(S)return S;const e=document.createElement("div");e.id="rtl-browser-detector",document.body.appendChild(e);try{e.innerHTML='\n      <div dir="rtl" style="width: 1px; height: 1px; overflow: hidden; position: fixed; left: 0; top: 0">\n        <div style="width: 2px; height: 1px; white-space: nowrap">\n          <span style="width: 1px; height: 1px; display: inline-block">&nbsp;</span>\n          <span style="width: 1px; height: 1px; display: inline-block">&nbsp;</span>\n        </div>\n      </div>\n    ';const t=e.children[0];t.children[0].children[1].scrollIntoView(),S=t.scrollLeft>=0?h.Positive:h.Negative}catch(e){console.error("Error retrieving scroll direction",e),S=h.Negative}finally{document.body.removeChild(e)}return S}!function(e){e.LeftToRight="ltr",e.RightToLeft="rtl"}(u||(u={})),function(e){e[e.Positive=0]="Positive",e[e.Negative=1]="Negative"}(h||(h={}));class C{constructor(){this._rtlCSSLoadedPromise=new Promise(e=>{this._rtlCSSLoadedResolve=e})}static getInstance(){return C.instance||(C.instance=new C),C.instance}getCSSLoadedPromise(){return this._rtlCSSLoadedPromise}initialize(e){Object(r.setRTL)(e===u.RightToLeft);const t=document.getElementsByTagName("html")[0],s=[];if(t.hasAttribute(c))this._rtlCSSLoadedResolve();else{if(t.setAttribute("dir",e),t.setAttribute(c,""),e===u.RightToLeft){const e=Array.from(document.getElementsByClassName("initial-css-link"));for(let t=0;t<e.length;t++){const i=n(e[t]),r=i.attr("href");i.attr("href","");const o=n(i).clone();o.attr("href",r.replace(".css",".rtl.css")),i.removeClass("initial-css-link"),o.appendTo("head"),s.push(new Promise(e=>{o[0].onload=()=>e()}))}Promise.all(s).then(()=>{this._rtlCSSLoadedResolve()})}else this._rtlCSSLoadedResolve();const i=new CustomEvent(d,{detail:{isRtl:e===u.RightToLeft}});document.dispatchEvent(i)}}}const I=C.getInstance()},"7CA4":function(e,t,s){"use strict";var n=s("nbDY"),i=s.n(n);class r extends i.a{}r.NothingToGrade=new r("NOTHING_TO_GRADE"),r.NeedsGrading=new r("NEEDS_GRADING"),r.NeedsPosting=new r("NEEDS_POSTING"),r.AllPosted=new r("ALL_POSTED"),r.AllGraded=new r("ALL_GRADED"),r.Restricted=new r("RESTRICTED"),t.a=r},"7QJo":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("Llzl"),i=s("0JpG"),r=s("pjml"),o=s("TnpK"),a=s("Qbdf"),l=s("X455"),c=s("OTLg"),d=s("nmzr");const u="ultra.course.roster.router";n.module(u,[i.moduleName,o.b,a.b,l.a]).config([o.c,a.c,l.b,(e,t,n)=>{e.peekState("roster",{url:"/roster",resolve:{[a.d]:t.resolve,[l.c]:n.resolve,translations:[i.serviceName,e=>e.loadBundle("features/course/roster/course-roster")]},peekStates:["edit-enrollment","enroll-users",d.CourseRoutes.COURSE_MESSAGE,"invite",d.CourseRoutes.ACCOMMODATION],panelClass:"full",peekViewName:"account-update-base@",require:()=>Promise.all([s.e(0),s.e(27),s.e(71),s.e(618)]).then(s.bind(null,"DjKT")),pageTitle:"course.roster.rosterName"}).peekState("edit-enrollment",{url:"/edit/:membershipId",require:()=>Promise.all([s.e(69),s.e(71),s.e(684)]).then(s.bind(null,"VZ54"))}).peekState("enroll-users",{url:"/enroll",require:()=>Promise.all([s.e(71),s.e(658)]).then(s.bind(null,"30P8")),pageTitle:"course.roster.enroll.enrollPeople"}).peekState(d.CourseRoutes.COURSE_MESSAGE,{url:"/message?courseId?recipientId",require:()=>Promise.all([s.e(31),s.e(33),s.e(48)]).then(s.bind(null,"BrlV"))}).peekState("invite",{url:"/invite",require:()=>s.e(659).then(s.bind(null,"IgRM")),pageTitle:"course.roster.invite.inviteStudents"}).peekState(d.CourseRoutes.ACCOMMODATION,{url:"/exception/:membershipId",require:()=>s.e(655).then(s.bind(null,"0vas")),pageTitle:"course.roster.dueDateException",resolve:{currentMembership:["$q","$stateParams",r.m.serviceName,(e,t,s)=>{const n={fields:c.b.join(",")};return s.$new(t.courseId).memberships.$find(t.membershipId,n).$asPromise()}]}})}])},"7n5u":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("fN3Q"),i=s("td+C"),r=s("v6Sp"),o=s("oPIA");const a="course.outline.details",l={attributes:o.hb,classNameMappings:new Map(Object.entries({"uef--course-details--element":"element-details","uef--course-details--image":"element-image","uef--course-details--element-card":"element-card","uef--course-details--name":"name","uef--course-details--content":"content","uef--course-details--link":"blue-link","uef--course-details--container":"element-card-container","uef--course-details--menu-container":"select-wrapper content"}))},c={attributes:[...o.hb,"disabled"],classNameMappings:new Map(Object.entries({"uef--button":"button button--primary","uef--button--secondary":"button button--secondary","uef--button--course-details":"element-card","uef--button--disabled":"disabled"})),classNameDefault:"uef--button--classless"};t.b=new class{constructor(e,t){this.registrations=new Map,this.listeners=new Set,this.onIntegrationRegistration=(e,t)=>{const s=this.validateRegistrationRequest(e);s.status===o.h.Success?(this.registrations.set(s.registrationId,{integrationId:t.id,registrationId:s.registrationId,registrationName:s.registrationName}),this.notifyListeners(s.registrationId),this.integrationService.sendMessage(s,t)):this.integrationService.sendMessage(s,t)},this.integrationService=e,this.componentManager=t}init(){this.integrationService.addIntegrationMessageType(o.e,this.onIntegrationRegistration),this.initializeWhitelist()}onIntegrationAdded(e){return this.listeners.add(e),()=>{this.removeIntegrationAdded(e)}}removeIntegrationAdded(e){this.listeners.delete(e)}getRegisteredRecords(){return Array.from(this.registrations.values()).map(e=>({selectorData:{},registrationRecord:e}))}initializeWhitelist(){this.componentManager.setCustomWhiteList(a,"div",l),this.componentManager.setCustomWhiteList(a,"button",c)}notifyListeners(e){this.listeners.forEach(t=>{try{t(this.registrations.get(e))}catch(e){console.error(e)}})}hasRegistrationName(e){return Array.from(this.registrations.values()).some(t=>t.registrationName===e)}validateRegistrationRequest(e){return this.hasRegistrationName(e.registrationName)?{type:o.e,registrationName:e.registrationName,error:o.g.ExistingRegistration,status:o.h.Failure}:{type:o.e,registrationName:e.registrationName,registrationId:Object(n.v4)(),status:o.h.Success}}}(i.a,r.b)},"7oqQ":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s("JzsJ");var n=s("Llzl"),i=s("Sa5G"),r=s("0JpG"),o=s("TnpK");const a="ultra.course.question-analysis.routes",l=()=>({translations:[r.serviceName,e=>e.loadBundle("features/course/question-analysis/question-analysis")]});n.module(a,[o.b]).config([o.c,e=>{e.peekState("question-analysis",{url:"?qaContentId",abstract:!0,resolve:l(),courseEntitlement:[i.n.ViewGrades]}).peekState("question-analysis.report",{panelClass:"full",url:"/report",require:()=>Promise.all([s.e(3),s.e(5),s.e(7),s.e(54),s.e(719)]).then(s.bind(null,"wD7k")),pageTitle:"course.question-analysis.report.pageTitle",peekViewName:"question-analysis-report",peekStates:["gradebook-item","question-analysis-report"]}),e.peekState("question-analysis-report",{url:"?difficultyFilter&discriminationFilter",abstract:!0,resolve:l(),courseEntitlement:[i.n.ViewGrades]}).peekState("question-analysis-report.question-details",{panelClass:"full",url:"/questionDetails/:questionId",require:()=>Promise.all([s.e(3),s.e(5),s.e(7),s.e(54),s.e(717)]).then(s.bind(null,"jvDI")),pageTitle:"course.question-analysis.question-details.pageTitle",peekViewName:"question-analysis-question-details",peekStates:["gradebook-item"]})}])},"8HGT":function(e,t,s){"use strict";s.d(t,"a",(function(){return b}));var n=s("Llzl"),i=s("nmzr"),r=s("Sa5G"),o=s("w9Zy"),a=s("Fvsw"),l=s("vdfi"),c=s("JXhc"),d=s("hlSw"),u=s("0JpG"),h=s("pjml"),m=s("TnpK"),p=s("Qbdf"),g=s("X455");const b="ultra.course.grades.router";n.module(b,[u.moduleName,m.b,l.c,c.c,p.b]).config([m.c,p.c,g.b,(e,t,n)=>{e.peekState("gradebook-item",{abstract:!0,require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(555)]).then(s.bind(null,"AlUX")),resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/grades/gradebook-item/gradebook-item")],[p.d]:t.resolve,currentColumn:d.a.currentColumn,currentContent:d.a.currentContent}}).peekState("gradebook-item.assignment-create",{panelClass:"full",resolve:{translations:["$q",u.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/grades/gradebook-item/submissions")])]},onEnter:[o.e,m.d,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],url:"/assignment?id&parentId&positionBefore&positionAfter&gradeitemView",views:{"gradebook-item-details@":{require:[()=>Promise.all([s.e(9),s.e(137)]).then(s.bind(null,"eePf")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))]},"gradebook-item-students@":{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(42)]).then(s.bind(null,"hmMQ"))}},peekStates:["assignment-grading","assessment-settings","conversations",i.Routes.Course.COURSE_MESSAGE,"course-group","editAssignmentFileAttachment",l.a,"rubric","rubric-list","rubric-evaluation","view-exceptions"],peekViewName:"gradebook-item-panel@",pageTitle:"course.content.assignmentCreate"}).peekState("gradebook-item.assignment",{panelClass:"full",resolve:{translations:["$q",u.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/grades/gradebook-item/submissions")])]},onEnter:[o.e,m.d,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],url:"/assignment/:contentId?courseId&gradeitemView",views:{"gradebook-item-details@":{require:[()=>Promise.all([s.e(9),s.e(137)]).then(s.bind(null,"eePf")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))]},"gradebook-item-students@":{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(42)]).then(s.bind(null,"hmMQ"))}},peekStates:["assignment-grading","assessment-settings","conversations",i.Routes.Course.COURSE_MESSAGE,"course-group","editAssignmentFileAttachment",l.a,"rubric","rubric-list","rubric-evaluation","view-exceptions"],params:{},peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.gradebook-item.title.assignment.edit"}).peekState("editAssignmentFileAttachment",{require:()=>s.e(141).then(s.bind(null,"TFHU")),resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/content/media-widget/media-widget")]},url:"/assignment/fileAttachment?toolContentName&fileIndex&isRenderedInline&linkName&parentToolInstanceName&alternativeText&mediaType&bbmlEditorId"}).peekState(i.Routes.Course.COURSE_GRADES_MULTIPLE_ATTEMPT,{panelClass:"peek",resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/grades/course-grades")],[p.d]:t.resolve,currentContent:d.a.nullContent,currentColumn:d.a.currentColumn},url:"/multiple-attempt-grading?columnId&gradeId&userId&groupId",params:{hasException:!1},reloadOnSearch:!1,require:[()=>Promise.all([s.e(0),s.e(15),s.e(646)]).then(s.bind(null,"bhG9")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(551)]).then(s.bind(null,"0dEv"))],pageTitle:"course.grades.multiple-attempt-grading.title",peekStates:[i.Routes.Grade.SUBMISSION_GRADING]}).peekState(i.Routes.Grade.RECONCILE_GRADE,{panelClass:"full",resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/grades/course-grades")],[p.d]:t.resolve,currentContent:d.a.nullContent,currentColumn:d.a.currentColumn},url:"/reconcile-grade?columnId&gradeId&userId",require:[()=>s.e(683).then(s.bind(null,"NNJe")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(554)]).then(s.bind(null,"e5ML"))],pageTitle:"course.grades.reconcile-grade.title",peekStates:[i.Routes.Grade.SUBMISSION_GRADING],peekViewName:"reconcile-grade-peek"}).peekState("per-assessment-settings",{panelClass:"peek",courseEntitlement:r.n.ModifyGradebook,resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/grades/course-grades")],currentContent:d.a.currentContent,currentColumn:d.a.currentColumn,[p.d]:t.resolve},url:"/per-assessment-settings?userId&columnId&membershipId",require:[()=>Promise.all([s.e(50),s.e(712)]).then(s.bind(null,"1p7s")),()=>Promise.all([s.e(1),s.e(2),s.e(8),s.e(50),s.e(128)]).then(s.bind(null,"Wn37"))],pageTitle:"course.grades.per-assessment-settings.title"}).peekState("per-assessment-group-settings",{panelClass:"peek",courseEntitlement:r.n.ModifyGradebook,resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/grades/course-grades")],currentContent:d.a.currentContent,currentColumn:d.a.currentColumn,[p.d]:t.resolve},url:"/per-assessment-group-settings?groupId&columnId&userId",require:[()=>Promise.all([s.e(50),s.e(711)]).then(s.bind(null,"bMue")),()=>Promise.all([s.e(1),s.e(2),s.e(8),s.e(50),s.e(128)]).then(s.bind(null,"Wn37"))],pageTitle:"course.grades.per-assessment-settings.title"}).peekState("originality-report",{panelClass:"peek",url:"/originality-report",require:()=>s.e(699).then(s.bind(null,"K7I1")),peekViewName:"originality-report-peek"}).peekState(i.Routes.Grade.SUBMISSION_GRADING,{panelClass:"full",resolve:{translations:["$q",u.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/submission-grading"),t.loadBundle("features/course/grades/submissions-grading")])],[g.c]:n.resolve,currentColumn:d.a.currentColumn,currentContent:d.a.currentContent},url:"/submission-grading?columnId&gradeId&userId&attemptId&contentId&membershipId",onExit:["currentColumn",o.e,m.d,(e,t,s)=>{const n=s.current.name.match(".peek.reconcile-grade"),r=s.current.name.match(".peek.attempt-receipt-search");if(e.isMultipleAttempts()&&!n&&!r||s.prevParams.hasException){s.isPeekPanelOpen()&&t.shrinkTopPanel(),s.next.name.indexOf(i.Routes.Grade.SUBMISSION_GRADING)>=0||s.goPeekState("multiple-attempt-grading",{columnId:s.prevParams.columnId,gradeId:s.prevParams.gradeId,userId:s.prevParams.userId,membershipId:s.prevParams.membershipId,hasException:s.prevParams.hasException})}}],onEnter:[o.e,m.d,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],reloadOnSearch:!1,require:[()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(556)]).then(s.bind(null,"6S3j")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(14),s.e(0),s.e(1),s.e(2),s.e(4),s.e(41)]).then(s.bind(null,"fVgT"))],pageTitle:"course.grades.submission-grading.title",params:{commentPanelInitiallyOpen:!1},peekViewName:"submission-grading-peek",peekStates:[i.Routes.Assessment.ASSESSMENT_SETTINGS,i.Routes.Grade.SUBMISSION_DEEP_LINK,"per-assessment-settings","assessment-submission-feedback","originality-report",i.Routes.ContentMarket.CONTENT_MARKET]}).peekState(i.Routes.Grade.SUBMISSION_GRADING_FEEDBACK_TAB,{url:"/inline-feedback?mode",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${i.Routes.Grade.SUBMISSION_GRADING}@`]:{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(36)]).then(s.bind(null,"15AK"))}},peekStates:["per-assessment-settings",i.Routes.Lti.LTI,i.Routes.Grade.SUBMISSION_DEEP_LINK]}).peekState(i.Routes.Grade.SUBMISSION_GRADING_RUBRICS_TAB,{url:"/inline-rubric",pageTitle:"course.rubricInline.title",panelClass:"full",views:{[`${i.Routes.Grade.SUBMISSION_GRADING}@`]:{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(12),s.e(0),s.e(1),s.e(2),s.e(4),s.e(53)]).then(s.bind(null,"5N8L"))}},peekStates:["per-assessment-settings",i.Routes.Grade.SUBMISSION_DEEP_LINK]}).peekState(i.Routes.Grade.SUBMISSION_GRADING_ORIGINALITY_TAB,{url:"/originality-report",pageTitle:"course.content.originalityReport.routeDefinition.routeTitle",panelClass:"full",views:{[`${i.Routes.Grade.SUBMISSION_GRADING}@`]:{require:()=>s.e(63).then(s.bind(null,"djtz"))}},peekStates:["per-assessment-settings",i.Routes.Grade.SUBMISSION_DEEP_LINK]}).peekState(i.Routes.Grade.GROUP_SUBMISSION_GRADING,{panelClass:"full",params:{userId:null},resolve:{translations:["$q",u.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/submission-grading"),t.loadBundle("features/course/grades/submissions-grading")])],currentColumn:d.a.currentColumn,currentContent:d.a.currentContent},url:"/group-submission-grading?columnId&gradeId&groupId&contentId&attemptId&groupAttemptId&userId",onExit:["currentColumn",o.e,m.d,(e,t,s)=>{const n=s.current.name.match(".peek.attempt-receipt-search");!e.isMultipleAttempts()&&!s.prevParams.hasException||n||(s.isPeekPanelOpen()&&t.shrinkTopPanel(),s.goPeekState("multiple-attempt-grading",{columnId:s.prevParams.columnId,gradeId:s.prevParams.gradeId,userId:s.prevParams.userId,groupId:s.prevParams.groupId,membershipId:s.prevParams.membershipId,hasException:s.prevParams.hasException}))}],onEnter:[o.e,m.d,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],reloadOnSearch:!1,require:[()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(559)]).then(s.bind(null,"rNv7")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(14),s.e(0),s.e(1),s.e(2),s.e(4),s.e(41)]).then(s.bind(null,"fVgT"))],pageTitle:"course.grades.submission-grading.title",peekViewName:"submission-grading-peek",peekStates:[i.Routes.Assessment.ASSESSMENT_SETTINGS,i.Routes.Grade.SUBMISSION_DEEP_LINK,"per-assessment-group-settings","originality-report",i.Routes.ContentMarket.CONTENT_MARKET]}).peekState(i.Routes.Grade.GROUP_SUBMISSION_GRADING_FEEDBACK_TAB,{url:"/inline-feedback?attemptId&userId&mode",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${i.Routes.Grade.GROUP_SUBMISSION_GRADING}@`]:{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(36)]).then(s.bind(null,"15AK"))}},peekStates:["per-assessment-group-settings",i.Routes.Lti.LTI,i.Routes.Grade.SUBMISSION_DEEP_LINK]}).peekState(i.Routes.Grade.GROUP_SUBMISSION_GRADING_RUBRICS_TAB,{url:"/inline-rubric",pageTitle:"course.rubricInline.title",panelClass:"full",views:{[`${i.Routes.Grade.GROUP_SUBMISSION_GRADING}@`]:{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(12),s.e(0),s.e(1),s.e(2),s.e(4),s.e(53)]).then(s.bind(null,"5N8L"))}},peekStates:["per-assessment-group-settings",i.Routes.Grade.SUBMISSION_DEEP_LINK]}).peekState(i.Routes.Grade.GROUP_SUBMISSION_GRADING_ORIGINALITY_TAB,{url:"/originality-report",pageTitle:"course.content.originalityReport.routeDefinition.routeTitle",panelClass:"full",views:{[`${i.Routes.Grade.GROUP_SUBMISSION_GRADING}@`]:{require:()=>s.e(63).then(s.bind(null,"djtz"))}},peekStates:["per-assessment-group-settings",i.Routes.Grade.SUBMISSION_DEEP_LINK]}).peekState("assignment-grading",{panelClass:"full",resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/grades/submissions-grading")],currentColumn:["currentColumn",h.m.serviceName,m.d,(e,t,s)=>{if(null!=e)return e.$asPromise();const n=s.nextParams.columnId,i=s.nextParams.courseId;return t.$find(i).gradebook.columns.$find(n,{expand:"associatedRubrics,externalGrade"}).$asPromise()}]},url:"/grading?columnId&gradeId&groupId",reloadOnSearch:!1,require:[()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(557)]).then(s.bind(null,"XGKH")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(14),s.e(0),s.e(1),s.e(2),s.e(4),s.e(41)]).then(s.bind(null,"fVgT"))],pageTitle:"course.grades.submissions-grading.title",peekViewName:"assignment-grading-peek",peekStates:["rubric-evaluation"]}).peekState("gradebook-item.offline",{panelClass:"full",resolve:{translations:["$q",u.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/course-grades"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])]},url:"/offline-grades/:columnId?courseId&gradeitemView",views:{"gradebook-item-students@":{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(52)]).then(s.bind(null,"qijm"))}},pageTitle:"course.grades.instructorHeaderLabel"}).peekState("gradebook-item.calculation",{panelClass:"full",resolve:{translations:["$q",u.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/gradebook-item/calculation"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])]},url:"/calculation/:columnId?courseId&gradeitemView&isOverallGrade&positionBefore&positionAfter",params:{columnId:h.C.CREATE_COLUMN_ID},views:{"gradebook-item-details@":{require:()=>Promise.all([s.e(127),s.e(656)]).then(s.bind(null,"aUnP"))},"gradebook-item-students@":{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(52)]).then(s.bind(null,"qijm"))}},courseEntitlement:r.n.ViewGradebookMetaData,pageTitle:"course.grades.gradebook-item.title.calculation"}).peekState(i.GradeRoutes.GRADEBOOK_ITEM_ASSESSMENT,{panelClass:"full",courseEntitlement:[r.i.ViewAssessment,r.n.ViewAttempts],resolve:{translations:["$q",u.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/gradebook-item/submissions"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/goal-alignment/goal")])]},onEnter:[o.e,m.d,"currentColumn",a.b,(e,t,s,n)=>{n.column=s,t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",a.b,(e,t)=>{e.$broadcast("deadline-refresh"),t.column=null}],url:"/assessment/:assessmentType/{contentId:_[0-9]+_1|create}?courseId&gradeitemView&parentId&positionBefore&positionAfter&gradebookCategoryId&autoPostGrades",params:{contentId:h.p.CREATE_CONTENT_ID,isCreateState:!1},views:{"gradebook-item-details@":{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(115)]).then(s.bind(null,"EPkw"))},"gradebook-item-students@":{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(42)]).then(s.bind(null,"hmMQ"))}},peekStates:[i.Routes.Grade.CREATE_OFFLINE_ATTEMPT,"assessment-settings","question-analysis",i.Routes.Grade.RECONCILE_GRADE,"multiple-attempt-grading",i.Routes.Grade.SUBMISSION_GRADING,"group-submission-grading","course-group",i.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL,l.a,c.a,"conversations",i.Routes.Course.COURSE_MESSAGE,"edit-file-settings","rubric","rubric-list","rubric-evaluation","view-exceptions",i.Routes.ContentMarket.CONTENT_MARKET,i.Routes.Lti.LTI,"proctoring-lti-tool","per-assessment-settings","per-assessment-group-settings","grades-bulk-download"],peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.gradebook-item.title.assessment"}).peekState("grade-item",{abstract:!0,url:"/item"}).peekState("grade-item.create",{url:"/create?positionBefore&positionAfter",resolve:{translations:["$q",u.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/course-grades")])]},require:()=>s.e(131).then(s.bind(null,"kneA")),pageTitle:"course.grades.gradeItem.addItem"}).peekState("grade-item.edit",{url:"/edit/:id",resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/grades/course-grades")]},require:()=>s.e(131).then(s.bind(null,"kneA")),pageTitle:"course.grades.gradeItem.editItem"}).peekState(i.Routes.Grade.GRADE_ITEM_OVERALL_GRADE,{panelClass:"full",resolve:{translations:["$q",u.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/overall-grade"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])]},onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],url:"/overallGrade?columnId&gradeitemView",views:{"gradebook-item-details@":{require:()=>Promise.all([s.e(0),s.e(40),s.e(127),s.e(573)]).then(s.bind(null,"FOdA"))},"gradebook-item-students@":{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(52)]).then(s.bind(null,"qijm"))}},peekStates:["overall-grade-settings"],peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.overallGrade.pageTitle"}).peekState("overall-grade-settings",{url:"/overallGradeSettings",resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/grades/overall-grade")]},panelClass:"peek",require:()=>Promise.all([s.e(0),s.e(40),s.e(657)]).then(s.bind(null,"CW69")),pageTitle:"course.grades.overallGrade.settings.pageTitle"}).peekState("overall-grade-student",{url:"/overallGradeStudent?courseId&courseName",resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/grades/overall-grade")]},panelClass:"peek",require:()=>s.e(671).then(s.bind(null,"Fn0y")),pageTitle:"course.grades.overallGrade.pageTitle"}).peekState("grade-download-setting",{resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/grades/grades-download-settings/grades-download-settings")]},url:"/grade-download-setting",require:()=>s.e(670).then(s.bind(null,"+xg7")),pageTitle:"course.grades.settings.title",peekViewName:"grade-download-setting-peek",courseEntitlement:r.n.ExportGradebookData,peekStates:["content-collection-picker"],allowChildPeekStates:!0}).peekState("grade-upload-setting",{resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/grades/grades-upload-settings/grades-upload-settings")],contentCollectionAvailability:[h.rb.serviceName,e=>e.$new("bbcms").$resolve().$asPromise()]},url:"/grade-upload-setting",require:()=>s.e(600).then(s.bind(null,"nrqE")),pageTitle:"course.grades.settings.title",peekViewName:"grade-upload-setting-peek",courseEntitlement:r.n.ModifyGradebook,peekStates:["content-collection-picker"],allowChildPeekStates:!0}).peekState("grade-setting",{resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/grades/course-grades")]},url:"/grade-settings",require:()=>Promise.all([s.e(0),s.e(40),s.e(577)]).then(s.bind(null,"NsLW")),pageTitle:"course.grades.settings.title",peekViewName:"grade-setting-peek",peekStates:["rubric",i.Routes.Grade.GRADEBOOK_ITEM,i.Routes.Telemetry.INSTRUCTOR_CLASS],allowChildPeekStates:!0}).peekState(i.Routes.Grade.GRADE_AND_FEEDBACK,{resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/grades/grade-and-feedback")],[p.d]:t.resolve,currentColumn:[p.d,m.d,(e,t)=>{const s=t.nextParams.columnId;return e.gradebook.columns.$find(s).$asPromise()}]},url:"/grade-and-feedback?columnId?userId?courseId",require:()=>Promise.all([s.e(0),s.e(1),s.e(2),s.e(4),s.e(15),s.e(568)]).then(s.bind(null,"SZKj")),pageTitle:"course.grades.grade-and-feedback.title"}).peekState("course-group",{panelClass:"full",url:"/group?groupCourseId&groupContentId&groupColumnId",resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/content/group/course-group")]},courseEntitlement:r.o.ViewGroupsAsAdmin,require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(549)]).then(s.bind(null,"OZRj")),pageTitle:"course.content.courseGroup.title",peekStates:[i.Routes.Course.COURSE_MESSAGE,i.GroupRoutes.IMPORT_GROUP_MEMBERS,i.GroupRoutes.EXPORT_GROUP_SET],peekViewName:"group-message-peek"}).peekState("rubric-list",{url:"/rubricList?gradeColumnId",resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/content/assignment/rubric-list")],[p.d]:t.resolve,currentContent:d.a.currentContent},panelClass:"peek",require:()=>Promise.all([s.e(1),s.e(2),s.e(592)]).then(s.bind(null,"WtEJ")),pageTitle:"course.content.assignmentSettings.rubricList.title",peekViewName:"rubric-list-peek",peekStates:["rubric"],allowChildPeekStates:!0}).peekState("view-exceptions",{panelClass:"peek",pageTitle:"course.content.exceptions.peekPanel.title",url:"/view-exceptions",require:()=>s.e(681).then(s.bind(null,"MBGk")),resolve:{[p.d]:t.resolve,currentContent:d.a.currentContent},allowChildPeekStates:!0,peekStates:["roster"],peekViewName:"exceptions-peek"}).peekState("grades-bulk-download",{url:"/grades-bulk-download?columnId",require:[()=>s.e(741).then(s.bind(null,"sI1N"))],pageTitle:"course.grades.grades-bulk-download.pageTitle",panelClass:"full"}).peekState(i.Routes.Grade.DOWNLOAD_TEST_RESULTS,{url:"/download-test-results?columnId",require:[()=>s.e(710).then(s.bind(null,"W1Pb"))],pageTitle:"course.grades.download-test-results.pageTitle",panelClass:"peek"}).peekState(i.Routes.Course.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,{url:"/individual-grades?userId&membershipId",require:[()=>Promise.all([s.e(0),s.e(1),s.e(2),s.e(4),s.e(27),s.e(39),s.e(126),s.e(589)]).then(s.bind(null,"HPfQ"))],courseEntitlement:"course.gradebook-metadata.VIEW",peekStates:[i.Routes.Course.ACCOMMODATION,"assignment","assessment","gradebook-item","scorm-settings","gradebook-item.scorm-submissions","scorm-launch-frame","scorm-overview","multiple-attempt-grading","assignment-grading",i.Routes.Grade.SUBMISSION_GRADING,"group-submission-grading","grade-item","grade-setting","grade-download-setting","grade-upload-setting",i.Routes.Grade.GRADE_AND_FEEDBACK,i.Routes.Grade.CREATE_OFFLINE_ATTEMPT,"conversion-analysis","content-manage",i.Routes.Lti.LTI,"discussion","submission-list","rubric","overall-grade","overall-grade-student","attendance","attendance-student-records","attendance-student-view","question-analysis",i.Routes.Grade.RECONCILE_GRADE,"grades-bulk-download",i.Routes.Journal.JOURNAL_PARTICIPATION_DETAIL],panelClass:"full",pageTitle:"course.grades.instructorHeaderLabel"}).peekState(i.Routes.Grade.SUBMISSION_DEEP_LINK,{url:"/submission-deep-link?deepLinkAttemptId&peerIndex",panelClass:"full",require:[()=>s.e(147).then(s.bind(null,"c7nl")),()=>s.e(138).then(s.bind(null,"iA/f"))],peekStates:["assessment-submission-feedback"],peekViewName:"submission-deep-link"}).peekState(i.Routes.Grade.SUBMISSION_DEEP_LINK_FEEDBACK_TAB,{url:"/inline-feedback?mode&deepLinkAttemptId",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${i.Routes.Grade.SUBMISSION_DEEP_LINK}@`]:{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(117)]).then(s.bind(null,"bKLL"))}},peekStates:["per-assessment-settings",i.Routes.Lti.LTI]}).peekState(i.Routes.Grade.ATTEMPT_RECEIPT_SEARCH,{url:"/attempt-receipt-search",resolve:{[p.d]:t.resolve,translations:[u.serviceName,e=>e.loadBundle("features/course/grades/attempt-receipt-search")]},peekStates:[i.Routes.Grade.SUBMISSION_GRADING,i.Routes.Grade.GROUP_SUBMISSION_GRADING],allowChildPeekStates:!0,panelClass:"peek",require:()=>s.e(602).then(s.bind(null,"M8qv")),pageTitle:"course.grades.attempt-receipt-search.pageTitle",peekViewName:"attempt-receipt-search-peek"}),e.peekState(i.Routes.Grade.GRADEBOOK_GRID_ADVANCED_FILTERS,{panelClass:"peek",url:"/filters",require:()=>s.e(698).then(s.bind(null,"1d8D")),pageTitle:"course.grades.gradebookGrid.advancedFilters",peekViewName:"gradebook-grid-advanced-filters-peek"})}])},"8W6D":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("nbDY"),i=s.n(n);class r extends i.a{}r.NONE=new r("none"),r.CREATE=new r("create"),r.EDIT=new r("edit"),r.COPY=new r("copy")},"8jry":function(e,t){e.exports='<bb-modal class="notification js-disallowed-file-type"\n          modal-title-key="components.directives.fileUpload.disallowedFileTypeTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.disallowedFileTypeFull</bb-translate>\n      <a href="{{::fileUpload.getMoreSupportURL()}}" target="_blank" rel="noopener noreferrer" analytics-id="components.directives.fileUpload.moreSupportedFiles"><bb-translate>components.directives.fileUpload.moreSupportedFiles</bb-translate></a>\n    </p>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-if="fileUpload.validFiles.length > 0">\n        <button role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.uploadValidFiles.plural">\n          <bb-translate translate-values="{count:fileUpload.validFiles.length}">components.directives.fileUpload.uploadValidFiles.plural</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-if="fileUpload.forceReselectDisallowedFiles && fileUpload.forceReselectDisallowedFiles()">\n        <button role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.closeModalAndChooseFiles()" analytics-id="components.directives.fileUpload.selectAnotherFile">\n          <bb-translate>components.directives.fileUpload.selectAnotherFile</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},"8jzW":function(e,t,s){"use strict";s.d(t,"b",(function(){return m})),s.d(t,"c",(function(){return p})),s.d(t,"a",(function(){return b}));var n=s("D57K"),i=s("Llzl"),r=s("nmzr"),o=s("pjml"),a=s("IbyE"),l=s("TnpK"),c=s("X/qj"),d=s("fYJU"),u=s("aHpC"),h=s("+O05");const m="ultra.components.services.scoreProviderHelper",p="scoreProviderHelper";function g(e){return!e.getScore()||e.isOverrideGrade()}var b;function f(e){var t,s;if(!(null==e?void 0:e.attempts)&&!(null==e?void 0:e.groupAttempts))return!1;const n=null===(t=null==e?void 0:e.attempts)||void 0===t?void 0:t.some(e=>null==e?void 0:e.isSubmitted()),i=null===(s=null==e?void 0:e.groupAttempts)||void 0===s?void 0:s.some(e=>(null==e?void 0:e.id)&&(null==e?void 0:e.isSubmitted()));return n||i}!function(e){e[e.GenerateStateParams=0]="GenerateStateParams",e[e.GenerateStateRef=1]="GenerateStateRef",e[e.GoToState=2]="GoToState"}(b||(b={}));class v{constructor(e){this.ultraState=e}getScoreProviderHandle(){return null}openStateRef(e,t){return null}studentViewStateRef(e,t){return null}editStateRef(e,t){return null}gradingStateRef(e,t,s,n){return null}gradingWithRubricStateRef(e,t){return null}gradingWithFeedbackStateRef(e,t){return null}getSubmissionsListStateRef(e,t){return null}getAttemptReceiptSearchStateRef(e,t){return null}supportsOverall(){return!1}supportsEdit(){return!0}supportsViewItem(){return!1}supportsExternalEdit(){return!1}takeActionOnStateRef(e,t,s){switch(s){case b.GoToState:this.ultraState.goPeekState(e,t);break;case b.GenerateStateParams:return i.toJson({state:e,args:t});case b.GenerateStateRef:default:return this.generateStateRef(e,t)}}generateStateRef(e,t){return t?e+"("+i.toJson(t)+")":e}}v.$inject=[l.d];class S extends v{getScoreProviderHandle(){return a.ScoreProviderHandle.Scorm}studentViewStateRef(e,t){return this.takeActionOnStateRef("scorm-overview.student",e,t)}openStateRef(e,t){return this.takeActionOnStateRef("scorm.open",e,t)}editStateRef(e,t){return this.takeActionOnStateRef("scorm-settings",e,t)}gradingStateRef(e,t,s,n){var i;let o=r.GradeRoutes.SUBMISSION_GRADING;const a=null==s?void 0:s.hasAttempts(),l=f(s),c=(null===(i=null==s?void 0:s.attempts)||void 0===i?void 0:i.length)>e.multipleAttempts;if(s&&(a&&!l||!a&&(!(null==s?void 0:s.isSubmitted())&&!l||g(s))))o=r.GradeRoutes.GRADE_AND_FEEDBACK;else if((e.isMultipleAttempts()||c)&&l){if(t.attemptId)return this.takeActionOnStateRef(o,null,n);o=r.CourseRoutes.COURSE_GRADES_MULTIPLE_ATTEMPT}return this.takeActionOnStateRef(o,t,n)}gradingWithFeedbackStateRef(e,t){return this.takeActionOnStateRef("submission-grading.peek.assessment-submission-feedback",e,t)}getSubmissionsListStateRef(e,t){return e.gradeitemView="students",this.takeActionOnStateRef("gradebook-item.scorm-submissions",e,t)}supportsOverall(){return!0}}let y=class extends v{constructor(e,t,s){super(e),this.gradebookPermissionService=t,this.currentUser=s}getScoreProviderHandle(){return[a.ScoreProviderHandle.Test,a.ScoreProviderHandle.PeerSubmissionsTest,a.ScoreProviderHandle.PeerEvaluationTest]}openStateRef(e,t){return this.takeActionOnStateRef("assessment.open",e,t)}studentViewStateRef(e,t){return this.takeActionOnStateRef(e.state||"assessment.overview",e,t)}editStateRef(e,t){return e.assessmentType="test",e.gradeitemView="details",this.takeActionOnStateRef(r.GradeRoutes.GRADEBOOK_ITEM_ASSESSMENT,e,t)}gradingStateRef(e,t,s,n){var i,o,a;let l=r.GradeRoutes.SUBMISSION_GRADING,c=t;const d=null==s?void 0:s.hasAttempts(),u=f(s),m=h.a.isExternalSubmissionsAssessment(null===(i=null==e?void 0:e.ui)||void 0===i?void 0:i.content),p=null==e?void 0:e.isUserReconciler(this.currentUser.userId),b=(null===(o=null==s?void 0:s.attempts)||void 0===o?void 0:o.length)>e.multipleAttempts,v=(e.isMultipleAttempts()||b)&&u;if(v&&!t.attemptId)return this.takeActionOnStateRef(r.CourseRoutes.COURSE_GRADES_MULTIPLE_ATTEMPT,t,n);v&&(c=null);const S=this.gradebookPermissionService.canExecute()&&!p;return m?u||!S?(l=(null==t?void 0:t.groupId)?r.GradeRoutes.GROUP_SUBMISSION_GRADING:r.GradeRoutes.SUBMISSION_GRADING,this.takeActionOnStateRef(l,c,n)):this.takeActionOnStateRef(r.GradeRoutes.CREATE_OFFLINE_ATTEMPT,t,n):(p&&d&&!(null==e?void 0:e.peerGrading)&&!(null===(a=this.ultraState.current.peekViewName)||void 0===a?void 0:a.startsWith(r.GradeRoutes.RECONCILE_GRADE))?l=r.GradeRoutes.RECONCILE_GRADE:(null==t?void 0:t.groupId)&&u?l=r.GradeRoutes.GROUP_SUBMISSION_GRADING:!s||u||!d&&(d||(null==s?void 0:s.isSubmitted())&&!g(s))||(l=r.GradeRoutes.GRADE_AND_FEEDBACK),this.takeActionOnStateRef(l,c,n))}gradingWithFeedbackStateRef(e,t){const s=e&&e.groupId?r.GradeRoutes.GROUP_SUBMISSION_GRADING:r.GradeRoutes.SUBMISSION_GRADING;return this.takeActionOnStateRef(`${s}.assessment-submission-feedback-tab`,e,t)}gradingWithRubricStateRef(e,t){const s=(null==e?void 0:e.groupId)?r.GradeRoutes.GROUP_SUBMISSION_GRADING:r.GradeRoutes.SUBMISSION_GRADING;return this.takeActionOnStateRef(`${s}.inline-rubric`,null,t)}getSubmissionsListStateRef(e,t){return e.assessmentType="test",e.gradeitemView="students",this.takeActionOnStateRef(r.GradeRoutes.GRADEBOOK_ITEM_ASSESSMENT,e,t)}getAttemptReceiptSearchStateRef(e,t){const s=(null==e?void 0:e.groupId)?r.GradeRoutes.GROUP_SUBMISSION_GRADING:r.GradeRoutes.SUBMISSION_GRADING,n=e;return this.takeActionOnStateRef(s,n,t)}supportsOverall(){return!0}};y.$inject=[],y=Object(n.__decorate)([Object(n.__param)(0,Object(u.b)(l.d)),Object(n.__param)(1,Object(u.b)(c.b)),Object(n.__param)(2,Object(u.b)(d.b))],y);class C extends v{getScoreProviderHandle(){return a.ScoreProviderHandle.UltraAssignment}openStateRef(e,t){return this.takeActionOnStateRef("assignment.router",{courseId:e.courseId,assignmentId:e.contentId},t)}studentViewStateRef(e,t){return this.takeActionOnStateRef("assignment.view",{courseId:e.courseId,assignmentId:e.contentId},t)}editStateRef(e,t){return e.gradeitemView="details",this.takeActionOnStateRef("gradebook-item.assignment",e,t)}gradingStateRef(e,t,s,n){t.gradeitemView="students";let i="assignment-grading";const o=null==s?void 0:s.hasAttempts(),a=f(s);return s&&(o&&!a||!o&&!(null==s?void 0:s.isSubmitted())&&!a)&&(i=r.GradeRoutes.GRADE_AND_FEEDBACK),this.takeActionOnStateRef(i,t,n)}getSubmissionsListStateRef(e,t){return e.gradeitemView="students",this.takeActionOnStateRef("gradebook-item.assignment",e,t)}supportsOverall(){return!0}}class I extends v{getScoreProviderHandle(){return a.ScoreProviderHandle.Attendance}openStateRef(e,t){return this.takeActionOnStateRef("attendance",e,t)}studentViewStateRef(e,t){return this.takeActionOnStateRef("attendance-student-view",e,t)}editStateRef(e,t){return this.takeActionOnStateRef("attendance",e,t)}gradingStateRef(e,t,s,n){return this.takeActionOnStateRef("attendance",t,n)}getSubmissionsListStateRef(e,t){return this.takeActionOnStateRef("attendance",e,t)}supportsEdit(){return!1}supportsOverall(){return!0}}class $ extends v{getScoreProviderHandle(){return a.ScoreProviderHandle.Discussion}openStateRef(e,t){return this.takeActionOnStateRef(r.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,e,t)}studentViewStateRef(e,t){return this.takeActionOnStateRef(r.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,e,t)}gradingStateRef(e,t,s,n){return this.takeActionOnStateRef(r.EngagementRoutes.SUBMISSION_LIST,t,n)}editStateRef(e,t){return this.takeActionOnStateRef(r.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,e,t)}getSubmissionsListStateRef(e,t){return e.view="participants",this.takeActionOnStateRef(r.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,e,t)}supportsOverall(){return!0}}class w extends v{getScoreProviderHandle(){return a.ScoreProviderHandle.Journal}openStateRef(e,t){return this.takeActionOnStateRef(r.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION,e,t)}studentViewStateRef(e,t){return this.takeActionOnStateRef(r.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION,{...e,view:"journal"},t)}editStateRef(e,t){return this.takeActionOnStateRef(r.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION,e,t)}getSubmissionsListStateRef(e,t){return this.takeActionOnStateRef(r.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION,{...e,view:"participants"},t)}gradingStateRef(e,t,s,n){var i;const o=s.memberId,a=e.contentId,l=(null==s?void 0:s.memberId)||t.membershipId,c=(null===(i=null==s?void 0:s.user)||void 0===i?void 0:i.$pk)||(null==s?void 0:s.userId)||t.userId;return this.takeActionOnStateRef(r.JournalRoutes.JOURNAL_PARTICIPATION_DETAIL,{...t,participantId:o,contentId:a,singleMembershipId:l,singleUserId:c},n)}supportsOverall(){return!0}}class T extends v{getScoreProviderHandle(){return a.ScoreProviderHandle.LTILink}openStateRef(e,t){return this.takeActionOnStateRef(r.LtiRoutes.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}studentViewStateRef(e,t){return this.takeActionOnStateRef(r.LtiRoutes.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}getSubmissionsListStateRef(e,t){return this.takeActionOnStateRef(r.LtiRoutes.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}supportsOverall(){return!0}supportsExternalEdit(){return!0}}class E extends v{getScoreProviderHandle(){return a.ScoreProviderHandle.PartnerCloud}openStateRef(e,t){return this.takeActionOnStateRef(r.LtiRoutes.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}studentViewStateRef(e,t){let s;return s=e.linkRef?{courseId:e.courseId,linkRef:e.linkRef,linkType:a.ScoreProviderHandle.PartnerCloud.toString()}:{courseId:e.courseId,contentId:e.contentId},this.takeActionOnStateRef(r.LtiRoutes.LTI_LAUNCH,s,t)}editStateRef(e,t){return this.takeActionOnStateRef("content-manage.edit.partnercloud",{courseId:e.courseId,id:e.contentId},t)}getSubmissionsListStateRef(e,t){return this.takeActionOnStateRef(r.LtiRoutes.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}supportsOverall(){return!0}supportsViewItem(){return!0}supportsEdit(){return!1}supportsExternalEdit(){return!0}}class k extends v{}class P{constructor(e,t){this.$rootScope=e,this.$injector=t,this.delegates=Object.create(null),this.contentHandlerToDelegateMap=Object.create(null),P.SCORE_PROVIDER_DELEGATES.forEach(e=>{const t=this.$injector.instantiate(e),s=t.getScoreProviderHandle();Array.isArray(s)?s.forEach(e=>{this.buildDelegateMap(e,t)}):this.buildDelegateMap(s,t)})}buildDelegateMap(e,t){if(this.delegates[e.toString()])throw new Error("There is already a registered delegate for "+e.toString());this.delegates[e.toString()]=t,e.contentHandlers.forEach(s=>{if(this.contentHandlerToDelegateMap[s]){if(this.contentHandlerToDelegateMap[s]!==t)throw new Error("There is already a registered delegate for "+e.toString())}else this.contentHandlerToDelegateMap[s]=t})}getDelegate(e){return e&&this.delegates[e.toString()]||A.NULL_DELEGATE}getDelegateByContentHandler(e){return e&&this.contentHandlerToDelegateMap[e.toString()]||A.NULL_DELEGATE}isSupported(e){return e&&null!=this.getDelegate(e).getScoreProviderHandle()}getSupportedHandles(){return Object.keys(this.delegates).map(e=>a.ScoreProviderHandle.parse(e))}openStateRef(e,t,s){return this.getDelegateByContentHandler(e).openStateRef(t,s)}getSubmissionListStateRef(e,t,s){return this.getDelegate(e).getSubmissionsListStateRef(t,s)}getSubmissionListStateRefByContentHandler(e,t,s){return this.getDelegateByContentHandler(e).getSubmissionsListStateRef(t,s)}getAttemptReceiptSearchStateRef(e,t,s){return this.getDelegate(null==e?void 0:e.scoreProviderHandle).getAttemptReceiptSearchStateRef(t,s)}studentViewStateRef(e,t,s){return this.getDelegate(e).studentViewStateRef(t,s)}editStateRef(e,t,s){return this.getDelegate(e).editStateRef(t,s)}gradingStateRef(e,t,s,n){return this.getDelegate(null==e?void 0:e.scoreProviderHandle).gradingStateRef(e,s,t,n)}gradingWithRubricStateRef(e,t,s){return this.getDelegate(e).gradingWithRubricStateRef(t,s)}gradingWithFeedbackStateRef(e,t,s){return this.getDelegate(e).gradingWithFeedbackStateRef(t,s)}getNeedsGradingIconByContentHandler(e){let t=this.getDelegateByContentHandler(e).getScoreProviderHandle();return t?(Array.isArray(t)&&(t=t[0]),t.needsGradingIcon):null}getNeedsReconcilingIconByContentHandler(e){let t=this.getDelegateByContentHandler(e).getScoreProviderHandle();return t?(Array.isArray(t)&&(t=t[0]),t.needsReconcilingIcon):null}supportsOverall(e){return this.getDelegate(e).supportsOverall()}supportsEdit(e){return this.getDelegate(e).supportsEdit()}supportsViewItem(e){return this.getDelegate(e).supportsViewItem()}supportsExternalEdit(e){if(o.p.ContentHandler.PartnerCloud.isEqualTo(e)||o.p.ContentHandler.LtiLink.isEqualTo(e))return this.getDelegate(e).supportsExternalEdit()}}P.$inject=["$rootScope","$injector"],P.SCORE_PROVIDER_DELEGATES=[class extends v{getScoreProviderHandle(){return a.ScoreProviderHandle.UltraAssignment}openStateRef(e,t){return this.takeActionOnStateRef("assignment.router",{courseId:e.courseId,assignmentId:e.contentId},t)}studentViewStateRef(e,t){return this.takeActionOnStateRef("assignment.view",{courseId:e.courseId,assignmentId:e.contentId},t)}editStateRef(e,t){return e.gradeitemView="details",this.takeActionOnStateRef("gradebook-item.assignment",e,t)}gradingStateRef(e,t,s,n){t.gradeitemView="students";let i="assignment-grading";const o=null==s?void 0:s.hasAttempts(),a=f(s);return s&&(o&&!a||!o&&!(null==s?void 0:s.isSubmitted())&&!a)&&(i=r.GradeRoutes.GRADE_AND_FEEDBACK),this.takeActionOnStateRef(i,t,n)}getSubmissionsListStateRef(e,t){return e.gradeitemView="students",this.takeActionOnStateRef("gradebook-item.assignment",e,t)}supportsOverall(){return!0}},class extends v{getScoreProviderHandle(){return a.ScoreProviderHandle.Attendance}openStateRef(e,t){return this.takeActionOnStateRef("attendance",e,t)}studentViewStateRef(e,t){return this.takeActionOnStateRef("attendance-student-view",e,t)}editStateRef(e,t){return this.takeActionOnStateRef("attendance",e,t)}gradingStateRef(e,t,s,n){return this.takeActionOnStateRef("attendance",t,n)}getSubmissionsListStateRef(e,t){return this.takeActionOnStateRef("attendance",e,t)}supportsEdit(){return!1}supportsOverall(){return!0}},class extends v{getScoreProviderHandle(){return a.ScoreProviderHandle.Discussion}openStateRef(e,t){return this.takeActionOnStateRef(r.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,e,t)}studentViewStateRef(e,t){return this.takeActionOnStateRef(r.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,e,t)}gradingStateRef(e,t,s,n){return this.takeActionOnStateRef(r.EngagementRoutes.SUBMISSION_LIST,t,n)}editStateRef(e,t){return this.takeActionOnStateRef(r.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,e,t)}getSubmissionsListStateRef(e,t){return e.view="participants",this.takeActionOnStateRef(r.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,e,t)}supportsOverall(){return!0}},class extends v{getScoreProviderHandle(){return a.ScoreProviderHandle.Journal}openStateRef(e,t){return this.takeActionOnStateRef(r.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION,e,t)}studentViewStateRef(e,t){return this.takeActionOnStateRef(r.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION,{...e,view:"journal"},t)}editStateRef(e,t){return this.takeActionOnStateRef(r.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION,e,t)}getSubmissionsListStateRef(e,t){return this.takeActionOnStateRef(r.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION,{...e,view:"participants"},t)}gradingStateRef(e,t,s,n){var i;const o=s.memberId,a=e.contentId,l=(null==s?void 0:s.memberId)||t.membershipId,c=(null===(i=null==s?void 0:s.user)||void 0===i?void 0:i.$pk)||(null==s?void 0:s.userId)||t.userId;return this.takeActionOnStateRef(r.JournalRoutes.JOURNAL_PARTICIPATION_DETAIL,{...t,participantId:o,contentId:a,singleMembershipId:l,singleUserId:c},n)}supportsOverall(){return!0}},class extends v{getScoreProviderHandle(){return a.ScoreProviderHandle.LTILink}openStateRef(e,t){return this.takeActionOnStateRef(r.LtiRoutes.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}studentViewStateRef(e,t){return this.takeActionOnStateRef(r.LtiRoutes.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}getSubmissionsListStateRef(e,t){return this.takeActionOnStateRef(r.LtiRoutes.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}supportsOverall(){return!0}supportsExternalEdit(){return!0}},class extends v{getScoreProviderHandle(){return a.ScoreProviderHandle.PartnerCloud}openStateRef(e,t){return this.takeActionOnStateRef(r.LtiRoutes.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}studentViewStateRef(e,t){let s;return s=e.linkRef?{courseId:e.courseId,linkRef:e.linkRef,linkType:a.ScoreProviderHandle.PartnerCloud.toString()}:{courseId:e.courseId,contentId:e.contentId},this.takeActionOnStateRef(r.LtiRoutes.LTI_LAUNCH,s,t)}editStateRef(e,t){return this.takeActionOnStateRef("content-manage.edit.partnercloud",{courseId:e.courseId,id:e.contentId},t)}getSubmissionsListStateRef(e,t){return this.takeActionOnStateRef(r.LtiRoutes.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}supportsOverall(){return!0}supportsViewItem(){return!0}supportsEdit(){return!1}supportsExternalEdit(){return!0}},class extends v{getScoreProviderHandle(){return a.ScoreProviderHandle.Scorm}studentViewStateRef(e,t){return this.takeActionOnStateRef("scorm-overview.student",e,t)}openStateRef(e,t){return this.takeActionOnStateRef("scorm.open",e,t)}editStateRef(e,t){return this.takeActionOnStateRef("scorm-settings",e,t)}gradingStateRef(e,t,s,n){var i;let o=r.GradeRoutes.SUBMISSION_GRADING;const a=null==s?void 0:s.hasAttempts(),l=f(s),c=(null===(i=null==s?void 0:s.attempts)||void 0===i?void 0:i.length)>e.multipleAttempts;if(s&&(a&&!l||!a&&(!(null==s?void 0:s.isSubmitted())&&!l||g(s))))o=r.GradeRoutes.GRADE_AND_FEEDBACK;else if((e.isMultipleAttempts()||c)&&l){if(t.attemptId)return this.takeActionOnStateRef(o,null,n);o=r.CourseRoutes.COURSE_GRADES_MULTIPLE_ATTEMPT}return this.takeActionOnStateRef(o,t,n)}gradingWithFeedbackStateRef(e,t){return this.takeActionOnStateRef("submission-grading.peek.assessment-submission-feedback",e,t)}getSubmissionsListStateRef(e,t){return e.gradeitemView="students",this.takeActionOnStateRef("gradebook-item.scorm-submissions",e,t)}supportsOverall(){return!0}},y],P.NULL_DELEGATE=new class extends v{}(null);class A extends P{}i.module(m,[l.b,c.a,d.a]).service(p,P)},"90v0":function(e,t){e.exports='<div class="preview-header"\n     ng-if="shouldShowHeader && !previewHeader.studentPreview.isInIframeOfPreviewMode()"\n     role="banner">\n  <div>\n    <h2 bb-translate course-org-token-resolver>course.outline.previewCourse.headerBar.title</h2>\n    <div ng-if="hasExceptionReport">\n      <bb-translate>course.outline.previewCourse.headerBar.description</bb-translate>\n      <a href="javascript:void(0);" bb-peek-sref="conversion-risk-analysis" bb-translate\n         analytics-id="course.outline.previewCourse.headerBar.exceptionsLink">course.outline.previewCourse.headerBar.exceptionsLink</a>\n    </div>\n  </div>\n</div>\n'},"94iD":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return c}));var n=s("nbDY"),i=s.n(n),r=s("zGdY"),o=s("eUpQ");class a{constructor(e){this.apiData=e}get testType(){if(!this.apiData.timeLimitSec)return this.apiData.dueDate?c.EnforcedDueDateTest:c.NotATimedTest;switch(this.apiData.timerCompletion||""){case r.TimerCompletion.Continual:return c.UnlimitedExtraTime;case r.TimerCompletion.HardStop:return this.apiData.softLimitSec?c.LimitedExtraTime:c.NoExtraTime;default:return this.apiData.dueDate?c.EnforcedDueDateTest:c.NotATimedTest}}get adaptedTime(){switch(this.testType){case c.NoExtraTime:return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.timeLimitSec,hardlimitSeconds:this.apiData.timeLimitSec};case c.UnlimitedExtraTime:return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.timeLimitSec,hardlimitSeconds:Number.POSITIVE_INFINITY};case c.LimitedExtraTime:return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.softLimitSec,hardlimitSeconds:this.apiData.timeLimitSec};case c.EnforcedDueDateTest:return{elapsedSeconds:o.a.getServerTimeAsEpochTime(),softlimitSeconds:this.dueDateAsEpochTime,hardlimitSeconds:this.dueDateAsEpochTime};default:return{elapsedSeconds:NaN,softlimitSeconds:NaN,hardlimitSeconds:NaN}}}get dueDateAsEpochTime(){return this.apiData.dueDate?this.apiData.dueDate.getTime()/1e3:null}get stages(){if(this.dueDateAsEpochTime&&!this.withinDueDatelimit)return[l.StageE];switch(this.testType){case c.NoExtraTime:return this.getStagesForNoExtraTimeTest();case c.UnlimitedExtraTime:return this.getStagesForUnlimitedExtraTimeTest();case c.LimitedExtraTime:return this.getStagesForLimitedExtraTimeTest();case c.EnforcedDueDateTest:return this.getStagesForEnforcedDueDateTest()}}getStagesForNoExtraTimeTest(){if(this.testType===c.NoExtraTime)return this.dueDateIsSoonerThanHardTimeLimit?[l.StageEnforcedDueDate]:this.withinHardlimit?[l.Stage0NoExtraTime]:[l.StageE]}getStagesForUnlimitedExtraTimeTest(){if(this.testType===c.UnlimitedExtraTime)return this.dueDateIsSoonerThanSoftTimeLimit?[l.StageEnforcedDueDate]:this.dueDateIsSoonerThanHardTimeLimit?this.withinLimit?[l.Stage0UnlimitedExtraTime,l.StageEnforcedDueDate]:[l.StageEnforcedDueDate]:this.withinLimit?[l.Stage0UnlimitedExtraTime,l.Stage1UnlimitedExtraTime]:[l.Stage1UnlimitedExtraTime]}getStagesForLimitedExtraTimeTest(){if(this.testType===c.LimitedExtraTime)return this.dueDateIsSoonerThanSoftTimeLimit?[l.StageEnforcedDueDate]:this.dueDateIsSoonerThanHardTimeLimit?this.withinLimit?[l.Stage0LimitedExtraTime,l.StageEnforcedDueDate]:[l.StageEnforcedDueDate]:this.withinLimit?[l.Stage0LimitedExtraTime,l.Stage1LimitedExtraTime]:this.withinHardlimit?[l.Stage1LimitedExtraTime]:[l.StageE]}getStagesForEnforcedDueDateTest(){if(this.testType===c.EnforcedDueDateTest)return this.withinDueDatelimit?[l.StageEnforcedDueDate]:[l.StageE]}get hasTimeLimit(){return this.testType!==c.EnforcedDueDateTest&&this.testType!==c.NotATimedTest}get hasExtraTime(){return this.testType===c.LimitedExtraTime||this.testType===c.UnlimitedExtraTime}get hasLimitedExtraTime(){return this.testType===c.LimitedExtraTime}get hasUnlimitedExtraTime(){return this.testType===c.UnlimitedExtraTime}get withinLimit(){return this.adaptedTime.elapsedSeconds<this.adaptedTime.softlimitSeconds}get withinHardlimit(){return this.adaptedTime.elapsedSeconds<this.adaptedTime.hardlimitSeconds}get withinDueDatelimit(){return this.dueDateAsEpochTime&&o.a.getServerTimeAsEpochTime()<this.dueDateAsEpochTime}get dueDateIsSoonerThanHardTimeLimit(){return this.dueDateIsSoonerThanTimeLimit(this.adaptedTime.hardlimitSeconds)}get dueDateIsSoonerThanSoftTimeLimit(){return this.dueDateIsSoonerThanTimeLimit(this.adaptedTime.softlimitSeconds)}dueDateIsSoonerThanTimeLimit(e){var t;return this.withinDueDatelimit&&this.dueDateAsEpochTime-o.a.getServerTimeAsEpochTime()<e-(null!==(t=this.adaptedTime.elapsedSeconds)&&void 0!==t?t:0)}get willAutoSubmit(){return this.testType===c.NoExtraTime||this.testType===c.LimitedExtraTime||this.testType===c.EnforcedDueDateTest}get displayedTimeLimitSeconds(){return this.adaptedTime.softlimitSeconds}get displayedExtraTimeSeconds(){return this.adaptedTime.hardlimitSeconds-this.adaptedTime.softlimitSeconds}getSubmissionRuleText(e,t){switch(this.testType){case c.NoExtraTime:return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.autoSubmission"});case c.UnlimitedExtraTime:return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.unlimitExtraTime"});case c.LimitedExtraTime:return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.extraTimeInfo.plural",params:{allowExtraTime:Math.floor(this.displayedExtraTimeSeconds/60)}});default:return""}}}class l extends i.a{}l.Stage0NoExtraTime=new l("S0_NO_EXTRA"),l.Stage0UnlimitedExtraTime=new l("S0_UNLIMITED_EXTRA"),l.Stage1UnlimitedExtraTime=new l("S1_UNLIMITED_EXTRA"),l.Stage0LimitedExtraTime=new l("S0_LIMITED_EXTRA"),l.Stage1LimitedExtraTime=new l("S1_LIMITED_EXTRA"),l.StageE=new l("SE"),l.StageEnforcedDueDate=new l("S0_ENFORCED_DUE_DATE");class c extends i.a{}c.NoExtraTime=new c("NO_EXTRA"),c.UnlimitedExtraTime=new c("UNLIMITED_EXTRA"),c.LimitedExtraTime=new c("LIMITED_EXTRA"),c.EnforcedDueDateTest=new c("ENFORCED_DUE_DATE"),c.NotATimedTest=new c("NOT_TIMED")},"9ZjI":function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification error-not-found-modal"\n          modal-title-key="components.services.error-modal.error-not-found.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-not-found">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-not-found.description</p>\n    <pre>{{ response | json }}</pre>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          class="button large reload-page-button js-primary-button"\n          onclick="location.reload(true)"\n          analytics-id="components.services.error-modal.reloadPage"\n          bb-translate>components.services.error-modal.reloadPage</button>\n</bb-modal>\n'},"9zo4":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"c",(function(){return d})),s.d(t,"a",(function(){return h}));s("my/J");var n=s("Llzl"),i=s("5iHu"),r=s("XGja"),o=s("+4Px"),a=s("lUN/"),l=s("tMbR");const c="ultra.services.accessibility",d="accessibility";class u{constructor(e){this.$rootScope=e,this.FOCUSED_ELEMENT="focusedElement",this.FOCUS_SELECTOR_OVERRIDE="focusSelectorOverride",this.isFocusDelayed=!1,this.panelInfoStack=[{panelElement:i(document.body)}],this.currentPanelInfo=this.panelInfoStack[this.panelInfoStack.length-1],this.activePanel=this.currentPanelInfo.panelElement,this.isFocusedElementInFocusTrap=()=>{return!!i(document.activeElement).closest(".ms-FocusTrapZone").length},this.focusCorrectElementOnPanel=function(e=this.activePanel){if(this.isFocusDelayed=!1,Object(l.isFeatureAnnouncementCalloutVisible)())return;const t=i(".ms-Callout");if(t&&t.length)return;const s=i(".ms-Modal");if(s&&s.length)return;const n=i(".datepicker-dropdown");if(n&&n.length)return;const o=i('div[class*="MuiDialogcontainer"]');if(o&&o.length)return;const a=i('div[data-analytics-id="course.outline.oneDriveFilePickerLTIModal"]');if(null==a?void 0:a.length)return;const c=i('div[class*="MuiPopoverroot"]');if(null==c?void 0:c.length)return;if(this.isFocusedElementInFocusTrap())return;const d=e.find("[bb-focus]");if(d&&d.length){const e=d.first();if(e.trigger("focus"),this.elementHasFocus(e))return}const u=e.find("h1").filter(":visible");if(u&&u.length){const e=u.first();if(r.a(e),this.elementHasFocus(e))return}const h=e.find(":tabbable:not(.bb-close, .non-first-focus):first");h&&h.length&&(h.trigger("focus"),this.elementHasFocus(h))||r.a(e)},this.elementHasFocus=e=>e.is(i(document.activeElement)),this.isElementInActivePanel=e=>e.hasClass("pagehelp-directive-link")||!!e.closest(".focus-handling-disabled").size()||this.isElementInPanel(this.activePanel,e),this.isElementInPanel=(e,t)=>e.is(t)||i.contains(e[0],i(t)[0]),this.applyFocusinHandler=()=>{i("body").off("focusin.axService"),i("body").on("focusin.axService",e=>{const t=i(e.target);this.isFocusDelayed||this.isElementInActivePanel(t)||this.focusCorrectElementOnPanel(this.activePanel)})},this.removeFocusinHandler=()=>{i("body").off("focusin.axService")},this.backgroundElementsStack=[],a.a(),this.applyFocusinHandler();const t=e=>{this.isElementInActivePanel(i(e.target))||this.removeFocusinHandler()};i("body").on("mousedown",t),e.$on("$destroy",()=>{i("body").off("mousedown",t)})}applyAccessibilityHandlingForPanel(e){this._storeFocusedElement(),this._setActivePanel(e),this._applyTabCapture(),this.ariaHideBackgroundElements()}revertAccessibilityHandling(){this.ariaShowBackgroundElements(),this._revertTabCapture(this.currentPanelInfo),this._restoreActivePanel(),this._restoreFocusedElement()}_setActivePanel(e){this.activePanel=null,this.activePanel=e,this.currentPanelInfo={panelElement:e,overlayDisabled:e.hasClass("overlay-disabled"),panelFocusHandlingDisabled:e.hasClass("focus-handling-disabled")},this.panelInfoStack.push(this.currentPanelInfo),i(".bb-offcanvas-panel").removeClass("panel-has-focus"),this.activePanel.addClass("panel-has-focus"),this.applyFocusinHandler()}_restoreActivePanel(){this.panelInfoStack.length<2&&(this._setActivePanel(i(document.body)),this._setActivePanel(i(document.body))),this.panelInfoStack.pop().panelElement=null,this.currentPanelInfo=this.panelInfoStack[this.panelInfoStack.length-1],this.activePanel=null,this.activePanel=this.currentPanelInfo.panelElement,i(".bb-offcanvas-panel").removeClass("panel-has-focus"),this.activePanel.addClass("panel-has-focus"),this.applyFocusinHandler()}ariaHideBackgroundElements(e=!0){const t=i('.hide-in-background[aria-hidden!="true"]');t.attr("aria-hidden","true"),this.backgroundElementsStack.push(t),e&&this.activePanel.attr("aria-hidden","false")}ariaShowBackgroundElements(){if(this.backgroundElementsStack.length<1)throw i(".hide-in-background").attr("aria-hidden","false"),new Error("Tried to set aria-hidden=false for background elements, but there were no background elements in the stack.");let e=this.backgroundElementsStack.pop().attr("aria-hidden","false");e=null}setFocusOverrideOnPanel(e,t){if(!t)throw new Error("A panel selector is required to override focus on a panel");for(let s=this.panelInfoStack.length-1;s>=0;s--)if(this.panelInfoStack[s].panelElement.find(t).addBack(t).length){this.panelInfoStack[s].panelElement.data(this.FOCUS_SELECTOR_OVERRIDE,e);break}}_storeFocusedElement(){let e=i(document.activeElement);!h.isLastNavigationByKeyboard&&h.lastClickedElement&&h.lastClickedElement.length&&(e=h.lastClickedElement),this.activePanel.data(this.FOCUSED_ELEMENT,e),e=null}_restoreFocusedElement(){if(this.isFocusDelayed=!1,this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)){const e=this.activePanel.find(this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)).addBack(this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)).first();e.length&&this.activePanel.data(this.FOCUSED_ELEMENT,e),this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE,"")}let e=this.activePanel.data(this.FOCUSED_ELEMENT);e&&0!==e.length&&e.focus(),e&&e.length&&i(document.activeElement).is(e)||this.focusCorrectElementOnPanel(this.activePanel),this.activePanel.removeData(this.FOCUSED_ELEMENT),e=null}_applyTabCapture(){this.activePanel.on("keydown",e=>{if(e.keyCode===o.u&&!this.currentPanelInfo.tabCalled){let e=this.activePanel.data("axMutationObserver");e||((e=new MutationObserver(()=>{this.currentPanelInfo.tabCalled=!1})).observe(this.activePanel[0],{childList:!0,attributes:!0,subtree:!0}),this.activePanel.data("axMutationObserver",e));const t=i(this.activePanel).find("*").addBack();this._conditionallyUpdateSkipLinkFocus(),i(":tabbable, .ax-tabbable").not(".bb-ax-background-tabindex").add(i('a[tabindex!="-1"]').filter((function(){return 0===i(this).height()&&0===i(this).width()}))).filter((function(){return 0===i(this).closest(".focus-handling-disabled").size()})).add(i('div.editor-element[tabindex!="-1"]')).not(t).not(i(".pagehelp-directive-link")).add(i('div.panel-wrap[tabindex!="-1"]')).each((function(){i(this).data("originalTabindex",this.getAttribute("tabindex"))})).attr("tabindex","-1").addClass("bb-ax-background-tabindex"),this.currentPanelInfo.tabCalled=!0}})}_revertTabCapture(e,t){const s=t||i(document);s.find(".bb-ax-background-tabindex").each((function(){const e=i(this);null==e.data("originalTabindex")?e.removeAttr("tabindex"):e.attr("tabindex",e.data("originalTabindex")),e.removeAttr("originalTabindex")})).removeClass("bb-ax-background-tabindex"),s.data("axMutationObserver")&&s.data("axMutationObserver").disconnect()}_revertTabCaptureForActivePanel(){this._revertTabCapture(this.currentPanelInfo)}_conditionallyUpdateSkipLinkFocus(){this.currentPanelInfo.overlayDisabled&&!this.currentPanelInfo.panelFocusHandlingDisabled&&this.panelInfoStack.length>1&&this._revertTabCapture(this.panelInfoStack[this.panelInfoStack.length-2],this.activePanel)}}u.isLastNavigationByKeyboard=!1,u.$inject=["$rootScope"];class h extends u{}n.module(c,[]).service(d,u)},"A+IJ":function(e,t,s){"use strict";s.d(t,"k",(function(){return n})),s.d(t,"l",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"e",(function(){return a})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return c})),s.d(t,"h",(function(){return d})),s.d(t,"d",(function(){return u})),s.d(t,"a",(function(){return h})),s.d(t,"m",(function(){return m})),s.d(t,"j",(function(){return p})),s.d(t,"i",(function(){return g}));const n=1,i=2,r="#c575d2",o="#1874a4",a="#333333",l="#666666",c="#e5e5e5",d="#cdcdcd",u="#ffffff",h="#f0f0f0",m="Open Sans",p=`600 12px ${m}`,g=`700 12px ${m}`},A4cK:function(e,t){e.exports="<div ng-transclude></div>"},BXiQ:function(e,t,s){"use strict";var n=s("Llzl"),i=s("5iHu"),r=s("nsO7"),o=s("Ymz8"),a=s("oVrE"),l=s("5Dl8"),c=s("pjml"),d=s("Q/M7"),u=s("DpvE"),h=s("gCXj"),m=s("yCJt"),p=s("VdDF");s.d(t,"a",(function(){return g}));const g="ultra.directives.user-avatar",b=n.module(g,[c.N,h.a]),f=m.replace(/\s+id="[^\"]+"\s*/," ").replace(/<svg /,'<svg stroke-width="3" stroke="#fff" ').replace(/\s+viewBox="(\d+ \d+ \d+ \d+)"/,(function(e,...t){const[s,n,i,r]=t[0].split(" ").map(e=>parseInt(e,10));return' viewBox="'+[s-i/2,n-r/2,2*i,2*r].join(" ")+'"'})),v={avatar:{permanentUrl:"data:image/svg+xml;base64,"+o.codec.base64.fromBits(o.codec.utf8String.toBits(f))},lastModifiedAt:"",getInitials:r.noop},S=i('<style id="css-bb-user-avatar"></style>').appendTo("head"),y={};let C,I;const $=function(e){e.forEach(e=>{const t=e.id||e.$pk,s=y[t]=y[t]||{};if(null!=e.lastModifiedAt&&e.lastModifiedAt===s.lastModifiedAt||e.isPlaceHolder)return;s.avatarURL=void 0,s.isAvailable=e.isAvailable,s.lastModifiedAt=e.lastModifiedAt;const n=e.avatar&&"default"!==e.avatar.permanentUrl;if(n){let t=e.avatar.permanentUrl;if(e.avatar.permanentUrl.startsWith("http")){const s=(p.a.isValidDate(e.lastModifiedAt)?e.lastModifiedAt:new Date).getTime();t=Object(d.a)(e.avatar.permanentUrl,"ts",s)}s.avatarURL=t}const i=(e.getInitials||r.noop).apply(e);s.initials=!n&&i?i:void 0}),C()};b.config([h.b+"Provider",function(e){e.onStyleRefresh((function(e,t){t.isAvailable||(e.selector(`bb-user-avatar.u${t.userId}:after`).rule("display","block"),e.selector(`bb-user-avatar.u${t.userId} > div`).rule("opacity",".3"))}))}]).run(["$rootScope",c.Jb.serviceName,function(e,t){C=r.debounce(()=>{const e=new l.a;r.forEach(y,(t,s)=>{const n=e.selector(`bb-user-avatar.u${s}`);t.avatarURL?(n.selector(".image:after").rule("background-image",`url("${t.avatarURL}")`).rule("display","block"),n.selector(".image:before").rule("display","none")):t.initials&&(n.selector(".image").rule("display","none"),n.selector(".initials").rule("display","block"),n.selector(".initials:after").rule("content",`"${t.initials}"`)),!1===t.isAvailable&&e.selector(`bb-user-avatar.u${s}:after`).rule("display","block")});const t=e.build();S.text()!==t&&S.text(t)},200),I=r.once((function(){t.$mixHook("after-feed",(function(){const e=Array.prototype.concat.call([],this);$(e)}))}))}]).directive("bbUserAvatar",(function(){return{restrict:"E",template:u,scope:{user:"=?"},link(e,t){I(),t.addClass("avatar element-image");e.$watch("user",(e,s)=>{e&&(a.f(e)&&r.extend(e,v),t[0].className=t[0].className.split(/\s+/).filter(e=>!/^u\w+$/.test(e)).join(" "),t.addClass(`u${e.id||e.$pk}`),$([e]))})}}}))},BfLg:function(e,t,s){s.p=window.publicPath||s.p},BrA8:function(e,t,s){"use strict";s.d(t,"a",(function(){return g}));s("JzsJ");var n=s("Llzl"),i=s("pjml"),r=s("0JpG"),o=s("Fvsw"),a=s("bF8R"),l=s("jhBu"),c=s("o5Lu"),d=s("TnpK"),u=s("Qbdf"),h=s("X455"),m=s("nmzr"),p=s("IbyE");const g="ultra.course.content.lti.routes";n.module(g,[r.moduleName,a.a,l.a,c.h,d.b,u.b,h.a]).config([d.c,u.c,h.b,(e,t,n)=>{e.peekState(m.LtiRoutes.LTI,{abstract:!0,url:"/lti"}).peekState(m.LtiRoutes.LTI_LAUNCH,{url:"/launch?courseId&contentId&linkRef&linkType",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")],[h.c]:n.resolve,[u.d]:t.resolve,currentContent:["$q",d.d,i.S.serviceName,i.m.serviceName,(e,t,s,n)=>{const i=e.defer(),r=t.nextParams.courseId?t.nextParams.courseId:t.prevParams.courseId,o=t.nextParams.contentId?t.nextParams.contentId:t.prevParams.contentId,a=t.nextParams.linkRef?t.nextParams.linkRef:t.prevParams.linkRef,l=t.nextParams.linkType?t.nextParams.linkType:t.prevParams.linkType;return r&&o?n.$new(r).contents.$find(o).$asPromise().then(e=>i.resolve(e)):r&&a&&p.ScoreProviderHandle.PartnerCloud.isEqualTo(l)?s.getContentIds(r,a).then(e=>{e.contentIds&&e.contentIds.length>0?n.$new(r).contents.$find(e.contentIds[0]).$asPromise().then(e=>i.resolve(e)):i.resolve(null)}):i.resolve(null),i.promise}],currentGradeColumn:["$q",u.d,"currentContent",o.b,(e,t,s)=>{if(t&&s){const e=s.contentDetail[s.contentHandler.toString()].gradingColumn.id;return t.gradebook.columns.$find(e).$asPromise()}return e.when(null)}],contentData:["$q",u.d,"currentContent","currentGradeColumn",a.b,(e,t,s,n,i)=>{if(t&&s&&n)return i.loadContentAndGrades({course:t,content:s,column:n});e.when(null)}]},panelClass:"peek",require:()=>Promise.all([s.e(1),s.e(2),s.e(603)]).then(s.bind(null,"7CZ/")),pageTitle:" Launch"}).peekState(m.LtiRoutes.LTI_LAUNCH_FRAME,{url:"/launchFrame?toolHref",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")]},panelClass:"full",require:()=>Promise.all([s.e(1),s.e(2),s.e(604)]).then(s.bind(null,"I/hb")),pageTitle:"course.content.ltiLaunchFrameTitle"}).peekState(m.LtiRoutes.LTI_LAUNCH_PEEK,{url:"/launchPeek?toolHref&courseId&contentId",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")]},peekStates:[m.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL,m.LtiRoutes.LTI_EDIT_CLOUD_DOCUMENT,m.EngagementRoutes.CONVERSATION],panelClass:"full",require:()=>Promise.all([s.e(1),s.e(2),s.e(617)]).then(s.bind(null,"BY6k")),pageTitle:"course.content.ltiLaunchFrameTitle"}).peekState(m.LtiRoutes.LTI_LAUNCH_CLOUD_CREATE,{url:"/launchCloudCreate?toolHref&courseId&contentId&placementId",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")]},peekStates:[m.LtiRoutes.LTI_LAUNCH_PEEK],panelClass:"full",require:()=>Promise.all([s.e(1),s.e(2),s.e(635)]).then(s.bind(null,"KIJB")),pageTitle:"course.content.ltiLaunchFrameTitle"}).peekState(m.LtiRoutes.LTI_EDIT_CLOUD_DOCUMENT,{url:"/edit?contentId",resolve:{[u.d]:t.resolve,translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},panelClass:"peek",require:[()=>Promise.all([s.e(0),s.e(609)]).then(s.bind(null,"N/2L"))],peekViewName:"cloud-document-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy"]})}])},Bu0u:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("6ynb");class i extends n.a{constructor(e){super(e),this.name="InvalidArgumentsError"}}},ByeC:function(e,t){e.exports='<bb-modal id="disallow-folder-upload-modal" class="notification js-disallow-folder"\n          modal-title-key="{{isChrome || hasFiles ? \'components.directives.fileUpload.disallowFolderUploadTitle\' : \'components.directives.fileUpload.disallowFolderUploadNotChromeTitle\'}}"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <ng-switch on="isChrome">\n      <div ng-switch-when="true">\n        <p>\n          <bb-translate>components.directives.fileUpload.disallowFolderUploadFull</bb-translate>\n        </p>\n      </div>\n      <div ng-switch-default>\n        <ng-switch on="hasFiles">\n          <div ng-switch-when="true">\n            <p>\n              <bb-translate>components.directives.fileUpload.disallowFolderUploadFullNotChromeAdditionalFiles</bb-translate>\n            </p>\n          </div>\n          <div ng-switch-default>\n            <p>\n              <bb-translate>components.directives.fileUpload.disallowFolderUploadFullNotChromeNoMoreFiles</bb-translate>\n            </p>\n          </div>\n        </ng-switch>\n      </div>\n    </ng-switch>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray" ng-switch on="isChrome || hasFiles">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.no">\n          <bb-translate>components.directives.fileUpload.no</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.yes">\n          <bb-translate>components.directives.fileUpload.yes</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="false">\n        <button class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},"C/Ry":function(e,t){e.exports='<th class="table-cell"\n    scope="row"\n    ng-show="tableCell.column.visible">\n  <div class="sr-only alternate-contents"></div>\n  <div class="transclude-container"></div>\n</th>'},C3Ga:function(e,t,s){"use strict";var n=s("WftU"),i=s("5MwF"),r=s("n7/H");const o=e=>{const t=/locales\/([a-zA-Z0-9\-]+)\//.exec(e);if(!t||t.length<=0)throw new Error(`Could not find locale in path ${e}`);return t[1]};var a=s("tfZW");class l extends n.Babelfish{constructor(e,t=a.a.getInstance()){super(e),this.preferredLocalesCache=new Map,this.overrideLoader=t,this.overrideLoader.onOverrideAdded(this.onOverrideAdded.bind(this))}getBundlePath(e,t){if(i.a.unitTesting){if(!t.match(/^force\!/))return t.match(/^forcereset$/)?void this.reset():void 0;t=t.replace(/^force\!/,"")}return t.indexOf("://")>0?t:"locales/"+this.normalizeLocale(e)+"/_combined.json"}loadIncludedBundle(e){const t=o(e);return new r.InstantPromise(n=>{s("spHl")("./"+e.replace("locales/","").replace(t,this.normalizeLocale(t))).then(n).catch(()=>n(null))})}loadPath(e){return e.indexOf("://")>=0?a.a.loadFromRemotePath(e):this.loadIncludedBundle(e)}load(e){return this.loadedBundles[e]||(this.loadedBundles[e]=this.loadPath(e)),this.loadedBundles[e]}onOverrideAdded(e){this.preferredLocalesCache=new Map}loadBundles(e){"string"==typeof e&&(e=[e]);const t=[];return this.normalizeLocales(e).forEach(e=>{t.push(this.overrideLoader.getOverridePathForLocale(e).then(e=>{if(e&&e.path)return this.loadBundle(e.ultraLocale,e.path)}),super.loadBundles(e))}),r.InstantPromise.all(t)}getPreferredLocales(e){"string"==typeof e&&(e=[e]);const t=e.join("|");if(!this.preferredLocalesCache.has(t)){let s=[];this.normalizeLocales(e).forEach(e=>{s=s.concat(this.overrideLoader.getPreferredLocales(e))}),this.preferredLocalesCache.set(t,Array.from(new Set(s)))}return this.preferredLocalesCache.get(t)}getLocaleForFormatting(e){return this.overrideLoader.getBaseLocale(e)||e}}let c;t.a=class{static getInstance(){return null==c&&(c=new l({fallbackLocales:[]})),c}static getTestInstance(e){if(!i.a.unitTesting)throw new Error("Use getInstance() instead");return new l({fallbackLocales:[]},e)}}},CPVT:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s("D57K"),i=s("TnpK"),r=s("Qbdf"),o=s("aHpC"),a=s("Llzl");const l="ultra.components.directives.confirmationCourseOrgTokenReplacementDirective";class c{constructor(e,t,s,n,i){this.element=e,this.attributes=t,this.scope=s,this.ultraState=n,this.currentCourse=i;try{(n.includes("base.organizations.**")||i.course&&i.course.isOrganization)&&t.bbConfirmationNeeded&&(t.bbConfirmationNeeded=this.replaceToken(t.bbConfirmationNeeded),e.attr("bb-confirmation-needed",this.replaceToken(t.bbConfirmationNeeded)))}catch(e){}}replaceToken(e){return e?e.replace("resource/x-bb-course-","resource/x-bb-organization-"):e}}let d=class{constructor(e,t){this.ultraState=e,this.currentCourse=t,this.restrict="A",this.scope=!1,this.priority=-1,this.compile=()=>(e,t,s)=>new c(t,s,e,this.ultraState,this.currentCourse)}};d=Object(n.__decorate)([Object(n.__param)(0,Object(o.b)(i.d)),Object(n.__param)(1,Object(o.b)(r.e))],d),a.module(l,[i.b]).directive("confirmationCourseOrgTokenResolver",["$injector",e=>e.instantiate(d)])},CPqS:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return $}));var n=s("Llzl"),i=s("Sa5G"),r=s("0JpG"),o=s("w9Zy"),a=s("nYZ0"),l=s("ZzN+"),c=s("hqh6"),d=s("5RJJ"),u=s("pjml"),h=s("TnpK"),m=s("Qbdf"),p=s("tQ/B"),g=s("X455"),b=s("uC9d"),f=s("x+T+"),v=s("nmzr"),S=s("eQBN"),y=s("WIGI"),C=s("jhBu"),I=s("fYJU");const $="ultra.course.routes";n.module($,[c.a,d.a,m.b,g.a,S.b,p.a]).config([h.c,m.c,g.b,S.c,p.b,(t,n,c,d,p)=>{t.peekState(v.Routes.Course.COURSE,{abstract:!0,url:"^/{coursesOrOrganizations:(?:courses|organizations)}/:courseId",panelClass:"full",require:()=>Promise.all([s.e(0),s.e(15),s.e(22),s.e(30)]).then(s.bind(null,"ogn+")),resolve:{currentColumn:()=>null,[m.d]:n.resolve,[g.c]:c.resolve,currentCourseId:["$state",e=>e.nextParams.courseId],courseEntitlementsLoader:["currentCourseId",f.c,(e,t)=>t.loadCourseEntitlements(e)],"?courseMembershipsLoader":["currentCourseId",u.m.serviceName,(e,t)=>t.$new(e).memberships.$fetch({limit:1e4}).$asPromise()],isOrganization:[m.d,h.d,(e,t)=>(t.nextParams.coursesOrOrganizations=e.isOrganization?"organizations":"courses",e.isOrganization)],[S.d]:d.resolve},onEnter:[g.d,e=>{var t,s;const n=null===(s=null===(t=null==e?void 0:e.courseMembership)||void 0===t?void 0:t.courseRole)||void 0===s?void 0:s.identifier;n&&Object(y.c)({courseRole:n})}],onExit:["$rootScope","$stateParams","membership",r.serviceName,o.e,m.e,l.b,b.c,I.b,g.d,(t,s,n,i,r,o,a,l,c,d)=>{t.bbOffcanvasOpened=!1,r.close("course"),o.course.isClassic()&&t.$broadcast("reloadCourse",s.courseId);const u=n.isStudentMembership(),h=!c.userModel.isGuest();!u&&h&&d.courseMembership.$fetch().$allow([404]).$asPromise().then(e=>{e.isStudentMembership()&&l.clearCache("users/"+c.userId+"/memberships")}),a.showPreviewAlert=!0,e(window.parent.document).find("body").removeClass("has-footer-in-preview-mode"),Object(y.a)()}]}).peekState(v.Routes.Course.COURSE_ANALYTICS,{url:"/analytics",views:{"course@":{require:[()=>Promise.all([s.e(14),s.e(64)]).then(s.bind(null,"amHh")),()=>Promise.all([s.e(0),s.e(15),s.e(22),s.e(30)]).then(s.bind(null,"ogn+"))],resolve:{"analytics-translations":[r.serviceName,e=>e.loadBundle("features/course/analytics/course-analytics")]}}},panelClass:"full",pageTitleHandler:p.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.analytics.headerLabel"}).peekState(v.Routes.Course.COURSE_ANALYTICS_PREDICT_INSTRUCTOR,{url:"/predict?resetFTUE",views:{"analytics@":{require:()=>Promise.all([s.e(19),s.e(20),s.e(26),s.e(125),s.e(686)]).then(s.bind(null,"x4MM")),resolve:{"predict-translations":[r.serviceName,e=>e.loadBundle("features/predict/predict")]}}},pageTitleHandler:p.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"predict.course.title",peekStates:["predictCourseStudentPanel"],panelClass:"full"}).peekState(v.Routes.Course.COURSE_ANALYTICS_PREDICT_STUDENT,{url:"/predict/:studentId",views:{"analytics@":{require:()=>Promise.all([s.e(19),s.e(25),s.e(20),s.e(23),s.e(26),s.e(55),s.e(701)]).then(s.bind(null,"lanz")),resolve:{"predict-translations":[r.serviceName,e=>e.loadBundle("features/predict/predict")]}}},peekStates:["predictMessagingPanel"],pageTitleHandler:p.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.title.predictStudent",panelClass:"full"}).peekState(v.Routes.Course.COURSE_ANALYTICS_REPORTS,{url:"/reports",views:{"analytics@":{require:[()=>Promise.all([s.e(14),s.e(639)]).then(s.bind(null,"Va14")),()=>Promise.all([s.e(14),s.e(64)]).then(s.bind(null,"amHh")),()=>Promise.all([s.e(0),s.e(15),s.e(22),s.e(30)]).then(s.bind(null,"ogn+"))],resolve:{"analytics-translations":[r.serviceName,e=>e.loadBundle("features/course/analytics/course-analytics")]}}},panelClass:"full",pageTitleHandler:p.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.analytics.headerLabel"}).peekState(v.Routes.Course.COURSE_ANALYTICS_SCORM_REPORTS,{url:"/scormReports",resolve:{[m.d]:n.resolve},views:{"analytics@":{require:[()=>s.e(682).then(s.bind(null,"txuS")),()=>Promise.all([s.e(14),s.e(64)]).then(s.bind(null,"amHh"))],resolve:{"scorm-report-analytics-translations":[r.serviceName,e=>e.loadBundle("features/course/content/scorm/scorm")]}}},peekStates:["scorm-analytics-report"],panelClass:"full",pageTitleHandler:p.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.analytics.title.scormReports"}).peekState(v.Routes.Course.COURSE_ANALYTICS_QUESTION_ANALYSIS,{url:"/questionAnalysis",views:{"analytics@":{require:()=>Promise.all([s.e(3),s.e(5),s.e(7),s.e(54),s.e(718)]).then(s.bind(null,"ErSj")),resolve:{"question-analysis-translations":[r.serviceName,e=>e.loadBundle("features/course/question-analysis")]}}},peekViewName:"question-analysis-report-list",peekStates:["question-analysis"],panelClass:"full",pageTitleHandler:p.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.question-analysis.report-list.pageTitle"}).peekState(v.Routes.Course.COURSE_CALENDAR,{url:"/calendar",views:{"course@":{require:[()=>Promise.all([s.e(72),s.e(0),s.e(16),s.e(15),s.e(57),s.e(22),s.e(634)]).then(s.bind(null,"bbBO")),()=>Promise.all([s.e(0),s.e(15),s.e(22),s.e(30)]).then(s.bind(null,"ogn+"))],resolve:{"calendar-translations":[r.serviceName,e=>e.loadBundle("features/course/calendar/course-calendar")]}}},courseEntitlement:i.d.ViewCalendar,peekStates:[v.Routes.Calendar.CREATE_EVENT,v.Routes.Calendar.EDIT_EVENT,v.Routes.Calendar.VIEW_EVENT,v.Routes.Calendar.COURSE_SCHEDULE,v.Routes.Calendar.OFFICE_HOURS,"conversion-analysis","content-manage","assignment","grade-item","assessment","scorm-launch-frame","scorm-settings","gradebook-item.scorm-submissions","scorm-overview"],panelClass:"full",peekViewName:"calendar-panel-base",pageTitleHandler:p.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.calendar.headerLabel"}).peekState(v.Routes.Course.COURSE_ENGAGEMENT,{url:"/engagement",resolve:{"engagement-translations":[r.serviceName,e=>e.loadBundle("features/course/engagement/course-engagement")]},views:{"course@":{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(545)]).then(s.bind(null,"QVC4"))}},panelClass:"full",peekStates:["content-manage","conversion-analysis","discussion",v.Routes.Content.CONDITIONAL_RELEASE_PEEK_PANEL,"content-group-enroll","discussion-settings",v.Routes.Telemetry.DISCUSSION_FORUM_INSIGHTS,"course-group","discussions-settings"],peekViewName:"engagement-panel-base",pageTitleHandler:p.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.engagement.headerLabel"}).peekState(v.Routes.Course.COURSE_GRADES,{url:`/grades?${v.CourseGradesQueryParamKeys.join("&")}`,views:{"course@":{require:[()=>Promise.all([s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(21),s.e(27),s.e(40),s.e(39),s.e(561)]).then(s.bind(null,"OFW5")),()=>Promise.all([s.e(0),s.e(15),s.e(22),s.e(30)]).then(s.bind(null,"ogn+"))],resolve:{"grades-translations":[r.serviceName,e=>e.loadBundle("features/course/grades/course-grades")]}}},resolve:{courseEntitlement:["$q","membership",C.b,(e,t,s)=>t.isStudentMembership()?e.resolve(!0):s.isEntitled("course.gradebook-metadata.VIEW")]},peekStates:[v.Routes.Course.ACCOMMODATION,"assignment","assessment","gradebook-item","scorm-settings","gradebook-item.scorm-submissions","scorm-launch-frame","scorm-overview",v.Routes.Course.COURSE_GRADES_MULTIPLE_ATTEMPT,"assignment-grading",v.Routes.Grade.SUBMISSION_GRADING,"group-submission-grading","grade-item","grade-setting","grade-download-setting","grade-upload-setting",v.Routes.Grade.GRADE_AND_FEEDBACK,"conversion-analysis","content-manage",v.Routes.Lti.LTI,"discussion","submission-list","rubric","overall-grade","overall-grade-student","attendance","attendance-student-records","attendance-student-view","question-analysis",v.Routes.Grade.RECONCILE_GRADE,"grades-bulk-download",v.Routes.Grade.DOWNLOAD_TEST_RESULTS,v.Routes.Course.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,v.Routes.Journal.JOURNAL_PARTICIPATION_DETAIL,v.Routes.Grade.GRADEBOOK_GRID_ADVANCED_FILTERS,v.Routes.Grade.ATTEMPT_RECEIPT_SEARCH],panelClass:"full",peekViewName:"grades-panel-base",pageTitleHandler:p.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.grades.instructorHeaderLabel"}).peekState(v.Routes.Course.COURSE_MESSAGES,{url:"/messages",views:{"course@":{require:[()=>Promise.all([s.e(14),s.e(0),s.e(15),s.e(31),s.e(33),s.e(129),s.e(716)]).then(s.bind(null,"vjWz")),()=>Promise.all([s.e(0),s.e(15),s.e(22),s.e(30)]).then(s.bind(null,"ogn+"))],resolve:{"messages-translations":[r.serviceName,e=>e.loadBundle("features/course/messages/course-messages")]}}},panelClass:"full",peekStates:["create-message","edit-message","conversion-analysis"],pageTitleHandler:p.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.messages.headerLabel"}).peekState(v.Routes.Course.COURSE_OUTLINE,{url:"/outline?legacyUrl?enrollmentMessage?inPreviewMode",views:{"course@":{require:[()=>Promise.all([s.e(18),s.e(0),s.e(1),s.e(4),s.e(8),s.e(13),s.e(16),s.e(21),s.e(24),s.e(118)]).then(s.bind(null,"Qile")),()=>Promise.all([s.e(0),s.e(15),s.e(22),s.e(30)]).then(s.bind(null,"ogn+"))],resolve:{isClassicCourse:[m.d,h.d,(e,t)=>{if(!e.isUltra())return t.goPeekState("course.classic.outline",{courseId:e.id,legacyUrl:t.nextParams.legacyUrl})}],translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/outline/course-outline"),t.loadBundle("features/course/course-overview/course-overview")])]}}},onExit:["$rootScope",h.d,(e,t)=>{"base.calendar"===t.getBaseState()&&e.$broadcast("deadline-refresh")}],peekStates:[v.Routes.Announcement.ANNOUNCEMENTS_LIST,v.Routes.Announcement.ANNOUNCEMENT_DETAIL,"assignment","assessment-settings","question-analysis","question-banks","assessment-safe-assign-settings","bulk-edit-content",v.FileRoutes.PREVIEW_FILE,v.Routes.Calendar.COURSE_SCHEDULE,"content-group-enroll","content-manage","conversion-analysis","conversion-risk-analysis","description",v.Routes.Calendar.VIEW_EVENT,"exports","gradebook-item","import-report",v.Routes.Course.COURSE_MESSAGE,"roster","collab","stream-message","assessment",v.Routes.ContentMarket.CONTENT_MARKET,v.Routes.ContentCollection.CONTENT_COLLECTION,"document-settings","partner-tool",v.Routes.Lti.LTI,v.Routes.Lti.LTI_LAUNCH_PEEK,"discussion-settings","conversations","books-and-tools","rubric",v.Routes.Telemetry.CONTENT_ACTIVITY_IN_DETAIL,v.Routes.Telemetry.DISCUSSION_FORUM_INSIGHTS,"overall-grade","attendance","attendance-student-view","course-group-enroll",v.Routes.Content.CONDITIONAL_RELEASE_PEEK_PANEL,"course-group","scorm-settings","gradebook-item.scorm-submissions","group-set-detail","group-set-list","scorm-launch-frame","scorm-overview","content-navigator-transition-peek","content-navigator-transition-full","content-navigator-placeholder","scorm-analytics-report",v.Routes.Course.EDIT_BANNER,v.Routes.CourseTasks.COURSE_TASKS_LOGS,v.Routes.Group.IMPORT_GROUP_SET,v.Routes.Group.EXPORT_GROUP_SET,v.Routes.Group.IMPORT_GROUP_MEMBERS],peekViewName:"content-create-base",pageTitleHandler:p.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.outline.tab.title",panelClass:"full"}).peekState("content-navigator-transition-peek",{url:"/content-navigator-transition-peek",template:'<div class="spinner bb-secondary-color-2"></div>',panelClass:"peek"}).peekState("content-navigator-transition-full",{url:"/content-navigator-transition-full",template:'<div class="spinner bb-secondary-color-2"></div>',panelClass:"full"}).peekState("content-navigator-placeholder",{url:"/link/{contentId:_[0-9]+_1}",require:()=>Promise.all([s.e(1),s.e(2),s.e(35),s.e(654)]).then(s.bind(null,"1Uig")),panelClass:"full",peekStates:[v.Routes.Lti.LTI],resolve:{currentContent:[h.d,m.d,"$q",(e,t,s)=>{const n=e.nextParams.contentId?e.nextParams.contentId:e.nextParams.id;if(n&&n!==u.p.CREATE_CONTENT_ID)return t.contents.$find(n).$asPromise()}]}}).peekState(v.Routes.Content.CONDITIONAL_RELEASE_PEEK_PANEL,{url:"/conditionalRelease?contentId",pageTitle:"course.conditionalRelease.panelTitle",require:[()=>Promise.all([s.e(588),s.e(1),s.e(2),s.e(8),s.e(581)]).then(s.bind(null,"gl4I")),()=>Promise.all([s.e(18),s.e(0),s.e(1),s.e(4),s.e(8),s.e(13),s.e(16),s.e(21),s.e(24),s.e(118)]).then(s.bind(null,"Qile"))],panelClass:"peek",peekStates:["group-set-list"],peekViewName:"conditional-release-peek",allowChildPeekStates:!0,resolve:{[m.d]:n.resolve,currentContent:[h.d,"currentCourse",a.f,(e,t,s)=>{const n=e.nextParams.contentId,i=s.findRootNode(t,u.p.ContentRootNode.ROOT);return s.getOrMakeContentInContentTree(i,t.id,n).then(e=>e.content)}],translations:[r.serviceName,e=>e.loadBundle("features/course/conditional-release/conditional-release")]}}).peekState(v.Routes.Course.COURSE_CLASSIC,{abstract:!0,url:"/cl"}).peekState("course.classic.outline",{url:"/outline?legacyUrl?enrollmentMessage",require:[()=>Promise.all([s.e(0),s.e(15),s.e(22),s.e(30)]).then(s.bind(null,"ogn+"))],resolve:{"outline-translations":[r.serviceName,e=>e.loadBundle("features/course/outline/course-outline")]},peekStates:[v.Routes.Telemetry.CONTENT_ACTIVITY_IN_DETAIL],peekViewName:"course-classic-peek",pageTitle:"course.outline.tab.title",panelClass:"full"}).peekState("edit-file-settings",{require:[()=>s.e(141).then(s.bind(null,"TFHU"))],resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/media-widget/media-widget")]},url:"/fileAttachment?toolContentName&fileIndex&isRenderedInline&linkName&parentToolInstanceName&isDecorative&alternativeText&mediaType&mimeType&bbmlEditorId"}).peekState("bulk-edit-content",{url:"/bulkEditContent",require:[()=>Promise.all([s.e(567),s.e(736)]).then(s.bind(null,"iGvw"))],pageTitle:"course.outline.bulkEditHeaderLabel",panelClass:"full",courseEntitlement:i.e.ViewAsDesigner}).peekState(v.FileRoutes.PREVIEW_FILE,{url:"/file/:id?view",require:[()=>Promise.all([s.e(12),s.e(0),s.e(1),s.e(2),s.e(4),s.e(9),s.e(35),s.e(579)]).then(s.bind(null,"vFEc"))],pageTitle:"course.content.file",panelClass:"full",allowChildPeekStates:!0,peekViewName:"file-preview-peek",peekStates:[v.FileRoutes.PREVIEW_FILE_EDIT,v.CourseRoutes.COURSE_MESSAGE]}).peekState(v.FileRoutes.PREVIEW_FILE_EDIT,{resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/edit",require:[()=>Promise.all([s.e(9),s.e(65)]).then(s.bind(null,"ebp7")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))],allowChildPeekStates:!0,peekViewName:"file-goal-peek",peekStates:["goal-picker-legacy",v.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL],panelClass:"peek",pageTitle:"course.content.file"}).peekState(v.Routes.Course.EDIT_BANNER,{url:"/editBanner?id",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/edit-banner/edit-banner")]},require:()=>Promise.all([s.e(1),s.e(2),s.e(49),s.e(587)]).then(s.bind(null,"WXoY")),pageTitle:"course.editBanner.panelTitle"})}])}).call(this,s("5iHu"))},Cxi4:function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return c}));var n=s("Llzl"),i=s("nYZ0"),r=s("Sa5G"),o=s("jhBu"),a=s("pjml");const l="ultra.components.services.discussionPermission",c="discussionPermission";class d{constructor(e,t,s,n){this.$q=e,this.content=t,this.CourseModel=s,this.entitlement=n}canCreateAllContent(e){if(e){const t=this.CourseModel.$new(e),s=this.content.findRootNode(t,a.p.ContentRootNode.INTERACTIVE);let n;return s.$then(()=>{(n=s.children)||(n=s.getChildren({limit:0}))}).$asPromise().then(()=>n.$asPromise().then(()=>n.permissions&&n.permissions.create))}return this.$q.when(!1)}hasEditPermission(e){return this.entitlement.hasCourseEntitlement(r.e.ModifyContent,e)}hasEditAvailabilityPermission(e){return this.entitlement.hasCourseEntitlement(r.e.ModifyContentAvailability,e)}hasEditDueDatePermission(e){return this.entitlement.hasCourseEntitlement(r.n.ModifyItemDueDate,e)}hasGradingPermission(e){return this.entitlement.hasCourseEntitlement(r.n.ModifyGradebook,e)}canDeleteDiscussion(e,t){return t&&t.permissions?t.canDelete():e&&e.canDelete()}areAnyGroupEntitled(e){return this.entitlement.areAnyEntitled([r.o.CreateGroups,r.o.DeleteGroups,r.o.ManageGroupMembership,r.o.ModifyGroups,r.o.ViewGroups],e)}}d.$inject=["$q",i.f,a.m.serviceName,o.b];class u extends d{}n.module(l,[i.d,a.N,o.a]).service(c,d)},DDbI:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("Llzl"),i=s("w9Zy"),r=s("TnpK"),o=s("nmzr");const a="profile.update-avatar.routes";n.module(a,[i.d,r.b]).config([r.c,e=>{e.peekState(o.ProfileRoutes.UPDATE_AVATAR_PEEK,{url:"/avatar/update",require:()=>Promise.all([s.e(28),s.e(665)]).then(s.bind(null,"Jgl2")),pageTitle:"base.profile.update-avatar.pageTitle"})}])},DH9M:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s("QLzv");var n=s("5MwF"),i=s("yCC5"),r=s("Rjd/"),o=s("nkTj");const a=i.ec;r.a.factory(a,["restmod",o.d,(e,t)=>{const s=n.a.apiBasePath+"/v1/announcements";return e.model(s)}])},DU7P:function(e,t,s){"use strict";var n;s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i})),function(e){e.None="",e.Respondus="Respondus",e.IMS="IMS"}(n||(n={}));const i="rs-lockdown"},DlnX:function(e,t,s){},DpvE:function(e,t){e.exports='<div>\n  <div class="initials"></div>\n  <div class="image"></div>\n</div>'},DsaG:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return l}));var n=s("Llzl"),i=s("f4B+"),r=s("IbyE"),o=s("AuQm");const a="ultra.components.services.fileViewer",l="fileViewer",c="audio",d="image",u="video",h="gif",m="jpeg",p="png";class g{constructor(t){this.$sce=t,this.canFileBeRenderedInline=e=>{if(!e)return!1;const t=this.getMediaSubType(e),s=this.getMediaType(e);switch(s){case d:return[m,h,p].indexOf(t)>-1;case c:case u:{const t=document.createElement(s);return t.canPlayType&&!!t.canPlayType(e)}}return Object(o.couldFileBeRenderedWithBasicDocViewerByMimeType)(e)},this.getMediaSubType=e=>{var t;return null!==(t=null==e?void 0:e.substring(e.indexOf("/")+1))&&void 0!==t?t:null},this.getMediaType=e=>{var t;return null!==(t=null==e?void 0:e.substring(0,e.indexOf("/")))&&void 0!==t?t:null},this.isMediaFile=t=>e.inArray(t,[d,u,c])>=0,this.shouldRenderInlineByDefault=e=>{let t=!1;const s=this.getMediaType(e.currentMimeType);return s?t=this.isMediaFile(s):Object(o.couldFileBeRenderedWithBasicDocViewerByMimeType)(e.currentMimeType)&&(t=!0),t},this.isAudioFile=e=>e===c,this.isImageFile=e=>e===d,this.isVideoFile=e=>e===u,this.initUiField=e=>{null==e.ui&&(e.ui={}),e.viewerData&&e.viewerData.viewerUrl&&(e.ui.trustedViewUrl=this.$sce.trustAsResourceUrl(e.viewerData.viewerUrl)),e.ui.iconClass=Object(r.getFileTypeIconClass)(e.currentMimeType);const{currentMimeType:t}=e;e.ui.mediaType=this.getMediaType(t),e.ui.mediaSubtype=this.getMediaSubType(t),e.ui.canBeRenderedInline=this.canFileBeRenderedInline(t),e.ui.safeAltText=e.alternativeText?i.a.HTML(e.alternativeText):""}}}g.$inject=["$sce"];class b extends g{}n.module(a,[]).service(l,g)}).call(this,s("5iHu"))},Dwp2:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("Llzl"),i=s("YOs/"),r=s("65PF"),o=s("C/Ry");const a="ultra.components.directives.table.tableCell";class l{constructor(e,t,s){this.scope=e,this.element=t,this.ctrl=s,this.getColumn(),this.handleAlternateText()}getColumn(){this.column=this.ctrl.getConfig().columns[this.scope.columnIndex()]}handleAlternateText(){if(this.column&&this.column.alternateTextFn){const e=this.column.alternateTextFn(this.scope.item);this.element.find(".alternate-contents").text(e),this.element.find(".transclude-container").attr("aria-hidden","true")}}}l.$inject=["scope","element","ctrl"];class c{constructor(e){this.$injector=e,this.require="^bbTable",this.restrict="E",this.replace=!0,this.transclude=!0,this.template=function(e,t){return"true"===t.header?o:r},this.scope={columnIndex:"&",header:"@"},this.link=(e,t,s,n,i)=>{e.item=e.$parent.$parent.item,e.tableCell=this.$injector.instantiate(l,{scope:e,element:t,ctrl:n}),i((s,n)=>{n.item=e.item,t.find(".transclude-container").append(s)})}}}c.$inject=["$injector"],n.module(a,[i.b]).directive("bbTableCell",["$injector",e=>e.instantiate(c)])},DyQT:function(e,t){e.exports='<div bb-load-bundle="components/directives/save-tray">\n  <div class="notification-container" ng-switch on="saveTray.status">\n    <span class="progress-indicator"><div class="canvas" ng-class="{\'success-state\' : saveTray.status === \'success\', \'error-state\' : saveTray.status === \'error\'}"></div></span>\n    <span class="progress-status" ng-switch-default bb-translate>{{::saveTray.localizationKeysPrefix}}.loadingMoreItems</span>\n    <span class="progress-status" ng-switch-when="success" bb-translate>{{::saveTray.localizationKeysPrefix}}.itemsLoaded</span>\n    <span class="progress-status" ng-switch-when="error" bb-translate>{{::saveTray.localizationKeysPrefix}}.itemsFailedToLoad</span>\n  </div>\n</div>\n'},E01l:function(e,t){e.exports='<bb-modal class="notification group-attempt-access-control-dialog {{additionalClass}}"\n  modal-translate-options="modalTranslateOptions"\n  analytics-id-tag-prefix="components.directives.groupAttemptAccessControlDialog">\n\n  <div name="modal-contents">\n\n    <div class="queue">\n      <div class="owner user-tile">\n        <div>\n          <bb-avatar user="owner"></bb-avatar>\n          <bb-username user="owner"></bb-username>\n        </div>\n      </div>\n      <div class="user-tile queuer" ng-repeat="user in queuedUsers track by user.id" ng-class="\'queuer-\' + $index">\n        <div>\n          <bb-avatar user="user"></bb-avatar>\n          <bb-username user="user"></bb-username>\n        </div>\n      </div>\n    </div>\n\n    <p ng-bind-html="::modalStrings.instructions"></p>\n  </div>\n  <span name="modal-footer-button-primary">\n    <button class="button confirm-ok js-primary-button" ng-click="okAction()" ng-if="!hideOK" analytics-id="primary.ok.action.button">{{::modalStrings.ok}}</button>\n    <button class="button confirm-cancel js-secondary-button" ng-click="cancelAction()" ng-if="hideOK" analytics-id="secondary.cancel.action.button">{{::modalStrings.cancel}}</button>\n  </span>\n  <span name="modal-footer-button-secondary">\n    <button class="button button--secondary confirm-cancel js-secondary-button" ng-click="cancelAction()" ng-if="!hideOK" analytics-id="secondary.cancel.action.button">{{::modalStrings.cancel}}</button>\n  </span>\n</bb-modal>\n'},EN13:function(e,t){e.exports='<bb-modal class="notification js-non-file-error" \n          modal-title-key="components.directives.fileUpload.disallowNonFileUploadTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.disallowNonFileUploadError</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},Ediv:function(e,t){e.exports='\x3c!--\n  this #ftue-new div is copied from first-time-visit-directive.html.\n  it may need to move back up a level if/when the welcome template is made configurable.\n--\x3e\n<div id="ftue-new" class="base-ftue" ng-if="firstVisit">\n  <div id="ftue-new-1" class="ftue-new-slide current-view">\n    <div class="slide-content large-6 large-offset-3 medium-8 medium-offset-2 small-10 small-offset-1">\n      <h2 bb-translate>welcome.welcome.title</h2>\n\n      <div>\n        <a href="javascript:void(0);" class="ftue-img ftue-1-button scroll-button" tabindex="0" analytics-id="welcome.welcome.welcomeIcon.link"><img\n                                          src="./static/images/ftue/ftueMMicon_blank.gif"\n                                          in-view="loadImage($inview, $inviewpart, $event,((\'./static/images/ftue/ftuMMicon_Welcome.gif\')))"\n                                          in-view-options="{ debounce: 100 }"\n                                          bb-translate-attrs="{alt: \'welcome.welcome.alt\'}"\n                                          ></a>\n      </div>\n      <p class="medium-up-padding" bb-translate>welcome.welcome.description</p>\n    </div>\n    <div class="slide-control">\n\n      <button class="button ftue-1-button icon round ftue-advance large scroll-button"\n                                                                  bb-translate-attrs="{\'aria-label\': \'welcome.welcome.alt\'}"\n                                                                  analytics-id="welcome.welcome.downIcon.button"><i\n                                                                  class="icon-chevron-down"\n\n                                                                  ></i>\n      </button>\n    </div>\n  </div>\n\n  <div class="ftue-new-slide" id="ftue-new-2">\n    <div class="slide-content large-6 large-offset-3 medium-8 medium-offset-2 small-10 small-offset-1">\n      <h2 bb-translate>welcome.layers.title</h2>\n\n      <div>\n        <a id="ftue-new-2-img" href="javascript:void(0);" class="ftue-img ftue-2-button scroll-button" tabindex="0" analytics-id="welcome.welcome.neverLoseYourPlace.link"><img\n                                          src="./static/images/ftue/ftueMMicon_blank.gif"\n                                          in-view="loadImage($inview, $inviewpart, $event,((\'./static/images/ftue/ftuMMicon_NeverLoseYourPlace.gif\')))"\n                                          in-view-options="{ debounce: 100 }"\n                                          bb-translate-attrs="{alt: \'welcome.layers.alt\'}"></a>\n      </div>\n      <p bb-translate>welcome.layers.description</p>\n    </div>\n    <div class="slide-control">\n      <button class="button icon round ftue-advance large ftue-2-button scroll-button"\n                                                                  bb-translate-attrs="{\'aria-label\': \'welcome.layers.alt\'}"\n                                                                  analytics-id="welcome.welcome.downIcon.button"><i\n                                                                  class="icon-chevron-down"\n                                                                  ></i>\n      </button>\n    </div>\n  </div>\n\n  <div class="ftue-new-slide" id="ftue-new-3">\n    <div class="slide-content large-6 large-offset-3 medium-8 medium-offset-2 small-10 small-offset-1">\n      <h2 bb-translate>welcome.safe.title</h2>\n\n      <div>\n        <a id="ftue-new-3-img" href="javascript:void(0);" class="ftue-img ftue-3-button" ng-click="welcome.goNextPage()" tabindex="0" analytics-id="welcome.welcome.goNextPage.link"><img\n                                          src="./static/images/ftue/ftueMMicon_blank.gif"\n                                          in-view="loadImage($inview, $inviewpart, $event,((\'./static/images/ftue/ftuMMicon_FeelFree.gif\')))"\n                                          in-view-options="{ debounce: 100 }"\n                                          bb-translate-attrs="{alt: \'welcome.safe.alt\'}"></a>\n      </div>\n      <p bb-translate>welcome.safe.description</p>\n\n    </div>\n    <div class="slide-control">\n      <button class="button round ftue-end large ftue-3-button" bb-translate ng-click="welcome.goNextPage()" analytics-id="welcome.safe.button">welcome.safe.button</button>\n    </div>\n  </div>\n</div>\n'},FBBZ:function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"j",(function(){return c})),s.d(t,"b",(function(){return d})),s.d(t,"i",(function(){return u})),s.d(t,"c",(function(){return h})),s.d(t,"d",(function(){return m})),s.d(t,"l",(function(){return p})),s.d(t,"k",(function(){return g})),s.d(t,"m",(function(){return b})),s.d(t,"n",(function(){return f})),s.d(t,"h",(function(){return v})),s.d(t,"f",(function(){return S})),s.d(t,"e",(function(){return y})),s.d(t,"o",(function(){return C})),s.d(t,"g",(function(){return I}));var n=s("nsO7"),i=s("Q/M7"),r=s("5MwF");const o=["xplor-connector"];function a(e){return i.c(r.a.partnerCloudBasePath+e)}function l(e){const t=e.baseUrl+"/ultra/features/course/partner-tool/partner-tool-return-page.html";return a("/launch/lti?returnUrl="+encodeURIComponent(t)+"&uri_uri="+encodeURIComponent("ACTION:cloudProvisioning")+"&content_id="+encodeURIComponent(e.parentId||"")+"&window=false&disclaimer=true&provider_id=CLOUD1&uri_scheme=ACTION&custom_error_url="+encodeURIComponent(t)+"&action=cloudProvisioning&uri_id="+(new Date).getTime().toString()+"&course_id="+encodeURIComponent(e.courseId||"")+"&public=true&ignore_partner_settings=false&target=_self")}function c(e){let t="/content"+(e.displayInIframe?"/ultra":"")+"?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId);return e.parentId&&(t+="&content_id="+encodeURIComponent(e.parentId)),e.position&&(t+="&position="+encodeURIComponent(e.position)),e.mode&&(t+="&mode="+encodeURIComponent(e.mode)),a(t)}function d(e){let t="/content/return?provider_id="+encodeURIComponent(e.providerId)+"&course_id="+encodeURIComponent(e.courseId)+"&content_id="+encodeURIComponent(e.contentId)+"&parentId="+encodeURIComponent(e.parentId)+"&position="+encodeURIComponent(e.position);return a(t+=e.itemIds?"&itemIds="+encodeURIComponent(e.itemIds):"&root=true")}function u(e){const t=e.baseUrl+"/webapps/blackboard/execute/blti/launchReturn";return a("/launch/lti?window=false&action=provisioning&ignore_partner_settings=false&uri_scheme=ACTION&target=_self&uri_id="+(new Date).getTime().toString()+"&uri_uri="+encodeURIComponent("ACTION:provisioning")+"&b2Uri="+encodeURIComponent("/webapps/partner-cloud/")+"&course_id="+encodeURIComponent(e.courseId)+"&content_id="+encodeURIComponent(e.parentId||"")+"&provider_id="+encodeURIComponent(e.partnerId)+"&returnUrl="+encodeURIComponent(t)+"&custom_error_url="+encodeURIComponent(t))}function h(e){return a("/course/tools?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId))}function m(e){return a("/gradeLink/grade?outcomeDefinitionId="+encodeURIComponent(e.gradableItemId)+"&linkRefId="+encodeURIComponent(e.linkId)+"&course_id="+encodeURIComponent(e.courseId)+"&attempt_id="+encodeURIComponent(e.attemptId)+"&courseMembershipId="+encodeURIComponent(e.membershipId)+"&cancelGradeUrl")}function p(e){return a("/diagnostics/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function g(e){return a("/contentRefresh/preview/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function b(e){return a("/gradeRefresh/preview/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function f(e){return a("/course/roster/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function v(e){return e?e&&e.toolProvider&&e.toolProvider.toolProviderProfile&&e.toolProvider.toolProviderProfile.name?e.toolProvider.toolProviderProfile.name:e&&e.portfolio&&e.portfolio.name?e.portfolio.name:e.providerId:""}function S(e,t){if(!e)return"";const s=t?e.iconUrl:e.associatedIconUrl;return s?i.l(s):""}function y(e){if(!e)return"";let t;return e.toolProvider&&e.toolProvider.toolProviderProfile&&(t=e.toolProvider.toolProviderProfile.description),t||""}function C(e){return e.toolProvider&&e.toolProvider.toolProviderProfile&&e.toolProvider.toolProviderProfile.internalProviderProfile&&e.toolProvider.toolProviderProfile.internalProviderProfile.pluginDescriptor&&n.includes(o,e.toolProvider.toolProviderProfile.internalProviderProfile.pluginDescriptor.handle)||!1}function I(e){const t=[];return Array.prototype.push.apply(t,e.premierList),Array.prototype.push.apply(t,e.signatureList),Array.prototype.push.apply(t,e.otherList),t.forEach(e=>{e.childProviders&&Array.prototype.push.apply(t,e.childProviders)}),n.keyBy(t,"providerId")}},"FE+f":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("Llzl"),i=s("0JpG"),r=s("TnpK");const o="ultra.course.description.router";n.module(o,[r.b,i.moduleName]).config([r.c,e=>{e.peekState("description",{url:"/description",resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/description/course-description")]},require:()=>s.e(142).then(s.bind(null,"8WQs")),pageTitle:"course.description.header"})}])},FHk9:function(e,t,s){"use strict";s.r(t),s.d(t,"EVENT_BBML_EDITOR_IS_UPDATED",(function(){return n})),s.d(t,"EVENT_BBML_EDITOR_FORCE_UPDATE",(function(){return i})),s.d(t,"EVENT_BBML_EDITOR_ID_GENERATED",(function(){return r})),s.d(t,"ReorderBlockEventInfo",(function(){return o}));const n="bbml-updated",i="bb-bbml-editor-force-bbml-update",r="bb-bbml-editor-id-generated";class o{}},FR7u:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return i}));s("FwJ5");var n=s("Llzl");const i="ultra.components.directives.clickScrollTo";class r{constructor(){this.restrict="A",this.link=(t,s,n)=>{s.on("click",()=>{e(n.bbClickScrollTo).scrollintoview({duration:500})}),t.$on("$destroy",()=>{s.off()})}}}n.module(i,[]).directive("bbClickScrollTo",["$injector",e=>e.instantiate(r)])}).call(this,s("5iHu"))},Fvsw:function(e,t,s){"use strict";s.d(t,"a",(function(){return f})),s.d(t,"b",(function(){return v}));var n=s("nsO7"),i=s("Llzl"),r=s("nbDY"),o=s.n(r),a=s("Sa5G"),l=s("jhBu"),c=s("fYJU"),d=s("Qbdf"),u=s("emI2"),h=s("X455"),m=s("pjml"),p=s("eUpQ"),g=s("VAMW"),b=s("6fZB");const f="ultra.service.context",v="context";class S extends o.a{}S.Administrator=new S("administrator"),S.NonStudent=new S("nonstudent"),S.Student=new S("student"),S.ClassicNonStudent=new S("classicnonstudent"),S.ClassicStudent=new S("classicstudent");class y{constructor(e){this.service=e,this.key=g.TransitService.Context}isTelemetryEnabled(){return Object(b.a)(this.service.isTelemetryEnabled())}}class C{constructor(e,t,s,i,r,o,l,c,d,u,h,m){this.$rootScope=e,this.$q=t,this.currentUser=s,this.EntitlementService=i,this.currentCourse=r,this.currentCourseMembership=o,this.preferenceService=l,this.BrandModel=c,this.SystemInfoModel=d,this.PrivacyPolicyModel=u,this.PredictFtueModel=h,this.ThemeModel=m,this.helpVariantOverride=null,this.predictInitialDefer=null,this.getHelpVariantDependencies=n.memoize((function(){return this.$q.all([this.EntitlementService.hasSystemEntitlement(a.s.ViewAdminTop),this.currentUser.getMemberships()])})),this.registerCourseContextDetection();this._course=new class{get model(){return r.course}get membership(){return o.courseMembership}},Object(g.registerService)(new y(this))}get course(){return{model:this.currentCourse.course,membership:this.currentCourseMembership.courseMembership}}get courseId(){return this.currentCourse.courseId}set courseId(e){this.currentCourse.load(e)}registerCourseContextDetection(){const e=this;this.$rootScope.$on(d.a,(t,s)=>{e.courseId=s.id})}overrideHelpVariant(e){this.helpVariantOverride=e}guessHelpVariant(){const e=[];if(this.helpVariantOverride){const e=this.helpVariantOverride;return this.helpVariantOverride=null,this.$q.when([e])}return this.course&&this.course.membership&&!this.course.membership.isStudentOrGuestMembership()&&e.push(this.course.model.isClassic()?S.ClassicNonStudent:S.NonStudent),this.getHelpVariantDependencies().then(t=>{const s=t[0],i=t[1];if(s&&e.push(S.Administrator),this.course&&this.course.model)s&&e.push(this.course.model.isClassic()?S.ClassicNonStudent:S.NonStudent);else{let t=S.Student;i.some(e=>!e.isStudentOrGuestMembership())&&(t=S.NonStudent),e.push(t)}return 0===e.length&&e.push(this.course&&this.course.model&&this.course.model.isClassic()?S.ClassicStudent:S.Student),n.uniq(e)})}getSystemInfo(){return this.systemInfo||(this.systemInfo=window.__initialContext&&window.__initialContext.systemInfo?this.SystemInfoModel.$buildRaw(window.__initialContext.systemInfo):this.SystemInfoModel.$new().$fetch().$suppressErrorDialog()),this.systemInfo}getTheme(){return this.theme||(this.theme=this.ThemeModel.$new({themeId:this.getBrand().themeId}).$fetch()),this.theme}getServerTime(){return p.a.getServerTime()}getServerTimeAsEpochTime(){return p.a.getServerTimeAsEpochTime()}getPrivacyPolicyUrls(){return this.privacyPolicy||(this.privacyPolicy=this.PrivacyPolicyModel.$new().$fetch().$suppressErrorDialog()),this.privacyPolicy}getCourseId(){return this.currentCourse.courseId}getCurrentUserId(){return this.currentUser.userId}userHasGradebookModificationEntitlement(){const e=this.getCourseId();return e?this.EntitlementService.hasCourseEntitlement(a.n.ModifyGradebook,e).then(e=>e):this.$q.when(!1)}getBrand(){return this.brand||(this.brand=window.__initialContext&&window.__initialContext.brand?this.BrandModel.$buildRaw(window.__initialContext.brand):this.BrandModel.getCurrent()),this.brand}getUiVersion(){return window.__initialContext&&window.__initialContext.uiVersion||""}getPreference(e,t){return this.preferenceService.getPreference(e,t)}getPredictPreference(e,t){const s=this.$q.defer();if(!Object.keys(this.preferenceService.preferences).some(e=>e.indexOf(".predict.")>0)){if(this.predictInitialDefer)return this.predictInitialDefer.promise.then(()=>{s.resolve(this.preferenceService.preferences[e])}),s.promise;this.predictInitialDefer=s,this.PredictFtueModel.getFtues().then(n=>{if(n){let i=null;n.forEach(t=>{this.preferenceService.preferences[t.key]=t,e===t.key&&(i=t)}),i?s.resolve(i):(this.preferenceService._addPreferenceToCache(e,t),s.resolve(this.preferenceService.preferences[e]))}else{if(void 0===t)return void s.reject(n);this.preferenceService._addPreferenceToCache(e,t),s.resolve(this.preferenceService.preferences[e])}},e=>{s.reject(e)})}else Object.prototype.hasOwnProperty.call(this.preferenceService.preferences,e)||this.preferenceService._addPreferenceToCache(e,t),s.resolve(this.preferenceService.preferences[e]);return s.promise}getUltraConversionReportId(){return this.course.model.ultraConversionReportId}isTelemetryEnabled(){return this.getSystemInfo().$asPromise().then(e=>e.telemetryEnabled)}setPreference(e,t,s){return this.preferenceService.setPreference(e,t,s)}setPredictPreference(e,t,s){if(e.length>u.a)throw new Error("Preference key is too long!");return this.preferenceService._addPreferenceToCache(e,t,s),this.PredictFtueModel.setFtue(e)}}C.$inject=["$rootScope","$q",c.b,l.b,d.e,h.d,u.c,m.e.serviceName,m.pb.serviceName,m.jb.serviceName,m.bb.serviceName,m.Hb.serviceName];class I extends C{}i.module(f,[m.N,c.a,l.a,d.b,h.a,u.b]).service(v,C)},GGEJ:function(e,t){e.exports='<div bb-load-bundle="components/directives/collab-session-icon" class="icon-shadow" ng-class="{\'is-running\': $ctrl.runningSessionFlag}">\n    <bb-svg-icon ng-if="$ctrl.runningSessionFlag" size="small" icon="collab" role="presentation" aria-hidden="true" status="active"></bb-svg-icon>\n    <bb-svg-icon ng-if="!$ctrl.runningSessionFlag" size="medium" icon="collab-session" role="presentation" aria-hidden="true"></bb-svg-icon>\n</div>'},GNXM:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("Llzl"),i=s("0JpG"),r=s("TnpK"),o=s("nmzr");const a="ultra.course.announcement.router";n.module(a,[i.moduleName,r.b]).config([r.c,e=>{e.peekState(o.AnnouncementRoutes.ANNOUNCEMENTS_LIST,{url:"/announcement-list",require:()=>Promise.all([s.e(18),s.e(723)]).then(s.bind(null,"pp2P")),pageTitle:"course.outline.announcements.title",peekStates:[o.AnnouncementRoutes.ANNOUNCEMENT_DETAIL],panelClass:"full"}).peekState(o.AnnouncementRoutes.ANNOUNCEMENT_DETAIL,{url:"/announcement-detail?courseId&announcementId&mode",require:()=>Promise.all([s.e(18),s.e(668)]).then(s.bind(null,"Zozd")),pageTitle:"course.outline.announcements.title",panelClass:"full"})}])},GbAM:function(e,t,s){"use strict";(function(e){s.d(t,"c",(function(){return l})),s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return d}));var n=s("Llzl"),i=s("yC9S"),r=s("hlUp"),o=s("RPob"),a=s("ZzR9");const l="ultra.components.directives.accessibility.liveRegion",c="aria_live_polite",d="aria_live_assertive",u="#aria-live-polite-region-1",h="#aria-live-polite-region-2",m="#aria-live-assertive-region-1",p="#aria-live-assertive-region-2";class g{constructor(e,t,s){this.scope=e,this.element=t,this.attrs=s,o.ariaMessages.readAssertive=e=>this.readAssertiveMessage(e),o.ariaMessages.readPolite=e=>this.readPoliteMessage(e),i.b.OnRootScope(e,c,(e,t)=>{this.readPoliteMessage(t),this.isEnabled=!0}),i.b.OnRootScope(e,d,(e,t)=>{this.readAssertiveMessage(t),this.isEnabled=!0}),e.$on(a.a.$locationChangeSuccess,()=>{this.isEnabled&&(this.cleanLiveRegion(),this.isEnabled=!1)})}cleanLiveRegion(){const t=e(u),s=e(h),n=e(m),i=e(p);void 0!==t&&(t.empty(),s.empty(),n.empty(),i.empty())}readPoliteMessage(t){const s=e(u),n=e(h);this.readMessage(s,n,t)}readAssertiveMessage(t){const s=e(m),n=e(p);this.readMessage(s,n,t)}readMessage(e,t,s){""===e.text()?this.switchRegion(t,e,s):this.switchRegion(e,t,s)}switchRegion(e,t,s){e.empty(),e.attr("aria-hidden","true"),t.text(s),t.attr("aria-hidden","false")}}g.$inject=["scope","element","attrs"];class b{constructor(e,t){this.$injector=e,this.$compile=t,this.restrict="A",this.link=(e,t,s)=>{t.append(this.$compile(r)(e)),e.liveRegion=this.$injector.instantiate(g,{scope:e,element:t,attrs:s})}}}b.$inject=["$injector","$compile"],n.module(l,[]).directive("bbLiveRegion",["$injector",e=>e.instantiate(b)])}).call(this,s("5iHu"))},"H+SH":function(e,t){e.exports='<bb-modal class="notification js-dismiss-modal" role="alertdialog" bb-translate-attrs="{\'aria-label\': \'course.outline.previewCourse.alert.modalTitle\'}"\n          modal-title-key="course.outline.previewCourse.alert.modalTitle"\n          analytics-id-tag-prefix="course.outline.previewCourse.alert">\n  <div name="modal-contents">\n    <bb-translate>course.conversion.statusBar.page-out-of-date</bb-translate>\n  </div>\n  <button name="modal-footer-button-primary" ng-click="$parent.$close(\'refresh\')" class="button js-primary-button" analytics-id="course.outline.previewCourse.alert.ok.button">\n    <span bb-translate="global.ok"></span>\n  </button>\n</bb-modal>'},H8CZ:function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));const n="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",i="webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationend";function r(e,t){a(e,t,n)}function o(e,t){a(e,t,i)}function a(e,t,s){if(!window.Modernizr.csstransitions)return t({data:{noTransitions:!0}});const n=function(i){let r;i.data||(i.data={});try{r=t(i)}finally{void 0===r&&e.off(s,n)}};e.on(s,n)}},HAJP:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i}));const n="external.script.loader",i="externalScriptLoader";class r{constructor(e){this.$q=e,this.scripts={}}_createScriptElement(){return document.createElement("script")}_appendScriptElement(e){document.head.appendChild(e)}_getWindowProperty(e){return window[e]}getScript(e,t={}){if(this.scripts[e])return this.scripts[e];const s=this.$q.defer();try{this.scripts[e]=s.promise;const n=(e.indexOf("?")>=0?"&":"?")+"_"+Date.now(),i=this._createScriptElement();if(i.type="text/javascript",i.src=e+n,t.attributes)for(const e of Object.keys(t.attributes))i.setAttribute(e,t.attributes[e]);const r=this;i.onload=function(){t.exports?s.resolve(r._getWindowProperty(t.exports)):s.resolve()},i.onerror=function(){s.reject(new Error(`error loading script: ${e}`))},this._appendScriptElement(i)}catch(e){s.reject(e)}return s.promise}}r.$inject=["$q"];class o extends r{}angular.module(n,[]).service(i,r)},HDxW:function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return c}));var n=s("Llzl"),i=s("5MwF"),r=s("k9iv"),o=s("Q/M7"),a=s("IbyE");const l="ultra.service.errorHandler",c="errorHandler",d=e=>()=>{let t,s;const n=e.connect(e=>({}),a.actions.app)((e,n)=>{s=e,t=n});try{t&&t.clearError&&t.clearError()}finally{n()}},u=(e,t,s,n,r)=>a=>{if(a&&a.$response){if(401===a.$response.status){const s=e.get("$location").url(),n=s?"/?new_loc="+encodeURIComponent(i.a.basePath+s):"/";t.location.href=o.c(n)}403===a.$response.status?r.handleApiError(a.$response,()=>{s.$broadcast("no-permission-course"),d(n)()}):r.handleApiError(a.$response,d(n))}};n.module(l,[]).factory(c,["$injector",e=>{const t=t=>e.invoke(["$injector","$window","$rootScope","$ngRedux",r.d,u])(t);return{handle:t,subscribe:()=>e.invoke(["$ngRedux",e=>(e=>t=>{let s;return e.subscribe(()=>{const n=e.getState();if(n.app.error&&s!==n.app.error){const e={status:n.app.error.status,data:n.app.error.data||{}};t({$response:e})}s=n.app.error})})(e)(t)])}}])},Hbkz:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));s("JzsJ");var n=s("Llzl"),i=s("0JpG"),r=s("bF8R"),o=s("g7Mf"),a=s("pjml"),l=s("TnpK"),c=s("Qbdf"),d=s("nmzr");const u="ultra.course.content.conversations.routes";n.module(u,[i.moduleName,l.b,c.b]).config([l.c,c.c,(e,t)=>{e.peekState("conversations",{url:"/conversations/:contentId/:courseId?groupId",resolve:{[c.d]:t.resolve,content:[c.d,r.b,l.d,a.m.serviceName,(e,t,s,n)=>n.$new(e.id).contents.$find(s.nextParams.contentId,{expand:"assignedGroups"}).$asPromise()],translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("common/user-common")])],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[o.c,"currentCourseMemberships",(e,t)=>e.init(t).then(()=>e.loadHardContent(!0))]},onExit:[o.c,e=>{e.destroy()}],require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(544)]).then(s.bind(null,"FFqm")),pageTitle:"course.content.classConversations",peekViewName:"conversations-peek",panelClass:"full",allowChildPeekStates:!0,peekStates:[d.CourseRoutes.COURSE_MESSAGE,d.CourseRoutes.COURSE_DISCUSSION_PARTICIPANTS,d.CourseRoutes.COURSE_LTI,d.CourseRoutes.COURSE_CONTENT_MARKET]})}])},HtY7:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("Llzl"),i=s("lEL+");const r="ultra.components.directives.click",o=0;class a{constructor(e){this.timeout=e,this.restrict="A",this.link=(e,t,s)=>{void 0===s.bbClickTimeout&&(s.bbClickTimeout=o);let n=0;const i=()=>{let t;"true"===s.bbClickOnceDisable?t=e.$eval(s.bbClick):(n+=1)<=1&&(t=e.$eval(s.bbClick)),null!=t&&void 0!==t&&t.finally(()=>{this.timeout((function(){n=0}),e,s.bbClickTimeout)})};e.$on("$destroy",(function(){t.off("click",i)})),t.on("click",i)}}}a.$inject=[i.b],n.module(r,[i.a]).directive("bbClick",["$injector",e=>e.instantiate(a)])},Htol:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return i}));const n="update-state",i="course-outline.refresh-folder"},IVCC:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("Llzl"),i=s("0JpG"),r=s("w9Zy"),o=s("pjml"),a=s("fYJU"),l=s("TnpK"),c=s("ZBYA"),d=s("aohr");const u="ultra.predict.routes";function h(e,t){return{user:[a.b,e=>e.userModel.$asPromise()],localize:["$q","$rootScope","user","$window",i.serviceName,c.b,(t,s,n,r,o,a)=>{a.getInstitutionPreference(d.a.OverrideLanguagePack).then(a=>{let l=a.value||n.locale||"en";const c=r.location.href.match(i.localeQuerystringRegex);c&&(l=c[1]),l=o.validateLocale(l)?l:"en",o.setUserLocale(l);const d=[o.setLocale(s,l),...e.map(e=>o.loadBundle(e))];return t.all(d)})}]}}n.module(u,[i.moduleName,r.d,o.N,a.a,l.b,c.a]).config([l.c,e=>{e.baseState("predictBase",{abstract:!0,require:()=>Promise.all([s.e(28),s.e(660)]).then(s.bind(null,"xID3")),resolve:h(["components/directives/telemetry/telemetry","components/services/telemetry-chart","features/predict/predict","features/locations","features/course/course","global"])}).baseState("predictBase.predictAdvisorStudents",{url:"/predict/advisor/students?customFields&resetFTUE",require:()=>Promise.all([s.e(73),s.e(20),s.e(26),s.e(68),s.e(60),s.e(124),s.e(564)]).then(s.bind(null,"NKO4")),pageTitle:"predict.advisor.title",peekStates:["predictAdvisorStudentsFilter","predictMessagingPanel","predictAdvisorStudentProfilePanel","predictCourseStudentPanel"]}).baseState("predictBase.predictCourseBase",{url:"/predict/courses/:courseId",require:()=>Promise.all([s.e(19),s.e(20),s.e(26),s.e(125),s.e(672)]).then(s.bind(null,"j0gv")),pageTitle:"predict.course.title"}).baseState("predictBase.predictCourseStudentBase",{url:"/predict/instructor/students/:studentId/course/:courseId",require:()=>Promise.all([s.e(19),s.e(25),s.e(20),s.e(23),s.e(26),s.e(55),s.e(673)]).then(s.bind(null,"PPqB")),peekStates:["predictMessagingPanel"],pageTitle:"predict.instructor.title"}).peekState("predictAdvisorStudentProfilePanel",{url:"/profile/:studentId",require:()=>Promise.all([s.e(20),s.e(26),s.e(60),s.e(119),s.e(638)]).then(s.bind(null,"W7NY")),panelClass:"full",peekStates:["predictMessagingPanel","predictCourseStudentPanel","predictFavoritesPanel","predictAdvisorStudentProfilePanel.course-performance","predictAdvisorStudentProfilePanel.advisor-notes","predictAdvisorStudentProfilePanel.interests"],pageTitle:"predict.advisor.student-profile.title"}).peekState("predictAdvisorStudentProfilePanel.course-performance",{url:"/outline",views:{"student-details-tabs-content@":{require:()=>Promise.all([s.e(20),s.e(595)]).then(s.bind(null,"fQnU"))}},peekStates:["predictCourseStudentPanel","predictMessagingPanel"],panelClass:"full",pageTitle:"predict.advisor.student-profile.title"}).peekState("predictAdvisorStudentProfilePanel.advisor-notes",{url:"/notes-contributors",views:{"student-details-tabs-content@":{require:()=>Promise.all([s.e(20),s.e(26),s.e(60),s.e(119),s.e(722)]).then(s.bind(null,"kgDa"))}},peekStates:["predictMessagingPanel"],panelClass:"full",pageTitle:"predict.advisor.student-profile.title"}).peekState("predictAdvisorStudentProfilePanel.interests",{url:"/interests",views:{"student-details-tabs-content@":{require:()=>s.e(598).then(s.bind(null,"clqd"))}},peekStates:["predictFavoritesPanel","predictMessagingPanel"],panelClass:"full",pageTitle:"predict.advisor.student-profile.title"}).peekState("predictCourseStudentPanel",{url:"/courses/:courseId/students/:studentId",require:()=>Promise.all([s.e(19),s.e(25),s.e(20),s.e(23),s.e(26),s.e(55),s.e(687)]).then(s.bind(null,"Wwzz")),panelClass:"full",peekStates:["predictMessagingPanel"],pageTitle:"predict.instructor.title"}).peekState("predictAdvisorStudentsFilter",{url:"/filter",require:()=>Promise.all([s.e(20),s.e(124),s.e(685)]).then(s.bind(null,"TRcT")),panelClass:"peek",pageTitle:"predict.advisor.title"}).peekState("predictMessagingPanel",{url:"/messagingPanel?messageStudentId&messageCourseId&messageType&messageLaunchOrigin",require:()=>Promise.all([s.e(20),s.e(584)]).then(s.bind(null,"G6j8")),panelClass:"peek",pageTitle:"predict.messagingPanel.title"}).peekState("predictFavoritesPanel",{url:"/favorites/:favoriteId?favoriteCategory?city&state&region&country",require:()=>s.e(632).then(s.bind(null,"pI+d")),panelClass:"peek",pageTitle:"predict.favoritesPanel.title"})}])},IVtk:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("Q/M7"),i=s("Y+9S");function r(e){const t=n.c(e);n.p(t)}function o(e){const{action:t,courseId:s,contentId:n,attemptId:o,columnId:a}=e.nextParams,l=a||"";switch(t){case i.MobileApiAction.OpenDocument:r(`ultra/courses/${s}/outline/edit/document/${n}?courseId=${s}`);break;case i.MobileApiAction.OpenAttempt:r(`ultra/courses/${s}/outline/assessment/${n}/overview/attempt/${o}?courseId=${s}`);break;case i.MobileApiAction.ReviewAttempt:r(`ultra/courses/${s}/outline/assessment/${n}/overview/attempt/${o}/review?courseId=${s}&columnId=${a}&contentId=${n}`);break;case i.MobileApiAction.ReviewFeedback:r(`ultra/courses/${s}/outline/assessment/${n}/overview/attempt/${o}/review/inline-feedback?attemptId=${o}&mode=inline&courseId=${s}&contentId=${n}`);break;case i.MobileApiAction.PreviewAssessment:r(`ultra/courses/${s}/outline/assessment/test/${n}?courseId=${s}&gradeitemView=details`);break;case i.MobileApiAction.CollabRecordingPreview:r(`ultra/courses/${s}/outline/collab/launchRecordings`);break;case i.MobileApiAction.CollabManageSession:r(`ultra/courses/${s}/outline/collab/launchSessions`);break;case i.MobileApiAction.OpenCourse:r(`ultra/courses/${s}/outline`);break;case i.MobileApiAction.OpenDiscussion:r(`ultra/courses/${s}/engagement/discussion/${n}?view=discussions&courseId=${s}`);break;case i.MobileApiAction.OpenGroupDiscussion:r(`ultra/courses/${s}/outline/discussion/${n}?view=discussions&disGroupId=${o}&courseId=${s}`);break;case i.MobileApiAction.OpenJournal:r(`ultra/courses/${s}/outline/journal/${n}?view=journal&courseId=${s}`);break;case i.MobileApiAction.OpenAssessment:r(`ultra/courses/${s}/outline/assessment/${n}/overview?courseId=${s}`);break;case i.MobileApiAction.OpenAssessmentInstView:r(`ultra/courses/${s}/outline/assessment/test/${n}?courseId=${s}&gradeitemView=details`);break;case i.MobileApiAction.OpenAdminAnnouncement:r(`ultra/stream/announcement/${n}`);break;case i.MobileApiAction.OpenCourseAnnouncement:r(`ultra/courses/${s}/outline/announcement-list/announcement-detail?courseId=${s}&announcementId=${n}`);break;case i.MobileApiAction.OpenCourseMessage:r(`ultra/courses/${s}/messages/edit/${n}?courseId=${s}&offset=0&count=1`);break;case i.MobileApiAction.OpenGradeBook:r(`ultra/courses/${s}/grades`);break;case i.MobileApiAction.OpenCalendar:r(`ultra/courses/${s}/calendar`);break;case i.MobileApiAction.OpenGradedSCORM:r(`ultra/courses/${s}/outline/scorm/overview/${n}?courseId=${s}`);break;case i.MobileApiAction.OpenInstViewGradedSCORM:r(`ultra/courses/${s}/outline/scorm/${n}/columns/${l}/submissions?courseId=${s}&gradeitemView=students`);break;case i.MobileApiAction.OpenTimeline:r("ultra/course");break;case i.MobileApiAction.OpenPersonalEvent:r(`ultra/stream/event/edit/PERSONAL/blackboard.data.calendar.CalendarEntry/${n}`);break;case i.MobileApiAction.OpenCalendarEvent:r(`ultra/stream/event/edit/${s}/blackboard.data.calendar.CalendarEntry/${n}`);break;case i.MobileApiAction.OpenTools:r("ultra/tools");break;case i.MobileApiAction.OpenCreateMessages:r(`ultra/messages/create?courseId=${s}`);break;case i.MobileApiAction.OpenCourseMessagesList:r(`ultra/courses/${s}/messages`);break;case i.MobileApiAction.OpenInstitutionPage:r("ultra/institution-page");break;case i.MobileApiAction.OpenAdminInstitutionPage:r("ultra/institution-page/admin/default");break;case i.MobileApiAction.OpenJournalParticipantsGrades:r(`ultra/grades/journal/${n}?view=participants&limit=25&page=1&submissionStatus=all&courseId=${s}`);break;case i.MobileApiAction.OpenViewGradesOfflinePage:r(`ultra/grades/offline-grades/${n}?courseId=${s}&gradeitemView=students`);break;case i.MobileApiAction.OpenViewGradesAssessmentsPage:r(`ultra/grades/assessment/test/${n}?courseId=${s}&gradeitemView=students`);break;case i.MobileApiAction.OpenScormGradesPage:r(`ultra/grades/scorm/${n}/columns/${a}/submissions?courseId=${s}&gradeitemView=students`);break;case i.MobileApiAction.OpenDiscussionGradePage:r(`ultra/grades/discussion/${n}?view=participants&courseId=${s}`);break;case i.MobileApiAction.OpenAttendancePage:r(`ultra/grades/attendance?courseId=${s}`);break;case i.MobileApiAction.OpenCalendarAssessmentPage:r(`ultra/calendar/assessment/test/${n}?courseId=${s}&gradeitemView=details`);break;case i.MobileApiAction.OpenCalendarDiscussionPage:r(`ultra/calendar/discussion/${n}?view=discussions&courseId=${s}`);break;case i.MobileApiAction.OpenCalendarJournalPage:r(`ultra/calendar/journal/${n}?view=journal&courseId=${s}`);break;case i.MobileApiAction.OpenCalendarScormPage:r(`ultra/calendar/scorm/${n}/columns/${a}/submissions?courseId=${s}&gradeitemView=students`);break;case i.MobileApiAction.OpenStudentCalendarAssessmentPage:r(`ultra/calendar/assessment/${n}/overview?courseId=${s}`);break;case i.MobileApiAction.OpenStudentCalendarScormPage:r(`ultra/calendar/scorm/overview/${n}?courseId=${s}`);break;case i.MobileApiAction.OpenStudentDiscusssionPage:r(`ultra/courses/${s}}/outline/discussion/${n}?view=discussions&courseId=${s}`);break;default:e.go("base.not-found")}}},"Is+C":function(e,t,s){"use strict";s.d(t,"b",(function(){return I})),s.d(t,"c",(function(){return $})),s.d(t,"a",(function(){return w}));var n=s("D57K"),i=s("nsO7"),r=s("Llzl"),o=s("pjml"),a=s("VAMW"),l=s("4nF1"),c=s("X455"),d=s("12mu"),u=s("TnpK"),h=s("o5Lu"),m=s("8jzW"),p=s("Sa5G"),g=s("Q/M7"),b=s("fYJU"),f=s("IbyE"),v=s("aHpC"),S=s("kcGO"),y=s("Htol"),C=s("9OUN");const I="ultra.components.services.scorm",$="scorm",w="geolocation *; microphone *; camera *; midi *; encrypted-media *";class T{constructor(e){this.service=e,this.key=a.TransitService.Scorm}scormLaunch({contentId:e,courseId:t,content:s,showPreLaunchPanel:n}){return this.service.scormLaunch({contentId:e,courseId:t,content:s,showPreLaunchPanel:n})}}let E=class{constructor(e,t,s,n,i,r,o,l,c,d,u,h){this.$q=e,this.$rootScope=t,this.$window=s,this.$ngRedux=n,this.cacheFactory=i,this.contextCourseMembership=r,this.modalService=o,this.ultraState=l,this.gradeService=c,this.scoreProviderHelper=d,this.CourseModel=u,this.contextUser=h,this.scormAvailabilityCache={},this.subscribeToReduxChanges(),Object(a.registerService)(new T(this))}subscribeToReduxChanges(){this.$ngRedux.connect(null,e=>Object(C.bindActionCreators)({updateContentReviewState:f.actions.contentReviewState.persistContentReviewState},e))(this)}isScormAvailable(e){var t;const s=this.scormAvailabilityCache[e];return s?this.$q.when(null===(t=s.toolEnabledSetting)||void 0===t?void 0:t.isAvailable):this.CourseModel.$new(e).contentHandlers.$find(p.f.RusticiScorm.toString()).$allow([403]).$asPromise().then(t=>{var s;return null===(s=(this.scormAvailabilityCache[e]=t).toolEnabledSetting)||void 0===s?void 0:s.isAvailable})}async scormLaunch(e){const t=this.$q.defer(),[s,n]=await this.$q.all([this.getContent(e.courseId,e.content,e.contentId),e.showPreLaunchPanel?this.getMembership(e.courseId):null]);if(e.showPreLaunchPanel&&this.isGradable(s))if(s.canEdit()){const s=r.fromJson(this.scoreProviderHelper.getSubmissionListStateRef(f.ScoreProviderHandle.Scorm,{courseId:e.courseId,contentId:e.contentId},m.a.GenerateStateParams));this.ultraState.goPeekState(s.state,s.args).then(()=>{t.resolve()}).catch(e=>{t.reject({errorMessage:"Failed to open the SCORM submission list.",errorResponse:e})})}else this.isStudentInCourse(n)&&this.ultraState.goPeekState("scorm-overview.student",{courseId:s.courseId,contentId:s.id}).then(()=>{t.resolve()}).catch(e=>{t.reject({errorMessage:"Failed to open the SCORM submission list.",errorResponse:e})});else this.launchScormLink(i.merge(e,{content:s}),t);return t.promise}refreshContents(e,t){this.getContent(e,null,t).then(e=>{this.gradeService.refreshCourseContents(e)})}markContentAsViewed(e,t){return t?this.getContent(e,null,t).then(e=>{var t;if(!(null===(t=e.permissions)||void 0===t?void 0:t.canHaveReviewState))return;const s=Object(S.getAutomaticReviewStateForContentLaunched)(e);s&&(this.updateContentReviewState(e.courseId,e.id,s),e.inSequence&&this.$rootScope.$broadcast(y.b,e,s))}):this.$q.when()}launch(e,t,s,n=!1){e=g.c(e),e=g.a(e,"from_ultra","true"),n?(this.$window.open(e),this.markContentAsViewed(t,s)):this.ultraState.goPeekState("scorm-launch-frame",{toolHref:e,courseId:t,contentId:s}).then(()=>{this.markContentAsViewed(t,s)})}launchScormLink(e,t){let s;e.content&&(s=this.getLaunchLinkFromContent(e.content)),s&&(this.determineLaunchTarget(i.merge(e,{launchLink:s})),t.resolve())}determineLaunchTarget(e){e.content&&e.content.isScorm()&&this.launch(e.launchLink,e.content.courseId,e.content.id,e.content.launchInNewWindow)}getLaunchLinkFromContent(e){const t=e.contentDetail&&e.contentDetail[e.contentHandler.toString()];return t&&t.launchUrl||null}scormEditColumn(e){this.getContent(e.courseId,e.ui.content,e.contentId).then(t=>{e.ui.content=t;const s=l.a.create(t).getEditState();this.ultraState.goPeekState(s,{contentId:t.id})})}isStudentInCourse(e){return e.isStudentMembership()}isGradable(e){return!!e.getScormGradebookItems().length}getContent(e,t,s){return t?this.$q.when(t):s?this.CourseModel.$new(e).contents.$find(s).$asPromise():this.$q.when(null)}getMembership(e){return this.contextCourseMembership.courseMembership?this.$q.when(this.contextCourseMembership.courseMembership):this.CourseModel.$new(e).users.$find(this.contextUser.userId).$asPromise()}loadScormGrade({courseId:e,column:t,grade:s}){let n=null;return(n=s?s.$asPromise&&s.$asPromise()||this.$q.when(s):this.gradeService.loadGrade({gradeQueryParams:{},courseId:e,column:t,userId:this.contextUser.userId},!1)).then(t=>t&&t.attempts.$fetch({fields:"id,status,attemptDate"}).$asPromise().then(e=>e.length&&e.reduce((e,t)=>e.attemptDate>t.attemptDate?e:t)).then(e=>e&&e.id).then(s=>{if(!s)return t;const n=this.CourseModel.$new(e),i={expand:"toolAttemptDetail,alignedGoals,members,attempts,attempts.toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor",attemptId:s};return this.gradeService.loadAttempt(t,n,i)}))}};E=Object(n.__decorate)([Object(n.__param)(0,Object(v.b)("$q")),Object(n.__param)(1,Object(v.b)("$rootScope")),Object(n.__param)(2,Object(v.b)("$window")),Object(n.__param)(3,Object(v.b)("$ngRedux")),Object(n.__param)(4,Object(v.b)("DSCacheFactory")),Object(n.__param)(5,Object(v.b)(c.d)),Object(n.__param)(6,Object(v.b)(d.b)),Object(n.__param)(7,Object(v.b)(u.d)),Object(n.__param)(8,Object(v.b)(h.i)),Object(n.__param)(9,Object(v.b)(m.c)),Object(n.__param)(10,Object(v.b)(o.m.serviceName)),Object(n.__param)(11,Object(v.b)(b.b))],E);class k extends E{}r.module(I,[c.a,u.b,m.b,h.h,o.N]).service($,E).config(["$compileProvider",e=>{e.aHrefSanitizationWhitelist(/^\s*(https?|mailto):/)}])},J0Qq:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("Llzl"),i=s("0JpG");const r="ultra.directives.bbDate";class o{constructor(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}compile(e){const t=e.html();return(e,s,n)=>{const r=t=>{const r=this.bbLocalize.getFormatEnum(i.ILocaleDateFormat,n.format)||i.ILocaleDateFormat.Full,o=e=>{"bb-date"===s.prop("tagName").toLowerCase()?s.replaceWith(e):s.html(e)};null==t?o(""):this.bbLocalize.formatDate(t,r,e).then(o)},o=t=>t?new Date(this.$parse(t)(e)):null;let a;"true"===n.autoUpdate?n.$observe("bbDate",()=>{a=o(n.bbDate),r(a)}):(a=this.$parse(t)(e)||o(n.bbDate),r(a))}}}o.$inject=["$parse",i.serviceName];class a extends o{}n.module(r,[i.moduleName]).directive("bbDate",["$injector",e=>e.instantiate(o)])},"JRp+":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("Llzl"),i=s("0JpG"),r=s("TnpK");const o="ultra.course.conversion.router";n.module(o,[r.b,i.moduleName]).config([r.c,e=>{e.peekState("conversion-analysis",{url:"/conversionAnalysis",resolve:{translations:[i.serviceName,e=>e.loadBundle("components/directives/convert-and-import")]},require:()=>Promise.all([s.e(45),s.e(709)]).then(s.bind(null,"0y0M")),pageTitle:"ultra.convert.analysis.pageTitle"}).peekState("conversion-risk-analysis",{url:"/conversionRiskAnalysis",resolve:{translations:[i.serviceName,e=>e.loadBundle("components/directives/convert-and-import")]},require:[()=>Promise.all([s.e(122),s.e(708)]).then(s.bind(null,"VtI1")),()=>Promise.all([s.e(122),s.e(697)]).then(s.bind(null,"ubcj"))],pageTitle:"ultra.convert.analysis.pageTitle"})}])},JXhc:function(e,t,s){"use strict";s.d(t,"c",(function(){return l})),s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return d}));var n=s("Llzl"),i=s("0JpG"),r=s("hlSw"),o=s("TnpK"),a=s("3bn4");const l="ultra.course.content.assessment.question-goal-alignment",c="question-goal-alignment",d="question-goal-alignment-for-student",u=["course","goal-alignment","goal"];class h extends a.a{constructor(){super(...arguments),this.url="/goalAlignment/:questionId/:questionIndex",this.panelClass="peek assessment-question-goal-peek"}resolveGoalAlignableContent(){return["$q","currentContent","currentCourse",i.serviceName,o.d,"$injector",(e,t,s,n,i,o)=>void 0!==t&&void 0===t.id?e.when([]):e.when(null).then(()=>{if(void 0===t)return o.invoke(r.a.currentContent,null,{currentCourse:s,translations:{}}).then(e=>{t=e})}).then(()=>e.all([s.assessments.$buildRaw({id:t.getDeployedAssessment().assessment.id}).questions.$find(i.nextParams.questionId,{expand:"alignedGoals"}).$asPromise(),n.loadBundle(`features/${u.join("/")}`)]).then(([e])=>this.setupGoalAlignableContent(e,n,i)))]}getPeekStateName(){return c}getOverrideSubTitle(){return[i.serviceName,o.d,(e,t)=>e.translateSync({locale:null,key:"components.directives.assessment-question.question-title",params:{index:t.nextParams.questionIndex},noWrap:!0})]}setupGoalAlignableContent(e,t,s){return[{getContentTitleForGoalAlignment:()=>t.translateSync({locale:null,key:`${u.join(".")}.goalsAlignedWithThisQuestion`}),getContentIdForGoalAlignment:()=>e.getContentIdForGoalAlignment(),isCurrentUserEligibleToAlignGoals:()=>e.isCurrentUserEligibleToAlignGoals(),alignedGoals:(()=>e.alignedGoals.map(t=>(t.content=e,t)))()}]}}h.$inject=["$injector","$q"];class m extends h{resolveGoalAlignableContent(){return["$q","currentCourse","contentData",i.serviceName,o.d,(e,t,s,i,r)=>{let o=e.when(null);return s.courseContent.isGroupContent&&s.groupAttempt?o=t.gradebook.groupAttempts.$find(s.groupAttempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise():!s.courseContent.isGroupContent&&s.attempt&&(o=t.gradebook.attempts.$find(s.attempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise()),e.all([o,i.loadBundle(`features/${u.join("/")}`),i.loadBundle("components/directives/assessment/assessment-question")]).then(([e])=>{let t={};if(e){const i=e.getToolAttemptDetailItem(s.gradingColumn.scoreProviderHandle);(i&&i.questionAttempts||[]).forEach(e=>{e.question&&e.question.id===r.nextParams.questionId&&(t=n.extend(e.question,{getContentIdForGoalAlignment:()=>`blackboard.data.qti.asi.AsiObject;${e.question.id}`,isCurrentUserEligibleToAlignGoals:()=>!1}))})}return this.setupGoalAlignableContent(t,i,r)})}]}getPeekStateName(){return d}}n.module(l,[o.b,i.moduleName]).config([o.c,e=>{[new h,new m].forEach(t=>{e.peekState(t.getPeekStateName(),t)})}])},JbSi:function(e,t,s){var n=s("ziER"),i=s("5JeM"),r=new n({id:"icon-medium-collab-session",use:"icon-medium-collab-session-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-collab-session"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 5h17v4l5-3.9583V19l-5-4v4H1V5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M18 8v8M6 8l2 4-2 4M11 8l2 4-2 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(r);e.exports=r},JrDC:function(e,t,s){"use strict";function n(e,t){if(t instanceof e)return t.$pk;if(!t.$scope||"object"!=typeof t.$scope)throw new Error("model_utility.findModelPkInScope could not find $scope object on "+t);return n(e,t.$scope)}s.d(t,"a",(function(){return n}))},"K/D1":function(e,t,s){"use strict";var n=s("nsO7"),i=s("uC9d");const r=["DELETE","PUT","POST","PATCH","JSONP"],o="/learn/api/v1",a="_\\d+_\\d+";function l(e=""){return Array.isArray(e)?e.sort().join(","):e.split(",").sort().join(",")}class c{constructor(){this.$get=[function(){return{}}]}}class d{constructor(e){this.cacheRules=e,this.cachingEnabled=!0,this.cachedExpandedRequests=new Map,this.queuedRequests=new Map,this.requestCache=new Map,this.disableCaching=()=>{this.cachingEnabled=!1},this.$get=["$q","$log",i.c,function(e,t,s){s.listen(e=>{switch(e.type){case"clear":this.removeCacheEntries(e.pattern||".*")}});const n=s=>{const n=this.makeKeyFromRequest(s);if(!this.queuedRequests.has(n)){const t=e.defer();return t.promise.finally(()=>{this.queuedRequests.delete(n)}),this.queuedRequests.set(n,{pendingRequestConfig:t}),e.resolve(s)}return t.info(`Easing ${n}`),this.queuedRequests.get(n).pendingRequestConfig.promise};return{request:e=>{if(!this.cachingEnabled||"GET"!==e.method||!this.isApiUrl(e.url)||e.cache)return e;const t=this.handleRequest(e);return t.url.match(/^blob/)?t:n(t).then(e=>e)},requestError:s=>(t.error("requestError: ",s),e.reject(s)),response:e=>{if(e.config.url.match(/^blob/)){const t=e.config.headers;return e.config.url=t.originalUrl,e.config.params=JSON.parse(t.originalParams),e}return this.cachingEnabled&&"GET"===e.config.method&&this.isApiUrl(e.config.url)&&!e.config.cache?this.handleResponse(e):e},responseError:t=>{if(!t||!t.config)return e.reject(t);const s=this.makeKeyFromResponse(t);return this.queuedRequests.has(s)&&this.queuedRequests.get(s).pendingRequestConfig.reject(t.data),e.reject(t)}}}],this.removeCacheEntries=e=>{this.requestCache.forEach((t,s)=>{(e instanceof RegExp?e:new RegExp(`${e}$`)).test(t.baseUrl)&&(this.requestCache.delete(s),this.cachedExpandedRequests.delete(t.baseUrl),this.queuedRequests.has(s)&&(this.queuedRequests.get(s).pendingRequestConfig.reject(`Canceled Easing: ${s}`),this.queuedRequests.delete(s)),URL.revokeObjectURL(t.documentUrl))})},this.requestCachingRules=e.rules,setInterval(()=>{const e=(new Date).getTime();this.requestCache.forEach(t=>{e>t.expires&&this.removeCacheEntries(t.baseUrl)})},this.cacheRules.cacheTimes.MEDIUM)}getRule(e,t){return this.requestCachingRules.find(s=>{const n=s.urlRegex?s.urlRegex:new RegExp(s.url+"$","i");return s.methods.indexOf(t.toUpperCase())>-1&&n.test(e)})}handleRequest(e){return this.resolveCachedEntry(e)||e}handleResponse(e){if(!this.isApiUrl(e.config.url)||e.config.url.match(/^blob/))return e;const t=e.config.method.toUpperCase(),s=e.config.url,n=this.getRule(s,t),i=this.makeKeyFromResponse(e);return n&&!this.requestCache.has(i)&&this.insertCacheEntry({...e},n.duration),this.resolveEasing(e),e}getCacheEntry(e){let t;const s=this.makeKeyFromRequest(e),n=this.lookupExpandedCacheEntry(e);if(n?t=n:this.requestCache.has(s)&&(t=this.requestCache.get(s)),t){if((new Date).getTime()<t.expires)return t;this.removeCacheEntries(t.baseUrl)}return{}}getCleanUrl(e){return e.slice(e.indexOf(o)+o.length+1)}insertCacheEntry(e,t){const s=this.makeKeyFromResponse(e),n=e.config.url,i={documentUrl:URL.createObjectURL(new Blob([JSON.stringify(e.data)],{type:"application/json"})),baseUrl:n,expires:t+(new Date).getTime()};if(this.requestCache.set(s,i),e.config.params&&e.config.params.expand){const t=e.config.params.expand;if(this.cachedExpandedRequests.has(n)){const e=this.cachedExpandedRequests.get(n);this.cachedExpandedRequests.set(n,[...e,{cacheKey:s,expand:t}])}else this.cachedExpandedRequests.set(n,[{cacheKey:s,expand:t}])}}isApiUrl(e){return e.indexOf(o)>-1}lookupExpandedCacheEntry(e){const t=e.url,s=e.params;if(s&&s.expand&&this.cachedExpandedRequests.has(t)){const e=this.cachedExpandedRequests.get(t).find(e=>{const t=s.expand.split(","),i=e.expand.split(",");return!n.difference(t,i).length});if(e)return this.requestCache.get(e.cacheKey)}}makeKeyFromRequest(e){const t=this.getCleanUrl(e.url);e.params=e.params||{};const{fields:s,expand:n,...i}=e.params,r=l(s),o={url:t,expand:l(n),fields:r,rest:i};return JSON.stringify(o)}makeKeyFromResponse(e){return this.makeKeyFromRequest(e.config)}resolveCachedEntry(e){if(e.url.match(/^blob/))return e;const t=this.getCacheEntry(e);return t&&t.documentUrl?{...e,url:t.documentUrl,params:{},headers:{originalUrl:e.url,originalParams:JSON.stringify(e.params)}}:e}resolveEasing(e){const t=this.makeKeyFromResponse(e),s=this.queuedRequests.get(t);if(s){const t=this.resolveCachedEntry(e.config);s.pendingRequestConfig.resolve(t)}}}const u="ultra-session-event-existing-window",h="ultra-session-event-new-window",m=e=>{if(e.newValue)if(e.key===u)null==window.sessionStorage.getItem("ultra-session-updating-storage")&&(window.sessionStorage.setItem("ultra-session-updating-storage","updating"),setTimeout(()=>{window.localStorage.setItem(h,JSON.stringify(window.sessionStorage)),window.localStorage.removeItem(h),window.sessionStorage.removeItem("ultra-session-updating-storage")})),window.localStorage.setItem(h,JSON.stringify(window.sessionStorage));else if(e.key===h&&!window.sessionStorage.length){const t=JSON.parse(e.newValue);for(const e of Object.keys(t))window.sessionStorage.setItem(e,t[e])}};var p=s("5MwF");s.d(t,"a",(function(){return g}));const g="ultra.components.services.learn.api.cache";angular.module("ultra.components.services.learn.api.cacheRules",[]).constant("learnApiCache.CacheRules",new class{constructor(){this.cacheTimes={DO_NOT_CACHE:0,INSTANT:500,SHORT:15e3,MEDIUM:6e4,LONG:6e5,PERPETUAL:1/0},this.rules=[{url:"calendars",methods:["GET"],duration:this.cacheTimes.SHORT},{url:"cloudstorages",methods:["GET"],duration:this.cacheTimes.PERPETUAL},{url:`courses/${a}`,methods:["GET"],duration:this.cacheTimes.LONG},{url:`courses/${a}`,methods:r,onUpdate:(e,t)=>{t(new RegExp("users/.*"))}},{url:`courses/${a}/contents/${a}`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${a}/contents/ROOT/children`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${a}/convertToUltra/conversionStatus`,methods:["GET"],duration:this.cacheTimes.INSTANT,onUpdate:(e,t)=>{const s=e.url,n=new RegExp(`courses/(${a})/convertToUltra`),i=s.match(n);t(new RegExp(`courses/${i[1]}`))}},{url:`courses/${a}/tools`,methods:["GET"],duration:this.cacheTimes.LONG},{url:`courses/${a}/assessments/${a}/questions`,methods:["GET"],duration:this.cacheTimes.MEDIUM},{url:`courses/${a}/discussionboards/default/forums/${a}/messages/${a}`,methods:r,onUpdate:(e,t)=>{const s=e.url,n=new RegExp(`courses/(${a})/discussionboards/default/forums/(${a})`),i=s.match(n);t(new RegExp(`courses/${i[1]}/discussionboards/default/forums/${i[2]}/messages`))}},{url:`courses/${a}/gradebook/attempts/${a}`,methods:r,onUpdate:(e,t)=>{const s=e.url,n=new RegExp(`courses/(${a})/gradebook`),i=s.match(n);t(new RegExp(`courses/${i[1]}/gradebook/.*`))}},{url:`courses/${a}/gradebook/attempts/${a}/assessment/answers/${a}/grades`,methods:r,onUpdate:(e,t)=>{const s=e.url,n=new RegExp(`courses/(${a})/gradebook`),i=s.match(n);t(new RegExp(`courses/${i[1]}/gradebook/.*`))}},{url:`courses/${a}/gradebook/columns/${a}`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${a}/gradebook/columns/${a}/grades`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${a}/gradebook/columns/${a}/grades/${a}/attempts`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${a}/gradebook/columns/${a}/.+`,methods:r,onUpdate:(e,t)=>{const s=e.url,n=new RegExp(`courses/(${a})/gradebook/columns/(${a})`),i=s.match(n);t(new RegExp(`courses/${i[1]}/gradebook/columns/${i[2]}/.*`)),t(new RegExp(`courses/${i[1]}/memberships.*`))}},{url:`courses/${a}/gradebook/columns/${a}/summary`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${a}/gradebook/grades/bulkView`,methods:["GET"],duration:this.cacheTimes.DO_NOT_CACHE},{url:`courses/${a}/gradebook/groupAttempts/${a}/activities`,methods:r,onUpdate:(e,t)=>{const s=e.url,n=new RegExp(`courses/(${a})/gradebook/groupAttempts/(${a})`),i=s.match(n);t(new RegExp(`courses/${i[1]}/gradebook/groupAttempts/${i[2]}/.*`)),t(new RegExp(`courses/${i[1]}/gradebook/columns/.*`))}},{url:`courses/${a}/memberships/${a}`,methods:r,onUpdate:(e,t)=>{const s=e.url,n=new RegExp(`courses/(${a})/memberships`),i=s.match(n);t(new RegExp(`courses/${i[1]}.*`)),t(new RegExp(`users/${a}/memberships`))}},{url:`courses/${a}/memberships`,methods:["GET"],duration:this.cacheTimes.SHORT},{url:`courses/${a}/users/${a}`,methods:["GET"],duration:this.cacheTimes.LONG},{url:`users/${a}`,methods:r,onUpdate:(e,t)=>{t(new RegExp("users/.*"))}},{url:`users/(?:me|${a})`,methods:["GET"],duration:this.cacheTimes.LONG},{url:`users/${a}/memberships`,methods:["GET"],duration:this.cacheTimes.LONG},{url:"terms",methods:["GET"],duration:this.cacheTimes.PERPETUAL},{url:".+",methods:["GET"],duration:this.cacheTimes.INSTANT}]}});const b=angular.module(g,["ultra.components.services.learn.api.cacheRules"]);p.a.features.learnApiCaching?b.provider("learnApiCacheService",["learnApiCache.CacheRules",d]).service(i.c,i.a).config(["$provide","$httpProvider","learnApiCacheServiceProvider",(e,t,s)=>{window.addEventListener("storage",e=>{(e=>[u,h].some(t=>t===e.key))(e)&&s.disableCaching()}),(()=>(window.addEventListener("storage",m,!1),()=>{window.removeEventListener("storage",m)}))(),localStorage.setItem(u,u),localStorage.removeItem(u);e.decorator("$http",["$delegate",e=>{const t=function(t){if(null!=t.cache)return e(t);const n=s.getRule(t.url,t.method.toUpperCase());return n&&n.onUpdate&&"function"==typeof n.onUpdate&&n.onUpdate(t,s.removeCacheEntries),-1!==r.indexOf(t.method.toUpperCase())&&s.removeCacheEntries(t.url),e(t)};return function(e,t){!function(...e){n.each(e,(function(e){t[e]=function(s,n){return t(angular.extend({},n||{},{method:e,url:s}))}}))}("delete","get","head","jsonp"),function(...e){n.each(e,(function(e){t[e]=function(s,n,i){return t(angular.extend({},i||{},{method:e,url:s,data:n}))}}))}("post","put","patch"),function(...s){n.each(s,(function(s){Object.defineProperty(t,s,{enumerable:!0,get:()=>e[s],set(t){e[s]=t}})}))}("defaults","pendingRequests")}(e,t),t}]),URL&&Object.prototype.hasOwnProperty.call(URL,"createObjectURL")&&t.interceptors.push("learnApiCacheService")}]):b.provider("learnApiCacheService",[c]).service(i.c,i.b)},K3JI:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return i}));var n=s("Llzl");const i="ultra.components.directives.hoverMenuOpacity";class r{constructor(){this.restrict="A",this.link=(t,s)=>{s.on("focus",".hover-menu a, .hover-menu button",t=>{0===e("body.hide-focus-outline").length&&e(t.target).closest(".hover-menu").css({opacity:1})}).on("blur",".hover-menu a, .hover-menu button",t=>{e(t.target).closest(".hover-menu").removeAttr("style")})}}}r.$inject=["$injector"],n.module(i,[]).directive("bbHoverMenuOpacity",["$injector",e=>e.instantiate(r)])}).call(this,s("5iHu"))},KiLF:function(e,t,s){"use strict";var n=s("nbDY"),i=s.n(n);class r extends i.a{}r.Continuous=new r("CONTINUOUS"),r.DateRange=new r("DATE_RANGE"),r.FixedNumDays=new r("FIXED_NUM_DAYS"),t.a=r},Kpdw:function(e,t,s){"use strict";s.r(t),s.d(t,"moduleName",(function(){return S})),s.d(t,"serviceName",(function(){return y})),s.d(t,"CREATE_COLUMN_ID",(function(){return C})),s.d(t,"AttemptAggregationModel",(function(){return w})),s.d(t,"parseForumId",(function(){return T}));s("QLzv");var n=s("nsO7"),i=s("IbyE"),r=s("zGdY"),o=s("nbDY"),a=s.n(o),l=s("vYaK"),c=s("KrjC"),d=s("3uIF"),u=s("yCC5"),h=s("Rjd/"),m=s("wgY5"),p=s("XfOu"),g=s("eUpQ"),b=s("6vR2"),f=s("3PCF"),v=s("ZQFV");const S="ultra.components.services.models.grade.gradeColumn",y=u.fb,C="create",I=Symbol("forceFetchSummary"),$=[r.HttpStatus.Unauthorized,r.HttpStatus.Forbidden,r.HttpStatus.TooManyRequests];class w extends a.a{static parseModel(e){return super.parse(e)}static getDefault(){return w.Average}getLabelKey(){return"components.services.grade.aggregation-model."+this.toString().toLowerCase()}getStudentLabelKey(){return"course.content.assessment.overview.gradeBasedOn."+this.toString().toLowerCase()}}function T(e){const t=e.split("/");return t[t.length-1]}w.Average=new w("AVERAGE"),w.First=new w("FIRST"),w.Highest=new w("HIGHEST"),w.Last=new w("LAST"),w.Lowest=new w("LOWEST"),h.a.factory(y,["$http","$ngRedux","restmod","$rootScope","$q",l.serviceName,d.a,c.serviceName,(e,t,s,o,a,l,c,d)=>s.model().mix({grades:{hasMany:u.gb},summary:{hasOne:u.r,hooks:{"before-request":function(e){!this.$owner[I]&&this.$owner.isCalculated()&&(e.cache={get:()=>({})})}}},groupAssociations:{hasMany:u.L},anonymousGradingReleaseDate:{serialize:"date"},dueDate:{serialize:"date"},dateCreated:{serialize:"date"},dateModified:{serialize:"date"},peerReviewDueDate:{serialize:"date"},ui:{mask:!0,init:()=>({})},$hooks:{"before-request":function(e){if(this.$url()===e.url&&"DELETE"!==e.method){const t="gradebookCategory";e.params&&e.params.expand?n.includes(e.params.expand,t)||(e.params.expand+=`,${t}`):e.params={expand:t,...e.params}}},"before-save":e=>{e.params||(e.params={}),e.params.expand=["externalGrade","gradebookCategory","columnSummary"]},"after-request":function(e){if(e.data.externalGrade&&"PATCH"===e.config.method){const s=e.data.id,n=i.select.gradebookGrade.getGradebookGradesByColumnId(t.getState(),s);t.dispatch(i.actions.gradebookGrade.setInvalidatedGradesInStore(n))}if(e.data&&e.data.rubricAssociations&&e.data.rubricAssociations.forEach(e=>{p.sortRubricData(e.rubricDefinition)}),e.config&&e.config.params&&e.config.params.expand&&-1!==e.config.params.expand.indexOf("associatedRubrics")){const s=Object(b.a)(e.data);t.dispatch(i.actions.gradebookColumn.setGradebookColumnInStore(s))}},"after-feed":function(){Object.defineProperty(this,"columnName",{get(){return this.effectiveColumnName},set(e){return this.effectiveColumnName=e,this.effectiveColumnName}})},"after-create":function(e){const s=Object(b.a)(e.data);t.dispatch(i.actions.gradebookColumn.addGradebookColumnToStore(s))}},$extend:{Record:{isTest(){return i.ScoreProviderHandle.Test.isEqualTo(this.scoreProviderHandle)},isAssignment(){return i.ScoreProviderHandle.UltraAssignment.isEqualTo(this.scoreProviderHandle)},isCalculated(){return r.CalculationType.NonCalculated!==this.calculationType},isOffline(){return this.userCreatedColumn},seemsAttemptBased(){return!this.isCalculated()&&!this.isOffline()&&!this.isAttendance()},isDiscussion(){return i.ScoreProviderHandle.Discussion.isEqualTo(this.scoreProviderHandle)},isJournal(){return i.ScoreProviderHandle.Journal.isEqualTo(this.scoreProviderHandle)},isScorm(){return i.ScoreProviderHandle.Scorm.isEqualTo(this.scoreProviderHandle)},isScormSCO(){if(this.isScorm()){const e=this.ui&&this.ui.content||null,t=e&&!e.isConditionalReleaseLocked()&&e.getScormGradebookItems()||[],s=t&&t.find(e=>e.columnId===this.id);return!(!s||s.root)}return!1},isAttendance(){return i.ScoreProviderHandle.Attendance.isEqualTo(this.scoreProviderHandle)},isVisible(){return this.visible},isHidden(){return!this.visible},isVisibleToStudents(){return this.isVisible()},isHiddenFromStudents(){return this.isHidden()},isGroupContent(){return this.groupContent},isMultipleAttempts(){return this.multipleAttempts>1||this.isUnlimitedAttempts()},isSingleAttempt(){return 1===this.multipleAttempts},isUnlimitedAttempts(){return 0===this.multipleAttempts},isCollectExternalSubmissions(){return!!this.collectExternalSubmissions},lateAttemptCreationDisallowed(){return!!this.isLateAttemptCreationDisallowed},getNumMissing(){let e=NaN;return e=this.isOffline()?this.summary.numNeedsGrading:this.summary.numEligibleToBeGraded-this.summary.numStudentSubmissions()},getNumMissingIfLate(){return this.isCalculated()||!this.isLate()?NaN:this.getNumMissing()},getVisibilityAsStudent(){return this.isVisibleToStudents()?r.ContentVisibility.Visible:r.ContentVisibility.Hidden},setVisibility(e){switch(e){case r.ContentVisibility.Visible:this.visible=!0;break;case r.ContentVisibility.Hidden:this.visible=!1}},canEdit(){return this.permissions&&this.permissions.edit},postReadyGrades(){return this.$send({method:"POST",url:this.$url()+"/postReadyGrades",data:{}},(function(e){this.ui.numOfGradesPosted=e.data.count})).$asPromise().then(e=>e.ui.numOfGradesPosted)},postReadyGroupAttempts(e){return this.$send({method:"POST",url:this.$url()+"/groupAssociations/"+e.groupAssociationId+"/postReadyGroupGrades",data:{}},e=>{this.ui.numOfAttemptsPosted=e.data.count}).$asPromise().then(e=>e.ui.numOfAttemptsPosted)},getGroupGrade(t,s){const n=s?{expand:"instructorFeedback,groupMembersGrades"}:null;return e.get(this.$url()+"/groupAssociations/"+t+"/grades",n&&{params:n}).then(e=>{const t=d.$buildRaw(e.data);return delete t.id,t.groupMembersGrades&&(t.groupMembersGrades=t.groupMembersGrades.map(e=>this.grades.$buildRaw(e))),t})},getGroupAttemptByGroupAssociationId(e,t=!1,s){const n={expand:t?"attempts,toolAttemptDetail,viewUrl":"attempts,toolAttemptDetail",excludeUnavailableMembers:!0};return this.groupAssociations.$new(e).groupAttempts.$fetch(n).$asPromise().then(e=>{var t;let n;return e&&s&&(n=e.find(e=>e.id===s)),null!==(t=null!=n?n:e.find(e=>e.isInProgress()))&&void 0!==t?t:e[0]})},getGradeIdToAttempt(e,t){let s;const n={};return this.withParams(e).$send({method:"GET",url:this.$url()+(t?"/groupAttempts":"/attempts")},(function(e){Object.keys(e.data.lookup).forEach(s=>{if(t)e.data.lookup[s]=this.grades.$new(s).groupAttempts.$decode(e.data.lookup[s]);else{this.grades.$new(s).attempts.$decode(e.data.lookup[s]).some(e=>!e.deletedAttempt)&&(n[s]=this.grades.$new(s).attempts.$decode(e.data.lookup[s]))}}),e.data.lookup=n,s=e.data})).$asPromise().then(()=>s)},loadReviewableAttempts(e){return e.reviewableAttemptsOnly=!0,this.getGradeIdToAttempt(e,!1)},getContentGroupIdToGroupAttempt(e){let t;return(e?this.withParams(e):this).$send({method:"GET",url:this.$url()+"/groupAttempts"},(function(e){Object.keys(e.data.lookup).forEach(t=>{const s=e.data.lookup[t][0];s.submissionResults&&s.submissionResults.results[f.b]&&(s.originalityProcessed=s.submissionResults.results[f.b].originalityProcessed,s.originalityScore=s.submissionResults.results[f.b].originalityScore),e.data.lookup[t]=l.$new(this.courseId).gradebook.groupAttempts.$decode(e.data.lookup[t]),e.data.lookup[t].forEach(e=>{var t;e.attempts=l.$new(this.courseId).gradebook.attempts.$decode(null!==(t=e.attempts)&&void 0!==t?t:[])})}),t=e.data})).$asPromise().then(()=>t)},hasEvaluations(){return this.getGradeIdToAttempt({}).then(e=>{let t=!1;return e&&e.lookup&&n.each(Object.keys(e.lookup),s=>(n.each(e.lookup[s],e=>(e&&e.rubricEvaluation&&(t=!0),!t)),!t)),t})},launchAttempt(e,t,s,n){return s&&(e.groupId=n),this.$send({method:"POST",url:this.$url()+(s?"/groupAttempts":"/attempts"),data:e.$wrap&&e.$wrap()||e,params:t},(function(e){this.createdAttempt=s?l.$new(this.courseId).gradebook.groupAttempts.$buildRaw(e.data):l.$new(this.courseId).gradebook.attempts.$buildRaw(e.data)})).$allow($).$asPromise().then(e=>{var t;return $.indexOf(null===(t=null==e?void 0:e.$response)||void 0===t?void 0:t.status)>-1||null==e||!e.createdAttempt?e:e.createdAttempt})},countAttempts(){const e=a.defer();return this.$send({method:"GET",url:this.$url()+"/attempts/count"},t=>{let s=null;return t.data&&(s=t.data.count),e.resolve(s)},t=>e.reject(t)).$allow([403]),e.promise},timeUntilDueDate(e){if(this.dueDate){const t=m(this.dueDate),s=m(g.a.getServerTime());return t.diff(s,e)}return null},daysUntilDueDate(){return this.timeUntilDueDate("days")},isLate(){return!!this.dueDate&&this.dueDate<=g.a.getServerTime()},isUserReconciler(e){return!!(this.delegatedGrading&&this.delegatedGraders&&this.delegatedGraders.some(t=>t.userId===e&&t.canReconcile&&!t.isUnassigned))},forceDelete(){if(!this.contentId){let e;return(e=i.ScoreProviderHandle.PartnerCloud.isEqualTo(this.scoreProviderHandle)&&this.linkId?c.delete(this.courseId,this.linkId):this.withParams({onlyIfEmpty:!1}).$destroy().$asPromise()).then(()=>(o.$broadcast("bb-delete-column",this),t.dispatch(i.actions.gradebookColumn.removeGradebookColumnFromStore(this.id)),this))}throw new Error("Content based column must be deleted by deleting associated content")},hasRubricAssociation(){return null!=this.rubricAssociations&&this.rubricAssociations.length>0},getRubricAssociation(){return this.hasRubricAssociation()?this.rubricAssociations[0]:null},getAssociatedRubricId(){return this.hasRubricAssociation()?this.rubricAssociations[0].rubricId:null},getAssociatedRubric(){return this.hasRubricAssociation()?this.rubricAssociations[0].rubricDefinition:null},setRubricAssociation(e){this.rubricAssociations=e?[{rubricId:e}]:[]},setMaxPossiblePoints(e){Number.isFinite(e)?this.possible=e:this.possible=v.Utils.GRADE_DEFAULT_POINTS},forceResolveSummary(){return this[I]=!0,this.summary.$resolve().$then(()=>{delete this[I]})},forceFetchSummary(e={}){return this[I]=!0,this.summary.$fetch(e).$then(()=>{delete this[I]})},alwaysOverride(){let e=!1;return[i.ScoreProviderHandle.Test,i.ScoreProviderHandle.UltraAssignment,i.ScoreProviderHandle.Discussion,i.ScoreProviderHandle.Scorm,i.ScoreProviderHandle.PeerSubmissionsTest].forEach(t=>{t.isEqualTo(this.scoreProviderHandle)&&(e=!0)}),e},isQuestionAnalysisAvailable(){return this.isAssignment()||this.isTest()},isAnonymousGrading(){return this.anonymousGrading},canSeeFinalGrade(e){return this.delegatedGrading?!this.anonymousGrading&&this.isUserReconciler(e.id):!this.anonymousGrading}},Collection:{attachRelatedContentsByScoreProviderHandle(e){if(!this.length)return a.when(this);const t=l.$new(this[0].courseId),s=this.filter(t=>e.isEqualTo(t.scoreProviderHandle)&&!t.restricted),n=new Set(s.map(e=>e.contentId)),i=Array.from(n.values()).map(e=>t.contents.$find(e).$suppressErrorDialog().$asPromise());return a.all(i).then(e=>(s.forEach(t=>{t.ui.content=e.find(e=>e.id===t.contentId)}),this))},indexOfItemById(e){return this.$indexOf(t=>t.id===e)}}}})])},KrjC:function(e,t,s){"use strict";s.r(t),s.d(t,"moduleName",(function(){return h})),s.d(t,"serviceName",(function(){return m}));s("QLzv");var n=s("nsO7"),i=s("Llzl"),r=s("wgY5"),o=s("yCC5"),a=s("Rjd/"),l=s("eUpQ"),c=s("nkTj"),d=s("IbyE"),u=s("zGdY");const h="ultra.components.services.models.gradeDetail",m=o.gb;a.a.factory(m,["restmod",c.d,"$ngRedux",(e,t,s)=>e.model().mix({$hooks:{"after-request":function(){this.$response.data.results?s.dispatch(d.actions.gradebookGrade.setInvalidatedGradesInStore(this.$response.data.results)):"PATCH"===this.$response.config.method&&s.dispatch(d.actions.gradebookGrade.setGradesInStore([this.$response.data]))}},attempts:{hasMany:o.cb,hooks:{"after-fetch-many":function(){this.forEach(e=>{e.permissions=this.permissions})}}},column:{ignore:"CU"},groupAttempts:{hasMany:o.hb},user:{belongsTo:o.zc},ui:{mask:!0,init:()=>({currentAttemptIndex:0,isCommentBoxShown:!1,areAllAttemptsDeleted:!1})},lastOverrideDate:{serialize:"date"},$extend:{Record:{isMissing(e){return!(this.isGraded()||!(e||i.isUndefined(e)&&!this.isSubmitted())||!this.column||!this.column.dueDate)&&r(this.column.dueDate).isBefore(l.a.getServerTime())},isGraded(){return null!=this.displayGrade&&(null!=this.displayGrade.score||null!=this.displayGrade.grade&&""!==this.displayGrade.grade)},isOverrideGrade(){return u.ManualGradeStatus.NoOverride!==this.manualStatus&&(null!=this.manualGrade||null!=this.manualScore)},isReadyToPost(){return u.ManualGradeStatus.NoOverride===this.manualStatus&&this.isGraded()&&!this.hasGradeBeenPosted||u.ManualGradeStatus.ReadyToPost===this.manualStatus},isPosted(){return!this.isCalculatedColumnGrade&&(u.ManualGradeStatus.NoOverride===this.manualStatus&&(this.hasGradeBeenPosted||!Object.prototype.hasOwnProperty.call(this,"hasGradeBeenPosted")&&this.isGraded())||u.ManualGradeStatus.IsPosted===this.manualStatus)},isSubmitted(){return!(!this.column||!this.column.seemsAttemptBased())&&u.GradeStatus.NeedsGrading===this.status},isUpcoming(){if(!this.isGraded()&&!this.isSubmitted()&&this.column){if(this.column.dueDate)return r(this.column.dueDate).isAfter(l.a.getServerTime());if(this.column.seemsAttemptBased())return!0}return!1},isInProgress(){return u.ManualGradeStatus.GradingInProgress===this.manualStatus},hasInstructorComments(){var e,t;if(!this.isGraded())return!1;let s,n;return this.column.seemsAttemptBased()&&(s=this.ui&&this.ui.attempt,n=this.attempts),!(null===(e=null==s?void 0:s.feedbackToUser)||void 0===e||!e.displayText)||(!!((null==n?void 0:n.length)&&this.hasSomeFeedbackToUser(n))||!(null===(t=this.instructorFeedback)||void 0===t||!t.displayText))},hasSomeFeedbackToUser:e=>e.some(e=>{var t;return!!(null===(t=e.feedbackToUser)||void 0===t?void 0:t.displayText)}),saveComment(e,t,s,i){let r=t?{userId:t}:{};return s&&(r=n.merge(r,s)),n.isString(e)?this.instructorFeedback?this.instructorFeedback.rawText=e:this.instructorFeedback={rawText:e}:this.instructorFeedback=e,i?this.$send({method:"PATCH",url:this.$url(),data:{instructorFeedback:this.instructorFeedback},params:r},(function(e){this.instructorFeedback=e.data.instructorFeedback})):this.withParams(r).$save(["instructorFeedback"])},hasAttempts(){return!!this.firstAttemptId},postReadyGrades(e){return this.$send({method:"POST",url:this.$url()+"/postReadyGrades",data:{}},(function(e){this.ui.numOfGradesPosted=e.data.count})).$asPromise().then(e=>e.ui.numOfGradesPosted)},getScore(){return this.displayGrade&&null!=this.displayGrade.score?this.displayGrade.score.toString():""},isPastDueZero(){return null!=this.displayGrade&&!0===this.displayGrade.scoredByAutomaticZero}},Collection:{},Model:{unpack(e,t){return t=this.$super(e,t),e.$isCollection?t.forEach(t=>{s(t,e.permissions)}):s(t,e.permissions),t;function s(e,t){e.permissions=t}}}}})])},"LsF/":function(e,t){e.exports='<div bb-load-bundle="components/directives/save-tray" role="status">\n  <div class="notification-container" ng-switch on="saveTray.status">\n    <span class="progress-indicator"><div class="canvas" ng-class="{\'success-state\' : saveTray.status === \'success\', \'error-state\' : saveTray.status === \'error\'}"></div></span>\n    <span class="progress-status" ng-switch-default bb-translate>{{::saveTray.localizationKeysPrefix}}.saving</span>\n    <span class="progress-status" ng-switch-when="success" bb-translate>{{::saveTray.localizationKeysPrefix}}.success</span>\n    <span class="progress-status" ng-switch-when="error" bb-translate>{{::saveTray.localizationKeysPrefix}}.error</span>\n  </div>\n</div>\n'},MFWY:function(e,t,s){},MISG:function(e,t,s){},MOka:function(e,t,s){"use strict";s.d(t,"a",(function(){return m})),s.d(t,"b",(function(){return p}));var n=s("D57K"),i=s("pjml"),r=s("emI2"),o=s("fYJU"),a=s("zPsu"),l=s("zGdY"),c=s("aHpC"),d=s("yC9S"),u=s("go4a"),h=s("IbyE");const m="ultra.service.stream.settings",p="streamSettings",g={Calendar:"CAL",NewContentAdded:"CON",NewAssessmentsAdded:"CON",CourseAvailable:"CRS",BlogEntryPosted:"DIS",BlogEntryEdited:"DIS",BlogEntryComment:"DIS",DiscussionReply:"DIS",NewDiscussionForum:"DIS",NewMessages:"MES",NewGradeableItems:"SUB",StudentActivityAvailable:"GRB",StudentGradeDataAvailable:"GRB",StudentsFallingBehind:"GRB",StudentsFallingBehindAbsent:"GRB",StudentsFallingBehindFailing:"GRB",StudentsFallingBehindAbsentFailing:"GRB",NoRecentActivity:"TEL",LowActivity:"TEL",HighActivity:"TEL",GradeAtRisk:"TEL",LowGrade:"TEL",GradeLowered:"TEL",PerformanceIncreased:"TEL",HighGrade:"TEL"};let b=class{constructor(e,t,s,n,i,r){this.$rootScope=e,this.$q=t,this.preferenceService=s,this.UserModel=n,this.currentUserService=i,this.store=r,this.userSettings=null,d.b.OnRootScope(this.$rootScope,"membership-hidden-status-update",(e,t)=>{this._updateMembership(t),this.$rootScope.$broadcast("stream-settings-updated")}),this.subscribeToRedux()}initializeSettings(){return this.$q.all([this._getUserMemberships(),this.loadAdminNotificationSettings()]).then(()=>this._loadUserSettings())}subscribeToRedux(){const e=this.store.connect(e=>{const t=h.select.notificationMethodSetting.getAdminNotificationMethodSettings(e),s=h.select.systemPreference.getSystemPreferenceByKey(e,a.SYSTEM_REGISTRY_KEY),n=this._transformRegistrySettings(s);return{adminNotificationSettings:t.concat(n)}},e=>({loadAdminNotificationSettings:()=>this.$q.all([e(h.actions.notificationMethodSetting.loadAdminNotificationMethodSettings()),e(h.actions.systemPreference.loadSystemPreference({key:a.SYSTEM_REGISTRY_KEY,shouldLoadWhilePending:!0}))])}))(this);this.$rootScope.$on("$destroy",e)}_transformRegistrySettings(e){let t=a.defaultRegistrySettings;e&&e.value&&(t=JSON.parse(e.value));const s=[];return t.settings.forEach(e=>{s.push({context:l.NotificationSettingContext.Course,source:a.NON_NAUTILUS_SOURCE,event:e.id,method:"DA",isEditable:e.isEditable,isEnabled:e.isEnabled})}),s}_getUserMemberships(){return this.userMemberships?this.$q.resolve(Object.values(this.userMemberships)):this.currentUserService.getMemberships().then(e=>(this.userMemberships=e.reduce((e,t)=>({...e,[t.id]:t}),{}),Object.values(this.userMemberships)))}reloadStreamMemberships(){return this.userMemberships=null,this._getUserMemberships()}save(e){if(!e)return this.$q.resolve();Object.keys(e).forEach(t=>{e[t].definition||(e[t].definition=a.allSettings.find(e=>e.id===t))});const t={version:3,settings:Object.keys(e).map(t=>({id:e[t].definition.id,isEnabled:e[t].isEnabled}))};return this.preferenceService.setPreference("ultraui.stream.settings.v2",angular.toJson(t)).then(()=>this._loadUserSettings())}_loadLegacyUserSettings(){return this.preferenceService.getPreference("ultraui.stream.settings",null).then(e=>{if(!e||!e.value)return!1;const t=angular.fromJson(e.value);return this.userSettings=a.allSettings.reduce((e,s)=>{const n=g[s.id];return{...e,[s.id]:{definition:s,isEnabled:!!n&&"N"!==t[n]}}},{}),!0})}_loadUserSettings(){return this.preferenceService.getPreference("ultraui.stream.settings.v2",null).then(e=>{if(!e||!e.value)return this._loadLegacyUserSettings().then(e=>{if(!e)return this._loadDefaultSettings()});const t=angular.fromJson(e.value);this.userSettings={},t.settings.forEach(e=>{const t=a.allSettings.find(t=>t.id===e.id);t&&(this.userSettings[e.id]={isEnabled:e.isEnabled,definition:t})})})}_loadDefaultSettings(){return this.loadAdminNotificationSettings().then(()=>{this.userSettings=a.allSettings.reduce((e,t)=>{const s=t.defaultSetting(this.adminNotificationSettings);return e[t.id]={isEnabled:s,definition:t},e},{})})}getUserSettings(){return this._hasUserSettings()?this.$q.resolve(this.userSettings):this._loadUserSettings().then(()=>this.userSettings)}_hasUserSettings(){return null!==this.userSettings}_updateMembership(e){this.userMemberships={...this.userMemberships,[e.id]:{...this.userMemberships[e.id],...e}}}hidden(e){if(!e)return!1;const t=!!this.userMemberships?Object.values(this.userMemberships).find(t=>t.course.$pk===e.courseId):null;if(t&&t.userHasHidden)return!0;if(t&&(e.courseColorClass=Object(u.a)(t)),!this.userSettings||!this.adminNotificationSettings)return!1;let s=!1;for(const t of Object.keys(this.userSettings)){const n=this.userSettings[t];if(n.definition.canHandle(e)&&(s=!0,n.definition.isStreamEntryVisible(n.isEnabled,this.adminNotificationSettings)))return!1}return s}};b=Object(n.__decorate)([Object(n.__param)(0,Object(c.b)("$rootScope")),Object(n.__param)(1,Object(c.b)("$q")),Object(n.__param)(2,Object(c.b)(r.c)),Object(n.__param)(3,Object(c.b)(i.Jb.serviceName)),Object(n.__param)(4,Object(c.b)(o.b)),Object(n.__param)(5,Object(c.b)("$ngRedux"))],b);class f extends b{}angular.module(m,[r.b]).service(p,b)},MROq:function(e,t,s){var n={"./af":"8GSH","./af.js":"8GSH","./ar":"NcOb","./ar-dz":"1ors","./ar-dz.js":"1ors","./ar-kw":"Sc1Y","./ar-kw.js":"Sc1Y","./ar-ly":"GzvP","./ar-ly.js":"GzvP","./ar-ma":"hH25","./ar-ma.js":"hH25","./ar-sa":"u2jB","./ar-sa.js":"u2jB","./ar-tn":"5Mza","./ar-tn.js":"5Mza","./ar.js":"NcOb","./az":"ZVVJ","./az.js":"ZVVJ","./be":"kQaN","./be.js":"kQaN","./bg":"+n5x","./bg.js":"+n5x","./bm":"TTiN","./bm.js":"TTiN","./bn":"aIF2","./bn.js":"aIF2","./bo":"QWb5","./bo.js":"QWb5","./br":"iQoZ","./br.js":"iQoZ","./bs":"EL7g","./bs.js":"EL7g","./ca":"vd/2","./ca.js":"vd/2","./cs":"K+3W","./cs.js":"K+3W","./cv":"Jt3X","./cv.js":"Jt3X","./cy":"sWi3","./cy.js":"sWi3","./da":"YcFX","./da.js":"YcFX","./de":"BKZ+","./de-at":"Oq9h","./de-at.js":"Oq9h","./de-ch":"hHY4","./de-ch.js":"hHY4","./de.js":"BKZ+","./dv":"w8Ej","./dv.js":"w8Ej","./el":"tSbB","./el.js":"tSbB","./en-au":"HgyJ","./en-au.js":"HgyJ","./en-ca":"ZyTy","./en-ca.js":"ZyTy","./en-gb":"exaB","./en-gb.js":"exaB","./en-ie":"yKzn","./en-ie.js":"yKzn","./en-il":"TB59","./en-il.js":"TB59","./en-in":"S70V","./en-in.js":"S70V","./en-nz":"iDxo","./en-nz.js":"iDxo","./en-sg":"zS0P","./en-sg.js":"zS0P","./eo":"4bvN","./eo.js":"4bvN","./es":"GNPT","./es-do":"R7mU","./es-do.js":"R7mU","./es-us":"Nstw","./es-us.js":"Nstw","./es.js":"GNPT","./et":"ZOjb","./et.js":"ZOjb","./eu":"kFC9","./eu.js":"kFC9","./fa":"8Cju","./fa.js":"8Cju","./fi":"vcN1","./fi.js":"vcN1","./fil":"3g1g","./fil.js":"3g1g","./fo":"8Ygf","./fo.js":"8Ygf","./fr":"Y8Ij","./fr-ca":"t+Zl","./fr-ca.js":"t+Zl","./fr-ch":"SPXN","./fr-ch.js":"SPXN","./fr.js":"Y8Ij","./fy":"T3MF","./fy.js":"T3MF","./ga":"NowM","./ga.js":"NowM","./gd":"GJYX","./gd.js":"GJYX","./gl":"MdC8","./gl.js":"MdC8","./gom-deva":"QJjq","./gom-deva.js":"QJjq","./gom-latn":"5j0y","./gom-latn.js":"5j0y","./gu":"fY0S","./gu.js":"fY0S","./he":"ACAV","./he.js":"ACAV","./hi":"3WqV","./hi.js":"3WqV","./hr":"OnNk","./hr.js":"OnNk","./hu":"EQmw","./hu.js":"EQmw","./hy-am":"MNf7","./hy-am.js":"MNf7","./id":"0yow","./id.js":"0yow","./is":"TmOJ","./is.js":"TmOJ","./it":"xD/0","./it-ch":"foQf","./it-ch.js":"foQf","./it.js":"xD/0","./ja":"jOnb","./ja.js":"jOnb","./jv":"lOtj","./jv.js":"lOtj","./ka":"BAN/","./ka.js":"BAN/","./kk":"iNiw","./kk.js":"iNiw","./km":"TUxt","./km.js":"TUxt","./kn":"hQzt","./kn.js":"hQzt","./ko":"ZNZT","./ko.js":"ZNZT","./ku":"S0Tg","./ku.js":"S0Tg","./ky":"JO+T","./ky.js":"JO+T","./lb":"vn/h","./lb.js":"vn/h","./lo":"gnIm","./lo.js":"gnIm","./lt":"6PD3","./lt.js":"6PD3","./lv":"YKe2","./lv.js":"YKe2","./me":"d3TR","./me.js":"d3TR","./mi":"hTlv","./mi.js":"hTlv","./mk":"ffVN","./mk.js":"ffVN","./ml":"ejL1","./ml.js":"ejL1","./mn":"RIsM","./mn.js":"RIsM","./mr":"CPJk","./mr.js":"CPJk","./ms":"d5Hy","./ms-my":"t4T9","./ms-my.js":"t4T9","./ms.js":"d5Hy","./mt":"1KVU","./mt.js":"1KVU","./my":"LsNb","./my.js":"LsNb","./nb":"h+U8","./nb.js":"h+U8","./ne":"2JSI","./ne.js":"2JSI","./nl":"jsZ8","./nl-be":"+h6j","./nl-be.js":"+h6j","./nl.js":"jsZ8","./nn":"mh29","./nn.js":"mh29","./oc-lnc":"zX+o","./oc-lnc.js":"zX+o","./pa-in":"O6bP","./pa-in.js":"O6bP","./pl":"8Bez","./pl.js":"8Bez","./pt":"DDip","./pt-br":"uHm5","./pt-br.js":"uHm5","./pt.js":"DDip","./ro":"baBi","./ro.js":"baBi","./ru":"ecsu","./ru.js":"ecsu","./sd":"e9KM","./sd.js":"e9KM","./se":"CZRU","./se.js":"CZRU","./si":"TO58","./si.js":"TO58","./sk":"K+Lk","./sk.js":"K+Lk","./sl":"QK6v","./sl.js":"QK6v","./sq":"v3Qg","./sq.js":"v3Qg","./sr":"Ndyf","./sr-cyrl":"PGvg","./sr-cyrl.js":"PGvg","./sr.js":"Ndyf","./ss":"2B8G","./ss.js":"2B8G","./sv":"WF5B","./sv.js":"WF5B","./sw":"4VvY","./sw.js":"4VvY","./ta":"dw3T","./ta.js":"dw3T","./te":"4MAb","./te.js":"4MAb","./tet":"/hi0","./tet.js":"/hi0","./tg":"PoVJ","./tg.js":"PoVJ","./th":"OY2w","./th.js":"OY2w","./tl-ph":"UC+K","./tl-ph.js":"UC+K","./tlh":"cWLW","./tlh.js":"cWLW","./tr":"EqYs","./tr.js":"EqYs","./tzl":"fN8o","./tzl.js":"fN8o","./tzm":"6cYq","./tzm-latn":"pdAN","./tzm-latn.js":"pdAN","./tzm.js":"6cYq","./ug-cn":"J+SV","./ug-cn.js":"J+SV","./uk":"6Olw","./uk.js":"6Olw","./ur":"QNGR","./ur.js":"QNGR","./uz":"hLzJ","./uz-latn":"KqOT","./uz-latn.js":"KqOT","./uz.js":"hLzJ","./vi":"EnIJ","./vi.js":"EnIJ","./x-pseudo":"W7dU","./x-pseudo.js":"W7dU","./yo":"QDhB","./yo.js":"QDhB","./zh-cn":"bjMe","./zh-cn.js":"bjMe","./zh-hk":"JFCg","./zh-hk.js":"JFCg","./zh-mo":"5BRa","./zh-mo.js":"5BRa","./zh-tw":"xBDH","./zh-tw.js":"xBDH"};function i(e){var t=r(e);return s(t)}function r(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id="MROq"},Mc6f:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return l}));var n=s("nsO7"),i=s("Llzl"),r=s("yC9S"),o=s("pjml");const a="ultra.components.services.grade.gradeNotation.Service",l="gradeNotationService";class c{constructor(e,t,s){this.$q=e,this.$rootScope=t,this.CourseModel=s,this.courseGradeNotationMap={},r.b.OnRootScope(t,"grade-notation-update",(e,t)=>{this.CourseModel.$new(t).gradebook.performancecodes.$fetch().$then(e=>{this.courseGradeNotationMap[t]=e,this.$rootScope.$broadcast("grade-notation-cache-update",t)})})}getGradeNotationsMap(e,t){if(t&&this.courseGradeNotationMap[e])return this.$q.when(this.courseGradeNotationMap[e]);const s=this.$q.defer();return this.CourseModel.$new(e).gradebook.performancecodes.$fetch().$then(t=>{this.courseGradeNotationMap[e]=t,s.resolve(t)}),s.promise}isValidPerformanceCodeGrade(e,t){return!(!t||n.isEmpty(e))&&!!n.find(e,e=>e.code===t)}}c.$inject=["$q","$rootScope",o.m.serviceName];class d extends c{}i.module(a,[]).service(l,c)},N7x3:function(e,t,s){"use strict";(function(e){var n=s("Llzl"),i=s("5MwF"),r=s("td+C"),o=s("YzQO"),a=s("oPIA"),l=s("myse");t.a=new class{constructor(e){this.integrationService=e,this.integrationForceClick="integration-force-click",this.onClick=e=>{if(e.originalEvent&&e.originalEvent.manualFireFlag)return;const t=n.element(e.target),s=Object(o.b)(t)||Object(o.d)(t.parent());this._sendEventMessage(s,a.fb.Click)},this.onHover=e=>{const t=n.element(e.target),s=Object(o.c)(t);s!==this.lastHoverElementId&&(this.lastHoverElementId=s,this._sendEventMessage(s,a.fb.Hover))},Object(l.subscribeToFramework)("Ultra",(e,t)=>{e===l.AnalyticsEventTypes.CLICK_EVENT?this._sendEventMessage(t.analyticsId,a.fb.Click):e===l.AnalyticsEventTypes.HOVER_EVENT&&this._sendEventMessage(t.analyticsId,a.fb.Hover)})}addClickListener(){i.a.unitTesting||(e(document).on("click",this.onClick),e(document).on(this.integrationForceClick,this.onClick))}addHoverListener(){i.a.unitTesting||e(document).on("mouseover",this.onHover)}_sendEventMessage(e,t){e&&this.integrationService.sendEventMessage({type:a.i,eventType:t,analyticsId:e})}}(r.a)}).call(this,s("5iHu"))},"NI+y":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n="ANALYTICS_HISTORY";t.b=new class{constructor(){this.analytics=[],this.maxHistorySize=30,this.storageKey=n}setStorage(e,t){return this.browserStorage=e,this.storageType=t,this.getHistoryFromStorage().then(e=>(e&&(this.analytics=e.concat(this.analytics),this.setMaxHistorySize(this.maxHistorySize)),e))}addHistory(e){this.analytics.push({action:e.action,analyticsId:e.analyticsId,screenDimension:e.screenDimension,timestamp:(new Date).toUTCString()}),this.analytics.length>this.maxHistorySize&&this.analytics.shift(),this.browserStorage.saveToStorage(this.storageKey,this.analytics,this.storageType)}getHistoryFromStorage(){return this.historyRestoredPromise=Promise.resolve(this.browserStorage.getFromStorage(this.storageKey,this.storageType)),this.historyRestoredPromise}async getHistory(){return await this.historyRestoredPromise,this.analytics}clearHistory(){this.historyRestoredPromise=null,this.analytics=[],this.browserStorage.saveToStorage(this.storageKey,this.analytics,this.storageType)}setMaxHistorySize(e){e>0&&Number.isInteger(e)&&(this.maxHistorySize=e,this.analytics=this.analytics.slice(-this.maxHistorySize))}}},NXdT:function(e,t,s){"use strict";(function(e){s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return a}));s("LNcM"),s("nh++");var n=s("nsO7"),i=s("zFCC");const r="bbIntersectionObservableDirective";function o(e,t=null){return function(s,i,r,o,a){const l=o[o.length-1],c=Object(n.once)(()=>{e.call(this,s,i,r,o,a)});let d=c;t&&t>0?d=Object(n.debounce)(()=>{c(),s.$evalAsync(n.noop)},t):d.cancel=n.noop,l?l.link(i[0],s,(e,t,s)=>{s.isIntersecting?d():d.cancel()}):c()}}function a(e=null){return function(t){return class extends t{constructor(...t){super(...t),this.require=[].concat(this.require||[]).concat([`^^?${i.a}`]),this.link=o(this.link||n.noop,e)}}}}angular.module(r,[]).directive("bbIntersectionObservable",["$compile",function(t){return{transclude:"element",priority:6e3,terminal:!0,require:`^^?${i.a}`,restrict:"A",link(s,i,r,o,a){if(!o)return a((function(e,t){i.replaceWith(e)}));const l={placeholder:"div",debounce:0,...s.$eval(r.bbIntersectionObservable||"{}")},c=e(`<${l.placeholder} class="intersection-observable-placeholder"></${l.placeholder}>`);t(c)(s),i.replaceWith(c);const d=Object(n.debounce)(Object(n.once)(()=>{a((function(e,t){o.unlink(c[0]),c.replaceWith(e)}))}),l.debounce);o.link(c[0],s,(e,t,s)=>{s.isIntersecting?d():d.cancel()})}}}])}).call(this,s("5iHu"))},Nrpd:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("Llzl"),i=s("0JpG"),r=s("pjml"),o=s("TnpK"),a=s("MOka"),l=s("Sa5G");const c="ultra.base.notification-settings.routes";n.module(c,[i.moduleName,o.b]).config([o.c,e=>{e.peekState("notification-settings",{abstract:!0,require:()=>s.e(614).then(s.bind(null,"gE0d")),resolve:{mobileDistributorSettings:[r.Q.serviceName,e=>e.$build().courseSettings.$new(l.q.Mobile).$fetch().$allow([400])],isMobileDistributorActive:["$q","mobileDistributorSettings","memberships",(e,t)=>t.$then(e=>!!e.settings).$asPromise()],notificationGeneralSettings:[r.P.serviceName,e=>e.$build().$fetch().$asPromise()],memberships:[a.b,e=>e.reloadStreamMemberships()]}}).peekState("notification-settings.content",{url:"/notification/settings?tab",resolve:{translations:[i.serviceName,e=>e.loadBundle("features/base/notifications-settings/base-notifications-settings")],memberships:[a.b,e=>e.reloadStreamMemberships()]},views:{"email-settings@":{require:()=>s.e(692).then(s.bind(null,"IwlP"))},"stream-settings@":{require:()=>s.e(733).then(s.bind(null,"wgch")),resolve:{translations:[i.serviceName,e=>e.loadBundle("features/base/stream/base-stream")]}},"sms-settings@":{require:()=>Promise.all([s.e(28),s.e(615)]).then(s.bind(null,"EKn0"))},"mobile-settings@":{require:()=>s.e(693).then(s.bind(null,"pVU+"))}}})}])},OMme:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return m}));var n=s("Llzl"),i=s("vdfi"),r=s("bF8R"),o=s("0JpG"),a=s("JXhc"),l=s("TnpK"),c=s("Qbdf"),d=s("X455"),u=s("nmzr"),h=s("+O05");const m="ultra.base.proctoring.routes";n.module(m,[o.moduleName,l.b,c.b,d.a,h.g]).config([l.c,c.c,d.b,(t,n,m)=>{t.baseState(u.BaseRoutes.BASE_PROCTORING_ATTEMPT,{url:"^/proctoring/attempt?courseId&contentId&password",peekStates:["conversations",u.CourseRoutes.COURSE_MESSAGE,"assessment-details","edit-file-settings","attempt-safe-assign-setting","rubric-view",i.b,a.b],onEnter:()=>{e("body").addClass("proctoring-attempt-open")},onExit:()=>{e("body").removeClass("proctoring-attempt-open")},resolve:{[c.d]:n.resolve,[d.c]:m.resolve,contentData:[c.d,r.b,l.d,(e,t,s)=>t.loadContentAndGrades({course:e,contentId:s.nextParams.contentId})],translations:[o.serviceName,e=>e.loadAllBundles(["components/services/proctoring","features/course/content/assessment/assessment"])],currentContent:["contentData",e=>e.courseContent],currentColumn:["contentData",e=>e.gradingColumn],attempt:["contentData",h.h,l.d,(e,t,s)=>{const{gradingColumn:n,courseContent:i}=e,r=s.nextParams.password,o=i.isGroupContent,a=i.assignedGroups?i.assignedGroups[0].groupId:null;return t.launchAttempt(n,r,o,a)}]},require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(12),s.e(0),s.e(1),s.e(2),s.e(4),s.e(113)]).then(s.bind(null,"RTst")),pageTitle:"components.services.proctoring.delivery.attempt.pageTitle",peekViewName:"proctored-assessment-peek"}).baseState("base.proctoring-review",{url:"^/proctoring/review?courseId&contentId&attemptId",peekStates:[],onEnter:()=>{e("body").addClass("proctoring-attempt-open")},onExit:()=>{e("body").removeClass("proctoring-attempt-open")},resolve:{translations:[o.serviceName,e=>e.loadAllBundles(["components/services/proctoring","features/course/content/assessment/assessment"])],[c.d]:n.resolve,[d.c]:m.resolve,currentContent:[c.d,l.d,(e,t)=>e.contents.$find(t.nextParams.contentId).$asPromise()],currentAttempt:[c.d,l.d,(e,t)=>e.gradebook.attempts.$find(t.nextParams.attemptId,{expand:"toolAttemptDetail,alignedGoals,viewUrl"}).$asPromise()],currentGradedQuestionAttempts:["$q","currentAttempt",(e,t)=>{const s=e.defer();return t.assessment.gradedQuestionAttempts.$fetch({expand:"questionAttempt.question,questionAttempt.answerCorrectness"}).$asPromise().then(e=>{e.setPostStatusAndGroupAttemptId(t),s.resolve(e)}),s.promise}]},require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(546)]).then(s.bind(null,"Mpwm")),pageTitle:"components.services.proctoring.delivery.review.pageTitle"})}])}).call(this,s("5iHu"))},ORAk:function(e,t){e.exports='<div>\n    <div bb-dir>\n        <div ui-view="{0}" bb-offcanvas-pausal-scope></div>\n    </div>\n</div>'},OTLg:function(e,t,s){"use strict";var n=s("Llzl"),i=s("pjml"),r=s("vYaK"),o=s("f8ya");class a{constructor(e){this.content=e,this._groups=[],this._memberships=[],this.counts={count:0,withAccommodationCount:0,dueDateAccommodationCount:0,timeLimitAccommodationCount:0,maxLimit:0},this.refreshGroups()}set groups(e){this.dueDateGroups=[],this.timeLimitGroups=[],this._groups=null!=e?e.filter(e=>(e.accommodation=o.a.fromTypes(e.dueDateExceptionType,e.timeLimitExceptionType),e.accommodation.dueDate.hasAccommodation&&this.dueDateGroups.push(e),e.accommodation.timeLimit.hasAccommodation&&this.timeLimitGroups.push(e),e.accommodation.hasAccommodation)):[]}get groups(){return this._groups}sortGroups(e){this._groups.sort(e),this.dueDateGroups.sort(e),this.timeLimitGroups.sort(e)}refreshGroups(){null!=this.content&&(this.groups=this.content.assignedGroups)}set memberships(e){this.dueDateMembers=[],this.timeLimitMembers=[],this._memberships=null!=e?e.filter(e=>{const t=e.accommodation();return t.dueDate.hasAccommodation&&this.dueDateMembers.push(e),t.timeLimit.hasAccommodation&&this.timeLimitMembers.push(e),t.hasAccommodation}):[]}get memberships(){return this._memberships}get nGroups(){return this.groups.length}get nGroupsDueDate(){return this.groups.filter(e=>e.accommodation.dueDate.hasAccommodation).length}get nGroupsTimeLimit(){return this.groups.filter(e=>e.accommodation.timeLimit.hasAccommodation).length}get nUsers(){return this.counts.withAccommodationCount}get nUsersDueDate(){return this.counts.dueDateAccommodationCount}get nUsersTimeLimit(){return this.counts.timeLimitAccommodationCount}get isGroupContent(){if(null==this.content)return!1;const e=this.content.assignedGroups&&0!==this.content.assignedGroups.length;return this.content.isGroupContent||e||0!==this.groups.length}get nInstances(){return this.isGroupContent?this.nGroups:this.nUsers}get nInstancesDueDate(){return this.isGroupContent?this.nGroupsDueDate:this.nUsersDueDate}get nInstancesTimeLimit(){return this.isGroupContent?this.nGroupsTimeLimit:this.nUsersTimeLimit}get nInstancesShown(){if(this.isGroupContent){if(this.showDueDateAccommodation&&this.showTimeLimitAccommodation)return this.nGroups;if(this.showDueDateAccommodation)return this.nGroupsDueDate;if(this.showTimeLimitAccommodation)return this.nGroupsTimeLimit}else{if(this.showDueDateAccommodation&&this.showTimeLimitAccommodation)return this.nUsers;if(this.showDueDateAccommodation)return this.nUsersDueDate;if(this.showTimeLimitAccommodation)return this.nUsersTimeLimit}}get showAccommodation(){return this.showDueDateAccommodation||this.showTimeLimitAccommodation}get showDueDateAccommodation(){if(null==this.content)return!1;return this.content.hasDueDate()&&this.content.getDueDate()&&this.hasDueDateAccommodation}get showTimeLimitAccommodation(){return null!=this.content&&(this.content.getTimedTestDetail().hasTimeLimit&&this.hasTimeLimitAccommodation)}get hasAccommodation(){return this.hasDueDateAccommodation||this.hasTimeLimitAccommodation}get hasDueDateAccommodation(){return this.nInstancesDueDate>0}get hasTimeLimitAccommodation(){return this.nInstancesTimeLimit>0}}s.d(t,"c",(function(){return l})),s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return u}));const l="ultra.services.accommodation.Service",c="accommodationService",d=["id","isAvailable","role","user.*","userId","courseRole","dueDateExceptionType","timeLimitExceptionType","permissions","user.rowStatus"],u=[...d,"displayOrder"],h=["alignedGoals","assignedGroups","isGroupContent"];class m{constructor(e){this.courseModel=e,this._cache={},this._invalidCache={}}createContentAccommodation(e){const t=new a(e);return null!=e&&e.id&&(e.assignedGroups&&!this._invalidCache[e.id]?t.refreshGroups():this.fetchGroupsOrCounts(t)),t}getContentAccommodation(e){return null==e?this.createContentAccommodation(e):((null==this._cache[e.id]||this._invalidCache[e.id])&&(this._cache[e.id]=this.createContentAccommodation(e),this._invalidCache[e.id]=!1),this._cache[e.id])}forceNewContentAccommodation(e){null!=e&&(this._invalidCache[e.id]=!0)}invalidateContentAccommodationOtherThan(e){null!=e&&Object.keys(this._cache).forEach(t=>{t!==e.id&&(this._invalidCache[t]=!0)})}refreshAccommodation(e){null!=e.content&&(e.isGroupContent?e.refreshGroups():this.fetchCount(e.content.courseId,e))}fetchGroupsOrCounts(e){null!=e.content&&(null==e.content.isGroupContent||e.isGroupContent?e.content.$fetch({fields:h.join(","),expand:"selfEnrollmentGroups.group"}).$then(t=>{e.refreshGroups(),e.isGroupContent||this.fetchCount(t.courseId,e)}):this.fetchCount(e.content.courseId,e))}sortGroupsByTitle(e){e.sortGroups((e,t)=>e.groupTitle.localeCompare(t.groupTitle))}fetchCount(e,t){this.courseModel.$new(e).memberships.getDetailsCount().then(e=>{t.counts=e})}fetchMemberships(e,t){this.courseModel.$new(e).memberships.$refresh({fields:d.join(","),sort:"user.givenName"}).$then(e=>t.memberships=e)}}m.$inject=[r.serviceName];class p extends m{}n.module(l,[i.N]).service(c,class extends m{})},ObAk:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("oPIA");class i{constructor(){this.subscribeToEvents=(e,t)=>{e.subscriptions.forEach(e=>{if(!this.checkIfValidSubscription(e))return void console.warn(`Received subscription to invalid event type ${e}`);const s=this.subscriptions.get(e)||new Set;s.add(t),this.subscriptions.set(e,s);const n=this.subscribeCallbacks.get(e);n&&n.forEach(e=>e(t))})},this.unsubscribeFromEvents=(e,t)=>{e.subscriptions.forEach(e=>{if(!this.subscriptions.has(e))return void console.warn(`Integration is not subscribed to ${e}, not unsubscribing`);const s=this.subscriptions.get(e);s.delete(t),this.subscriptions.set(e,s);const n=this.unsubscribeCallbacks.get(e);n&&n.forEach(e=>e(t))})},this.onSubscriptionEventCallback=(e,t)=>{const s=this.subscribeCallbacks.get(e)||[];return s.push(t),this.subscribeCallbacks.set(e,s),()=>this.removeCallback(e,t,this.subscribeCallbacks)},this.onUnsubscriptionEventCallback=(e,t)=>{const s=this.unsubscribeCallbacks.get(e)||[];return s.push(t),this.unsubscribeCallbacks.set(e,s),()=>this.removeCallback(e,t,this.unsubscribeCallbacks)},this.getSubscribedIntegrations=e=>this.subscriptions.get(e)||new Set,this.checkIfValidSubscription=e=>Object.values(n.fb).some(t=>t===e),this.removeCallback=(e,t,s)=>{if(!s.has(e))return;const n=s.get(e);n.splice(n.indexOf(t),1),s.set(e,n)},this.subscriptions=new Map,this.subscribeCallbacks=new Map,this.unsubscribeCallbacks=new Map}}},OcoR:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return c}));s("3Yz5");var n=s("Llzl"),i=s("Fvsw"),r=s("oQrK"),o=s("lEL+"),a=s("Ediv"),l=s("yC9S");const c="ultra.components.directives.firstVisit";class d{constructor(e,t,s){this.$q=e,this.bbContext=t,this.timeout=s,this.restrict="E",this.template=a,this.link=(e,t,s)=>{this.alterBodyStyles(e,"ftue-on");const n="ultraui.first.time."+s.path+"."+s.place+".visited";e.firstVisit=!1,e.loadImage=(e,t,s,n=null)=>{const i=s.inViewTarget;e&&"both"===t&&!i.src.match(new RegExp(n+"$"))&&(i.src=n)},this.bbContext.getPreference(n,"false").then(s=>{"false"===s.value?(e.firstVisit=!0,this.bbContext.setPreference(n,"true"),this.resizeWelcomeWindow(e,t)):"true"===s.value&&(e.firstVisit=!1)})}}alterBodyStyles(t,s){e("body").addClass(s),t.$on("$destroy",()=>{e("body").removeClass(s)})}resizeWelcomeWindow(t,s){const n=()=>{const e=s.find(".current-view"),t=e.offset().top,n=this.$q.defer(),i=this.$q.defer();s.closest("body").animate({scrollTop:t},{duration:500,always(){n.resolve()}}),s.closest("html").animate({scrollTop:t},{duration:500,always(){i.resolve()}}),this.$q.all([n.promise,i.promise]).then(()=>e.find("a.ftue-img").focus())};let i;const o=()=>{this.timeout.cancel(i),i=this.timeout(()=>{const t=s.find(".ftue-new-slide");for(let s=0;s<t.length;s++){const n=t.eq(s),i=n.find(".slide-content").height()+n.find(".slide-control").height()+parseInt(n.find(".slide-content").css("top"),10)+40;n.css("min-height",i);const r=e(window).height();r>i&&n.css("height",r)}n()},t,250,!1)},a=t=>{const s=e(t.target).closest(".ftue-new-slide").next();e(s).addClass("current-view").siblings().removeClass("current-view"),n()};s.on("click",".scroll-button",a),r.a.detect().desktop()&&l.b.OnWindow("resize",o,t),t.$on("$destroy",()=>{s.off("click",".scroll-button",a)})}}d.$inject=["$q",i.b,o.b],n.module(c,[i.a,"angular-inview",o.a]).directive("bbFirstVisit",["$injector",e=>e.instantiate(d)])}).call(this,s("5iHu"))},OmEq:function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));const n="[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,24}\\s*",i=new RegExp("^"+n+",?$","i"),r=new RegExp("^"+n+"(,+\\s*\\n*"+n+")*,*\\s*$","i")},OvxF:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));s("T4UF"),s("67oV");var n=s("nsO7"),i=s("Llzl"),r=s("0JpG"),o=s("XGja"),a=s("+4Px"),l=s("mkvA"),c=s("Y+9S");const d="ultra.components.directives.modal";class u{constructor(e,t,s,i,r){this.scope=e,this.element=t,this.attrs=s,this.transcludes=i,this.bbLocalize=r,this.ariaType="dialog",this.ariaType=e.modalAriaType?e.modalAriaType:this.ariaType,this.analyticsIdTagPrefix=e.analyticsIdTagPrefix||"";const o=e.modalTranslateOptions&&e.modalTranslateOptions();this.titleKey=e.modalTitleKey,this.titleString=r.translateSync(n.merge({key:e.modalTitleKey},o?o.title:{})),this.dismissKey=e.modalDismissKey,(e.modalDismissKey||o&&o.dismiss)&&(this.dismissString=r.translateSync(n.merge({key:e.modalDismissKey},o?o.dismiss:{})));const a=t.find("[name=modal-footer] button");t.find(".reveal-modal__footer").addClass("buttons-"+a.length+"-md")}handleKeyDown(e){e.keyCode===a.u?(e.preventDefault(),e.shiftKey?o.c(this.element):o.b(this.element)):e.keyCode===a.g&&(e.stopPropagation(),this.dismiss())}dismiss(){this.scope.modalDismissCallback?this.scope.modalDismissCallback():this.scope.$parent.$dismiss(),Object(c.notifyMobileApp)(c.MessageType.ModelDismissed)}}u.$inject=["scope","element","attrs","transcludes",r.serviceName];class h{constructor(e){this.$injector=e,this.replace=!0,this.restrict="E",this.template=l,this.transclude=!0,this.scope={modalDismissCallback:"&?",modalDismissKey:"@?",modalTitleKey:"@?",modalTranslateOptions:"&?",modalAriaType:"@?",analyticsIdTagPrefix:"@"},this.link=(e,t,s,n,i)=>{e.modal=this.$injector.instantiate(u,{scope:e,element:t,attrs:s,transcludes:i})}}}h.$inject=["$injector","$rootScope"],i.module(d,["multi-transclude"]).directive("bbModal",["$injector",e=>e.instantiate(h)])},"Oyr+":function(e,t,s){"use strict";s("juDU"),s("9RbK"),s("1dyP");var n=s("nsO7"),i=s("5iHu"),r=s("Llzl"),o=s("nbDY"),a=s.n(o),l=s("X455"),c=s("0JpG"),d=(s("67oV"),s("0+Qs")),u=s("rxY8"),h=s("jT78"),m=s("okL3");class p{constructor(e,t,s,n,i){this.scope=e,this.bbLocalize=t,this.interval=s,this.$q=n,this.spinner=i,this.processingSpinnerArgs={canvasSize:43,scaleX:1.5,scaleY:1.5},this.cancelUpload=(e,t,s)=>{e.stopImmediatePropagation(),e.preventDefault();const n=this.scope.inProgressFiles.filter(e=>e.id===t&&this.isIdentifierInProgressFile(e.inProgressFileId,s))[0];this.cancelUploadFile(n)},this.scope.$on("cancel-upload-all",e=>{this.scope.inProgressFiles.forEach(e=>{this.cancelUploadFile(e)})})}cancelUploadFile(e){e.content&&this.scope.$root.$broadcast(B,e.content,K.DeleteContent),e.interval&&this.interval.cancel(e.interval);const t=this.scope.inProgressFiles.splice(this.scope.inProgressFiles.indexOf(e),1)[0];this.scope.$root.$broadcast(B,e.id,t,K.Cancel,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())}remove(e){n.remove(this.scope.inProgressFiles,t=>t.ui&&e.ui&&t.ui.fileId&&e.ui.fileId?t.ui.fileId===e.ui.fileId&&this.isIdentifierInProgressFile(t.inProgressFileId,e.inProgressFileId):!(!e.ui||!e.ui.id)&&(t.id===e.ui.id&&this.isIdentifierInProgressFile(t.inProgressFileId,e.inProgressFileId))),this.scope.$root.$broadcast(B,this.scope.fileUploadDivId,0,e.id,K.Cancel,this.scope.primaryKey&&this.scope.primaryKey())}isIdentifierInProgressFile(e,t){return!e||!t||e===t}transformModelForDisplay(e){return{barId:e.file.id?e.file.id.replace(/\D/g,""):"",content:e.content,currentMimeType:e.currentMimeType,currentProgress:0,file:e.file,fileName:e.fileName,fileSize:e.file.size,id:e.id,inProgressFileId:e.inProgressFileId||"",interval:null,ui:e.ui}}getProgressIdAttr(e){return e.inProgressFileId?`file-progress-${e.barId}-${e.inProgressFileId}`:`file-progress-${e.barId}`}setProgress(e,t,s,i){let r,o,a,l,c;if(s){c=n.find(this.scope.inProgressFiles,e=>e.file.id===s&&this.isIdentifierInProgressFile(e.inProgressFileId,i));const e=this.scope.targetDiv?`-${i}`:"",t=`#file-progress-${s.replace(/\D/g,"")}${e}`;l=this.scope.element.find(t+" .progress-circle .bar"),a=this.scope.element.find(t+" .processing-spinner .canvas")}else{c=this.scope.inProgressFiles.find(t=>t.id===e&&this.isIdentifierInProgressFile(t.inProgressFileId,i));const t=this.scope.inProgressFiles.indexOf(c);l=this.scope.element.find(".progress-circle-svg .bar").eq(t),a=this.scope.element.find(".processing-spinner .canvas").eq(t)}if(!c)return;if(c.currentProgress>=t)return;null!=c.interval&&this.interval.cancel(c.interval);const d=c.currentProgress;c.interval=this.interval(()=>{c&&(c.currentProgress++,r=l.attr("stroke-dashoffset"),o=r-r*(.01*c.currentProgress),l.css({strokeDashoffset:o+"px"}),100===c.currentProgress&&(c.isProcessing||(this.spinner.initInlineLoader(a,this.processingSpinnerArgs).start(),c.isProcessing=!0),s?this.scope.$root.$broadcast(B,s,K.UploadProgressComplete):this.scope.$root.$broadcast(B,this.scope.fileUploadDivId,this.scope.inProgressFiles.indexOf(c),e,K.UploadProgressComplete),this.interval.cancel(c.interval)))},this.scope,20,t-d)}}p.$inject=["scope",c.serviceName,d.b,"$q",u.b];class g{constructor(e,t,s){this.$injector=e,this.interval=t,this.bbLocalize=s,this.template=m,this.restrict="E",this.scope={displayResults:"=",progressId:"=",targetDiv:"@",primaryKey:"&?"},this.link=(e,t,s)=>{e.element=t,e.progress=this.$injector.instantiate(p,{scope:e}),e.progress.progressId=s.id||"directive-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),e.inProgressFiles=[],e.$on(B,(s,n,i,r,o)=>{if(null!=i&&(null!=i.content&&i.content.ui.fileUploadId===e.progress.progressId||e.progress.progressId===i.progressId||e.targetDiv&&e.targetDiv===o))if(r!==K.Uploading||i.content)if(r===K.Uploaded)e.progress.displayResults||e.progress.remove(i);else if(r===K.Error)e.progress.remove(i);else if(r===K.CommenceUpload)if(null!=i.content){if(e.fileUploadDivId=n,t.attr("id")===i.targetElement.attr("id")){e.inProgressFiles.push(e.progress.transformModelForDisplay(i));const s=this.interval(()=>{t.find(".progress-circle").length>0&&(e.$root.$broadcast(B,n,i,K.ProgressRenderComplete),this.interval.cancel(s))},e,100,10)}}else i.progressId===e.progress.progressId&&(e.inProgressFiles.push(e.progress.transformModelForDisplay(i)),e.$root.$broadcast(B,n,i,K.ProgressRenderComplete));else r===K.Cancel&&e.progress.remove(i);else if(e.fileUploadDivId=n,e.inProgressFiles.push(e.progress.transformModelForDisplay(i)),e.progress.displayResults){e.lastPiesRendered=0;const s=this.interval(()=>{const r=t.find(".progress-circle").length;if(r>e.lastPiesRendered){for(let t=e.lastPiesRendered;t<e.lastPiesRendered+r;t++)e.$root.$broadcast(B,n,t,e.inProgressFiles[t].id,K.ProgressRenderComplete,i.inProgressFileId),this.interval.cancel(s);this.interval.cancel(s)}e.lastPiesRendered=r},e,100,10)}else e.$root.$broadcast(B,n,e.inProgressFiles.length-1,e.inProgressFiles[e.inProgressFiles.length-1].id,K.ProgressRenderComplete,i.inProgressFileId,e.targetDiv)}),e.$on(B,(t,s,n,i,r,o,a,l)=>{(a&&a===e.targetDiv||i&&i.attr&&i.attr("id")===e.element.attr("id")&&r===K.UpdateProgress)&&e.progress.setProgress(s,n,l,o)}),e.progress.displayResults=!0,e.$watch("::displayResults",t=>{e.progress.displayResults=t})}}}g.$inject=["$injector",d.b,c.serviceName],r.module("ultra.directives.bbProgress",[h.a]).directive("bbProgress",["$injector",e=>e.instantiate(g)]);var b=s("5MwF"),f=s("Vsv2"),v=s("k9iv"),S=s("b2lU"),y=s("A+IJ"),C=s("12mu"),I=s("pjml"),$=s("lEL+"),w=s("hkqm"),T=s("TnpK"),E=s("Q/M7"),k=s("GbAM"),P=s("fYJU"),A=s("jx5I"),R=s("RK4w"),O=s("8jry"),D=s("ByeC"),_=s("Za2G"),N=s("mhLG"),L=s("EN13"),M=s("YCUs"),x=s("ofgY"),j=s("W7eU"),G=s("Tfg2"),U=s("yZnR");s.d(t,"f",(function(){return F})),s.d(t,"e",(function(){return B})),s.d(t,"d",(function(){return q})),s.d(t,"b",(function(){return H})),s.d(t,"a",(function(){return z})),s.d(t,"c",(function(){return K}));const F="ultra.directives.bbFileUpload",B="bbFileUpload",q="thirdPartyFileSelectedEvent",H="fileSelected",z="dismissUploadModalEvent",V=1;class K extends a.a{}K.AllUploadsCompleted=new K("allUploadsCompleted"),K.AssignDropTarget=new K("assignDropTarget"),K.Cancel=new K("cancel"),K.CommenceUpload=new K("commenceUpload"),K.ContentCreated=new K("contentCreated"),K.Delete=new K("delete"),K.DeleteContent=new K("deleteContent"),K.Error=new K("error"),K.File=new K("file"),K.FileDrop=new K("fileDrop"),K.Folder=new K("folder"),K.LinkProgress=new K("linkProgress"),K.OutlineAddContentButtonFileSelected=new K("outlineAddContentButtonFileSelected"),K.ProgressRenderComplete=new K("progressRenderComplete"),K.UpdateFileTypes=new K("updateFileTypes"),K.UpdateProgress=new K("updateProgress"),K.Uploaded=new K("uploaded"),K.Uploading=new K("uploading"),K.UploadProgressComplete=new K("uploadProgressComplete");class W extends a.a{constructor(e,t){super(e),this.errorKey=t}getErrorKey(){return this.errorKey}}W.General=new W("generalFileUploadError","components.directives.fileUpload.errorFull"),W.Security=new W("securityFileUploadError","components.directives.fileUpload.errorSecurity");class J{static generateTempFileId(){return`${Math.floor(1e4*Math.random())}-${Math.floor(1e4*Math.random())}`}}class Y{constructor(e,t,s,o,a,l,d,u,h,m,p,g,f,v,S,C,I,$,w){if(this.scope=e,this.element=t,this.attrs=s,this.contextCourseMembership=o,this.bbLocalize=a,this.cloudDrive=l,this.interval=d,this.$modal=u,this.$http=h,this.timeout=m,this.$compile=p,this.Upload=g,this.ultraState=f,this.FileUtilityFactory=v,this.errorModal=S,this.toast=C,this.$q=I,this.contextUser=$,this.$sceService=w,this.aborted=!1,this.alertedUserForFolderIncompatibility=!1,this.fileReviewVisible=!1,this.isMultipleUpload=!1,this.letMeChooseSelected=!1,this.progressVisible=!1,this.successVisible=!1,this.transcludeVisible=!0,this.uploadInProgress=!1,this.isUploadCompleteEventRegistered=!1,this.allowOversizedFiles=!1,this.currentUploadCount=0,this.failedUploadCount=0,this.idCounter=0,this.originalUploadCount=0,this.successfulUploadCount=0,this.allowedFileTypes="",this.allowMultiple=!1,this.hideTranscludeDuringUpload=!0,this.id="",this.isContent=!1,this.monitorLeave=!1,this.useDefaultSuccessMethod=!1,this.isThirdPartyUpload=!1,this.oversizedFiles=[],this.model={fileLocation:null,files:[]},this.uploadingFiles=[],this.uploadsInProgress={},this.cancelUpload=(e,t)=>{const s=this.getUploadingFileIndexById(e,t);this.scope.isThirdPartyUpload&&s>=0?this.uploadingFiles.splice(s,1):this.uploadsInProgress[e]&&s>=0&&(this.abortUpload(e),this.aborted=!0,this.originalUploadCount--,this.resetFileInput(),s>=0&&this.uploadingFiles.splice(s,1),this.allowMultiple&&0!==this.model.files.length||this.hideTranscludeDuringUpload&&(this.fileReviewVisible=!1,this.transcludeVisible=!0)),this.uploadingFiles&&0!==this.uploadingFiles.length||(this.uploadInProgress=!1)},this.updateModel=(e,t,s,n,i)=>{const r=e.mimeType?e.mimeType:s,o=this.fileUtil.calculateSize(t.size),a={fileLocation:e.fileLocation,webLocation:e.webLocation,fileName:e.fileName,currentMimeType:r,fileSize:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.sizeOutput",params:{label:o.sizeLabel,size:parseFloat(o.size.toFixed(2)).toString()}}),rawFileSize:t.size,isMedia:e.isMedia,uploadDate:this.uploadDate,targetClass:n,ui:{position:i}};return this.allowMultiple?this.model.files.push(a):this.model.files[0]=a,this.model.fileLocation=e.fileLocation,this.currentFileName=a.fileName,a},this.success=(e,t)=>{this.currentUploadCount--,this.model.files=[],this.currentUploadCount<=0&&(this.oversizedFiles.length&&this.openMaxSizeWarning(),this.scope.$root.$broadcast(B,K.AllUploadsCompleted,null,null,null,this.scope.primaryKey&&this.scope.primaryKey())),"/v1/files"===this.attrs.url&&this.useDefaultSuccessMethod&&this.hideTranscludeDuringUpload&&(this.transcludeVisible=!0)},this.displayUploadError=e=>{this.scope.errorModalErrorKey=e?e.getErrorKey():W.General.getErrorKey(),this.modalInstance=this.$modal.open({template:j,scope:this.scope,resolve:{translations:[c.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(()=>{},()=>{this.resetFileInput(),this.hideTranscludeDuringUpload&&(this.transcludeVisible=!0)})},this.getMoreSupportURL=()=>{return this.contextCourseMembership.isStudentOrGuestMembership()||this.contextUser.userModel.isStudent()||this.contextUser.userModel.isGuest()?"http://help.blackboard.com/001_563en_US":"http://help.blackboard.com/001_562en_US"},this.progress=(e,t,s)=>{this.scope.$root.$broadcast(B,e,t,s,K.UpdateProgress,void 0,this.scope.targetDiv)},this.conductUpload=(e,t,s)=>{let i,r,o=0;if(r=s?this.uploadingFiles.filter(e=>e.id===s)[0]:this.uploadingFiles.filter(t=>t.ui.primaryKey===e.ui.primaryKey)[0],i=e.targetElement?e.targetElement:this.scope.targetElement,this.scope.isThirdPartyUpload){if(e){const s=e;s.ui.index=t,s.ui.position=this.scope.position&&this.scope.position(),s.ui.targetDiv=this.getContentOutlineCloudKey(!0)||this.scope.targetDiv,this.scope.thirdPartyDownloadHandler(s),this.oversizedFiles.length&&this.openMaxSizeWarning()}}else{let s=E.j()+b.a.apiBasePath+"/v1/files?expand=mimeType,isMedia";this.scope.fileLocation&&(s=s+"&fileLocation="+this.scope.fileLocation),this.scope.webLocation&&(s=s+"&webLocation="+this.scope.webLocation),this.scope.extraParams&&(s=s+"&"+n.map(this.scope.extraParams(),(e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).join("&")),this.uploadsInProgress[r.id]=this.Upload.upload({url:s,method:"POST",headers:{"Content-Type":e.type},data:e.data,file:e.file,fileName:e.fileName}).progress(e=>{100!==(o=parseInt((100*e.loaded/e.total).toString(),10))?r.currentProgress=o:r.currentProgress<100&&(r.currentProgress=99),this.progress(r.id,o,i)}).success((s,n,i,o)=>{const a=this.interval(()=>{if(100===r.currentProgress||0===r.currentProgress){const n=this.updateModel(s,e.file,e.currentMimeType,e.targetClass,this.scope.position&&this.scope.position());if(n.ui.originFileName=e.fileName,this.success(n,t),this.successfulUploadCount++,this.removeUploadingFile(e),(!this.uploadingFiles||0===this.uploadingFiles.length)&&(this.uploadInProgress=!1,this.failedUploadCount+this.successfulUploadCount===this.originalUploadCount)){let e;e=this.originalUploadCount>1?0===this.failedUploadCount?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadSuccessful.plural",params:{filesCount:this.originalUploadCount},noWrap:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFinished.plural",params:{successfulFilesCount:this.originalUploadCount-this.failedUploadCount,filesCount:this.originalUploadCount},noWrap:!0})+" "+this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.failedFiles.plural",params:{filesCount:this.failedUploadCount,filenameList:this.bbLocalize.formatItemsSync(this.failedUploadFilenames,this.failedUploadFilenames.length,null,this.scope,!1,{noWrap:!0})},noWrap:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.singleFile.uploadSuccessful",noWrap:!0}),this.scope.$root.$broadcast(k.a,e)}n.ui.id=e.id,null!=e.content?this.scope.$root.$broadcast(B,this.scope.fileUploadDivId,e.content,n,K.Uploaded,this.scope.targetDiv,this.isMultipleUpload):this.scope.$root.$broadcast(B,this.scope.fileUploadDivId,n,K.Uploaded,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey()),this.interval.cancel(a)}},this.scope,100,5e3,!0)}).error(t=>{if(this.removeUploadingFile(e),this.failedUploadCount++,this.failedUploadFilenames.push(e.fileName),(!this.uploadingFiles||0===this.uploadingFiles.length)&&(this.uploadInProgress=!1,this.failedUploadCount+this.successfulUploadCount===this.originalUploadCount)){let e;e=this.originalUploadCount>1?this.failedUploadCount===this.originalUploadCount?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFailed",noWrap:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFinished.plural",params:{successfulFilesCount:this.originalUploadCount-this.failedUploadCount,filesCount:this.originalUploadCount},noWrap:!0})+" "+this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.failedFiles.plural",params:{filesCount:this.failedUploadCount,filenameList:this.bbLocalize.formatItemsSync(this.failedUploadFilenames,this.failedUploadFilenames.length,null,this.scope,!1,{noWrap:!0})},noWrap:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.singleFile.uploadFailed",noWrap:!0}),this.scope.$root.$broadcast(k.a,e)}if(this.scope.$root.$broadcast(B,this.scope.fileUploadDivId,e,K.Error,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey()),this.aborted)this.aborted=!1;else{const e=t&&422===t.status?W.Security:W.General;this.displayUploadError(e)}})}},this.prepareToUpload=(e,t,s,i)=>{this.resetFileInput();const o=JSON.stringify({fileLocation:this.model.fileLocation});let a=e.type;a||(a=this.unknownMimeType);const l=e.name||e.filename;let c;if(this.scope.isThirdPartyUpload){(c={id:e.id,currentMimeType:a,currentProgress:0,data:o,file:e,fileName:l,inProgressFileId:J.generateTempFileId(),targetClass:"img-icon-document",type:e.type}).ui=r.copy(e.ui),c.ui?c.ui.primaryKey=this.scope.primaryKey&&this.scope.primaryKey():c.ui={primaryKey:this.scope.primaryKey&&this.scope.primaryKey()},t&&this.isZipFile(l)&&(c.ui.needUnzip=t),c.ui.fileId=e.id,this.uploadingFiles.push(c),this.isUploadCompleteEventRegistered||(this.scope.$on("uploadComplete",(e,t,s)=>{if(n.findIndex(this.uploadingFiles,e=>t.ui.fileId===e.ui.fileId)>=0){const e=this.getContentOutlineCloudKey(!0,s)||this.scope.targetDiv,n=this.getContentOutlineCloudKey(!1,s)||this.scope.primaryKey&&this.scope.primaryKey();this.scope.$root.$broadcast(B,this.scope.fileUploadDivId,t,K.Uploaded,e,n),this.removeUploadingFile(t)}this.uploadingFiles&&0!==this.uploadingFiles.length||(this.uploadInProgress=!1)}),this.isUploadCompleteEventRegistered=!0);const s=this.getContentOutlineCloudKey(!0)||this.scope.targetDiv,i=this.getContentOutlineCloudKey(!1)||this.scope.primaryKey&&this.scope.primaryKey();this.scope.$root.$broadcast(B,this.scope.fileUploadDivId,c,K.Uploading,s,i)}else(c={content:i,currentMimeType:a,currentProgress:0,data:o,file:e,fileName:l,id:J.generateTempFileId(),progressId:null,targetClass:"img-icon-document",type:e.type}).ui={primaryKey:this.scope.primaryKey&&this.scope.primaryKey()},this.uploadingFiles.push(c),null!=i?this.scope.$root.$broadcast(B,this.scope.fileUploadDivId,c,K.FileDrop,this.scope.targetDiv):this.scope.$root.$broadcast(B,this.scope.fileUploadDivId,c,K.Uploading,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())},this.uploadFiles=(e,t)=>{this.isContent||(this.fileReviewVisible=!0),this.hideTranscludeDuringUpload&&(this.transcludeVisible=!1),e.forEach(s=>{this.isContent?this.isFolder(s).then(e=>{e?(this.scope.$root.$broadcast(B,this.scope.fileUploadDivId,s,K.Folder),this.scope.isChrome||this.alertedUserForFolderIncompatibility||(this.alertedUserForFolderIncompatibility=!0,this.errorModal.handleError(this.browserFolderWarning))):(this.uploadInProgress=!0,this.scope.$root.$broadcast(B,this.scope.fileUploadDivId,s,K.File),this.currentUploadCount++)}):(this.uploadInProgress=!0,this.prepareToUpload(s,t,e.indexOf(s),null))})},this.calculateSizeInMib=e=>e/1048576,this.openMaxSizeWarning=()=>{this.maxFileSizeScope=this.scope.$new();let e="";const t=this.scope.fileUploadSettings;this.maxFileSizeScope.shouldIncludeSupportLink=""!==t.supportLink,this.maxFileSizeScope.shouldRecommendAltStorageLocations=""!==t.recommendedAlternatives,this.maxFileSizeScope.shouldIncludeSupportLink&&(e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.maxSizeWarningSupportLinkText",params:{supportLink:t.supportLink},noWrap:!0}),e=this.$sceService.trustAsHtml(e)),this.maxFileSizeScope.maxFileSize=t.maxUploadSizeInBytes,this.maxFileSizeScope.alternateStorage=t.recommendedAlternatives,this.maxFileSizeScope.supportLink=e,this.maxFileSizeScope.closeModal=this.closeModal,this.maxFileSizeScope.calculateSizeInMib=this.calculateSizeInMib,this.maxFileSizeScope.overSizedFiles=this.oversizedFiles,this.oversizedFiles=[],this.modalInstance=this.$modal.open({template:U,scope:this.maxFileSizeScope,resolve:{translations:[c.serviceName,e=>e.loadBundle("components/directives/file-upload")]}})},this.continueCurrentUpload=(e,t)=>{e.length>0&&this.uploadFiles(e,t)},this.uploadEnabled=()=>(this.allowMultiple||this.allowMultipleSelects||0===this.uploadingFiles.length&&0===this.model.files.length)&&!this.scope.isThirdPartyUpload,this.fileUploadClick=()=>{this.uploadEnabled()&&this.element.find(".fileUploadInput").trigger("click",!0)},this.modalCancelUpload=()=>{this.modalInstance.dismiss()},this.addContent=e=>{e&&this.modalInstance.close(e)},this.closeModal=e=>{if(null===e||r.isUndefined(e))return this.modalInstance.close();e?this.modalInstance.close(e):(this.modalInstance.close(e),this.resetFileInput())},this.closeModalAndChooseFiles=()=>{this.closeModal(!0),this.resetFileInput(),this.element.find(".file-upload-container div:first-child").eq(0).click()},this.containsPackageFile=(e,t)=>{t?(this.modalInstance=this.$modal.open({template:M,scope:this.scope,resolve:{translations:[c.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(t=>{t&&this.continueCurrentUpload(e,t)},e=>{this.notifyUploadCancelled(),this.resetFileInput()})):this.continueCurrentUpload(e)},this.containsZipFile=e=>{0!==e.filter(e=>this.isZipFile(e.name)).length?(this.modalInstance=this.$modal.open({template:G,scope:this.scope,resolve:{translations:[c.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(t=>{this.continueCurrentUpload(e,t)},e=>{this.notifyUploadCancelled(),this.resetFileInput()})):this.containsPackageFile(e)},this.checkAllowedFileTypesAndValidateFileSizes=e=>{e=this.validateUploadFileSizes(e);const t=this.validateFiles(e);if(!e.length&&this.oversizedFiles.length)return this.openMaxSizeWarning(),this.notifyUploadCancelled(),void this.resetFileInput();t.length!==e.length?(this.validFiles=t,this.modalInstance=this.$modal.open({template:this.disallowedFileTypeErrorTemplate||O,scope:this.scope,resolve:{translations:[c.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(e=>{this.scope.skipZipFileCheck&&this.scope.skipZipFileCheck()?this.continueCurrentUpload(t,!1):this.containsZipFile(t)},e=>{this.notifyUploadCancelled(),this.resetFileInput()})):this.scope.skipZipFileCheck&&this.scope.skipZipFileCheck()?this.continueCurrentUpload(t,!1):this.containsZipFile(t)},this.removeFoldersIfBreaksDepthLimit=e=>{this.scope.depth&&this.scope.depth()>y.l?this.removeFolders(e,N):this.checkAllowedFileTypesAndValidateFileSizes(e)},this.removeFoldersIfDisallowed=e=>{this.scope.disallowFolderUploads&&this.scope.disallowFolderUploads()?this.removeFolders(e,D):this.removeFoldersIfBreaksDepthLimit(e)},this.removeFolders=(e,t)=>{const s={};this.$q.all(e.map(e=>this.isFolder(e).then(t=>t?s:e))).then(n=>{const i=n.filter(e=>e!==s);i.forEach(e=>{e.path=null}),i.length!==e.length?(this.scope.hasFiles=0!==i.length,this.modalInstance=this.$modal.open({template:t,scope:this.scope,resolve:{translations:[c.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(e=>{this.checkAllowedFileTypesAndValidateFileSizes(i)},e=>{this.notifyUploadCancelled(),this.resetFileInput()})):this.checkAllowedFileTypesAndValidateFileSizes(i)})},this.ensurePlurality=e=>{e.length>1&&!this.allowMultiple?(this.uploadedFiles=e,this.modalInstance=this.$modal.open({template:_,scope:this.scope,resolve:{translations:[c.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(t=>{const s=i('input[type="radio"][name="fileListing"]:checked').val();this.removeFoldersIfDisallowed([e[s]])},e=>{this.notifyUploadCancelled(),this.resetFileInput()})):this.removeFoldersIfDisallowed(e)},this.onFileSelect=(e,t,s,n,r,o)=>{if(!(o&&(i(o.target).is(".js-no-file-drop")||i(o.target).is(".js-show-add-options"))||e&&e.length&&"Blob"===e[0].constructor.name))if(e.length){let t;this.isMultipleUpload=e.length>1,this.scope.$root.$broadcast(B,this.scope.primaryKey&&this.scope.primaryKey(),K.AssignDropTarget),this.scope.$root.$broadcast(B,this.scope.primaryKey&&this.scope.primaryKey(),K.OutlineAddContentButtonFileSelected),this.setUploadDate(),this.ensurePlurality(e),this.originalUploadCount=e.length,this.failedUploadCount=this.successfulUploadCount=0,this.failedUploadFilenames=[],t=this.originalUploadCount>1?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadStarted.plural",params:{filesCount:this.originalUploadCount},noWrap:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.singleFile.uploadStarted",noWrap:!0}),this.scope.$root.$broadcast(k.a,t)}else this.throwModalForNonFileUpload()},this.confirmLeaveDuringUpload=(e,t,s)=>{!this.uploadInProgress&&!this.cloudDrive.isGettingFilesInfo||Y.isLeaveConfirmModalOpened||(e.preventDefault(),this.modalInstance=this.$modal.open({template:R,scope:this.scope,resolve:{translations:[c.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),Y.isLeaveConfirmModalOpened=!0,this.modalInstance.result.then(e=>{Y.isLeaveConfirmModalOpened=!1,this.scope.isThirdPartyUpload||this.abortAllUploads(),this.aborted=!0,this.uploadInProgress=!1,this.uploadingFiles.forEach(e=>{this.scope.$root.$broadcast(B,this.scope.fileUploadDivId,e,K.Cancel,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())}),this.ultraState.go(t.name,s)},()=>{Y.isLeaveConfirmModalOpened=!1,this.scope.$root.$broadcast("$stateChangeAbort",{reason:"ABORTED_BY_FILE_UPLOAD"})}))},this.initialState=this.ultraState.current.name,this.allowMultipleSelects=e.$eval(e.allowMultipleSelects),this.scope.isChrome=/Chrome/.test(navigator.userAgent),this.disallowedFileTypeErrorTemplate=this.scope.disallowedFileTypeErrorTemplate,e.dragClass="drag",e.$on("bb-drag-start",()=>{e.dragClass=""}),e.$on("file-drag-restore",()=>{e.dragClass="drag"}),!e.isThirdPartyUpload){if(!s.url)throw new Error("'url' attribute required in file upload");if(this.url=s.url,!s.data)throw new Error("'data' attribute required in file upload")}this.element.find(".file-upload:first").on("click",(e,t)=>{this.scope.clickEnabled&&!this.scope.clickEnabled()||t||this.fileUploadClick()}),["hideTranscludeDuringUpload","useDefaultSuccessMethod","allowedFileTypes","forceReselectDisallowedFiles","allowMultiple","isContent","fileUploadClick","allowOversizedFiles"].forEach(e=>{const t=this.scope.$watch(e,s=>{null!=s&&(t(),this[e]=s)})});const T=this.scope.$watch("targetDiv",s=>{if(null!=s)T(),this.scope.targetElement=t.find(s),0===this.scope.targetElement.length&&(this.scope.targetElement=i(s));else{this.progressVisible=!0;const s=this.interval(()=>{const e=t.find(".file-upload-panel");e.length>0&&(this.scope.targetElement=e,this.interval.cancel(s))},e,100,10)}}),P=this.scope.$watch("monitorLeave",e=>{e&&(this.registerRouterStateChangeEventHandlers(),P())});this.isThirdPartyUpload=e.isThirdPartyUpload,this.loadTranslations(),this.fileUtil=this.FileUtilityFactory()}getContentOutlineCloudKey(e,t){const s=e?"#progress":"progress",n=t||this.scope.cloudUploadSelectedContentId;if(n)return`${s}${n}`}throwModalForNonFileUpload(){this.modalInstance=this.$modal.open({template:L,scope:this.scope,resolve:{translations:[c.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.catch(e=>{this.notifyUploadCancelled(),this.resetFileInput()})}endsWith(e,t){return e.lastIndexOf(t),e.lastIndexOf(t)===e.length-t.length}getUploadingFileIndexById(e,t){const s=this.uploadingFiles.filter(s=>s.id===e&&this.validateIdentifier(s.inProgressFileId,t))[0];return this.uploadingFiles.indexOf(s)}isFolder(e){const t=this.$q.defer();if("directory"===e.type)t.resolve(!0);else if(e instanceof Blob){const s=new FileReader;s.onload=()=>{1===s.readyState&&s.abort(),t.resolve(!1)},s.onerror=()=>{this.isLikelyAFile(e)&&(this.displayUploadError(),this.scope.$root.$broadcast(B,this.scope.fileUploadDivId,e,K.Error,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey()),t.reject()),t.resolve(!0)},s.readAsText(this.sliceFileHelper(e))}else t.resolve(!1);return t.promise}sliceFileHelper(e){return e.slice(0,V)}isZipFile(e){return".zip"===e.substring(e.lastIndexOf(".")).toLowerCase()}isLikelyAFile(e){return"directory"!==e.type&&(""!==e.type||e.size>4096)}loadTranslations(){this.bbLocalize.loadBundle("components/directives/file-upload").then(()=>{this.browserFolderWarning=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.browserFolderWarning"}),this.cancelUploadText=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.cancelUploadText"}),this.unknownMimeType=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.unknownMimeType"}),this.uploaded=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.uploaded"}),this.uploading=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.uploading"})})}notifyUploadCancelled(){this.scope.$root.$broadcast(B,this.scope.fileUploadDivId,null,K.Cancel,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())}removeUploadingFile(e){n.remove(this.uploadingFiles,t=>t.ui&&e.ui&&t.ui.fileId&&e.ui.fileId?t.inProgressFileId&&e.inProgressFileId?t.ui.fileId===e.ui.fileId&&t.inProgressFileId===e.inProgressFileId:t.ui.fileId===e.ui.fileId:t.inProgressFileId&&e.inProgressFileId?e&&t.fileName===e.fileName&&t.inProgressFileId===e.inProgressFileId:e&&t.fileName===e.fileName),delete this.uploadsInProgress[e.id]}resetFileInput(){const e=i(document.body).find(".fileUploadInput");for(let t=0;t<e.length;t++){e.eq(t)[0].value=""}}registerRouterStateChangeEventHandlers(){this.scope.$on("$stateChangeStart",(e,t,s,n,i)=>{n.name===t.name||t.name===this.initialState||this.isStateIgnored(n,t)||this.confirmLeaveDuringUpload(e,t,s)})}isStateIgnored(e,t){if(this.scope.ignoredStates&&this.scope.ignoredStates())for(const s of this.scope.ignoredStates())if(e.name.indexOf(s)>=0||t.name.indexOf(s)>=0)return!0;return!1}setUploadDate(){this.bbLocalize.formatDatetime(new Date,c.ILocaleDatetimeFormat.Short).then(e=>{this.uploadDate=e})}validateFiles(e){if(""===this.allowedFileTypes)return e;let t=[],s=!1;this.allowedFileTypes.indexOf("/")>0?(s=!0,t[0]=this.allowedFileTypes.substr(0,this.allowedFileTypes.indexOf("/")),t[1]=this.allowedFileTypes.substr(this.allowedFileTypes.indexOf("/")+1)):t=this.allowedFileTypes.toLowerCase().split(",");const n=[];for(let i=0;i<e.length;i++){const r=e[i];if(s){const e=[];e[0]=r.type.substr(0,this.allowedFileTypes.indexOf("/")),e[1]=r.type.substr(this.allowedFileTypes.indexOf("/")+1),t[0]!==e[0]||t[1]!==e[1]&&"*"!==t[1]||n.push(r)}else for(let e=0;e<t.length;e++)if("."!==t[e].charAt(0)&&(t[e]="."+t[e]),this.endsWith(r.name.toLowerCase(),t[e])){n.push(r);break}}return n}validateUploadFileSizes(e){if(this.currentUploadCount=0,this.oversizedFiles=[],this.allowOversizedFiles)return e;const t=this.scope.fileUploadSettings.maxUploadSizeInBytes;return this.oversizedFiles=e.filter(e=>e.size>t),e.filter(e=>e.size<=t)}abortUpload(e){this.uploadsInProgress[e].abort(),delete this.uploadsInProgress[e]}abortAllUploads(){Object.keys(this.uploadsInProgress).forEach(e=>this.abortUpload(e))}validateIdentifier(e,t){return!e||!t||e===t}}Y.isLeaveConfirmModalOpened=!1;class Q{constructor(e,t,s,n,i,r,o,a,l,c,d,u,h,m,p,g,b){this.contextCourseMembership=e,this.bbLocalize=t,this.cloudDrive=s,this.$modal=n,this.$http=i,this.interval=r,this.timeout=o,this.$compile=a,this.Upload=l,this.ultraStateService=c,this.FileUtilityFactory=d,this.errorModal=u,this.toast=h,this.$q=m,this.contextUser=p,this.fileUploadSettingsService=g,this.$sceService=b,this.replace=!1,this.transclude=!0,this.restrict="E",this.template=x,this.scope={allowedFileTypes:"@",allowMultiple:"=",allowMultipleSelects:"@",cancelUpload:"=",clickEnabled:"&?",confirmLeaveDuringUpload:"=",closeModal:"=",closeModalAndChooseFiles:"@",delete:"=",disableDrag:"&?",disallowFolderUploads:"&?",extensions:"=",cloudUploadSelectedContentId:"<?",fileUploadClick:"=",forceReselectDisallowedFiles:"&?",hideTranscludeDuringUpload:"=",isContent:"=",improperAmountOfFilesUpload:"=",isThirdPartyUpload:"=?",primaryKey:"&?",modalCancelUpload:"=",monitorLeave:"=",onFileSelect:"=",position:"&?",showUnzippedSelection:"=",skipZipFileCheck:"&?",targetDiv:"@",thirdPartyDownloadHandler:"=",uploadUnzippedFiles:"=",unzippedFileSelection:"=",uploadEnabled:"=",useDefaultSuccessMethod:"=",fileLocation:"@?",webLocation:"@?",ignoredStates:"&?",extraParams:"&?",depth:"&?",initialUpload:"=?",disallowedFileTypeErrorTemplate:"@?",allowOversizedFiles:"<?"},this.link=(e,t,s,n)=>{e.fileUploadDivId=`fileUploadDiv-${J.generateTempFileId()}`,e.targetElement=t.find(".file-upload-panel"),e.fileUpload=new Y(e,t,s,this.contextCourseMembership,this.bbLocalize,this.cloudDrive,this.interval,this.$modal,this.$http,this.timeout,this.$compile,this.Upload,this.ultraStateService,this.FileUtilityFactory,this.errorModal,this.toast,this.$q,this.contextUser,this.$sceService),e.$on(q,(t,s,n)=>{t.stopPropagation&&t.stopPropagation(),n&&n===(e.primaryKey&&e.primaryKey())&&e.fileUpload.onFileSelect(s),e.$emit(H,s,n)}),e.$on(z,()=>{e.fileUpload.modalInstance&&e.fileUpload.modalInstance.dismiss()}),e.$on(B,(t,s,n,i,r,o,a,l)=>{if(s===e.fileUploadDivId)if(r===K.Cancel)e.fileUpload.cancelUpload(i,o);else if(r===K.ProgressRenderComplete)"number"==typeof n&&e.fileUpload.conductUpload(e.fileUpload.uploadingFiles.filter(t=>t.id===i&&e.fileUpload.validateIdentifier(t.inProgressFileId,o))[0],n,i);else if(r===K.UploadProgressComplete){const t=e.fileUpload.uploadingFiles.filter(t=>t.id===i&&e.fileUpload.validateIdentifier(t.inProgressFileId,o))[0];t&&(t.currentProgress=100)}}),e.$on(B,(s,n,i,r,o)=>{n===(e.primaryKey&&e.primaryKey())&&o===K.UpdateFileTypes&&(e.fileUpload.allowedFileTypes=i,t.find("input").attr("accept",i),r())}),e.$on(B,(t,s,n,i)=>{s===e.fileUploadDivId&&n&&n.fileName&&i===K.ProgressRenderComplete&&e.fileUpload.conductUpload(n,0,n.id)}),e.$on(B,(t,s,n,i)=>{if(s===e.fileUploadDivId&&i===K.ContentCreated){const t=this.interval(()=>{e.fileUpload.prepareToUpload(n.ui.file,!1,0,n),this.interval.cancel(t)},e,100,20)}}),e.$on(B,(t,s,n,i,r,o)=>{if(s===e.fileUploadDivId&&o===K.LinkProgress)for(let t=0;t<e.fileUpload.uploadingFiles.length;t++)n.content?e.fileUpload.uploadingFiles[t].fileName===n.fileName&&e.fileUpload.uploadingFiles[t].file.path===n.file.path&&e.fileUpload.uploadingFiles[t].id===n.id&&(e.fileUpload.uploadingFiles[t].progressId=n.content.ui.fileUploadId,e.$root.$broadcast(B,e.fileUploadDivId,n,K.CommenceUpload)):e.fileUpload.uploadingFiles[t].fileName===n.fileName&&e.fileUpload.uploadingFiles[t].file.path===n.file.path&&e.fileUpload.uploadingFiles[t].id===n.id&&null==e.fileUpload.uploadingFiles[t].progressId&&(e.fileUpload.uploadingFiles[t].progressId=e.fileUpload.isContent?null:i,e.fileUpload.uploadingFiles[t].targetElement=r,e.$root.$broadcast(B,e.fileUploadDivId,n,K.CommenceUpload))}),e.fileUploadSettings=this.fileUploadSettingsService.getSettings(),e.initialUpload&&e.fileUpload.uploadFiles([e.initialUpload],!1)}}}Q.$inject=[l.d,c.serviceName,f.b,C.b,"$http",d.b,$.b,"$compile","Upload",T.d,S.b,v.d,w.b,"$q",P.b,A.b,"$sce"],r.module(F,["ngFileUpload",l.a,c.moduleName,f.a,d.a,C.a,I.N,S.c,$.a,"ultra.directives.bbProgress",v.c,w.a,T.b,A.a]).directive(B,["$injector",e=>e.instantiate(Q)])},P2dS:function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),s.d(t,"c",(function(){return h})),s.d(t,"a",(function(){return m}));var n=s("D57K"),i=s("nsO7"),r=s("Llzl"),o=s("pjml"),a=s("aHpC"),l=s("jhBu"),c=s("Sa5G"),d=s("zGdY");const u="ultra.components.services.gradebookColumnCategory.Service",h="gradeColumnCategoryService";let m=class e{constructor(e,t,s,n){this.$q=e,this.$rootScope=t,this.entitlementService=s,this.CourseModel=n,this.categoriesByCourse={}}getIconByGradebookCategory(t,s){let n=null;return null!=t&&(!1!==s&&t!==d.KnownGradebookCategoryTitle.Attendance||t in e.ICON_NAME_BY_CATEGORY_TITLE&&(n=e.ICON_NAME_BY_CATEGORY_TITLE[t]),n||(n=e.DEFAULT_ICON_FOR_CATEGORY)),n}getCategoryIcon(t){let s=e.DEFAULT_ICON_FOR_CATEGORY;return t&&t.title&&(s=this.getIconByGradebookCategory(t.title,t.isUserDefined)),s}loadGradeCategories(e){return this.CourseModel.$new(e).gradebook.categories.$fetch().$asPromise()}getOrLoadCategoriesForCourse(e,t){if((t||!this.categoriesByCourse[e])&&this.userCanViewGradebookCategories(e))return this.loadGradeCategories(e).then(t=>(this.reorderCategories(t,0),this.categoriesByCourse[e]=t,t));const s=this.$q.defer();return s.resolve(this.categoriesByCourse[e]),s.promise}userCanViewGradebookCategories(e){return this.entitlementService.isEntitled(c.n.ViewUserGrades,e)||this.entitlementService.isEntitled(c.n.ViewGradebookMetaData,e)}getFilteredCategoriesForCourse(e,t){return this.getOrLoadCategoriesForCourse(e,!0).then(e=>i.filter(e,t))}updateCategoriesForCourse(e,t){if(this.categoriesByCourse[e]){const s=this.categoriesByCourse[e],n=i.findIndex(s,e=>e.id===t.id);-1===n?s.splice(0,0,t):s.splice(n,1,t)}}deleteCategoriesForCourse(e,t){if(this.categoriesByCourse[e]){const s=this.categoriesByCourse[e],n=i.findIndex(s,e=>e.id===t.id);n>-1&&s.splice(n,1)}}reorderCategories(e,t){const s=e.length;for(let n=t;n<s;++n){const t=e[n];t.isUserDefined&&(e.splice(n,1),e.unshift(t))}}};m.DEFAULT_ICON_FOR_CATEGORY="custom-item",m.ICON_NAME_BY_CATEGORY_TITLE=Object.freeze({[d.KnownGradebookCategoryTitle.Assignment]:"assignment",[d.KnownGradebookCategoryTitle.Attendance]:"attendance",[d.KnownGradebookCategoryTitle.Blog]:"blog",[d.KnownGradebookCategoryTitle.Discussion]:"discussion",[d.KnownGradebookCategoryTitle.Exam]:"exam",[d.KnownGradebookCategoryTitle.Homework]:"homework",[d.KnownGradebookCategoryTitle.Journal]:"journal",[d.KnownGradebookCategoryTitle.Presentation]:"presentation",[d.KnownGradebookCategoryTitle.Quiz]:"quiz",[d.KnownGradebookCategoryTitle.Survey]:"survey",[d.KnownGradebookCategoryTitle.Test]:"test"}),m=Object(n.__decorate)([Object(n.__param)(0,Object(a.b)("$q")),Object(n.__param)(1,Object(a.b)("$rootScope")),Object(n.__param)(2,Object(a.b)(l.b)),Object(n.__param)(3,Object(a.b)(o.m.serviceName))],m);class p extends m{}r.module(u,[l.a]).service(h,m)},P43K:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s("Llzl"),i=s("w9Zy"),r=s("TnpK"),o=s("fYJU"),a=s("pjml"),l=s("qhd3"),c=s("nmzr");const d="ultra.features.base.profile.update.basicProfile.routes";n.module(d,["ui.router",i.d,a.N,r.b]).config([r.c,e=>{e.peekState(c.ProfileRoutes.UPDATE_PROFILE_PEEK,{url:"/update?focusField",require:()=>Promise.all([s.e(28),s.e(69),s.e(132)]).then(s.bind(null,"SqGJ")),pageTitle:"base.profile.update.sectionTitle",resolve:{currentUser:[l.serviceName,o.b,(e,t)=>e.$find(t.userId).$asPromise()]}}).peekState(c.ProfileRoutes.UPDATE_LANGUAGE_PEEK,{url:"/language",require:()=>s.e(667).then(s.bind(null,"Upnn")),pageTitle:"base.profile.updateLanguage.pageTitle",resolve:{currentUser:[l.serviceName,o.b,(e,t)=>e.$find(t.userId).$asPromise()]}})}])},PCGa:function(e,t,s){},PIPc:function(e,t){e.exports='\x3c!-- this button is for screenreader users only and should be placed at the end of an infinite scroll list in the DOM so that they know that more items can be loaded --\x3e\n<button class="sr-only load-more-items"\n        ng-click="infiniteScroll.loadMoreItems()"\n        tabindex="-1"\n        ng-disabled="infiniteScroll.disabled || infiniteScroll.remainingCount <= 0"\n        bb-load-bundle="components/directives/infinite-scroll"\n        bb-translate translate-values="infiniteScroll.loadMoreLocalizationValues"\n        analytics-id="{{::infiniteScroll.localizationKeysPrefix + \'.loadMoreButton.label.plural\'}}">{{::infiniteScroll.localizationKeysPrefix + \'.loadMoreButton.label.plural\'}}</button>\n'},PSJS:function(e,t,s){"use strict";s.r(t),function(e){s.d(t,"MessageLifeCycleEnum",(function(){return c})),s.d(t,"MessageType",(function(){return d})),s.d(t,"serviceName",(function(){return u}));var n=s("nbDY"),i=s.n(n),r=s("yCC5"),o=s("Rjd/"),a=s("nkTj"),l=s("z6Q5");class c extends i.a{}c.Published=new c("PUBLISHED"),c.Deleted=new c("DELETED"),c.Drafted=new c("DRAFT");class d extends i.a{next(){let e=parseInt(this.toString(),10)+1;const t=d.getKeys();return t.length<e&&(e=t.length-1),d[t[e]]}}d.Discussion=new d("0"),d.Comment=new d("1"),d.Reply=new d("2"),d.ClassConversation=new d("3");const u=r.P;o.a.factory(u,["restmod","$q",a.d,l.b,(t,s,n,i)=>{return t.model().mix({replies:{mask:!0},parent:{mask:!0},states:{hasOne:r.F},discussion:{mask:!0},type:{mask:!0},isAvailable:{mask:!0},user:{mask:!0},lastUpdateUser:{mask:!0},ui:{mask:!0,init:()=>({isEdit:!1})},postDate:{serialize:"date"},editDate:{serialize:"date"},"gradedColumn.dueDate":{serialize:"date"},$hooks:{"after-fetch-many":function(){"messages"===this.$scope.$partial&&this.forEach(e=>{e.type=d.Discussion,e.parent=e,e.discussion=e,e.states.readStateInd=e.messageStatus.isRead})},"after-destroy":function(e){e.data&&this.$unwrap(e.data)}},$extend:{Record:{getReplies(e,t){if(t&&0===this.messageStatus.numberOfChildren)return this.replies=this.$scope.$collection(),this.replies.$asPromise=()=>s(e=>e(this.replies)),this.replies;const n=this;return this.$scope.$collection().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/replies",params:{sort:e.sort,limit:e.limit,offset:e.offset,userId:e.userId,groupId:e.groupId,messageLifecycle:e.messageLifecycle}},(function(e){this.$unwrap(e.data),n.replies=this,n.ui.count=e.data.paging.count,this.forEach(e=>{e.type=n.type.next(),e.parent=n,e.discussion=n.discussion,e.states.readStateInd=e.messageStatus.isRead})}))},saveReply(t,s={}){const n=this.$scope.$url()+"/"+this.id+"/replies?"+e.param(s);return this.$scope.$build().$send({method:"POST",url:n,data:t.$wrap()},(function(e){this.$unwrap(e.data),this.replies=this.$scope.$collection()}))},getRepliesCount(t={}){const s=this.$scope.$url()+"/"+this.id+"/replies/count?"+e.param(t),n=this;return this.$scope.$build().$send({method:"GET",url:s},(function(e){n.ui.count=e.data.count}),(function(){n.ui.count=0}))},updateMessageStatus(t,s={}){const n=this.$scope.$url()+"/"+this.id+"/states?"+e.param(s);return this.$scope.$build().$send({method:"PATCH",url:n,data:t.$wrap()},(function(e){return this.states=this.$unwrap(e.data),this.states}),(function(e){400===e.status||e.$response&&e.$response.status}))},copy(e){Object.getOwnPropertyNames(e).filter(e=>"$"!==e[0]).forEach(t=>{this[t]=e[t]})}},Collection:{batchGetReplies(e){let t="?";e&&Object.keys(e).forEach(s=>{t+=s,t+="="+e[s]+"&"});const n=s.defer(),r=[],o=t=>{const n=s.defer();return i.performBatch(()=>{s.all(t.map(t=>t.getReplies(e,!0).$asPromise())).then(n.resolve)}),n.promise.then(e=>(e.forEach((e,s)=>{const n=t[s];e.forEach(e=>{e.type=n.type.next(),e.parent=n,e.discussion=n.discussion,e.states.readStateInd=e.messageStatus.isRead,r.push(e)})}),r))};return o(this).then(o).then(n.resolve),n.promise}}}})}])}.call(this,s("5iHu"))},PZ5L:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-course-not-found.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-course-not-found.description</p>\n    <pre>{{ response | json }}</pre>\n  </div>\n  \x3c!-- htmlhint:analytics-id:disable --\x3e\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.services.error-modal.dismiss.button"\n  >\n    components.services.error-modal.dismiss\n  </button>\n  \x3c!-- htmlhint:analytics-id:enable --\x3e\n</bb-modal>'},PqsU:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-conflict.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-conflict.description</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},"Q/M7":function(e,t,s){"use strict";(function(e){s.d(t,"d",(function(){return i})),s.d(t,"f",(function(){return r})),s.d(t,"g",(function(){return o}));var n=s("RPob");function i(e,t){let s="";return t&&e&&e.isClassic()&&(s=decodeURIComponent(t).trim()),s.length>0&&"/"===s[0]&&s||null}function r(t,s,n){return encodeURIComponent(t+"/"+s+"?"+e.param(n))}function o(e){return Object(n.convertToAbsoluteUrl)("/webapps/blackboard/execute/ultraFramePassThrough?redirectTo="+encodeURIComponent(Object(n.convertToAbsoluteUrl)(e)))}s.d(t,"a",(function(){return n.addParamToUrl})),s.d(t,"b",(function(){return n.buildUrlParamMap})),s.d(t,"c",(function(){return n.convertToAbsoluteUrl})),s.d(t,"e",(function(){return n.extractDomain})),s.d(t,"h",(function(){return n.generateUrlWithForcedDownloadAndDownloadFileNameQueryString})),s.d(t,"i",(function(){return n.getBaseUrl})),s.d(t,"j",(function(){return n.getCurrentBaseUrl})),s.d(t,"k",(function(){return n.getFileNameOrLastPathPartFromUrl})),s.d(t,"l",(function(){return n.getProtocolAgnosticUrl})),s.d(t,"m",(function(){return n.getUrlParameter})),s.d(t,"n",(function(){return n.isUsingSSL})),s.d(t,"o",(function(){return n.openUrl})),s.d(t,"p",(function(){return n.redirectUrl})),s.d(t,"q",(function(){return n.stripProtocol})),s.d(t,"r",(function(){return n.stripQueryAndHash})),s.d(t,"s",(function(){return n.urlContainsHost}))}).call(this,s("5iHu"))},Q74M:function(e,t,s){"use strict";var n;!function(e){e.ViewAdmin="system.admin.VIEW",e.ViewAdminTop="system.administration.top.VIEW",e.ViewAdminSupportPanel="system.admin.support.panel.VIEW",e.ModifyCustomCss="system.ultra.customCSS.MODIFY",e.ViewBrands="system.portaloptions.brand.VIEW",e.CreateBrand="system.portaloptions.brand.CREATE",e.ModifyBrand="system.portaloptions.brand.MODIFY",e.DeleteBrand="system.portaloptions.brand.DELETE"}(n||(n={})),t.a=n},QaOk:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return r}));var n=s("Llzl"),i=s("+4Px");const r="ultra.directives.accessibility.arrowKeyNavigation",o="bb-arrow-key-container",a="bb-arrow-key-destination",l="["+o+"]",c="["+a+"]";class d{constructor(t){this.$parse=t,this.restrict="A",this.link=(t,s,n)=>{const r=this.$parse(n.bbArrowKeyNavigation)(null);if("rows"!==r.layout&&"columns"!==r.layout&&"both"!==r.layout)throw new Error("bb-arrow-key-navigation directive is missing or has an invalid layout specified");if(r.tabDirection&&"vertical"!==r.tabDirection&&"horizontal"!==r.tabDirection)throw new Error("bb-arrow-key-navigation directive has an invalid tabDirection specified");s.on("keydown",t=>{const n=e(t.target);let o=t.keyCode;r.tabDirection&&o===i.u&&("vertical"===r.tabDirection?o=t.shiftKey?i.v:i.d:"horizontal"===r.tabDirection&&(o=t.shiftKey?i.j:i.s)),"rows"===r.layout&&(o=this.rotateKeyCode(o)),r.upEqualsLeft&&(o=this.upEqualsLeftKeyCode(o)),this.navigate(n,s,o,r.wrap,r.explicit)&&(this.body.removeClass("hide-focus-outline"),t.preventDefault(),t.stopPropagation())}),t.$on("$destroy",()=>{s.off()})},this.body=e("body")}navigate(e,t,s,n,r){let d;switch(s){case i.v:if(r){const s=parseInt(e.closest(l).attr("bb-arrow-key-container"),10),i=t.find(this.containerWithValue(s)).find(c).filter(":visible"),r=i.index(e.closest(c));"0"===e.attr("tabindex")||0===r&&!n||(d=i.eq(r-1))}else!(d=e.closest(c).prev(c)).length&&n&&(d=e.closest(l).find(c).last());break;case i.d:if(r){const s=e.closest(l).attr("bb-arrow-key-container"),i=t.find(this.containerWithValue(s)).find(c).filter(":visible"),r=i.index(e.closest(c));!(d=i.eq(r+1)).length&&n&&(d=i.first())}else!(d=e.closest(c).next(c)).length&&n&&(d=e.closest(l).find(c).first());break;case i.j:if(r){const s=parseInt(e.closest(l).attr(o),10),n=e.closest(c).attr(a);d=t.find(this.containerWithValue(s-1)).find(this.destinationWithValue(n)).first()}else{const t=e.closest(c).prevAll(c).length,s=this.getPreviousContainer(e).find(c);s.length?d=s.eq(t).add(s.last()).first():n&&t>0&&(d=e.closest(l).nextAll(l).last().find(c).eq(t))}break;case i.s:if(r){const s=parseInt(e.closest(l).attr(o),10),n=e.closest(c).attr(a);d=t.find(this.containerWithValue(s+1)).find(this.destinationWithValue(n)).first()}else{const t=e.closest(c).prevAll(c).length,s=this.getNextContainer(e).find(c);s.length?d=s.eq(t).add(s.last()).first():n&&(d=e.closest(l).prevAll(l).last().find(c).eq(t))}}return!(!d||!d.length)&&(d.focus(),!0)}containerWithValue(e){return"["+o+'="'+e+'"]'}destinationWithValue(e){return"["+a+'="'+e+'"]'}getPreviousContainer(e){return e.closest(l).prevAll(l).first()}getNextContainer(e){return e.closest(l).nextAll(l).first()}rotateKeyCode(e){switch(e){case i.v:return i.j;case i.d:return i.s;case i.j:return i.v;case i.s:return i.d}}upEqualsLeftKeyCode(e){switch(e){case i.j:return i.v;case i.s:return i.d;default:return e}}}d.$inject=["$parse"],n.module(r,[]).directive("bbArrowKeyNavigation",["$injector",e=>e.instantiate(d)])}).call(this,s("5iHu"))},Qbdf:function(e,t,s){"use strict";var n=s("D57K"),i=s("pjml"),r=s("yC9S"),o=s("ZzR9"),a=s("nsO7"),l=s("zGdY");class c{constructor(){this._cache={},this.hookUserModel=a.once(e=>{const t=this;return this.offHookUserModelFunc||(this.offHookUserModelFunc=e.$mixHook("after-feed",(function(){t.cache(this.id,this)}))),this.offHookUserModelFunc})}destroy(){this._cache={},this.offHookUserModel()}miss(e){return e.filter(e=>!(e in this._cache))}hit(e){const t=[].concat(e),s=this.miss(t);return a.isEmpty(s)}get(e,t){const s=this._cache[e];return!s&&t?t:s}invalidate(e){delete this._cache[e]}cache(e,t){e&&t&&!t.isPlaceHolder&&(this._cache[e]=t)}fetchUsers(e,t,s){const n=s.defer(),i=this.miss([].concat(e));return a.isEmpty(i)?n.resolve(this):(this.offHookUserModelFunc||this.hookUserModel(t),t.findMany(i,{},[l.HttpStatus.NotFound]).$then(e=>{n.resolve(this)})),n.promise}offHookUserModel(){this.offHookUserModelFunc&&(this.offHookUserModelFunc(),this.offHookUserModelFunc=void 0)}}class d extends c{constructor(e){super(),this.courseId=e}}var u=s("aHpC"),h=s("qhd3"),m=s("vYaK"),p=s("0JpG"),g=s("x+T+"),b=s("lVRt"),f=s("PZ5L");s.d(t,"b",(function(){return v})),s.d(t,"e",(function(){return S})),s.d(t,"c",(function(){return y})),s.d(t,"a",(function(){return C})),s.d(t,"d",(function(){return I}));const v="ultra.service.course-context.course",S="currentCourseModel",y=S+"Provider",C=v+"."+S+".changed",I=b.c;let $=class{constructor(e,t,s,n,i,a){this.$q=e,this.$rootScope=t,this.bbLocalize=s,this.entitlementCache=n,this.CourseModel=i,this.UserModel=a;const l=this;r.b.OnRootScope(t,o.b.$stateHasCourseInContextChanged,(e,t,s)=>{s&&!t&&l.clear()})}get courseId(){return this._courseId}get course(){return this._courseModel}get usersCache(){return this._usersCache}load(e){return e?e&&this.courseId===e&&this.course?this.course.$asPromise():this.loadCourse(e).then(t=>this.$q.all([this.loadLocalizationBundle(t),this.entitlementCache.loadCourseEntitlements(e)]).then(()=>(this.update(e,t),this._courseModel)),e=>this.$q.reject(Object.assign(e||{},{goToBasePage:!0}))):this.$q.when(null)}loadCourse(e){return this.CourseModel.$find(e,{expand:"instructorsMembership, instructorsMembership.courseRole, effectiveAvailability, isChild"}).$allow([404]).$asPromise().then(t=>{const s=t.$response;if(s&&404===s.status){const t=new Error("Course "+e+" not found");return Object.assign(t,{goToBasePage:!0,errorModalConfig:{response:s,template:f}}),this.$q.reject(t)}return t})}loadLocalizationBundle(e){let t;return t=e.isClassic()||!e.locale?this.bbLocalize.getLocale(this.$rootScope):e.locale,this.$q.all([this.bbLocalize.loadLocale(t),this.bbLocalize.loadBundle("features/course/course",t)])}clear(){this.update(null,null)}update(e,t){const s=this.courseId,n=this.course;this._courseId=e,this._courseModel=t,this._usersCache&&this._usersCache.courseId!==e&&(this._usersCache.destroy(),this._usersCache=null),e&&(this._usersCache=new d(e),this._usersCache.hookUserModel(this.UserModel)),this.$rootScope.$broadcast(C,{id:e,model:t},{id:s,model:n})}refreshStudentPreviewStatus(){return this._courseModel.studentPreview.$fetch()}};$=Object(n.__decorate)([Object(n.__param)(0,Object(u.b)("$q")),Object(n.__param)(1,Object(u.b)("$rootScope")),Object(n.__param)(2,Object(u.b)(p.serviceName)),Object(n.__param)(3,Object(u.b)(g.c)),Object(n.__param)(4,Object(u.b)(m.serviceName)),Object(n.__param)(5,Object(u.b)(h.serviceName))],$);class w extends ${}const T=[i.N,p.moduleName,g.b];angular.module(v,T).provider(S,class{constructor(){this.$get=["$injector",e=>e.instantiate($)],this.name=I,this.resolve=["$state",S,(e,t)=>{const s=e.nextParams.courseId;return t.load(s)}]}})},RDfZ:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return m}));s("yDoS");var n=s("Llzl"),i=s("Qbdf"),r=s("0JpG"),o=s("pjml"),a=s("lEL+"),l=s("TnpK"),c=s("oNH7"),d=s("H+SH"),u=s("CPVT"),h=s("eQBN");const m="ultra.directives.conversionStatusBar";class p{constructor(t,s,n,i,r,o,a,l,c){this.$scope=t,this.$rootScope=s,this.$q=n,this.$modal=i,this.CourseModel=r,this.ultraState=o,this.contextCourse=a,this.bbLocalize=l,this.timeout=c,this.displayGuidanceBackToClassic=!1,this.identifyCourse().then(e=>{this.course=e,this.courseId=this.course.id,this.showStatusBar=!1,this.course.canConvert()&&(this.showStatusBar=this.course.isUltraPreview())}),t.$on("confirmNewExperience",()=>{this.useTheNewExperience()}),t.$on(h.a,(e,t)=>{this.inPreview=t,this.updateStatusClass(),this.showStatusBar=this.course.isUltraPreview()}),t.$on("$stateChangeSuccess",()=>{this.updateStatusClass()}),t.$on("$destroy",()=>{e("body").removeClass("has-conversion-status-bar")})}get showStatusBar(){return this._showStatusBar}set showStatusBar(e){const t=this._showStatusBar;this._showStatusBar=e,t!==e&&this.updateStatusClass()}updateStatusClass(){!this.showStatusBar||this.hideStatusBar()||this.inPreview?e("body").removeClass("has-conversion-status-bar"):e("body").addClass("has-conversion-status-bar")}identifyCourse(){return this.courseId=this.$scope.courseId?this.$scope.courseId:this.contextCourse.courseId,this.$scope.$parent.course?this.$scope.$parent.course.model.$asPromise():this.CourseModel.$find(this.courseId).$asPromise()}useTheNewExperience(){this.course.setUltraStatusDecided().then(()=>{this.showStatusBar=!1,this.$rootScope.$broadcast("reloadCourse",this.courseId)})}backToClassic(){this.course.undoCourseConversion().then(e=>{const t=e.$response;if(200===t.status)this.ultraState.transitionTo(this.course.getBaseRoute()),this.$rootScope.$broadcast("convertToClassicCourse",this.course.id);else if(400===t.status||404===t.status){this.$modal.open({template:d,scope:this.$scope,resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/outline/course-outline")]}}).result.then(()=>{this.ultraState.transitionTo(this.course.getBaseRoute())})}})}hideStatusBar(){return(this.ultraState.current.name.match(/\.peek\./g)||[]).length>1}}p.$inject=["scope","$rootScope","$q","$modal",o.m.serviceName,l.d,i.e,r.serviceName,a.b];class g{constructor(e){this.$injector=e,this.restrict="E",this.template=c,this.scope={courseId:"@?"},this.link=e=>{e.conversionStatusBarController=this.$injector.instantiate(p,{scope:e})}}}g.$inject=["$injector"],n.module(m,[i.b,r.moduleName,o.N,l.b,a.a,u.a]).directive("bbConversionStatusBar",["$injector",e=>e.instantiate(g)])}).call(this,s("5iHu"))},"RJ/U":function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s("Llzl"),i=s("0JpG"),r=s("TnpK"),o=s("Qbdf"),a=s("nmzr");const l="ultra.course.question-banks.routes";n.module(l,[i.moduleName,r.b,o.b]).config([r.c,o.c,(e,t)=>{e.peekState(a.QuestionBankRoutes.QUESTION_BANKS,{url:"/banks",resolve:{[o.d]:t.resolve,translations:[i.serviceName,e=>e.loadBundle("features/course/question-banks/question-banks")]},peekStates:[a.QuestionBankRoutes.IMPORT_DETAILS,a.QuestionBankRoutes.EDIT_QUESTION_BANK],peekViewName:"question-banks-peek",panelClass:"full",require:()=>Promise.all([s.e(3),s.e(5),s.e(7),s.e(566),s.e(1),s.e(2),s.e(601)]).then(s.bind(null,"lXpl")),pageTitle:"course.question-banks.pageTitle"}).peekState(a.QuestionBankRoutes.IMPORT_DETAILS,{url:"/importDetails/{taskId:_[0-9]+_1}",require:()=>s.e(661).then(s.bind(null,"zGGy")),pageTitle:"course.question-banks.import-details.pageTitle"}).peekState(a.QuestionBankRoutes.EDIT_QUESTION_BANK,{url:"/editBank/{assessmentId}?isNew",peekViewName:"question-bank-edit-peek",panelClass:"full",require:()=>Promise.all([s.e(3),s.e(5),s.e(580),s.e(700)]).then(s.bind(null,"Ryyg")),pageTitle:"course.question-banks.edit-question-bank.pageTitle"})}])},RK4w:function(e,t){e.exports='<bb-modal id="close-without-saving-modal" class="notification"\n          modal-title-key="components.directives.fileUpload.closeDuringUploadTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.closeDuringUploadInstructions</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.closeDuringUploadClose">\n    <bb-translate>components.directives.fileUpload.closeDuringUploadClose</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.closeDuringUploadGoBack">\n    <bb-translate>components.directives.fileUpload.closeDuringUploadGoBack</bb-translate>\n  </button>\n</bb-modal>\n'},RNuw:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("nsO7"),i=s("Llzl");function r(e,t,s,r){const o={};return e.$watchCollection(()=>t,(t,a)=>{const l=Object.keys(t).filter(e=>!Object.prototype.hasOwnProperty.call(o,e)&&t[e]&&Object.prototype.hasOwnProperty.call(t[e],"$viewValue")&&(!r||!(r.indexOf(e)>-1)));i.forEach(l,i=>{o[i]=e.$watch(()=>t[i].$viewValue,(e,r)=>{!t[i].$dirty&&(null==r||Number.isNaN(Number(r)))||n.isEqual(e,r)||s(e,r)})});const c=Object.keys(a).filter(e=>!Object.prototype.hasOwnProperty.call(t,e)&&a[e]&&Object.prototype.hasOwnProperty.call(a[e],"$viewValue"));i.forEach(c,e=>{o[e](),delete o[e]})}),()=>{i.forEach(o,e=>{e()})}}},RRs6:function(e,t,s){var n={"./ar-001/_combined.json":["bzSq",238],"./ar-AE/_combined.json":["kXUs",239],"./ar-BH/_combined.json":["uu8c",240],"./ar-DJ/_combined.json":["AXSJ",241],"./ar-DZ/_combined.json":["d2Tw",242],"./ar-EG/_combined.json":["HU5B",243],"./ar-EH/_combined.json":["Rf/8",244],"./ar-ER/_combined.json":["lMqs",245],"./ar-IL/_combined.json":["sCR2",246],"./ar-IQ/_combined.json":["s69u",247],"./ar-JO/_combined.json":["YeG1",248],"./ar-KM/_combined.json":["Nsqb",249],"./ar-KW/_combined.json":["v7VH",250],"./ar-LB/_combined.json":["4UZ5",251],"./ar-LY/_combined.json":["d5Iy",252],"./ar-MA/_combined.json":["dJ98",253],"./ar-MR/_combined.json":["kPIw",254],"./ar-OM/_combined.json":["QBE7",255],"./ar-PS/_combined.json":["oCQ2",256],"./ar-QA/_combined.json":["Hadl",257],"./ar-SA/_combined.json":["BWYe",258],"./ar-SD/_combined.json":["sZn0",259],"./ar-SO/_combined.json":["/pS2",260],"./ar-SS/_combined.json":["P5MV",261],"./ar-SY/_combined.json":["t6FV",262],"./ar-TD/_combined.json":["0dWw",263],"./ar-TN/_combined.json":["olD4",264],"./ar-YE/_combined.json":["cwri",265],"./ar/_combined.json":["Z7mm",237],"./bg-BG/_combined.json":["lhO/",267],"./bg/_combined.json":["XExx",266],"./ca-AD/_combined.json":["1TTF",269],"./ca-ES-VALENCIA/_combined.json":["x5id",271],"./ca-ES/_combined.json":["OeTV",270],"./ca-FR/_combined.json":["pD9U",272],"./ca-IT/_combined.json":["i92d",273],"./ca/_combined.json":["pXk6",268],"./cs-CZ/_combined.json":["/ACq",275],"./cs/_combined.json":["F5xB",274],"./cy-GB/_combined.json":["aQ0a",277],"./cy/_combined.json":["PtiR",276],"./da-DK/_combined.json":["06Qy",279],"./da-GL/_combined.json":["WpLh",280],"./da/_combined.json":["eYMN",278],"./dav-KE/_combined.json":["ZzyU",282],"./dav/_combined.json":["qiBt",281],"./de-AT/_combined.json":["ESfo",284],"./de-BE/_combined.json":["MZB8",285],"./de-CH/_combined.json":["RKx5",286],"./de-DE/_combined.json":["F/Ao",287],"./de-LI/_combined.json":["ZsKg",288],"./de-LU/_combined.json":["NQwb",289],"./de/_combined.json":["4uqP",283],"./en-001/_combined.json":["YHcT",291],"./en-150/_combined.json":["6nXF",292],"./en-AG/_combined.json":["Ma+m",293],"./en-AI/_combined.json":["Bb4Y",294],"./en-AS/_combined.json":["3DdZ",295],"./en-AU/_combined.json":["+YpM",296],"./en-BB/_combined.json":["0r6j",297],"./en-BE/_combined.json":["MYcT",298],"./en-BM/_combined.json":["Beag",299],"./en-BS/_combined.json":["4GKC",300],"./en-BW/_combined.json":["fyZ5",301],"./en-BZ/_combined.json":["KDbT",302],"./en-CA/_combined.json":["JPNH",303],"./en-CC/_combined.json":["wcBm",304],"./en-CK/_combined.json":["yKBd",305],"./en-CM/_combined.json":["wJ3H",306],"./en-CX/_combined.json":["nv2n",307],"./en-DG/_combined.json":["oaA8",308],"./en-DM/_combined.json":["PVF+",309],"./en-ER/_combined.json":["Ufgi",310],"./en-FJ/_combined.json":["xGrz",311],"./en-FK/_combined.json":["AVBD",312],"./en-FM/_combined.json":["GEpg",313],"./en-GB/_combined.json":["iETG",314],"./en-GD/_combined.json":["BwNK",315],"./en-GG/_combined.json":["m4mR",316],"./en-GH/_combined.json":["Ndt5",317],"./en-GI/_combined.json":["7qmt",318],"./en-GM/_combined.json":["LI3r",319],"./en-GU/_combined.json":["1mog",320],"./en-GY/_combined.json":["4oOp",321],"./en-HK/_combined.json":["kzZH",322],"./en-IE/_combined.json":["cZDf",323],"./en-IM/_combined.json":["FWGY",324],"./en-IN/_combined.json":["8QNH",325],"./en-IO/_combined.json":["Wk71",326],"./en-JE/_combined.json":["hL7Z",327],"./en-JM/_combined.json":["6RUH",328],"./en-KE/_combined.json":["imc3",329],"./en-KI/_combined.json":["ZLwJ",330],"./en-KN/_combined.json":["fY0N",331],"./en-KY/_combined.json":["2bN7",332],"./en-LC/_combined.json":["L5G8",333],"./en-LR/_combined.json":["uAu1",334],"./en-LS/_combined.json":["+9Km",335],"./en-MG/_combined.json":["pkMa",336],"./en-MH/_combined.json":["Pght",337],"./en-MO/_combined.json":["4brt",338],"./en-MP/_combined.json":["f3kU",339],"./en-MS/_combined.json":["Cner",340],"./en-MT/_combined.json":["CB9i",341],"./en-MU/_combined.json":["dcsm",342],"./en-MW/_combined.json":["vx0Y",343],"./en-MY/_combined.json":["4xdO",344],"./en-NA/_combined.json":["XOdH",345],"./en-NF/_combined.json":["3zUU",346],"./en-NG/_combined.json":["XcAH",347],"./en-NR/_combined.json":["1hF2",348],"./en-NU/_combined.json":["Rd4I",349],"./en-NZ/_combined.json":["Thfj",350],"./en-PG/_combined.json":["Pwz4",351],"./en-PH/_combined.json":["cBN5",352],"./en-PK/_combined.json":["Jp8X",353],"./en-PN/_combined.json":["kVcJ",354],"./en-PR/_combined.json":["C79j",355],"./en-PW/_combined.json":["IHQ7",356],"./en-RW/_combined.json":["3+fb",357],"./en-SB/_combined.json":["k36a",358],"./en-SC/_combined.json":["khir",359],"./en-SD/_combined.json":["ugPT",360],"./en-SG/_combined.json":["h5D0",361],"./en-SH/_combined.json":["kWBW",362],"./en-SL/_combined.json":["Dzhg",363],"./en-SS/_combined.json":["RUIe",364],"./en-SX/_combined.json":["wDR3",365],"./en-SZ/_combined.json":["3w4R",366],"./en-TC/_combined.json":["IcK3",367],"./en-TK/_combined.json":["FOhX",368],"./en-TO/_combined.json":["TCjz",369],"./en-TT/_combined.json":["fS+W",370],"./en-TV/_combined.json":["3onS",371],"./en-TZ/_combined.json":["5zt/",372],"./en-UG/_combined.json":["JPX0",373],"./en-UM/_combined.json":["Mb5E",374],"./en-US-POSIX/_combined.json":["jQAd",376],"./en-US/_combined.json":["yTKl",375],"./en-VC/_combined.json":["umMp",377],"./en-VG/_combined.json":["EDFe",378],"./en-VI/_combined.json":["Er4e",379],"./en-VU/_combined.json":["nrZT",380],"./en-WS/_combined.json":["4QLw",381],"./en-ZA/_combined.json":["wCbM",382],"./en-ZM/_combined.json":["/LDK",383],"./en-ZW/_combined.json":["Hw9p",384],"./en/_combined.json":["sNIU",290],"./es-419/_combined.json":["ZPZ1",386],"./es-AR/_combined.json":["Am5Z",387],"./es-BO/_combined.json":["tzf5",388],"./es-CL/_combined.json":["J0SI",389],"./es-CO/_combined.json":["UbmO",390],"./es-CR/_combined.json":["qt+y",391],"./es-CU/_combined.json":["QE7f",392],"./es-DO/_combined.json":["HYau",393],"./es-EA/_combined.json":["KcLf",394],"./es-EC/_combined.json":["S0/D",395],"./es-ES/_combined.json":["lVSm",396],"./es-GQ/_combined.json":["wsbn",397],"./es-GT/_combined.json":["OLUC",398],"./es-HN/_combined.json":["WoHz",399],"./es-IC/_combined.json":["n6S2",400],"./es-MX/_combined.json":["VjBw",401],"./es-NI/_combined.json":["gmAL",402],"./es-PA/_combined.json":["wD63",403],"./es-PE/_combined.json":["mjzo",404],"./es-PH/_combined.json":["QFbx",405],"./es-PR/_combined.json":["mQ8Z",406],"./es-PY/_combined.json":["1vOg",407],"./es-SV/_combined.json":["BCZi",408],"./es-US/_combined.json":["0mEl",409],"./es-UY/_combined.json":["AZ1f",410],"./es-VE/_combined.json":["Bfc6",411],"./es/_combined.json":["Iutf",385],"./fi-FI/_combined.json":["FkZD",413],"./fi/_combined.json":["JvJC",412],"./fr-BE/_combined.json":["Tkl0",415],"./fr-BF/_combined.json":["cxwg",416],"./fr-BI/_combined.json":["zeJq",417],"./fr-BJ/_combined.json":["al0q",418],"./fr-BL/_combined.json":["4cKm",419],"./fr-CA/_combined.json":["WBM3",420],"./fr-CD/_combined.json":["wmPG",421],"./fr-CF/_combined.json":["RhSx",422],"./fr-CG/_combined.json":["iqMf",423],"./fr-CH/_combined.json":["hUD0",424],"./fr-CI/_combined.json":["D+DA",425],"./fr-CM/_combined.json":["D5cn",426],"./fr-DJ/_combined.json":["a28n",427],"./fr-DZ/_combined.json":["0dq+",428],"./fr-FR/_combined.json":["6gRC",429],"./fr-GA/_combined.json":["7pVJ",430],"./fr-GF/_combined.json":["76IO",431],"./fr-GN/_combined.json":["FiR1",432],"./fr-GP/_combined.json":["j8tI",433],"./fr-GQ/_combined.json":["Kkty",434],"./fr-HT/_combined.json":["Celw",435],"./fr-KM/_combined.json":["VOt+",436],"./fr-LU/_combined.json":["d9qI",437],"./fr-MA/_combined.json":["fK3G",438],"./fr-MC/_combined.json":["PRyJ",439],"./fr-MF/_combined.json":["wbFQ",440],"./fr-MG/_combined.json":["VTW6",441],"./fr-ML/_combined.json":["fHIT",442],"./fr-MQ/_combined.json":["Fxzu",443],"./fr-MR/_combined.json":["bVZY",444],"./fr-MU/_combined.json":["uqex",445],"./fr-NC/_combined.json":["UU7a",446],"./fr-NE/_combined.json":["3i7k",447],"./fr-PF/_combined.json":["OujE",448],"./fr-PM/_combined.json":["HUZ+",449],"./fr-RE/_combined.json":["/OY7",450],"./fr-RW/_combined.json":["u1qL",451],"./fr-SC/_combined.json":["lkww",452],"./fr-SN/_combined.json":["5U+s",453],"./fr-SY/_combined.json":["lYx8",454],"./fr-TD/_combined.json":["wOiP",455],"./fr-TG/_combined.json":["F0gJ",456],"./fr-TN/_combined.json":["1qTE",457],"./fr-VU/_combined.json":["kGPb",458],"./fr-WF/_combined.json":["nN8O",459],"./fr-YT/_combined.json":["8MCW",460],"./fr/_combined.json":["foK4",414],"./ga-IE/_combined.json":["eG2/",462],"./ga/_combined.json":["s8KT",461],"./he-IL/_combined.json":["sMz+",464],"./he/_combined.json":["cQ2g",463],"./it-CH/_combined.json":["fzun",466],"./it-IT/_combined.json":["P9b0",467],"./it-SM/_combined.json":["NYQX",468],"./it/_combined.json":["/GVn",465],"./ja-JP/_combined.json":["/K1E",470],"./ja/_combined.json":["QmgJ",469],"./ko-KP/_combined.json":["IOaT",472],"./ko-KR/_combined.json":["7gcV",473],"./ko/_combined.json":["wQWN",471],"./kok-IN/_combined.json":["ICiQ",475],"./kok/_combined.json":["9ycP",474],"./ms-Latn-BN/_combined.json":["22hl",478],"./ms-Latn-MY/_combined.json":["ZuP2",479],"./ms-Latn-SG/_combined.json":["e91u",480],"./ms-Latn/_combined.json":["ukDk",477],"./ms/_combined.json":["s6EQ",476],"./nb-NO/_combined.json":["1R50",482],"./nb-SJ/_combined.json":["8W6M",483],"./nb/_combined.json":["9xWY",481],"./nl-AW/_combined.json":["O/ru",485],"./nl-BE/_combined.json":["i+Bd",486],"./nl-BQ/_combined.json":["T2Ti",487],"./nl-CW/_combined.json":["9yzq",488],"./nl-NL/_combined.json":["iCPS",489],"./nl-SR/_combined.json":["Zt0n",490],"./nl-SX/_combined.json":["kWFG",491],"./nl/_combined.json":["7I+W",484],"./nn-NO/_combined.json":["FQcW",493],"./nn/_combined.json":["B4Kb",492],"./pl-PL/_combined.json":["R1Tu",495],"./pl/_combined.json":["kVtb",494],"./pt-AO/_combined.json":["B3/k",497],"./pt-BR/_combined.json":["1X4n",498],"./pt-CV/_combined.json":["iEac",499],"./pt-GW/_combined.json":["/Ul8",500],"./pt-MO/_combined.json":["p9ZG",501],"./pt-MZ/_combined.json":["XskY",502],"./pt-PT/_combined.json":["MDaI",503],"./pt-ST/_combined.json":["OvaG",504],"./pt-TL/_combined.json":["wSWv",505],"./pt/_combined.json":["VMFA",496],"./ru-BY/_combined.json":["iiA/",507],"./ru-KG/_combined.json":["IZwx",508],"./ru-KZ/_combined.json":["YFdG",509],"./ru-MD/_combined.json":["UW08",510],"./ru-RU/_combined.json":["jUNN",511],"./ru-UA/_combined.json":["OYM5",512],"./ru/_combined.json":["rJfS",506],"./sv-AX/_combined.json":["BHCm",514],"./sv-FI/_combined.json":["oV3l",515],"./sv-SE/_combined.json":["9OhI",516],"./sv/_combined.json":["Q4W9",513],"./th-TH/_combined.json":["l+x3",518],"./th/_combined.json":["3Oph",517],"./tr-CY/_combined.json":["v8bW",520],"./tr-TR/_combined.json":["jg1M",521],"./tr/_combined.json":["C2yj",519],"./vi-VN/_combined.json":["5jb1",523],"./vi/_combined.json":["RzWr",522],"./zh-Hans-CN/_combined.json":["XLN1",526],"./zh-Hans-HK/_combined.json":["v9E7",527],"./zh-Hans-MO/_combined.json":["4fh/",528],"./zh-Hans-SG/_combined.json":["ZXIt",529],"./zh-Hans/_combined.json":["KSkj",525],"./zh-Hant-HK/_combined.json":["4hpr",531],"./zh-Hant-MO/_combined.json":["CAr/",532],"./zh-Hant-TW/_combined.json":["A9p9",533],"./zh-Hant/_combined.json":["eH5n",530],"./zh/_combined.json":["1qkM",524]};function i(e){if(!s.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],i=t[0];return s.e(t[1]).then((function(){return s.t(i,3)}))}i.keys=function(){return Object.keys(n)},i.id="RRs6",e.exports=i},ReOc:function(e,t,s){"use strict";var n=s("nsO7"),i=s("NI+y"),r=s("Q/M7"),o=s("5MwF");const a="site id unavailable, no context provided",l="user id unavailable, no context provided";t.a=new class{getHistory(){return i.b.getHistory()}getSiteId(){return this.context?this.context.getSystemInfo().siteId:null}getUserAgent(){return navigator.userAgent}getUser(){return this.userService?this.userService.userModel:null}init(e,t,s,n){this.context=e,this.userService=t,i.b.setStorage(s,n)}async getDebugInfoRaw(){const e=this.getUser(),t=await this.getHistory();return{userAgent:this.getUserAgent(),siteId:this.getSiteId(),siteDomain:r.j(),buildNumber:o.a.buildInfo.buildNumber,ultraVersion:o.a.buildInfo.ultraVersion,learnVersion:o.a.buildInfo.learnVersion,userId:e?e.id:null,userName:e?e.userName:null,analyticsHistory:t,generatedTime:(new Date).toUTCString()}}async getDebugInfoFriendly(){const e=await this.getDebugInfoRaw(),t=[],s={innerHeight:null,innerWidth:null,outerHeight:null,outerWidth:null};let i=!1;return t.push("===== Basic Session Info ===="),t.push(`Debug Exported at: ${e.generatedTime}`),t.push(`User Agent: ${e.userAgent}`),t.push(`Site Domain: ${e.siteDomain}`),t.push(`Build Number: ${e.buildNumber}`),t.push(`Ultra Version: ${e.ultraVersion}`),t.push(`Learn Version: ${e.learnVersion}`),e.siteId?t.push(`Learn Site ID: ${e.siteId}`):t.push(`Learn Site ID: ${a}`),e.userId?t.push(`User: ${e.userName} (${e.userId})`):t.push(`User: ${l}`),t.push("===== Recent Analytics History (oldest first) ====="),e.analyticsHistory.forEach(e=>{e.screenDimension&&!n.isEqual(s,e.screenDimension)&&(t.push(`${e.timestamp}: Screen Size ${i?"changed to ":"is "} ${e.screenDimension.innerHeight} x ${e.screenDimension.innerWidth}`),Object.assign(s,e.screenDimension),i=!0),"click"===e.action?t.push(`${e.timestamp}: clicked on ${e.analyticsId}`):"pageview"===e.action?t.push(`${e.timestamp}: navigated to ${e.analyticsId}`):"request error"===e.action&&t.push(`${e.timestamp}: Request error: ${e.analyticsId}`)}),t}}},"Rjd/":function(e,t,s){"use strict";s("QLzv"),s("qY1S");var n=s("Llzl"),i=s("nkTj"),r=s("z6Q5");const o=n.module("ultra.models",["restmod","angular-data.DSCacheFactory",i.e,r.a]);t.a=o},SBFF:function(e,t){e.exports='<div ng-show="isShown" class="guidance-container stop-click-propagation" aria-hidden="true">\n  <p ng-show="title" ng-transclude="title" class="guidance-title"></p>\n  <p ng-transclude></p>\n</div>'},SGFZ:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return o}));var n=s("Llzl"),i=s("Fvsw"),r=s("TnpK");const o="ultra.components.directives.ultraState.peekSref";class a{constructor(t,s,n,i){this.$parse=t,this.uiSrefDirective=s,this.ultraState=n,this.context=i,this.restrict=this.uiSrefDirective[0].restrict,this.scope=!0,this.require=this.uiSrefDirective[0].require,this.link=(t,s,n,i)=>{const r=this.$parse(n.bbPeekSref)(t)||n.bbPeekSref,o=s.closest("[data-base-state-name]").data("baseStateName")||this.context.basePage;this.ultraState.getPeekStateName(r,o).then(r=>{n.uiSref=r,this.uiSrefDirective[0].compile(s,n,void 0)(t,s,n,i),n.bbPreventRoutingClick&&s.bind("click",t=>{e(t.target).closest(n.bbPreventRoutingClick).length>0&&t.preventDefault()})})}}}a.$inject=["$parse","uiSrefDirective",r.d,i.b],n.module(o,["ui.router",i.a,r.b]).directive("bbPeekSref",["$injector",e=>e.instantiate(a)])}).call(this,s("5iHu"))},Sa5G:function(e,t,s){"use strict";var n=s("nbDY"),i=s.n(n);class r extends i.a{}r.Text=new r("textBlock"),r.Html=new r("htmlBlock"),r.File=new r("fileBlock"),r.AttemptFile=new r("attemptFileBlock");var o=r;class a extends i.a{static stringToEnum(e){let t=null;switch(e){case a.SingleText.toString():t=a.SingleText;break;case a.SingleFile.toString():t=a.SingleFile;break;default:t=a.TextAndFiles}return t}}a.SingleText=new a("SingleText"),a.SingleFile=new a("SingleFile"),a.TextAndFiles=new a("TextAndFiles");class l extends i.a{getOptionValue(){switch(this){case l.Add:return"+";case l.Subtract:return"-";case l.Multiply:return"*";case l.Divide:return"/";case l.Open_Parenthesis:return"(";case l.Close_Parenthesis:return")";case l.Value:return"value"}}}l.Add=new l("ADD"),l.Subtract=new l("SUBTRACT"),l.Multiply=new l("MULTIPLY"),l.Divide=new l("DIVIDE"),l.Open_Parenthesis=new l("OPEN_PARENTHESIS"),l.Close_Parenthesis=new l("CLOSE_PARENTHESIS"),l.Value=new l("VALUE");s("7CA4");var c=s("Y3OE"),d=s("pqmn");class u extends i.a{constructor(e,t){super(e),this.keys=t,this.keys.buttonKey||(this.keys.buttonKey="base.courses.conversion.ok")}}u.ConversionInProgress=new u("ConversionInProgress",{titleKey:"base.courses.conversion.beingConverted",bodyKey:"base.courses.conversion.mayTakeAwhile",ariaAlertKey:"base.courses.conversion.beingConvertedAlert"}),u.ConversionComplete=new u("ConversionComplete",{titleKey:"base.courses.conversion.hasBeenConverted",bodyKey:"base.courses.conversion.clickToSeeNewCourse",buttonKey:"base.courses.conversion.seeNewExperience",ariaAlertKey:"base.courses.conversion.hasBeenConvertedAlert"}),u.OrgConversionInProgress=new u("OrgConversionInProgress",{titleKey:"base.organizations.conversion.beingConverted",bodyKey:"base.courses.conversion.mayTakeAwhile",ariaAlertKey:"base.organizations.conversion.beingConvertedAlert"}),u.OrgConversionComplete=new u("OrgConversionComplete",{titleKey:"base.organizations.conversion.hasBeenConverted",bodyKey:"base.organizations.conversion.clickToSeeNewCourse",buttonKey:"base.courses.conversion.seeNewExperience",ariaAlertKey:"base.organizations.conversion.hasBeenConvertedAlert"}),u.StudentTryAgain=new u("StudentTryAgain",{titleKey:"base.courses.noAccess.studentCurrentlyNoAccess",bodyKey:"base.courses.noAccess.studentTryAgain"}),u.StudentNoLongerAccessible=new u("StudentNoLongerAccessible",{titleKey:"base.courses.noAccess.studentCourseHasEnded",bodyKey:"base.courses.noAccess.studentNoLongerAccess"}),u.ParticipantTryAgain=new u("ParticipantTryAgain",{titleKey:"base.organizations.noAccess.studentCurrentlyNoAccess",bodyKey:"base.organizations.noAccess.studentTryAgain"}),u.ParticipantNoLongerAccessible=new u("ParitcipantNoLongerAccessible",{titleKey:"base.organizations.noAccess.studentCourseHasEnded",bodyKey:"base.organizations.noAccess.studentNoLongerAccess"}),u.None=new u("None",{titleKey:"",bodyKey:""});var h=u,m=s("lCpV");class p extends i.a{}p.Assignment=new p("Assignment"),p.Test=new p("Test"),p.Exam=new p("Exam"),p.Homework=new p("Homework"),p.Presentation=new p("Presentation"),p.Quiz=new p("Quiz");class g extends i.a{}g.Letter=new g("Letter"),g.Percentage=new g("Percentage"),g.Points=new g("Points"),g.Text=new g("Text");var b=s("dtd2");class f extends i.a{}f.Email=new f("email"),f.Mobile=new f("mobile"),f.SMS=new f("sms"),f.Voice=new f("voice"),f.Dashboard=new f("dashboard");var v=f;s("bzJv");class S extends i.a{}S.Available=new S("AVAILABLE"),S.Opened=new S("OPENED"),S.Started=new S("STARTED"),S.Saved=new S("SAVED"),S.Submitted=new S("SUBMITTED");var y,C=S;s("KiLF");!function(e){e.SingleOccurrence="S",e.PeriodicOccurrence="P"}(y||(y={}));var I,$=y;!function(e){e.ViewPostedCourseAnnouncement="course.announcements.VIEW",e.ViewUnpostedCourseAnnouncement="course.announcements.admin.VIEW",e.CreateCourseAnnouncement="course.announcements.CREATE",e.ModifyCourseAnnouncement="course.announcements.MODIFY",e.DeleteCourseAnnouncement="course.announcements.DELETE",e.ViewPostedSystemAnnouncement="system.announcements.VIEW",e.ViewUnpostedSystemAnnouncement="system.announcements.admin.VIEW",e.CreateSystemAnnouncement="system.announcements.CREATE",e.ModifySystemAnnouncement="system.announcements.MODIFY",e.DeleteSystemAnnouncement="system.announcements.DELETE"}(I||(I={}));var w,T=I,E=s("nawZ");!function(e){e.ViewCalendar="course.calendar.VIEW"}(w||(w={}));var k,P=w;!function(e){e.CreateContent="course.content.CREATE",e.DeleteContent="course.content.DELETE",e.ModifyContent="course.content.MODIFY",e.ViewContent="course.content.VIEW",e.ViewAsDesigner="course.content.designer.VIEW",e.DeployAssessment="course.content.assessment.deploy.EXECUTE",e.ModifyContentAvailability="course.content.availability.MODIFY"}(k||(k={}));var A,R,O=k,D=s("Z+K4");!function(e){e.CourseExportArchiveWithPassword="course.archive.user.password.EXECUTE"}(A||(A={})),function(e){e.CreateRubrics="course.rubrics.CREATE",e.ModifyRubrics="course.rubrics.MODIFY",e.ViewRubrics="course.rubrics.VIEW"}(R||(R={}));var _,N=R;!function(e){e.EmailAllUsers="course.email-all-users.EXECUTE"}(_||(_={}));var L,M=_,x=s("d2bc");!function(e){e.CreateGroups="course.groups.CREATE",e.DeleteGroups="course.groups.DELETE",e.ModifyGroups="course.groups.MODIFY",e.ViewGroups="course.groups.VIEW",e.ViewGroupsAsAdmin="course.groups.admin.VIEW",e.ManageGroupMembership="course.group-user.manage.EXECUTE"}(L||(L={}));var j,G=L;!function(e){e.Modify="content.embedded-iframe.MODIFY"}(j||(j={}));var U,F=j,B=s("Q74M");!function(e){e.CreatePortalOptionsModuleManagement="system.portaloptions.managemodules.CREATE",e.ModifyPortalOptionsModuleManagement="system.portaloptions.managemodules.MODIFY",e.ViewBrand="system.portaloptions.brand.VIEW",e.CreateBrand="system.portaloptions.brand.CREATE",e.ModifyBrand="system.portaloptions.brand.MODIFY",e.DeleteBrand="system.portaloptions.brand.DELETE",e.ModifyUltraThemeData="system.ultra.themedata.MODIFY",e.ViewBuildingBlock="system.buildingblocks.VIEW"}(U||(U={}));var q,H=U;!function(e){e.ModifyContent="content.trustedcontent.MODIFY"}(q||(q={}));var z=q;s.d(t,"c",(function(){return o})),s.d(t,"f",(function(){return c.a})),s.d(t,"g",(function(){return d.a})),s.d(t,"h",(function(){return h})),s.d(t,"l",(function(){return m.a})),s.d(t,"p",(function(){return b.a})),s.d(t,"q",(function(){return v})),s.d(t,"u",(function(){return C})),s.d(t,"r",(function(){return $})),s.d(t,"a",(function(){return T})),s.d(t,"b",(function(){return E.a})),s.d(t,"d",(function(){return P})),s.d(t,"e",(function(){return O})),s.d(t,"i",(function(){return D.a})),s.d(t,"j",(function(){return A})),s.d(t,"k",(function(){return N})),s.d(t,"m",(function(){return M})),s.d(t,"n",(function(){return x.a})),s.d(t,"o",(function(){return G})),s.d(t,"w",(function(){return F})),s.d(t,"s",(function(){return B.a})),s.d(t,"t",(function(){return H})),s.d(t,"v",(function(){return z}))},SeO5:function(e,t){e.exports='<bb-modal id="content-deleted-modal"\n          class="notification"\n          modal-title-key="base.stream.modal.accessDenied.title"\n          analytics-id-tag-prefix="base.stream.modal.accessDenied">\n  <div name="modal-contents">\n    <p bb-translate>base.stream.modal.accessDenied.body</p>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="$parent.$close()" bb-translate analytics-id="global.ok">global.ok</button>\n</bb-modal>\n'},Si89:function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return h}));var n=s("D57K"),i=s("Llzl"),r=s("5MwF"),o=s("aHpC"),a=s("fYJU"),l=s("emI2"),c=s("wQOJ"),d=s("TnpK");const u="ultra.service.context.landingPage",h="landingPageService";let m=class{constructor(e,t,s,n,i,r){this.$q=e,this.$timeout=t,this.currentUser=s,this.preferences=n,this.institutionApi=i,this.ultraState=r}navigateToLandingPage(){return this.getLandingPage().then(e=>this.ultraState.go(e))}getLandingPage(){return this.currentUser.userModel.$asPromise().then(e=>e.isGuest()?this.convertLandingPageToRoute():this.preferences.getPreference("ultraui.first.time.welcome.welcome.visited").then(()=>this.convertLandingPageToRoute(),e=>404===e.$response.status?r.a.features.devtools_disableFtue?this.convertLandingPageToRoute():"welcome":this.convertLandingPageToRoute()))}convertLandingPageToRoute(){return this.currentUser.userModel.$asPromise().then(e=>{switch(e.landingPage){case"ActivityStream":return"base.recentActivity";case"InstitutionPage":return this.getInstitutionPageRoute();case"CourseList":return"base.courses";default:return"base.recentActivity"}})}getInstitutionPageRoute(){const e=this.$q.defer(),t=this.$timeout(()=>e.resolve("base.recentActivity"),6e3);return this.institutionApi.getHealth().then(()=>this.institutionApi.getEffectiveVariantIdWithPermissions()).then(({canEdit:e,canView:t})=>e?"base.institution-page-admin":t?"base.institution-page":"base.recentActivity").catch(()=>"base.recentActivity").then(s=>{this.$timeout.cancel(t),e.resolve(s)}),e.promise}};m=Object(n.__decorate)([Object(n.__param)(0,Object(o.b)("$q")),Object(n.__param)(1,Object(o.b)("$timeout")),Object(n.__param)(2,Object(o.b)(a.b)),Object(n.__param)(3,Object(o.b)(l.c)),Object(n.__param)(4,Object(o.b)(c.b)),Object(n.__param)(5,Object(o.b)(d.d))],m);class p extends m{}i.module(u,[a.a,l.b,c.a,d.b]).service(h,m)},Sjpn:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("Llzl"),i=s("TnpK");const r="ultra.features.base.profile.privacy.routes";n.module(r,["ui.router",i.b]).config([i.c,e=>{e.peekState("privacy",{url:"/privacy",require:()=>Promise.all([s.e(28),s.e(27),s.e(625)]).then(s.bind(null,"0OB5")),pageTitle:"base.profile.updatePrivacySettings.pageTitle"})}])},TAnh:function(e,t,s){"use strict";var n=s("Llzl"),i=s("4GL6"),r=s("e6jQ"),o=s("usTV");s.d(t,"a",(function(){return a}));const a="ultra.components.directives.squareToggle";class l{constructor(e,t,s){this.scope=e,this.element=t,this.attrs=s,this.radioGroupName=r.a(),this.oneControlId=r.a(),this.twoControlId=r.a()}handleKeyUp(e){13!==e.keyCode&&32!==e.keyCode||(this.scope.property=e.target.value)}handleClick(e){this.scope.property=e.target.value}}l.$inject=["scope","element","attrs"];class c{constructor(e){this.$injector=e,this.restrict="E",this.template=o,this.scope={oneIconClass:"@",oneAriaLabel:"@",oneAriaControls:"@?",oneViewValue:"@",oneTooltipTemplate:"@?",oneTooltipScope:"&?",property:"=",twoIconClass:"@",twoAriaLabel:"@",twoAriaControls:"@?",twoViewValue:"@",twoTooltipTemplate:"@?",twoTooltipScope:"&?",analyticsIdTagPrefix:"@?"},this.compile=(e,t)=>(n.isDefined(t.oneTooltipTemplate)&&e.find("input.input-one").attr("bb-complex-tooltip",""),n.isDefined(t.twoTooltipTemplate)&&e.find("input.input-two").attr("bb-complex-tooltip",""),{post:(e,t,s)=>{e.squareToggle=this.$injector.instantiate(l,{scope:e,element:t,attrs:s})}})}}c.$inject=["$injector"],n.module(a,[i.b]).directive("bbSquareToggle",["$injector",e=>e.instantiate(c)])},TB6y:function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));var n=s("D57K"),i=(s("9RbK"),s("cf0z"),s("KCTV"),s("aHpC")),r=s("5iHu"),o=s("nsO7"),a=s("Llzl"),l=s("e6jQ"),c=s("lUN/"),d=s("lEL+"),u=s("+4Px"),h=s("7+Tq"),m=s("d7QB");const p="ultra.directives.bbFoundation";window.Foundation.libs.dropdown.dirs._base=function(e){var t,s;const n=this.offsetParent().offset(),i=e.offset();i.top-=n.top,i.left-=n.left,i.missRight=!1,i.missTop=!1,i.missLeft=!1,i.leftRightFlag=!1;const r=null!==(s=null===(t=this.closest(".panel-wrap")[0])||void 0===t?void 0:t.clientWidth)&&void 0!==s?s:window.innerWidth,o=(window.innerWidth-r)/2;let a=r;if(!this.hasClass("mega")){const t=this.outerWidth(),s=e.offset();s.top<=this.outerHeight()&&(i.missTop=!0,a=window.innerWidth-o,i.leftRightFlag=!0),s.left-o+t>r?(i.missRight=!0,i.missLeft=!1):s.left-o-t<=0&&(i.missLeft=!0,i.missRight=!1)}return this.toggleClass("miss-right",i.missRight),this.toggleClass("miss-left",i.missLeft),i};const g=window.Foundation.libs.dropdown.dirs.bottom;window.Foundation.libs.dropdown.dirs.bottom=function(e,t){var s;const n=window.Foundation.libs.dropdown,i=g.call(this,e,t);return!n.rtl||(null===(s=e[0].dataset)||void 0===s?void 0:s.defaultPositioning)?i:this.offsetParent()[0]===e.offsetParent()[0]?{...i,left:0}:{...i,left:e.offset().left}};const b=window.Foundation.libs.dropdown.dirs.right;window.Foundation.libs.dropdown.dirs.right=function(e,t){const s=window.Foundation.libs.dropdown,n=b.call(this,e,t);return s.rtl?{...n,left:n.left-e.outerWidth()}:n};const f=window.Foundation.libs.dropdown.adjust_pip;window.Foundation.libs.dropdown.adjust_pip=function(e,...t){e.hasClass("disable-pip-adjustment")||f.apply(this,[e,...t])};const v=(e,t,s,n)=>{e.$on("$destroy",()=>{window.Foundation.scope===t[0]&&(window.Foundation.scope=null),o.forEach(window.Foundation.libs,e=>{e.scope===t[0]&&(e.scope=null),delete e.bindings,delete e.settings.callback})});["small","small-only","medium","medium-only","large","large-only","xlarge","xlarge-only","xxlarge"].forEach(e=>{window.Foundation.media_queries[e]=r(".foundation-mq-"+e).css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")}),c.a();const i=e=>{e.each((t,n)=>{const i=r(n),o=i.hasClass("active"),a=i.children("a").first(),l=i.children(".content").first(),c=r("body");l.attr("aria-hidden",!o+""),a.attr({"aria-selected":o,"aria-expanded":o});const d=i.find(':tabbable[role!="tab"]').add(i.find('[tabindex="-1"]')).add(i.find("input")).not(i.children("a").first());o?d.attr("tabindex",0):d.attr("tabindex","-1"),s||(a.on("keydown",s=>{if(s.keyCode===u.v||s.keyCode===u.j){const s=0===t?e.length-1:t-1;r(e.get(s)).children("a").first().focus()}else if(s.keyCode===u.d||s.keyCode===u.s){const s=t===e.length-1?0:t+1;r(e.get(s)).children("a").first().focus()}else s.keyCode===u.i?r(e.get(0)).children("a").first().focus():s.keyCode===u.e&&r(e.get(e.length-1)).children("a").first().focus();c.removeClass("hide-focus-outline")}),l.on("keydown",s=>{if(s.ctrlKey&&s.keyCode===u.v)a.focus();else if(s.ctrlKey&&s.keyCode===u.q){const s=0===t?e.length-1:t-1;r(e.get(s)).children("a").first().focus()}else if(s.ctrlKey&&s.keyCode===u.p){const s=t===e.length-1?0:t+1;r(e.get(s)).children("a").first().focus()}c.removeClass("hide-focus-outline")})),i.addClass("accordion-complete")})},a=t.find(".accordion");a.length>0&&a.each((e,t)=>{const s=r(t),n=s.find(".accordion-navigation:not(.accordion-complete)");s.attr("role","tablist"),n.each((t,s)=>{const n=r(s),i=n.children("a").first(),o=n.children(".content").first();i.attr("role","tab"),o.attr("role","tabpanel");const a=l.a(),c="accordion"+e+"-"+a+"-header"+t,d="accordion"+e+"-"+a+"-panel"+t;i.attr("id",c),o.attr("id",d),i.attr("href","#"+d),i.attr("aria-controls",d),o.attr("aria-labelledby",c)}),i(n)}),n(t,e),t.foundation({accordion:{multi_expand:!0,callback:e=>{e.closest(".accordion").removeAttr("aria-multiselectable");const t=e.closest(".accordion").children(".accordion-navigation");i(t)}},dropdown:{}})};let S=class{constructor(e,t){this.dropdownInit=e,this.integrationEventEmitterService=t,this.onDestroyHandler=null,this.restrict="A",this.link=(e,t,s)=>{this.onDestroyHandler=this.integrationEventEmitterService.addIntegrationEventClickListener(t);const n=e.$eval(s.rubricOverride);e.$on("$destroy",()=>{this.onDestroyHandler&&this.onDestroyHandler()}),v(e,t,n,this.dropdownInit)},this.onDestroyHandler=null}};S=Object(n.__decorate)([Object(n.__param)(0,Object(i.b)(h.b)),Object(n.__param)(1,Object(i.b)(m.b))],S);let y=class{constructor(e,t,s){this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=s,this.onDestroyHandler=null,this.restrict="A",this.link=(e,t,s)=>{this.onDestroyHandler=this.integrationEventEmitterService.addIntegrationEventClickListener(t);const n=e.$eval(s.rubricOverride);e.$on("$destroy",()=>{this.onDestroyHandler&&this.onDestroyHandler()}),this.timeout(()=>{v(e,t,n,this.dropdownInit)},e,0,!1)},this.onDestroyHandler=null}};y=Object(n.__decorate)([Object(n.__param)(0,Object(i.b)(d.b)),Object(n.__param)(1,Object(i.b)(h.b)),Object(n.__param)(2,Object(i.b)(m.b))],y);let C=class{constructor(e,t,s){this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=s,this.onDestroyHandler=null,this.restrict="A",this.link=(e,t,s)=>{this.onDestroyHandler=this.integrationEventEmitterService.addIntegrationEventClickListener(t);const n=e.$eval(s.rubricOverride);e.$on("$destroy",()=>{this.onDestroyHandler&&this.onDestroyHandler()});const i=e.$watch(s.bbFoundationWait,s=>{s&&(i(),this.timeout(()=>{v(e,t,n,this.dropdownInit)},e,0,!1))})}}};C=Object(n.__decorate)([Object(n.__param)(0,Object(i.b)(d.b)),Object(n.__param)(1,Object(i.b)(h.b)),Object(n.__param)(2,Object(i.b)(m.b))],C);let I=class{constructor(e,t,s){this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=s,this.onDestroyHandler=null,this.restrict="A",this.link=(e,t,s)=>{this.onDestroyHandler=this.integrationEventEmitterService.addIntegrationEventClickListener(t);const n=e.$eval(s.rubricOverride);e.$on("$destroy",()=>{this.onDestroyHandler&&this.onDestroyHandler()}),e.$watch(s.bbFoundationWaitContinuous,s=>{s&&this.timeout(()=>{v(e,t,n,this.dropdownInit)},e,0,!1)},null!=s.bbDeepWatch&&s.bbDeepWatch)}}};I=Object(n.__decorate)([Object(n.__param)(0,Object(i.b)(d.b)),Object(n.__param)(1,Object(i.b)(h.b)),Object(n.__param)(2,Object(i.b)(m.b))],I),a.module(p,[d.a,h.a,m.a]).directive("bbFoundation",["$injector",e=>e.instantiate(S)]).directive("bbFoundationDefer",["$injector",e=>e.instantiate(y)]).directive("bbFoundationWait",["$injector",e=>e.instantiate(C)]).directive("bbFoundationWaitContinuous",["$injector",e=>e.instantiate(I)])},TFjq:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification error-something-broke-modal"\n          modal-title-key="components.services.error-modal.error-something-broke.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-something-broke">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-something-broke.description</p>\n    <pre>{{ response | json }}</pre>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          class="button large reload-page-button js-primary-button"\n          onclick="location.reload(true)"\n          analytics-id="components.services.error-modal.reloadPage"\n          bb-translate>components.services.error-modal.reloadPage</button>\n</bb-modal>\n'},TT9l:function(e,t,s){"use strict";var n=s("ERkP"),i=s("7nmT"),r=s("e6jQ"),o=s("v6Sp");const a=()=>{const[e]=n.useState(Object(r.b)()),[t,s]=n.useState(!1),i=n.useRef();return n.createElement("div",{ref:i,className:`course-banner-integration-container${t?"":" no-integration-content"}`},n.createElement(o.d,{portalId:e,selector:"course.banner.top",onContentsChanged:e=>{s(!!e),i.current.dispatchEvent(new CustomEvent("banner-resize",{bubbles:!0}))}}))};s.d(t,"a",(function(){return l}));const l=new class{constructor(){this.subscriptions=[],this.createBanner=()=>{if(this.currentBanner)return this.currentBanner;const e=document.createElement("div");return i.render(n.createElement(a,null),e),this.currentBanner=e,this.notifySubscribers(),this.currentBanner},this.destroyBanner=()=>{this.currentBanner?(i.unmountComponentAtNode(this.currentBanner),this.currentBanner=null,this.notifySubscribers()):console.warn("There is no integration banner present to unmount.")},this.currentPanelBanner=()=>{if(this.bannerStack.length)return this.bannerStack[this.bannerStack.length-1].state},this.pushBanner=e=>{this.bannerStack.push(e),1!==this.bannerStack.length&&this.bannerStack[this.bannerStack.length-2].orphan()},this.popBanner=e=>{this.bannerStack=this.bannerStack.filter(t=>t.state.stateName!==e),this.bannerStack.length?this.bannerStack[this.bannerStack.length-1].adopt(this.currentBanner):this.destroyBanner()},this.bannerStack=[]}watchBanner(e){return this.subscriptions.push(e),setTimeout(()=>e(this.currentBanner)),()=>this.subscriptions=this.subscriptions.filter(t=>t!==e)}notifySubscribers(){this.subscriptions.forEach(e=>e(this.currentBanner))}}},TWlR:function(e,t,s){"use strict";var n=s("td+C"),i=s("fN3Q");const r=5e3,o={includeProcessingEvent:!0};class a{constructor(e,t,s,n){this.integrationService=e,this.generateId=t,this.activeMessages=new Map,this.integrationService.addIntegrationMessageType(`${s}:response`,this.correlatedMessageResponseCallback.bind(this)),n.includeProcessingEvent&&this.integrationService.addIntegrationMessageType(`${s}:processing`,this.correlatedMessageProcessingCallback.bind(this))}sendMessage(e,t){return new Promise((s,n)=>{const i=this.generateId(),o=this.createMessageTimeout(i,n);this.integrationService.sendMessage({...e,correlationId:i,timeout:r},t),this.activeMessages.set(i,{integrationId:t,timeoutId:o,resolvePromise:s,rejectPromise:n})})}correlatedMessageResponseCallback(e,t){const s=this.getCorrelatedMessage(e,t.id);s&&(this.activeMessages.delete(e.correlationId),window.clearTimeout(s.timeoutId),s.resolvePromise(e))}correlatedMessageProcessingCallback(e,t){const s=this.getCorrelatedMessage(e,t.id);s&&(window.clearTimeout(s.timeoutId),s.timeoutId=this.createMessageTimeout(e.correlationId,s.rejectPromise))}createMessageTimeout(e,t){return window.setTimeout(()=>{this.activeMessages.delete(e);const s=`Correlated message '${e}' timed out`;console.warn(s),t(new Error(s))},r)}getCorrelatedMessage(e,t){const s=e.correlationId,n=this.activeMessages.get(s);return n?n.integrationId!==t?(console.error(`Correlated message '${s}' does not belong to '${t}'`),null):n:(console.error(`Couldn't find a correlated message with correlation id '${s}'`),null)}}t.a=(e,t={})=>new a(n.a,i.v4,e,{...o,...t})},Tfg2:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.zipTitle"\n          modal-dismiss-key="components.directives.fileUpload.takeMeBack"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.zipFull</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" role="button" ng-click="fileUpload.closeModal(true)" class="button js-primary-button" analytics-id="components.directives.fileUpload.unzipFile">\n    <bb-translate>components.directives.fileUpload.unzipFile</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" role="button" ng-click="fileUpload.closeModal(false)" class="button button--secondary js-secondary-button" analytics-id="components.directives.fileUpload.uploadAsZip">\n    <bb-translate>components.directives.fileUpload.uploadAsZip</bb-translate>\n  </button>\n</bb-modal>\n'},TnpK:function(e,t,s){"use strict";(function(e){s.d(t,"b",(function(){return $})),s.d(t,"d",(function(){return w})),s.d(t,"c",(function(){return T})),s.d(t,"a",(function(){return k}));s("JzsJ"),s("KUD0");var n=s("nsO7"),i=s("Llzl"),r=s("yC9S"),o=s("t6zR"),a=s("0JpG"),l=s("yA26"),c=s("w9Zy"),d=s("5MwF"),u=s("Fvsw"),h=s("lVRt"),m=s("jhBu"),p=s("lEL+"),g=s("k9iv"),b=s("ZzR9"),f=s("Q/M7"),v=s("Y+9S"),S=s("ORAk"),y=s("TT9l"),C=s("nmzr"),I=s("6fZB");const $="ultra.router",w="ultraState",T=w+"Provider",E="DefaultBasePage",k=".peek.";function P(e){e&&Object.keys(e).forEach(t=>{const s=e[t];Array.isArray(s)&&(e[t]=Array.from(new Set(s)),1===e[t].length&&(e[t]=s[0]))})}function A(e,t){const s=/^(\^)?(\??)(\w+)/.exec(e),n={searchParents:!1,optional:!1,name:t};return s&&(n.searchParents="^"===s[1],n.optional="?"===s[2],n.name=s[3]?s[3]:t),n}function R(e){if(n.isString(e))return e;const t=e[e.length-1];return n.isString(t)?t:""}class O{constructor(t,s){this.$stateProvider=t,this.addedStates={},this.initAllStates=!1,this.$get=["$rootScope","$state","$injector","$sce","$window",c.e,u.b,E,p.b,g.d,(t,s,n,i,a,l,c,u,h,m)=>{this.$state=s,this.$rootScope=t,this.defaultBasePage=u,this.context=c,this.timeout=h;const p=this.baseStates.map(e=>e.name);if(r.b.OnRootScope(t,b.b.$stateChangeSuccess,(e,t)=>{a.top===a.self&&-1!==p.indexOf(t.name)&&(c.basePage=t.name,sessionStorage.setItem(o.a.getBasePageStorageKey(),c.basePage))}),r.b.OnRootScope(t,b.b.$stateChangeSuccess,(e,t,s,n,i)=>{if(n.name&&t.name&&n.name.split(k).length<t.name.split(k).length)return;const r=""===n.name,o=n.panelClass||"peek",a=t.panelClass||"peek";this.timeout(()=>{"peek"!==o||"full"!==a||r||l.expandTopPanel(),"full"===o&&"peek"===a&&l.shrinkTopPanel()},this.$rootScope,0,!1)}),r.b.OnRootScope(t,b.b.$stateChangeStart,(e,t,i,r,o)=>{s.next=t,P(i),s.nextParams=i,r&&(s.prev={name:r.name}),P(o),s.prevParams=o,t.routingFunction&&(e.preventDefault(),n.invoke(t.routingFunction))}),r.b.OnRootScope(t,b.b.$stateChangeError,(t,n,r,o,a,l)=>{if(l.errorModalConfig&&m.openModal(l.modalConfig),l&&l.userNotEntitled)s.go(u);else if(l.goToBasePage)s.goCurrentBasePage();else{if(f.m("inPreviewMode",window.location.href)){const t=i.trustAsResourceUrl(f.c(`/ultra/courses/${s.nextParams.courseId}/outline/?inPreviewMode=true`));e(window.parent.document).find("#preview-iframe").attr("src",t)}if(!d.a.production)throw console.error("$stateChangeError when moving from "+o.name+" to "+n.name),l}}),this.initAllStates)this.createAllStates();else{this.registerPeekStates(s.get(this.defaultBasePage));const e=s.get(sessionStorage.getItem(o.a.getBasePageStorageKey())||this.defaultBasePage);e&&e.name!==this.defaultBasePage&&this.registerPeekStates(e)}return s}],this.baseStates=[],this.peekStates={},this.absoluteUrls=[],t.decorator("resolve",(function(e,t){const s=t?t(e):e.resolve;return s.childrenStates&&s.childrenStates.length>0&&s.childrenStates.push(n.once(s.childrenStates.pop())),s})),t.decorator("resolve",(function(e,t){const s=t?t(e):e.resolve;for(let e of Object.keys(s)){const t=s[e],i=A(e,e);i.optional&&(delete s[e],s[e=i.name]=t);const r=R(t);if(r){const t=A(r,e);t.searchParents?s[e]=[t.name,e=>e&&e.isLazy?e():e]:console.error("Illegal resolve format. Did you forget to prepend ^?")}if(i.optional){const t=s[e],i=t.slice?t.slice(0,t.length-1):[];s[e]=["$injector",...i,(e,...s)=>{const r=n.once(()=>{const n={};for(let e=0;e<i.length;e++)n[i[e]]=s[e];return e.invoke(t,void 0,n)});return r.isLazy=!0,r}]}}return s})),t.decorator("url",(function(e,t){const n=t(e);return n&&(n.exec=function(t,...r){const o=this.regexp.source;new RegExp(o.substr(0,o.length-1)+"/").test(t)&&s.invoke(e.resolve.childrenStates||[i.noop]);const a=r?[t].concat(r):[t];return n.constructor.prototype.exec.apply(this,a)}),n})),(e=>{const s=this;t.state=function(...t){return s.addedStates["string"==typeof t[0]?t[0]:t[0].name]=!0,e.apply(this,t)}})(t.state)}baseState(e,t){return window.top!==window&&f.m("inPreviewMode",window.location.href)&&(t.require=()=>s.e(703).then(s.bind(null,"shLZ")),t.peekViewName=void 0),t=this.getStateWithName(e,t),this.baseStates.push(t),(t.resolve=t.resolve||{}).childrenStates=[()=>{this.registerPeekStates(t)}],this.$stateProvider.state(t),this}peekState(e,t){const s=(t=this.getStateWithName(e,t)).name.split(".")[0];return this.peekStates[s]=this.peekStates[s]&&this.peekStates[s].concat(t)||[t],this}state(e,t){return t=this.getStateWithName(e,t),this.$stateProvider.state(t),this}registerPeekStates(e){if(e&&e.peekStates){const t={};if(t.name=e.name+".peek",!Object.prototype.hasOwnProperty.call(this.addedStates,t.name)&&null==this.$state.get(t.name)){let n;t.onExit=[c.e,w,(e,s)=>{n&&y.a.popBanner(t.name),e.close(t.name)}],t.resolve={offCanvasArgs:[w,s=>{const i=O.getPanelStateNameFromNextState(s.next.name,t.name),r=s.get(i),o=y.a.currentPanelBanner(),a=o&&"full"!==o.panelClass&&"full"===r.panelClass;return(2===i.split(k).length||a)&&(n=y.a.createBanner()),{banner:n,panelClass:r&&r.panelClass||"peek",pageTitle:r&&r.pageTitle,template:S.replace("{0}",this._getPanelName(e)),close:()=>(this.$rootScope.bbOffcanvasOpened&&s.go(e.name),!1),stateName:t.name,overlay:null==r||null==r.overlay||r.overlay}}]},e.peekViewName?(t.views={},t.views[e.peekViewName]={require:()=>Promise.resolve().then(s.bind(null,"yA26"))}):t.require=()=>Promise.resolve().then(s.bind(null,"yA26")),this.$stateProvider.state(t)}this.createAllPeekStates(e,e.peekStates)}}createAllPeekStates(e,t){const s=e.name+k;t.forEach(t=>{(this.peekStates[t]||[]).forEach(t=>{this._checkAbsoluteUrl(t);const n=s+t.name;if(Object.prototype.hasOwnProperty.call(this.addedStates,n)||null!=this.$state.get(n))return;const r=i.copy(t);r.name=n,r.abstract||(r.urlHandler=["$location",w,"$match",(t,s,i)=>{const r=e=>{const t=e.split("."),s=n.split(".");return t.forEach((e,t)=>{s[t]=e}),s.join(".")};if(null!=s.$current.navigable&&!s.includes(e.name))return!1;{let e;e=this._isAbsoluteUrl(t.url())?r(sessionStorage.getItem(o.a.getBasePageStorageKey())||this.defaultBasePage):n,null==s.get(e)&&(e=r(this.defaultBasePage)),s.$current.name!==e&&s.transitionTo(e,i,{location:!1})}}]),r.views||(r.views={},r.views[this._getPanelName(e)]={template:r.template,controller:r.controller,require:r.require}),delete r.template,delete r.controller,delete r.require,r.getPageTitle&&(r.pageTitle=r.getPageTitle());const a=()=>{r.peekStates&&r.peekStates.length>0&&("full"===r.panelClass||r.allowChildPeekStates?this.registerPeekStates(r):this.createAllPeekStates(e,r.peekStates))};if(this.initAllStates)this.$stateProvider.state(r),a();else{(r.resolve=r.resolve||{}).childrenStates=[a],this.$stateProvider.state(r),r.peekStates&&r.peekStates.length>0&&"full"!==r.panelClass&&!r.allowChildPeekStates&&this.createAllPeekStates(e,r.peekStates)}})})}static getPanelStateNameFromNextState(e,t){const s=e.indexOf(k,t.length);return-1!==s?e.substr(0,s):e}_getPanelName(e){return e.name.split(".").join("-").concat("-panel@")}_checkAbsoluteUrl(e){if(e.url&&0===e.url.indexOf("^")){const t=e.url.match(/\/:[a-zA-Z]+/);let s=e.url;t&&(s=s.substring(0,t.index));const n=(s=s.substring(1)).match(/\(\?:([^\)]*)/);n?n[1].split("|").forEach(e=>{this.absoluteUrls.push(`/${e}`)}):-1===this.absoluteUrls.indexOf(s)&&this.absoluteUrls.push(s)}}_isAbsoluteUrl(e){return n.find(this.absoluteUrls,t=>0===e.indexOf(t))}createAllStates(){this.baseStates&&this.baseStates.length>0&&this.baseStates.forEach(e=>{this.registerPeekStates(e)})}createAllStatesOnInit(){this.initAllStates=!0}getStateWithName(e,t){return i.isObject(e)?t=e:t.name=e,this._initStateEntitlements(t),t}_initStateEntitlements(e){this._initSystemEntitlementChecks(e),this._initCourseEntitlementChecks(e)}_initSystemEntitlementChecks(e){e.systemEntitlement&&(e.resolve||(e.resolve={}),e.resolve.systemEntitlement=["$q",m.b,(t,s)=>s.hasSystemEntitlement(e.systemEntitlement).then(this._configureStateChangeCallback(t))])}_configureStateChangeCallback(e){return t=>{const s=e.defer();return t?s.resolve():s.reject({userNotEntitled:!0}),s.promise}}_ensureCourseIdParam(e,t){return t.nextParams.courseId?e.resolve():e.reject("Cannot check course entitlements when the state does not have a courseId parameter.")}_guardEntitlementInjectable(e){const t=Array.isArray(e)?e.slice(0,e.length-1):[];return["$q","$injector",w,...t,(s,i,r,...o)=>{const a=n.zipObject(t,o);return this._ensureCourseIdParam(s,r).then(()=>{try{return i.invoke(e,void 0,a)}catch(e){return s.reject(e)}}).then(this._configureStateChangeCallback(s)).catch(()=>s.reject({userNotEntitled:!0}))}]}_getDefaultEntitlementInjectable(e){return[m.b,w,(t,s)=>"string"==typeof e?t.hasCourseEntitlement(e,s.nextParams.courseId):t.hasAnyCourseEntitlement(e,s.nextParams.courseId)]}_initCourseEntitlementChecks(e){let t;e.courseEntitlement&&(t=this._getDefaultEntitlementInjectable(e.courseEntitlement)),e.resolve&&Object.prototype.hasOwnProperty.call(e.resolve,"courseEntitlement")&&(t=e.resolve.courseEntitlement),t&&(e.resolve||(e.resolve={}),e.resolve.courseEntitlement=this._guardEntitlementInjectable(t))}}O.$inject=["$stateProvider","$injector"];class D extends O{}i.module($,["ui.router","oc.lazyLoad",u.a,c.d,l.moduleName,p.a]).provider(w,O).constant(E,d.a.defaultBasePage).config(["$provide","$ocLazyLoadProvider",(e,t)=>{e.decorator("$state",["$injector","$delegate","$resolve","$q","$$animateJs","$ocLazyLoad",u.b,c.e,(e,t,s,r,o,l,d,u)=>{t.goPeekState=(...e)=>u.getTopElement().then(s=>{const n=s&&s.name||d.basePage;return t.getPeekStateName(e[0],n).then(s=>(e[0]=s,t.go.apply(t,e)))}),t.leavePeekState=e=>{null==e&&(e=t.current.name);const s=e.lastIndexOf(k);return-1!==s?t.go(e.substring(0,s)):r.when()},t.peekHref=(e,s,n)=>{return(n?r.when(new c.a(null,null,n)):u.getTopElement()).then(i=>(n=i&&i.name||d.basePage,t.getPeekStateName(e,n).then(e=>t.href(e,s))))},t.isPeekPanelOpen=()=>-1!==t.current.name.indexOf(".peek."),t.getPeekStateName=(s,n)=>n===d.basePage?r.when(n+k+s):u.getElement(n).then(()=>{const e=O.getPanelStateNameFromNextState(t.current.name,n),i=e.lastIndexOf(k),r=t.current.name.substring(i+k.length).split(".")[0],o=s.split(".")[0];if(r===o)return t.current.name.substring(0,i+k.length)+s;const a=s.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),l=new RegExp("(^|\\.)"+a+"(\\.|$)");let c=e.search(l);if(-1!==c){const t=new RegExp("(^|\\.)"+a+"(\\.)");return c=e.search(t)?c+1:c,e.substring(0,c+s.length)}const d=t.get(e);return"full"===d.panelClass||d.allowChildPeekStates&&-1!==d.peekStates.indexOf(o)?e+k+s:e.substring(0,i+k.length)+s}).then(s=>{const n=function(s){if(!t.get(s.join("."))){const e=s.pop();n(s),s.push(e)}e.invoke((t.get(s.join("."))&&t.get(s.join(".")).resolve||{}).childrenStates||[i.noop])};return n(s.replace(/\n/g,"").replace(/(^[^\(\)]*)\(.*\)$/,"$1").split(".")),s}),t.goCurrentBasePage=()=>t.go(t.getBaseState()),t.goToRoute=(e,s)=>t.go(e,s),t.getBaseState=()=>d.basePage,t.search=(e,s,n)=>{const r=t.params;if(i.isString(e)&&s?r[e]=s:Object.keys(e).forEach(t=>{r[t]=e[t]}),t.current.name)return t.go(t.current.name,r,n)},t.getCurrentUrlParams=()=>{const e=t.$current.url.parameters(),s=Object.create(null);return e.forEach(e=>{t.params[e]&&(s[e]=t.params[e])}),s},t.requireAllStates=function(){const e=this,t=this.get(),s=[];return t.forEach(t=>{t&&null!=t.name&&s.push(e.requireState(t.name))}),r.all(s)},t.requireState=function(e){const t=this,s=e.split("."),o=[];for(let e=0;e<s.length;e++)o.push(s.slice(0,e+1).join("."));const c=()=>{const e=o.shift();if(null==e)return!0;const s=t.get(e);if(!s)return c();let d=[];const u=[];if(s.require&&(i.isArray(s.require)||(s.require=[s.require]),d=d.concat(s.require),u.push(s)),s.views&&i.isObject(s.views)&&Object.keys(s.views).forEach(e=>{const t=s.views[e];t.require&&(i.isArray(t.require)||(t.require=[t.require]),d=d.concat(t.require),u.push(t))}),d.length<1)return c();const h=r.defer(),m=[],p=new Map,g=d.map(e=>e().then(t=>(p.set(e,t),t)));return r.all(n.compact(g)).then(()=>{u.forEach(e=>{i.isArray(e.require)&&(e.require.forEach(t=>{const n=p.get(t),r=n.panelDefinition||{},o=r&&r.moduleName||n.moduleName;o&&m.push(l.load({name:o}));const c=r&&r.template||n.template;c&&!e.template&&(e.template=c);const d=r&&r.templateProvider||n.templateProvider;d&&(e.templateProvider=d);const u=r&&r.controllerName||n.controllerName;u&&!e.controller&&(e.controller=u);const h=r&&r.resolve;h&&(e.resolve=i.extend(e.resolve||{},h));const g=r&&r.translations;g&&(e.resolve=i.extend(e.resolve||{},{loadedTranslations:["$q",a.serviceName,(e,t)=>e.all(g.map(e=>t.loadBundle(e)))]}));const b=r&&r.pageTitle;b&&!s.pageTitle&&(s.pageTitle=b)}),e.require=!1)}),r.all(n.compact(m)).then(()=>{h.resolve(c())},e=>{h.reject(e)})},e=>{h.reject(e)}),h.promise};return c()};const m=t.transitionTo;t.transitionTo=function(...e){const t=this;let s=e[0];return i.isObject(s)&&(s=s.self.name),r.all([this.requireState(s)]).then(()=>m.apply(t,e))};const p=t.href;t.href=(e,t,s)=>p(e,t,i.extend(s||{},{absolute:!0})),t.getCurrentResolvedValues=function(){return t.$current&&t.$current.locals&&t.$current.locals.resolve?t.$current.locals.resolve.$$values:{}};const g=(e,s)=>{if(!s||!s.name)return!1;if(e===h.c&&"resolve"in s&&e in s.resolve)return!0;if(e===h.b&&"resolve"in s&&e in s.resolve)return!0;const i=t.get(n.dropRight(s.name.split(".")).join("."));return g(e,i)};return t.hasCourseInContext=e=>g(h.c,e),t.hasContentInContext=e=>g(h.b,e),C.router.setRouteHandler(function(e){return{goPeekState:(t,...s)=>Object(I.a)(e.goPeekState(t,...s)),goToRoute:(t,s)=>Object(I.a)(e.goToRoute(t,s)),leavePeekState:t=>Object(I.a)(e.leavePeekState(t)),getPeekHref:(t,s,n)=>Object(I.a)(e.peekHref(t,s,n)),getHref:(t,s,n)=>e.href(t,s,n),search:(t,s)=>Object(I.a)(e.search(t,null,s))}}(t)),t}])}]),i.module($).run(["$rootScope",w,u.b,E,function(e,t,s,n){const i=sessionStorage.getItem(o.a.getBasePageStorageKey());s.basePage=i||n,e.$on(b.b.$stateChangeSuccess,(s,n,i,r,o)=>{const a=t.hasCourseInContext(r),l=t.hasCourseInContext(n);a!==l&&e.$broadcast(b.b.$stateHasCourseInContextChanged,l,a);const c=t.hasContentInContext(r),d=t.hasContentInContext(n);c!==d&&e.$broadcast(b.b.$stateHasContentInContextChanged,d,c);const u=n.name&&Object(v.fetchState)(n.name),h=r.name&&Object(v.fetchState)(r.name);Object(v.notifyPeekStateChangeToMobile)(u,h)})}])}).call(this,s("5iHu"))},U8wS:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("Llzl"),i=s("5MwF"),r=s("TnpK");const o="ultra.data-ui.routes";n.module(o,[r.b]).config([r.c,e=>{e.baseState("base.dataUi",{url:"^/data-ui",require:()=>s.e(664).then(s.bind(null,"gNT0")),onEnter:[r.d,e=>{i.a.production&&e.go("base.not-found")}]})}])},UD9g:function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"c",(function(){return d})),s.d(t,"a",(function(){return u}));var n=s("nsO7"),i=s("Llzl"),r=s("0JpG"),o=s("pjml"),a=s("TnpK"),l=s("3bn4");const c="ultra.course.engagement.course-no-grade-content-goal-alignment",d="ultra.course.engagement.course-no-grade-content-goal-alignment.service",u="no-grade-content-goal-alignment",h=["course","goal-alignment","goal"];class m extends l.a{constructor(){super(...arguments),this.panelClass="peek no-grade-content-goal-peek"}resolveGoalAlignableContent(){return["$q",r.serviceName,"$injector",a.d,o.m.serviceName,(e,t,s,n,i)=>{let r,o,a=null;return n.nextParams&&n.nextParams.contentId&&(a=n.nextParams.contentId),n.nextParams&&n.nextParams.id&&(a=n.nextParams.id),a&&"create"!==a?i.$find(n.nextParams.courseId).$asPromise().then(e=>(r=e,e.contents.$find(a).$asPromise())).then(e=>{o=e}).then(()=>e.all([r.contents.$find(o.id,{expand:"alignedGoals,permissions"}).$asPromise(),t.loadBundle(`features/${h.join("/")}`)]).then(([e])=>this.groupGoals(r.contents.$buildRaw(e),t))):e.when([])}]}getPeekStateName(){return u}groupGoals(e,t){let s="alignedGoalsDefaultTitle";return e.isDiscussion()?s="goalsAlignedWithDiscussion":e.isDocument()?s="goalsAlignedWithDocument":e.isFile()?s="goalsAlignedWithFile":e.isLink()?s="goalsAlignedWithLink":e.isLtiLink()&&(s="goalsAlignedWithLtiLink"),[{getContentTitleForGoalAlignment:()=>t.translateSync({locale:null,key:`${h.join(".")}.${s}`}),getContentIdForGoalAlignment:i.bind(e,e.getContentIdForGoalAlignment),isCurrentUserEligibleToAlignGoals:i.bind(e,e.isCurrentUserEligibleToAlignGoals),alignedGoals:e.alignedGoals?e.alignedGoals.map(t=>(t.content=e,t)):[],coreContent:e}]}getOverrideSubTitle(){return[a.d,o.m.serviceName,(e,t)=>{let s=null;return e.nextParams&&e.nextParams.contentId&&(s=e.nextParams.contentId),e.nextParams&&e.nextParams.id&&(s=e.nextParams.id),s?t.$find(e.nextParams.courseId).$asPromise().then(e=>e.contents.$find(s).$asPromise()).then(e=>e.title):""}]}}m.$inject=["$injector","$q"],i.module(c,[a.b,r.moduleName]).config([a.c,e=>{const t=new m;e.peekState(t.getPeekStateName(),t)}]).service(d,["$injector",r.serviceName,function(e){return{resolveGoalAlignableContents:()=>e.invoke((new m).resolveGoalAlignableContent(),null,{}).then(e=>[e,n.flatten(n.compact(e.map(e=>e.alignedGoals))).length])}}])},UP3t:function(e,t){e.exports='<div class="bb-course-catalog-link" ng-if="shouldDisplayCatalogLink">\n  <a href="javascript:void(0);"\n     class="catalog-anchor-tag"\n     ng-if="!isExternalCatalog"\n     ng-click="handleCatalogLink()"\n     course-org-token-resolver\n     aria-label="{{ariaLabel}}"\n     analytics-id="base.baseCourses.courseCatalog.link">\n    <span ng-if="windowSizeService.isLargeBreakpoint()">\n      <bb-translate course-org-token-resolver>base.baseCourses.link</bb-translate>\n      <bb-svg-icon class="catalog-icon-large-breakpoint" size="medium" icon="programs" />\n    </span>\n    <bb-svg-icon class="catalog-icon-small-breakpoint" size="small" icon="course_catalog_default" ng-if="!windowSizeService.isLargeBreakpoint()" />\n  </a>\n  <a class="catalog-anchor-tag"\n     ng-if="isExternalCatalog"\n     href="{{ ::externalCatalogUrl }}"\n     target="_blank"\n     rel="noopener noreferrer"\n     course-org-token-resolver\n     bb-translate-attrs="{\'aria-label\': \'base.baseCourses.aria-label.externalLink\'}"\n     analytics-id="base.baseCourses.courseCatalog.externalLink.link">\n    <span ng-if="windowSizeService.isLargeBreakpoint()">\n      <bb-translate course-org-token-resolver>base.baseCourses.externalLink</bb-translate>\n      <bb-svg-icon class="catalog-icon-large-breakpoint" size="medium" icon="programs" />\n    </span>\n    <bb-svg-icon class="catalog-icon-small-breakpoint" size="small" icon="course_catalog_default" ng-if="!windowSizeService.isLargeBreakpoint()" />\n  </a>\n</div>\n'},UiBk:function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));var n=s("Llzl"),i=s("0JpG"),r=s("Qbdf"),o=s("36CG"),a=s("X455"),l=s("8W6D"),c=s("p7NW"),d=s("2Tae"),u=s("TnpK"),h=s("gkef"),m=s("nmzr");const p="ultra.course.rubrics.router";n.module(p,[i.moduleName,u.b,h.a,d.b,r.b,o.d,a.a]).config([u.c,r.c,a.b,o.e,(e,t,n,o)=>{e.peekState(m.Routes.Rubric.RUBRIC,{abstract:!0,url:"/rubric",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/services/rubric"),t.loadBundle("features/course/goal-alignment/goal")])],[r.d]:t.resolve,mode:()=>l.a.NONE}}).peekState(m.Routes.Rubric.RUBRIC_MODE,{url:"?rubricId&mode",panelClass:"full",pageTitle:"course.rubric.title",peekStates:[d.a],peekViewName:"rubric-grid-peek@",require:()=>Promise.all([s.e(73),s.e(0),s.e(1),s.e(2),s.e(68),s.e(571)]).then(s.bind(null,"gAA+")),resolve:{currentRubric:[r.d,c.g,u.d,(e,t,s)=>{switch(s.nextParams&&s.nextParams.mode.toLowerCase()){case l.a.CREATE.toString():return t.generateDefaultRubric(e);case l.a.EDIT.toString():return s.nextParams.rubricId?e.rubrics.$find(s.nextParams.rubricId,{expand:"rows.alignedGoals,permissions"}).$asPromise():null;case l.a.COPY.toString():return e.rubrics.$find(s.nextParams.rubricId,{expand:"rows.alignedGoals,permissions"}).$asPromise().then(e=>t.createRubricCopy(e));default:return null}}],hasEvaluations:["currentColumn",u.d,(e,t)=>{return(t.nextParams&&t.nextParams.mode.toLowerCase())===l.a.EDIT.toString()&&(e?e.hasEvaluations():null)}],mode:[u.d,e=>{switch(e.nextParams&&e.nextParams.mode.toLowerCase()){case l.a.CREATE.toString():return l.a.CREATE;case l.a.EDIT.toString():return l.a.EDIT;case l.a.COPY.toString():return l.a.COPY;default:return l.a.NONE}}]}}).peekState(m.Routes.Rubric.RUBRIC_EVALUATION,{url:"/rubric-evaluation?userId&columnId",panelClass:"peek",pageTitle:"course.rubricEvaluation.title",params:{columnId:null,groupId:null,userId:{array:!1}},require:()=>Promise.all([s.e(12),s.e(720)]).then(s.bind(null,"nWWf")),resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/services/rubric")])],[a.c]:n.resolve,offCanvasArgs:["offCanvasArgs",h.b,(e,t)=>(e.overlay=!t.isLargeBreakpoint(),e)]}}).peekState(m.Routes.Rubric.RUBRIC_VIEW,{url:"/rubric-view?columnId",panelClass:"peek",pageTitle:"course.rubricView.title",params:{columnId:null},require:()=>Promise.all([s.e(12),s.e(721)]).then(s.bind(null,"L8+l")),resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/directives/rubric/rubric-view"),t.loadBundle("components/services/rubric")])],offCanvasArgs:["offCanvasArgs",h.b,(e,t)=>(e.overlay=!t.isLargeBreakpoint(),e)]}})}])},UioO:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("Llzl"),i=s("0JpG");const r="ultra.components.directives.bbDatetime";class o{constructor(e,t,s){this.$parse=e,this.$q=t,this.bbLocalize=s,this.restrict="E",this.scope={value:"&"},this.link=(e,t,s)=>{const r=s.format,o=s.timezoneFormat;e.$watch(()=>e.value(),s=>{let a=i.ILocaleDatetimeFormat.Short,l=i.ILocaleTimezoneFormat.Short;if(!n.isDate(s))return t.html("");if(r&&(a=this.bbLocalize.getFormatEnum(i.ILocaleDatetimeFormat,r)),o&&(l=this.bbLocalize.getFormatEnum(i.ILocaleTimezoneFormat,o)),r&&o)this.bbLocalize.translate({locale:this.bbLocalize.getLocale(e),key:`components.directives.datetime.datetimeWithTimezone.${r.toUpperCase()}_datetime_${o.toUpperCase()}_timezone`,params:{datetime:s},noWrap:!0,noEscape:!0}).then(e=>{t.html(e)});else{(o?this.bbLocalize.formatTimezone(s,l):this.bbLocalize.formatDatetime(s,a,e)).then(e=>{t.html(e)})}},!0)}}}o.$inject=["$parse","$q",i.serviceName];class a extends o{}n.module(r,[i.moduleName]).directive("bbDatetime",["$injector",e=>e.instantiate(o)])},Us01:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("Llzl"),i=s("0JpG");const r="ultra.directives.bbTranslate";class o{constructor(e,t,s,i,r,o,a,l,c){if(this.$parse=e,this.$rootScope=t,this.bbLocalize=s,this.$interpolate=i,this.scope=r,this.iElement=o,this.iAttr=a,this.rawKey=l,this.translateValuesExist=c,this.interpolateParams={},this.analyticsIdSet=!1,this.intSym="{{",a.bbTranslate=a.bbTranslate||o.text(),o.text(""),a.bbTranslate&&!a.bbTranslate.match(this.intSym)&&this.onAttrUpdate(a.bbTranslate),this.attrWatcher=a.$observe("bbTranslate",this.onAttrUpdate.bind(this)),this.translateValuesExist){let e;a.$observe("translateValues",t=>{if(t){e&&e();const s=this.$parse(t);e=r.$parent.$watch(s.bind(null,r.$parent),e=>{n.extend(this.interpolateParams,e),this.updateTranslation()},!0)}})}const d=this.$rootScope.$on("$translateChangeSuccess",()=>this.updateTranslation());r.$on("$destroy",()=>d())}shouldUnwatch(e){return e.indexOf(this.intSym)<0&&this.rawKey.indexOf(this.intSym)<0||(e.indexOf("::")>=0&&this.rawKey.indexOf("::")>=0||void 0)}unwatch(){this.attrWatcher(),this.interpolatedAttrWatcher&&this.interpolatedAttrWatcher()}onTranslationIdUpdate(e){e&&(e=e.replace(/^\s+|\s+$/g,""),this.updateTranslation(e))}onAttrUpdate(e){if(e!==this.bbTranslateAttrValue)if(this.bbTranslateAttrValue=e,e.match(this.intSym)){this.interpolatedAttrWatcher&&this.interpolatedAttrWatcher();const t=this.$interpolate(e);this.interpolatedAttrWatcher=this.scope.$watch(()=>t(this.scope),this.onTranslationIdUpdate.bind(this))}else this.onTranslationIdUpdate(e)}updateTranslation(e=this.translationId){e&&(this.translationId=e,this.bbLocalize.translate({locale:this.bbLocalize.getLocale(this.scope),key:e,params:this.interpolateParams}).then(t=>{t===e?this.iElement.text(t):this.iElement.html(t),this.shouldUnwatch(this.bbTranslateAttrValue)&&this.unwatch()},()=>{this.iElement.text(e)}))}}o.$inject=["$parse","$rootScope",i.serviceName,"$interpolate","scope","iElement","iAttr","rawKey","translateValuesExist"];class a{constructor(e){this.$injector=e,this.restrict="AE",this.scope=!0,this.compile=(e,t)=>{const s=t.bbTranslate=(t.bbTranslate||e.text()||"").replace(/^[\s\n]+|[\s\n]+$/g,"");if(!s)return;const n=t.translateValues?t.translateValues:void 0;return(e,t,i)=>this.$injector.instantiate(o,{scope:e,iElement:t,iAttr:i,rawKey:s,translateValuesExist:n})}}}a.$inject=["$injector"],n.module(r,[i.moduleName]).directive("bbTranslate",["$injector",e=>e.instantiate(a)])},V0gA:function(e,t,s){"use strict";s.r(t),s.d(t,"serviceName",(function(){return m})),s.d(t,"RecurWeekDay",(function(){return p})),s.d(t,"MetadataOnCalendarItemCardLinkType",(function(){return g}));s("QLzv");var n=s("Llzl"),i=s("nbDY"),r=s.n(i),o=s("5MwF"),a=s("VdDF"),l=s("yCC5"),c=s("Rjd/"),d=s("g66W"),u=s("nkTj"),h=s("zGdY");const m=l.k;class p extends r.a{constructor(e,t){super(e),this.handle=e,this.dayOfWeek=t}}p.Sunday=new p(h.WeekDay.Sunday,0),p.Monday=new p(h.WeekDay.Monday,1),p.Tuesday=new p(h.WeekDay.Tuesday,2),p.Wednesday=new p(h.WeekDay.Wednesday,3),p.Thursday=new p(h.WeekDay.Thursday,4),p.Friday=new p(h.WeekDay.Friday,5),p.Saturday=new p(h.WeekDay.Saturday,6);class g extends r.a{}g.Course=new g("Course"),g.External=new g("External"),c.a.factory(m,["restmod","RMUtils",u.d,(e,t,s)=>{const i=o.a.apiBasePath+"/v1/calendars/calendarItems";return e.model(i).mix({startDate:{serialize:"date"},endDate:{serialize:"date"},"recurRules.until":{serialize:"date"},"recurRules.originalStart":{serialize:"date"},"recurRules.originalEnd":{serialize:"date"},ui:{mask:!0,init:()=>({})},$extend:{isDueItem(){return!!this.dynamicCalendarItemProps},isAllDayEvent(){return 0===this.startDate.getHours()&&0===this.startDate.getMinutes()&&23===this.endDate.getHours()&&59===this.endDate.getMinutes()},isConditionalRelease(){return!(this.permissions&&this.permissions.edit)&&h.ContentVisibility.Restricted===this.visibility},getTruncatedLocation(e){return d.f(this.location,e)},Record:{$buildUrl(e){return this.$pk&&this.$pk.itemSourceType&&this.$pk.itemSourceId?t.joinUrl(t.joinUrl(e.$url(),this.$pk.itemSourceType),this.$pk.itemSourceId):null}},Model:{inferKey:e=>({itemSourceType:e.itemSourceType,itemSourceId:e.itemSourceId}),unpack:(e,t)=>{const s=e.$response.config;if(e.$isCollection){if("PUT"===s.method&&Array.isArray(t))return t.map(e=>e.statusCode>=200&&e.statusCode<300?n.fromJson(e.body):e.body);e.paging=t&&t.paging,e.permissions=t&&t.permissions;const i=t&&t.results;return i&&i.forEach(e=>{e.recurRules&&!e.recurRules.timeZoneId&&(e.recurRules.timeZoneId=a.a.getCurrentTimeZoneId())}),i}const i="POST"===s.method&&Array.isArray(t)?t[0]:t;return i.recurRules&&!i.recurRules.timeZoneId&&(i.recurRules.timeZoneId=a.a.getCurrentTimeZoneId()),i}}}})}])},V17J:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return r}));var n=s("Llzl"),i=s("+4Px");const r="ultra.components.directives.accessibility.enterKeyUpFocus";class o{constructor(t){this.injector=t,this.restrict="A",this.link=(t,s,n)=>{s.on("keydown",e=>{e.keyCode!==i.f||n.bbTriggerEnterKeydown||e.preventDefault()}),s.on("keyup",s=>{if(s.keyCode===i.f&&(s.preventDefault(),s.stopPropagation(),t.$apply(()=>{t.$eval(n.ngClick||n.bbClick,{$event:s}),t.$eval(n.ngBlur,{$event:s})}),n.bbEnterKeyUpFocus)){const t=e(n.bbEnterKeyUpFocus);if(n.indexToFocus){const e=Number(n.indexToFocus);t.eq(e).focus()}else t.focus()}})}}}o.$inject=["$injector"],n.module(r,[]).directive("bbEnterKeyUpFocus",["$injector",e=>e.instantiate(o)])}).call(this,s("5iHu"))},V6ed:function(e,t,s){"use strict";(function(e){s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return h}));s("MISG");var n=s("9zo4"),i=s("Llzl"),r=s("nsO7"),o=s("+4Px"),a=s("lUN/"),l=s("lEL+");const c="ultra.directives.accessibility.hideFocusOutline",d="hide-focus-outline",u="is-focusVisible";class h{constructor(e){this.bbTimeout=e,this.restrict="A",this.link=(e,t,s)=>{a.a(),t.addClass(d),t.removeClass(u),h.instanceCount+=1,h.ensureEvents(t),e.$on("$destroy",()=>{h.instanceCount-=1,0===h.instanceCount&&h.unregisterEvents(),t.off()})}}static enableFocusOutline(){e(document.body).removeClass(d),e(document.body).addClass(u)}static ensureEvents(t){function s(e){e.keyCode===o.u&&(h.enableFocusOutline(),n.a.isLastNavigationByKeyboard=!0)}h.eventHandlers||(h.eventHandlers={keyup:s,keydown:s,mousedown:r.debounce((function(s){t.addClass(d),t.removeClass(u),n.a.isLastNavigationByKeyboard=!1,n.a.lastClickedElement=e(s.target).closest(":tabbable"),r.delay(()=>{n.a.lastClickedElement&&0===n.a.lastClickedElement.parents("body").length&&(n.a.lastClickedElement=void 0)},800)}),200)},Object.keys(h.eventHandlers).forEach(e=>{document.addEventListener(e,h.eventHandlers[e],!0)}))}static unregisterEvents(){Object.keys(h.eventHandlers).forEach(e=>{document.removeEventListener(e,h.eventHandlers[e],!0)}),h.eventHandlers=null}}h.$inject=[l.b],h.instanceCount=0,h.eventHandlers=null,i.module(c,[l.a]).directive("bbFocusHelper",["$injector",e=>e.instantiate(h)])}).call(this,s("5iHu"))},VdDF:function(e,t,s){"use strict";var n=s("RZND"),i=s("wgY5"),r=s("nsO7");let o;class a{static isValidDate(e){return Object(r.isDate)(e)&&!Number.isNaN(e.getTime())}static isWithinDateRange(e,t,s=!0){let n=!0,i=!0;return t.start&&(n=s?t.start<=e:t.start<e),t.end&&(i=s?t.end>=e:t.end>e),n&&i}static testWithinDateRange(e,t,s=!0){const n=e=>{const t=new Date(e.getTime());return t.setSeconds(0,0),t},r={when:e&&n(e),range:{start:t&&t.start&&n(t.start),end:t&&t.end&&n(t.end)}},o=!r.when||!r.range||a.isWithinDateRange(r.when,{end:r.range.end,start:r.range.start},s);let l=!0;if(!o){let e=!0;r.range.start&&a.isSameDay(r.range.start,r.when)&&(e=s?i(r.when).isSameOrAfter(r.range.start,"minute"):i(r.when).isAfter(r.range.start,"minute"));let t=!0;r.range.end&&a.isSameDay(r.range.end,r.when)&&(t=s?i(r.when).isSameOrBefore(r.range.end,"minute"):i(r.when).isBefore(r.range.end,"minute")),l=e&&t}return{isValidDate:!l||o,isValidTime:l}}static isSameDay(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}static getCurrentTimeZoneId(){return o||(o=n.determine().name()),o}static parseStringToDate(e){return Object(r.isDate)(e)?e:null==e||""===e?null:new Date(e)}static convertToLocalDate(e){const t=a.parseStringToDate(e);return null!==t&&t.setMinutes(t.getMinutes()+t.getTimezoneOffset()),t}static parseDateToISOString(e){return null==e||Number.isNaN(Number(e.getDate()))?"":e.toISOString()}static compareDates(e,t,s=!0){return e&&t?[e,t].sort((e,t)=>e.getTime()-t.getTime())[s?0:1]:e||t}static breakdownSeconds(e){const t=Math.floor(e%60),s=e/60,n=Math.floor(s%60),i=s/60,r=Math.floor(i%24);return{days:Math.floor(i/24),hours:r,minutes:n,seconds:t}}}t.a=a},VfFK:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("Llzl"),i=s("0JpG"),r=s("TnpK");const o="ultra.course.attendance.routes";n.module(o,[r.b]).config([r.c,e=>{e.peekState("attendance",{url:"/attendance?courseId&attendanceView&meetingId&memberId&isSingleUserView",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/attendance/attendance")])]},reloadOnSearch:!1,require:()=>Promise.all([s.e(43),s.e(735)]).then(s.bind(null,"kmhM")),pageTitle:"course.attendance.pageTitle",panelClass:"full",peekStates:["attendance-settings","attendance-student-records"]}).peekState("attendance-settings",{url:"/settings",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/attendance/attendance")])]},require:()=>Promise.all([s.e(43),s.e(734)]).then(s.bind(null,"qT3r")),pageTitle:"course.attendance.settings.pageTitle"}).peekState("attendance-student-records",{url:"/studentRecords/:membershipId?userId",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/attendance/attendance")])]},require:()=>Promise.all([s.e(43),s.e(151)]).then(s.bind(null,"OYHs")),pageTitle:"course.attendance.studentRecords.pageTitle"}).peekState("attendance-student-view",{url:"/attendanceGrade?courseId",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/attendance/attendance")])]},require:()=>Promise.all([s.e(43),s.e(151)]).then(s.bind(null,"OYHs")),pageTitle:"course.attendance.studentRecords.pageTitle"})}])},Vsv2:function(e,t,s){"use strict";var n=s("D57K"),i=s("Llzl"),r=s("HAJP"),o=s("0JpG"),a=s("pjml"),l=s("gkef"),c=s("emI2"),d=s("5MwF"),u=s("Q/M7");const h="https://cloud-storage-integration.blackboardcdn.com/loader/js/loader.js",m=1e4,p="cloud.account.tokens";var g;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initialized=1]="Initialized",e[e.Failed=2]="Failed"}(g||(g={}));const b="/authenticator/js/cloud-storage-integration-authenticator.js";class f{constructor(e,t,s,n,i,r){this.$q=e,this.bbLocalize=t,this.$timeout=s,this.bbScriptLoader=n,this.preference=i,this.$rootScope=r,this.credentials={},this.status=g.Uninitialized,this.enabledServices=d.a.cloudStorageIntegrationServices,this.showDummyProvider=!1}get isInitialized(){return this.status===g.Initialized}init(){const e=this.$q.defer(),t=this.loaderUrl||h,s=t.substring(0,t.indexOf("/loader"))+b;if(this.status===g.Initialized)e.resolve();else if(this.status===g.Failed)e.resolve();else{let n,i=!1,r=g.Uninitialized,o=g.Uninitialized;const a=()=>{i||r!==g.Uninitialized&&o!==g.Uninitialized&&(r===g.Initialized?(this.status=g.Initialized,e.resolve()):(this.status=g.Failed,e.resolve()),i=!0,this.$timeout.cancel(n))};n=this.$timeout(()=>{this.authenticator||(o=g.Failed,console.error("Authenticator initialization timed out. Disabling Authenticator Service.")),this.explorer||(r=g.Failed,console.error("CloudStorageIntegration initialization timed out.  Disabling CloudStorageIntegration Service.")),a()},d.a.cloudStorageIntegrationInitializationTimeout||m),this.$q.all({CloudStorageIntegration:this.bbScriptLoader.getScript(t,{exports:"CloudStorageIntegration"}).then(e=>{this.explorer=e.explorer,r=g.Initialized,a()}),CloudStorageIntegrationAuth:this.bbScriptLoader.getScript(s,{exports:"CloudStorageIntegration"}).then(e=>{this.authenticator=e.authenticator,o=g.Initialized,a()})}).catch(()=>{this.authenticator||(o=g.Failed,console.error("Failed to load cloudStorageIntegration authenticator. Disabling Authenticator Service.")),this.explorer||(r=g.Failed,console.error("Failed to load cloudStorageIntegration.  Disabling CloudStorageIntegration Service.")),a()})}return e.promise}getExplorer(e){let t=e?this.explorerInstance_multi:this.explorerInstance_single;if(!t){const s={app_id:this.clientId,retrieve_token:!0,multiselect:e,display_backdrop:!0,create_folder:!1,types:["files"],text_direction:this.bbLocalize.isRTL(this.$rootScope)?"rtl":"ltr",show_dummy_provider:this.showDummyProvider};(this.enabledServices||[]).length>0&&(s.services=this.enabledServices),this.apiUrl&&(s.base_url=u.i(this.apiUrl)),this.useLoaderExplorer&&(s.use_loader_explorer=this.useLoaderExplorer),s.persist="none",(t=this.explorer(s)).on("success",e=>{this.currentChooserPromiseObject&&(this.currentChooserPromiseObject.resolve(e),this.currentChooserPromiseObject=null)}),t.on("cancel",()=>{this.currentChooserPromiseObject&&(this.currentChooserPromiseObject.resolve(),this.currentChooserPromiseObject=null)}),t.on("error",e=>{this.currentChooserPromiseObject&&(this.currentChooserPromiseObject.reject(e),this.currentChooserPromiseObject=null)}),t.on("addAccount",e=>{this.preference.getPreference(p).then(t=>{const s=this.deleteCloudStorageIntegrationAccount(JSON.parse(t.value),e.id);s.push(e),this.preference.setPreference(p,JSON.stringify(s))}).catch(()=>{const t=[];t.push(e),this.preference.setPreference(p,JSON.stringify(t))})}),t.on("deleteAccount",e=>{this.preference.getPreference(p).then(t=>{const s=this.deleteCloudStorageIntegrationAccount(JSON.parse(t.value),e);this.preference.setPreference(p,JSON.stringify(s))})}),e?this.explorerInstance_multi=t:this.explorerInstance_single=t}return t}openFilePicker(e,t){if(this.currentChooserPromiseObject){const e=this.$q.defer();return e.reject(new Error("multiple explorer instances are not allowed")),e.promise}return this.currentChooserPromiseObject=this.$q.defer(),this.init().then(()=>{if(this.status===g.Initialized){const s=this.getExplorer(t);return this.preference.getPreference(p,"[]",!0).then(t=>{const n=JSON.parse(t.value).map(e=>e.bearer_token.key);s.update({locale:e,tokens:n}),s.choose()}).catch(t=>{console.error(t);s.update({locale:e,tokens:[]}),s.choose()})}}),this.currentChooserPromiseObject.promise}getCloudStorageIntegrationInfo(){return{client_id:this.clientId,base_url:this.apiUrl}}deleteCloudStorageIntegrationAccount(e,t){return e.filter(e=>e.id!==t)}}var v=s("aHpC"),S=s("VAMW"),y=s("6fZB");s.d(t,"a",(function(){return C})),s.d(t,"b",(function(){return I}));const C="ultra.service.cloud.drive",I="cloudDrive";class ${constructor(e){this.cloudDriveStorage=e}openFilePicker(e,t){return Object(y.a)(this.cloudDriveStorage.openFilePicker(e,t))}}class w{constructor(e,t,s){this.service=e,this.CloudDriveModel=t,this.CloudDriveTaskModel=s,this.key=S.TransitService.CloudDriveService}isCloudServiceAvailable(){return Object(y.a)(this.service.isCloudServiceAvailable())}get cloudDriveStorage(){return new $(this.service.cloudDriveStorage)}}let T=class{constructor(e,t,s,n,i,r,o,a,l){this.$rootScope=e,this.$q=t,this.$timeout=s,this.bbLocalize=n,this.CloudDriveModel=i,this.CloudDriveTaskModel=r,this.windowSize=o,this.bbScriptLoader=a,this.preferences=l,this.isGettingFilesInfo=!1,this.currentLocale=this.bbLocalize.getAppLocale(),Object(S.registerService)(new w(this,i,r))}cloudDriveStorageFactory(e){const t=new f(this.$q,this.bbLocalize,this.$timeout,this.bbScriptLoader,this.preferences,this.$rootScope);return t.clientId=e.clientId,t.redirectUrl=e.redirectUrl,t.provider=e.name,t.apiUrl=e.apiUrl,t.loaderUrl=e.loaderUrl,t.useLoaderExplorer=e.useLoaderExplorer,t.persist=e.persist,t.tokens=e.tokens,t}getCloudDrivesInfo(){const e=this.$q.defer();return this.cloudDrivesInfo?e.resolve():this.CloudDriveModel.$collection().$fetch().$then(t=>{this.cloudDrivesInfo=t,i.forEach(this.cloudDrivesInfo,e=>{"cloudstorageintegration"===e.name&&(this.cloudDriveStorage=this.cloudDriveStorageFactory(e))}),e.resolve()},t=>{e.reject(t)}),e.promise}initializeCloudDrive(){const e=this.$q.defer();return this.getCloudDrivesInfo().then(()=>{this.cloudDriveStorage?this.cloudDriveStorage.isInitialized&&this.currentLocale===this.bbLocalize.getAppLocale()?e.resolve(this.cloudDriveStorage):(this.currentLocale=this.bbLocalize.getAppLocale(),this.cloudDriveStorage.init().then(()=>{e.resolve(this.cloudDriveStorage)})):e.reject("No such cloud drive!")}),e.promise}isCloudServiceAvailable(){const e=this.$q.defer();return this.initializeCloudDrive().then(t=>{e.resolve(t.isInitialized)}).catch(()=>{e.resolve(!1)}),e.promise}getDriveUserInfo(){const e=this.$q.defer(),t=this.cloudDriveStorage.driveUserInfo,s=this.cloudDriveStorage.accessToken;return t?e.resolve(t):s?e.resolve(this.CloudDriveModel.$new("CloudStorageIntegration").me.$fetch({accessToken:s}).$asPromise()):e.resolve(),e.promise}};T=Object(n.__decorate)([Object(n.__param)(0,Object(v.b)("$rootScope")),Object(n.__param)(1,Object(v.b)("$q")),Object(n.__param)(2,Object(v.b)("$timeout")),Object(n.__param)(3,Object(v.b)(o.serviceName)),Object(n.__param)(4,Object(v.b)(a.h.serviceName)),Object(n.__param)(5,Object(v.b)(a.i.serviceName)),Object(n.__param)(6,Object(v.b)(l.b)),Object(n.__param)(7,Object(v.b)(r.b)),Object(n.__param)(8,Object(v.b)(c.c))],T);class E extends T{}i.module(C,[a.N,l.a,r.a,c.b]).service(I,T)},"W/rt":function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.services.error-modal.error-persist-question.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-persist-question">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-persist-question.description</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button large reload-page-button js-primary-button"\n          analytics-id="components.services.error-modal.error-persist-question.alt"\n          bb-translate>components.services.error-modal.error-persist-question.alt</button>\n</bb-modal>\n'},W7eU:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.errorTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>{{::errorModalErrorKey}}</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" role="button" class="button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},WIGI:function(e,t,s){"use strict";function n(e,t,s){"function"==typeof aptrinsic&&t.getRoles().then(t=>{return function(e,t,s){var n,i,r;const o=null!==(n=t.locale)&&void 0!==n?n:s.getAppLocale(),a={id:`${e.siteId}_${t.uuid}`,insRoles:t.insRoles,systemRole:t.systemRole,systemRoles:t.systemRoles,locale:o},l={id:e.siteId,institutionName:e.institutionName,institutionType:e.institutionType,country:e.country,region:e.region,acceptSurveys:null!==(i=e.acceptSurveys)&&void 0!==i&&i,productUpdates:null!==(r=e.productUpdates)&&void 0!==r&&r};aptrinsic("identify",a,l)}(e.getSystemInfo(),t,s),t})}function i(e){"function"==typeof aptrinsic&&aptrinsic("set","globalContext",e)}function r(){"function"==typeof aptrinsic&&aptrinsic("remove","globalContext",["courseRole"])}s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return i})),s.d(t,"a",(function(){return r}))},WShm:function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("Llzl"),i=s("0JpG");const r="ultra.directives.validate.date",o="bbValidateDate";class a{constructor(e,t){this.$parse=e,this.bbLocalize=t,this.require="ngModel",this.restrict="A",this.getISODate=e=>e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),this.getDateParser=(e,t,s,n)=>r=>{if(n.$isEmpty(r))return n.$setValidity("date",!0),null;let o;try{o=this.bbLocalize.parseDateSync(r,i.ILocaleDateFormat.Short,e,n.$modelValue)}catch(e){return n.$setValidity("date",!1),n.$modelValue}return n.$setValidity("date",!0),"date"!==s.type&&(r=this.bbLocalize.formatDateSync(o,i.ILocaleDateFormat.Short,e))!==n.$viewValue&&(n.$setViewValue(r),t.is(":focus")||n.$render()),o},this.getMinDateValidator=(e,t,s,n)=>t=>{const r=this.$parse(s.min)(e),o=n.$isEmpty(t)||t.getTime()>r.getTime();return o?delete n.$error.minDate:n.$error.minDate={dateMin:this.bbLocalize.formatDateSync(r,i.ILocaleDateFormat.Short)},o},this.getMaxDateValidator=(e,t,s,n)=>t=>{const r=this.$parse(s.max)(e),o=n.$isEmpty(t)||t.getTime()<r.getTime();return o?delete n.$error.maxDate:n.$error.maxDate={dateMax:this.bbLocalize.formatDateSync(r,i.ILocaleDateFormat.Short)},o},this.getDateFormatter=(e,t,s,n)=>()=>{n.$setValidity("date",!0);const t=n.$modelValue;return n.$isEmpty(t)?"":"date"===s.type?this.getISODate(t):this.bbLocalize.formatDateSync(t,i.ILocaleDateFormat.Short,e)},this.link=(e,t,s,n)=>{n.$parsers.push(this.getDateParser(e,t,s,n)),n.$formatters.push(this.getDateFormatter(e,t,s,n)),s.min&&(n.$validators.minDateValidator=this.getMinDateValidator(e,t,s,n)),s.max&&(n.$validators.maxDateValidator=this.getMaxDateValidator(e,t,s,n)),t.on("blur",()=>{n.$render()})}}}a.$inject=["$parse",i.serviceName];class l extends a{}n.module(r,[i.moduleName]).directive(o,["$parse",i.serviceName,(e,t)=>new a(e,t)])},"X/qj":function(e,t,s){"use strict";s.d(t,"a",(function(){return h})),s.d(t,"b",(function(){return m}));var n=s("D57K"),i=s("d2bc"),r=s("Llzl"),o=s("Fvsw"),a=s("Qbdf"),l=s("fYJU"),c=s("jhBu"),d=s("Sa5G"),u=s("aHpC");const h="ultra.components.services.gradebookPermission",m="gradebookPermission";let p=class{constructor(e,t,s,n){this.context=e,this.currentCourse=t,this.currentUser=s,this.entitlementService=n}isEntitled(e,t){return this.entitlementService.isEntitled(e,t)}canDeanonymizeGrades(e){return this.isEntitled("course.gradebook-deanonymize.EXECUTE",e)}canEnterFeedback(e){return this.isEntitled("course.gradebook-grades.feedback.EXECUTE",e)}canEnterGrades(e){return this.canExecute(e)}canViewAssessmentException(e){return this.isEntitled(d.b.ViewException,e)}canDelegatedEnterAttemptFeedback(e,t){return this.canDelegatedModifyAttempt(e,t)&&this.canEnterFeedback()}canDelegatedEnterAttemptGrades(e,t){return this.canDelegatedModifyAttempt(e,t)&&this.canEnterGrades()}canDelegatedModifyAttempt(e,t){return!e.delegatedGrading||(!t||(!!e.isUserReconciler(this.currentUser.userId)||!t.isReconciled()))}canDelegatedReconcileAttempt(e){return e.delegatedGrading&&e.isUserReconciler(this.currentUser.userId)}canExecute(e){return this.isEntitled("course.gradebook-grades.EXECUTE",e)}canModify(e){return this.isEntitled(i.a.ModifyGradebook,e)}canModifyItemDueDate(e){return this.isEntitled("course.gradebook-item.duedate.MODIFY",e)}canObserve(e){return this.isEntitled(i.a.Observe,e)}canOverrideGrades(e){return this.canExecute(e)}canPostGrades(e,t){const s=t||this.context.column,n=e||this.currentCourse.courseId;return s&&s.delegatedGrading?s.isUserReconciler(this.currentUser.userId)&&this.isEntitled("course.gradebook-grades.publish.EXECUTE",n):this.isEntitled("course.gradebook-grades.publish.EXECUTE",n)}canView(e){return this.isEntitled(i.a.ViewGradebookMetaData,e)}canViewAttempts(e){return this.isEntitled(i.a.ViewAttempts,e)}canViewGrades(e){return this.isEntitled("course.gradebook-grades.VIEW",e)}canViewBulkDownload(e){return this.isEntitled(i.a.ViewGrades,e)}};p=Object(n.__decorate)([Object(n.__param)(0,Object(u.b)(o.b)),Object(n.__param)(1,Object(u.b)(a.e)),Object(n.__param)(2,Object(u.b)(l.b)),Object(n.__param)(3,Object(u.b)(c.b))],p);class g extends p{}r.module(h,[c.a,a.b,o.a]).service(m,p)},X455:function(e,t,s){"use strict";s.d(t,"a",(function(){return p})),s.d(t,"d",(function(){return g})),s.d(t,"b",(function(){return b})),s.d(t,"c",(function(){return f}));var n=s("D57K"),i=s("vYaK"),r=s("pjml"),o=s("zGdY"),a=s("yC9S"),l=s("lVRt"),c=s("aHpC"),d=s("fYJU"),u=s("eQBN"),h=s("VAMW"),m=s("Qbdf");const p="ultra.service.course-context.membership",g="currentCourseMembership",b=g+"Provider",f=l.a;class v{constructor(e){this.service=e,this.key=h.TransitService.CurrentCourseMembership}isActAsInstructorMembership(){return this.service.isActAsInstructorMembership()}isStudentMembership(){return this.service.isStudentMembership()}}let S=class{constructor(e,t,s,n,i){this.$q=e,this.$rootScope=t,this.currentUser=s,this.studentPreview=n,this.CourseModel=i;const r=this;a.b.OnRootScope(t,m.a,(e,t,s)=>{null!=t&&null!==t.id||r.clear()}),Object(h.registerService)(new v(this))}get courseMembership(){return this._courseMembership}clear(){this._courseMembership=null}load(e){return e?this.currentUser.userId?this.courseMembership&&this.courseMembership.course&&this.courseMembership.userId===this.currentUser.userId?e.id!==this.courseMembership.course.id?this.$q.reject(new Error("Cannot resolve course membership because given course does not match the one for the current course membership")):this.courseMembership.$asPromise():e.users.$find(this.currentUser.userId,{expand:"courseRole"}).$allow(["400-499"]).$asPromise().then(e=>(this._courseMembership=e,this._courseMembership.isInStudentPreview=()=>this.studentPreview.isInIframeOfPreviewMode(),e)):this.$q.reject(new Error("Cannot resolve course membership because currentUser service has no userId")):this.$q.reject(new Error("Cannot load course membership because no course model was provided"))}hasCourseMembership(){return!(!this.courseMembership||this.courseMembership.$response.status===o.HttpStatus.NotFound)}availabilityHasBeenBypassed(){return this.courseMembership&&this.courseMembership.availabilityHasBeenBypassed()}courseIsOpen(){return this.courseMembership&&this.courseMembership.courseIsOpen()}courseIsPrivate(){return this.courseMembership&&this.courseMembership.courseIsPrivate()}courseIsComplete(){return this.courseMembership&&this.courseMembership.courseIsComplete()}isStudentMembership(){return this.courseMembership&&this.courseMembership.isStudentMembership()}isGuestMembership(){return this.courseMembership&&this.courseMembership.isGuestMembership()}isStudentOrGuestMembership(){return this.courseMembership&&this.courseMembership.isStudentOrGuestMembership()}isActAsInstructorMembership(){return this.courseMembership&&this.courseMembership.isActAsInstructorMembership()}isTeachingAssistantMembership(){return this.courseMembership&&this.courseMembership.isTeachingAssistantMembership()}isInRoleBucket(e){return this.courseMembership&&this.courseMembership.isInRoleBucket(e)}isDueDateExcepted(){return this.courseMembership&&this.courseMembership.isDueDateExcepted()}};S=Object(n.__decorate)([Object(n.__param)(0,Object(c.b)("$q")),Object(n.__param)(1,Object(c.b)("$rootScope")),Object(n.__param)(2,Object(c.b)(d.b)),Object(n.__param)(3,Object(c.b)(u.e)),Object(n.__param)(4,Object(c.b)(i.serviceName))],S);class y extends S{}const C=[d.a,r.N,u.b];angular.module(p,C).provider(g,class{constructor(){this.$get=["$injector",e=>e.instantiate(S)],this.name=f,this.resolve=[l.c,u.e,g,"$q",(e,t,s)=>t.init(e).then(()=>s.load(e))]}})},XGja:function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return a}));var n=s("5iHu"),i=s("lUN/");function r(e,t){i.a();const s=e?e.find(":tabbable"):n(":tabbable"),r=t||n(document.activeElement);let o=0;if(1===r.length){const e=s.index(r);e+1<s.length&&(o=e+1)}s.eq(o).focus()}function o(e,t){i.a();const s=e?e.find(":tabbable"):n(":tabbable"),r=t||n(document.activeElement);let o=s.length-1;if(1===r.length){const e=s.index(r);e>0&&(o=e-1)}s.eq(o).focus()}function a(e,t,s){i.a(),e.is(":tabbable")||null!=e.attr("tabindex")?e.is(":tabbable")&&"-1"===e.attr("tabindex")&&e.removeAttr("tabindex"):e.attr("tabindex","-1"),s&&e.closest(s).removeClass("ng-hide"),t?t(e):e.focus()}},XfOu:function(e,t,s){"use strict";s.r(t),s.d(t,"serviceName",(function(){return o})),s.d(t,"sortRubricData",(function(){return a}));s("QLzv");var n=s("yCC5"),i=s("Rjd/"),r=s("nkTj");const o=n.Xb;function a(e){e.columnHeaders&&e.columnHeaders.length>0&&e.columnHeaders.sort((e,t)=>e.position-t.position),e.rows&&e.rows.length>0&&(e.rows.sort((e,t)=>e.position-t.position),e.rows.forEach(e=>{e.cells&&e.cells.length>0&&e.cells.sort((e,t)=>e.position-t.position)}))}function l(e){e.rows&&e.rows.length>0&&e.rows.forEach(t=>{t.isCurrentUserEligibleToAlignGoals=function(){return!0===e.permissions.edit&&!e.readOnly},t.getContentIdForGoalAlignment=function(){return"blackboard.plugin.rubric.api.core.data.RubricRow;"+t.id},t.getContentTitleForGoalAlignment=()=>t.header})}i.a.factory(o,["restmod",r.d,(e,t)=>e.model().mix({$extend:{Record:{canDelete(){return this.permissions&&this.permissions.delete},isCurrentUserEligibleToAlignGoals(){return this.permissions&&!0===this.permissions.edit},getContentIdForGoalAlignment(){return"blackboard.plugin.rubric.api.core.data.Rubric;"+this.id},getContentTitleForGoalAlignment(){return this.title},saveAlignedGoals(e,t){let s;return t&&(s=t.map(e=>({goalId:e.id,isVisibleToStudent:!0,goal:e}))),e&&(this.rows=this.rows.map(t=>(t.id===e&&(t.alignedGoals=s),t))),this.$send({method:"PATCH",url:this.$url(),data:{rows:this.rows}}).$then(()=>{this.$getPreviousVersion()&&(this.$getPreviousVersion().rows=this.rows)})}}},$hooks:{"after-request":function(e){e&&e.data&&(e.data.rows&&e.data.columnHeaders?(a(e.data),l(e.data)):e.data.results&&e.data.results.length>0&&e.data.results.forEach(e=>{e.rows&&e.columnHeaders&&(a(e),l(e))}))},"before-save":function(e){e.data.columnHeaders&&e.data.columnHeaders.forEach((e,t)=>{e.position=t}),e.data.rows&&e.data.rows.forEach((e,t)=>{e.position=t,e.cells.forEach((e,t)=>{e.position=t})})}}})])},"Xq/A":function(e,t,s){"use strict";var n=s("Llzl"),i=s("Sa5G"),r=s("g66W");var o=s("DsaG"),a=s("Q/M7"),l=s("e6jQ"),c=s("AuQm"),d=s("IbyE");s.d(t,"b",(function(){return u})),s.d(t,"c",(function(){return h})),s.d(t,"a",(function(){return b}));const u="ultra.services.bbml-editor",h="bbMLEditorService",m="file",p="embedded-unsafe-html",g="http://localhost";class b{constructor(e,t,s){this.$q=e,this.DSCacheFactory=t,this.fileViewer=s}static get VERSION_INDICATOR_PREFIX(){return'\x3c!-- {"bbMLEditorVersion":'}static get CURRENT_VERSION_INDICATOR(){return b.VERSION_INDICATOR_PREFIX+"1} --\x3e"}static get EMBEDDED_LINK_PREFIX(){return"https://"}getBbMLFileType(e){const t=e.dataset;return(null==t?void 0:t.bbtype)||m}convertBbMLToContentBlocks(e){var t;const s=new Set,n=[];let o=!1;var a;a=e,r.j(a,b.VERSION_INDICATOR_PREFIX)&&(o=!0);const l=document.createElement("div");l.innerHTML=e;for(let e=0;e<l.children.length;e++){const r=l.children[e];let o;if("A"===r.tagName&&this.getBbMLFileType(r)===m)(o=this.convertBbMLToFileBlock(r)).blockType=i.c.File;else if("DIV"===r.tagName){const e=r.innerHTML.trim();e&&(o={blockType:i.c.Text,textBlock:e,id:this.getBlockIdFromBbML(r)})}else if("A"===r.tagName&&this.getBbMLFileType(r)===p){const{dataset:e,href:s}=r;let n;if(null==e?void 0:e.bbfile)try{n=null===(t=JSON.parse(e.bbfile))||void 0===t?void 0:t.linkName}catch(e){}o={blockType:i.c.Html,textBlock:"",fileBlock:{downloadUrl:s,file:{fileName:n}},id:this.getBlockIdFromBbML(r)}}o&&!s.has(o.id)&&(s.add(o.id),n.push(o))}return o||0!==n.length||(this.contains(e,b.EMBEDDED_LINK_PREFIX)||(o=!0),n.push({blockType:i.c.Text,textBlock:e,id:this.generateBlockId()})),{contentBlocks:n,isBbmlEditorCompliant:o}}contains(e,t){return(e||"").indexOf(t)>-1}convertBbMLToFileBlock(e){var t;const s=e.dataset,n={file:{}};let i=null;if(null==s?void 0:s.bbfile)try{const e=JSON.parse(s.bbfile);n.isDecorative=e.isDecorative,n.alternativeText=e.alternativeText,n.linkName=e.linkName,n.currentMimeType=e.mimeType,n.render=null!==(t=e.render)&&void 0!==t?t:d.FileRenderType.Inline,n.ui={isRenderedInline:Object(c.isInlineRenderType)(n.render)},n.viewerData={},e.bbFileUuid&&(n.viewerData.bbFileUuid=e.bbFileUuid),e.viewerUuid&&(n.viewerData.viewerUuid=e.viewerUuid),e.viewerUrl&&(n.viewerData.viewerUrl=e.viewerUrl),e.viewerTimeToWait&&(n.viewerData.viewerTimeToWait=parseInt(e.viewerTimeToWait+"",10))}catch(e){}n.linkName||(n.linkName=e.innerHTML.substr(0,e.innerHTML.lastIndexOf("?"))),n.currentMimeType||(n.currentMimeType=e.innerHTML.substr(e.innerHTML.lastIndexOf("?")+1)),n.ui||(n.ui={isRenderedInline:this.fileViewer.shouldRenderInlineByDefault(n)}),i=this.getBlockIdFromBbML(e);let r=e.href;return 0===r.indexOf(g)&&(r=Object(a.c)(r.substr(g.length))),n.downloadUrl=r,this.fileViewer.initUiField(n),{fileBlock:n,id:i}}getBlockIdFromBbML(e){const t=e.dataset;return(null==t?void 0:t.bbid)?t.bbid:e.id?e.id:this.generateBlockId()}convertContentBlocksToBbML(e,t){const s=document.createElement("div");if(e.forEach(e=>{var t,n;if(e.blockType===i.c.File){const n=document.createElement("a"),i=n.dataset;if(n.href=e.fileBlock.downloadUrl,i.bbid=e.id,e.fileBlock.ui){const s={};s.render=null!==(t=e.fileBlock.render)&&void 0!==t?t:d.FileRenderType.Inline,null!=e.fileBlock.isDecorative&&(s.isDecorative=e.fileBlock.isDecorative),e.fileBlock.alternativeText&&(s.alternativeText=e.fileBlock.alternativeText),e.fileBlock.linkName&&(s.linkName=e.fileBlock.linkName),e.fileBlock.currentMimeType&&(s.mimeType=e.fileBlock.currentMimeType),e.fileBlock.viewerData&&(e.fileBlock.viewerData.bbFileUuid&&(s.bbFileUuid=e.fileBlock.viewerData.bbFileUuid),e.fileBlock.viewerData.viewerUuid&&(s.viewerUuid=e.fileBlock.viewerData.viewerUuid)),i.bbfile=JSON.stringify(s)}n.innerHTML=e.fileBlock.linkName,s.appendChild(n)}else if(e.blockType===i.c.Text&&e.textBlock){const t=document.createElement("div");t.dataset.bbid=e.id,t.innerHTML=e.textBlock,s.appendChild(t)}else if(e.blockType===i.c.Html&&(null===(n=null==e?void 0:e.fileBlock)||void 0===n?void 0:n.downloadUrl)){const t=document.createElement("a"),{downloadUrl:n,file:i}=e.fileBlock,{fileName:r}=i,o=t.dataset;o.bbid=e.id,o.bbfile=JSON.stringify({linkName:r}),o.bbtype=p,t.href=n,s.appendChild(t)}e.isNewToBbML&&delete e.isNewToBbML}),s.innerHTML){let n="";return t&&e&&e.length&&(n=b.CURRENT_VERSION_INDICATOR),n+s.innerHTML}return s.innerHTML}generateBlockId(){return"bbml-editor-id_"+l.b()}writeBbMLLink(e,t,s){if(0===s.length)return;let n="";s.length>1&&(n+="<ul>"),s.forEach(e=>{s.length>1&&(n+="<li>"),"lti"===e.type?n+='<a data-bbfile="'+e.data+'" data-bbtype="lti" href="#">'+e.title+"</a>":n+='<a href="'+e.url+'" target="_blank">'+e.title+"</a>",s.length>1&&(n+="</li>")}),s.length>1&&(n+="</ul>")}}b.$inject=["$q","DSCacheFactory",o.b];class f extends b{}n.module(u,["angular-data.DSCacheFactory",o.a]).service(h,b)},XseH:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return o}));s("my/J");var n=s("nsO7"),i=s("Llzl"),r=s("H8CZ");const o="ultra.components.directives.hasFooter";class a{constructor(t,s,i){this.scope=t,this.element=s,this.attrs=i,this.domChanged=()=>{const t=this.element.find("footer:not(.notification)").filter(":visible").filter((function(){return e(this).height()>0})),s=this.element.find(".import-status-bar").filter(":visible").filter((function(){return e(this).height()>0}));t.length>0||s.length>0?(e(this.element).addClass("has-footer"),e(this.element).hasClass("in-preview-mode")&&e(window.parent.document).find("body").addClass("has-footer-in-preview-mode"),t.find(".navigation-visible").length>0&&e(this.element).addClass("has-navigation-footer")):(e(this.element).removeClass("has-footer"),e(this.element).hasClass("in-preview-mode")&&e(window.parent.document).find("body").removeClass("has-footer-in-preview-mode"))};const o=n.debounce(this.domChanged,100,{leading:!0,trailing:!0});this.observer=new MutationObserver(o),this.observer.observe(s[0],{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),r.b(this.element,o),r.a(this.element,o),this.scope.$on("$destroy",()=>{this.observer.disconnect(),r.b(this.element,o),r.a(this.element,o)})}}a.$inject=["scope","element","attrs"];class l{constructor(e){this.$injector=e,this.restrict="A",this.link=(e,t,s)=>{e.hasfooter=this.$injector.instantiate(a,{scope:e,element:t,attrs:s})}}}l.$inject=["$injector"],i.module(o,[]).directive("bbHasFooter",["$injector",e=>e.instantiate(l)])}).call(this,s("5iHu"))},"Y/dt":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"e",(function(){return a})),s.d(t,"f",(function(){return l}));const n="EVENT_ATTEMPT_SAVING_START",i="EVENT_ATTEMPT_SAVING_DONE",r="EVENT_ATTEMPT_SUBMITTING_START",o="EVENT_ATTEMPT_SUBMITTING_DONE",a="EVENT_ATTEMPT_TRIGGER_SAVE",l="bb-assessment-persist-pending-saves"},Y3OE:function(e,t,s){"use strict";var n=s("IbyE");t.a=n.ContentHandler},Y88D:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return i}));var n=s("Llzl");const i="ultra.components.directives.accessibility.clickFocus";class r{constructor(t,s){this.injector=t,this.timeout=s,this.restrict="A",this.link=(t,s,n)=>{n.bbClickFocus.length&&s.on("click",()=>{this.timeout(()=>{if(n.indexToFocus){const t=Number(n.indexToFocus);e(n.bbClickFocus).eq(t).focus()}else{e(n.bbClickFocus).focus()}},120)})}}}r.$inject=["$injector","$timeout"],n.module(i,[]).directive("bbClickFocus",["$injector",e=>e.instantiate(r)])}).call(this,s("5iHu"))},YCUs:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.packageTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.packageFull</bb-translate>\n    </p>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" class="button button--secondary js-secondary-button dismiss-message expand" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.takeMeBack">\n          <bb-translate>components.directives.fileUpload.takeMeBack</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" ng-click="fileUpload.addContent(true)" class="button button--secondary js-secondary-button" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.addAllContent\'}" analytics-id="components.directives.fileUpload.addAllContent">\n          <bb-translate>components.directives.fileUpload.addAllContent</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" ng-click="fileUpload.addContent(false)" class="button js-primary-button" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.letMeChoose\'}" analytics-id="components.directives.fileUpload.letMeChoose">\n          <bb-translate>components.directives.fileUpload.letMeChoose</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},"YOs/":function(e,t,s){"use strict";var n=s("nsO7"),i=s("Llzl"),r=s("e6jQ"),o=s("lr7J"),a=s("0JpG"),l=s("en1n"),c=s("o2qC");s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return u}));const d="ultra.components.directives.table";function u(e,t,s){let n=e+"("+t+")";return s&&(n+=","+s+"("+t+")"),n}class h{constructor(e,t,s,r){this.scope=e,this.element=t,this.$q=s,this.localizeService=r,this.fetchingMoreRows=!1,this.initialDataLoaded=!1,this.throttledShowMore=n.throttle(()=>{const e=this.scope.config();if(this.scope.tableData().length<e.totalCount&&!this.fetchingMoreRows){this.fetchingMoreRows=!0;const t=this.$q.defer();this.scope.$emit("table.showMore",{instanceId:e.instanceId,callback:e=>{t.resolve(e)}}),this.scope.$root.$broadcast(o.a,e.instanceId+"-scroll-tray",t.promise),t.promise.then(()=>{this.fetchingMoreRows=!1})}},500);const a=this.scope.$watch("config()",e=>{i.isDefined(e)&&(a(),this.init())})}init(){const e=this.scope.config();e.instanceId=e.instanceId||r.a(),e.currentSortDirection=e.currentSortDirection||"asc",e.currentSortColumnIndex=e.currentSortColumnIndex||0,e.columns.forEach(e=>{i.isUndefined(e.visible)&&(e.visible=!0)});const t=this.scope.$watchCollection("tableData()",e=>{i.isArray(e)&&(this.initialDataLoaded=!0,t())});if(e.customBreakpointFn){const t=n.throttle(t=>{e.customBreakpointFn(t)},500);this.scope.$watch(()=>l.g(),e=>{t(e)})}this.addEventListeners(),this.setCaption()}addEventListeners(){this.element.on("click","tr th.sortable-header",e=>{const t=i.element(e.currentTarget).attr("data-heading-index");if(i.isDefined(t)){const e=parseInt(t,10);this.sort(e)}})}setCaption(){const e=this.scope.config();this.localizeService.loadBundle("components/directives/table").then(()=>{const t=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.table.caption",params:{caption:e.title,column:e.columns[e.currentSortColumnIndex].heading,direction:this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.table."+e.currentSortDirection})},noWrap:!0});this.element.find("caption").text(t)})}sort(e){const t=this.scope.config();this.initialDataLoaded=!1,t.currentSortColumnIndex===e?t.currentSortDirection="asc"===t.currentSortDirection?"desc":"asc":t.currentSortDirection="asc",t.currentSortColumnIndex=e,this.scope.$emit("table.sorted",{instanceId:t.instanceId,columnIndex:t.currentSortColumnIndex,sortDirection:t.currentSortDirection,callback:()=>{this.initialDataLoaded=!0,this.setCaption()}})}showMore(){this.throttledShowMore()}}h.$inject=["scope","element","$q",a.serviceName];class m{constructor(e){this.$injector=e,this.restrict="E",this.template=c,this.transclude=!0,this.scope={config:"&",tableData:"&"},this.controller=["$scope",function(e){this.getConfig=function(){return e.config()}}],this.link=(e,t)=>{e.table=this.$injector.instantiate(h,{scope:e,element:t})}}}m.$inject=["$injector"],i.module(d,[o.b,a.moduleName]).directive("bbTable",["$injector",e=>e.instantiate(m)])},YRs5:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s("Llzl"),i=s("Qbdf"),r=s("0JpG"),o=s("TnpK"),a=s("nmzr");const l="ultra.course.course-tasks.router";n.module(l,[i.b,r.moduleName,o.b]).config([i.c,o.c,(e,t)=>{t.peekState(a.CourseTasksRoutes.COURSE_TASKS_LOGS,{abstract:!0,url:"/courseTasks",require:()=>Promise.all([s.e(38),s.e(70)]).then(s.bind(null,"+nHB")),resolve:{[i.d]:e.resolve,translations:[r.serviceName,e=>e.loadBundle("features/course/course-tasks")]},panelClass:"full"}).peekState(a.CourseTasksRoutes.COURSE_TASKS_PANEL,{url:"/tasks",views:{"course-tasks@":{require:[()=>Promise.all([s.e(38),s.e(740)]).then(s.bind(null,"+KHK")),()=>Promise.all([s.e(38),s.e(70)]).then(s.bind(null,"+nHB"))]}},pageTitle:"course.courseTasks.tasks.title",peekStates:["content-manage"],panelClass:"full"}).peekState(a.CourseTasksRoutes.COURSE_LOGS_PANEL,{url:"/logs",views:{"course-tasks@":{require:[()=>Promise.all([s.e(38),s.e(739)]).then(s.bind(null,"WRh5")),()=>Promise.all([s.e(38),s.e(70)]).then(s.bind(null,"+nHB"))]}},pageTitle:"course.courseTasks.logs.title",panelClass:"full"})}])},"YVo+":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("Llzl"),i=s("w9Zy"),r=s("TnpK"),o=s("nmzr");const a="profile.update-password.routes";n.module(a,[i.d,r.b]).config([r.c,e=>{e.peekState(o.ProfileRoutes.UPDATE_PASSWORD_PEEK,{url:"/password/update",require:()=>s.e(666).then(s.bind(null,"aJE6")),pageTitle:"base.profile.update-password.pageTitle"})}])},YfM7:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("Llzl"),i=s("5MwF"),r=s("TnpK");const o="ultra.base.demo.routes";n.module(o,[r.b]).config([r.c,e=>{i.a.features.componentDemos&&e.peekState("demoComponent",{url:"/component/:componentId",require:()=>s.e(689).then(s.bind(null,"YZN4")),panelClass:"full",pageTitle:"Sample Component"})}])},YzQO:function(e,t,s){"use strict";function n(e){if(e&&e.length){return e.hasClass("bb-editor")||e.is("[analytics-on]")||n(e.parent())}return!1}function i(e){var t;return!!(null===(t=null==e?void 0:e.closest)||void 0===t?void 0:t.call(e,"[data-no-angulartics-click]"))}function r(e){if(e&&e.length)return e.closest("[bb-click-to-invoke-child]").length>0?e.attr("analytics-id"):e.attr("analytics-id")||e.find("[analytics-id]").attr("analytics-id")}function o(e){if(!e||!e.length)return;const t=e.closest("[analytics-id]").attr("analytics-id");return t||(e.attr("[bb-click-to-invoke-child]")||e.closest("[bb-click-to-invoke-child]").length>0?e.find("[analytics-id]").attr("analytics-id")||e.closest("[bb-click-to-invoke-child]").find("[analytics-id]").attr("analytics-id"):void 0)}function a(e){if(e&&e.length){switch((e.prop("tagName")||"").toLowerCase()){case"a":case"input":case"button":return r(e);default:return a(e.parent())}}}function l(e){if(e&&e.length)return e.attr("analytics-context")||l(e.parent())}s.d(t,"e",(function(){return n})),s.d(t,"f",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"d",(function(){return a})),s.d(t,"a",(function(){return l}))},"Z+K4":function(e,t,s){"use strict";var n;!function(e){e.DeleteAdaptiveRelease="course.adaptiverelease.DELETE",e.ModifyAdaptiveRelease="course.adaptiverelease.MODIFY",e.ViewAdaptiveRelease="course.adaptiverelease.VIEW",e.ModifyAdaptiveReleaseDates="course.adaptiverelease.dates.MODIFY",e.DeleteAssessment="course.assessment.DELETE",e.ModifyAssessment="course.assessment.MODIFY",e.ViewAssessment="course.assessment.VIEW",e.ModifyAttendance="course.attendance.MODIFY",e.ViewAttendance="course.attendance.VIEW",e.ViewChildCourse="course.children.VIEW",e.ModifyAllowConversationReplies="course.conversations.allow-replies.MODIFY",e.ModifyTimeLimitAccomodation="course.timelimit-exception.MODIFY",e.ModifyDueDateException="course.duedate-exception.MODIFY",e.ViewTimeLimitAccomodation="course.timelimit-exception.VIEW",e.ViewDueDateException="course.duedate-exception.VIEW",e.ViewPreviewStudent="course.user-impersonate.EXECUTE",e.ModifyBannerImage="course.banner.MODIFY",e.ModifyBannerVisibility="course.banner.visibility.MODIFY"}(n||(n={})),t.a=n},ZBYA:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("Llzl"),i=s("pjml");const r="ultraUi.components.services.predict.institutionPreference",o="predictInstitutionPreference";class a{constructor(e,t){this.$rootScope=e,this.predictInstitutionPreferenceModel=t}getInstitutionPreference(e){return this.predictInstitutionPreferenceModel.getInstitutionPreference(e)}}a.$inject=["$rootScope",i.cb.serviceName];class l extends a{}n.module(r,[i.N]).service(o,a)},ZMjE:function(e,t){e.exports='<div class="import-status-bar import-course-error" ng-class="{\'below\': contentImportStatusBarController.hideStatusBar()}"\n     ng-if="display" bb-load-bundle="components/directives/import-status-bar">\n  <div class="row">\n      <div bb-first-time-container>\n        <div class="columns guidance-wrapper import-status-bar-message">\n          <span class="successful-import-message ellipsis" bb-focus bb-translate ng-if="contentImportStatusBarController.notCarriedForwardItemsCount === 0">\n            course.import.statusBar.success\n          </span>\n          <bb-guidance component-key="importAnalysis" page-container-selector=".course-outline"\n                       class="guidance-element-overlay push-right push-top" ng-if="contentImportStatusBarController.notCarriedForwardItemsCount > 0">\n            <bb-translate>course.import.statusBar.tooltip.main</bb-translate>\n          </bb-guidance>\n          <a bb-focus \n             href="javascript:void(0);" \n             class="not-copied-details" \n             ng-if="contentImportStatusBarController.notCarriedForwardItemsCount > 0"\n             ng-class="{\'not-carry-details-warn\': contentImportStatusBarController.notCarriedForwardItemsCount > 0}"\n             ng-click="contentImportStatusBarController.goToImportReport()"\n             analytics-id="course.import.statusBar.importReport.link">\n            <div class="status-bar-alarm" bb-guidance-target component-key="importAnalysis">\n                <bb-translate class="ellipsis" translate-values="{ count: contentImportStatusBarController.notCarriedForwardItemsCount }">\n                  course.import.statusBar.itemsCount.plural\n                </bb-translate>\n            </div>\n          </a>\n        </div>\n      </div>\n    <div class="columns confirm-column right">\n      <button class="button default js-import-confirm" \n              ng-click="contentImportStatusBarController.confirm()"\n              analytics-id="course.import.statusBar.confirm.button">\n        <span bb-translate="course.import.statusBar.confirm"></span>\n      </button>\n      \x3c!-- POST v1 --\x3e\n      \x3c!--<button tabindex="0" class="right inverse undo-import" ng-click="contentImportStatusBarController.undo()">--\x3e\n      \x3c!--<span>Undo Import</span>--\x3e\n      \x3c!--</button>--\x3e\n    </div>\n  </div>\n</div>'},ZQey:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("nbDY"),i=s.n(n);class r extends i.a{constructor(e){super(e),this.courseStatus=e}}r.Open=new r("OPEN"),r.Complete=new r("COMPLETE"),r.Private=new r("PRIVATE"),r.PrivateDuration=new r("PRIVATE_DURATION"),r.PrivateDurationClassic=new r("PRIVATE_DURATION_CLASSIC"),r.OpenTermClassic=new r("OPEN_CLASSIC"),r.PrivateTermClassic=new r("PRIVATE"),r.TermOpen=new r("OPEN"),r.TermComplete=new r("COMPLETE"),r.TermPrivate=new r("PRIVATE"),r.OpenClassic=new r("OPEN_CLASSIC")},Za2G:function(e,t){e.exports='<bb-modal class="notification" \n          modal-title-key="components.directives.fileUpload.improperAmountOfFilesTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.improperAmountOfFilesFull</bb-translate>\n    </p>\n    <div class="file-list">\n      <div ng-repeat="file in fileUpload.uploadedFiles">\n        <input ng-if="$index===0" class="toggle-input" type="radio" id="{{\'fileListing\' + $index}}" name="fileListing" value="{{$index}}" checked analytics-id="components.directives.checked.input.radio">\n        <input ng-if="$index!==0" class="toggle-input" type="radio" id="{{\'fileListing\' + $index}}" name="fileListing" value="{{$index}}" analytics-id="components.directives.not.checked.input.radio">\n        <label class="toggle-label" for="{{\'fileListing\' + $index}}" style="white-space: nowrap">{{file.name}}</label><br />\n      </div>\n    </div>\n  </div>\n  <button name="modal-footer-button-primary" role="button" class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.uploadSelectedFile">\n    <bb-translate>components.directives.fileUpload.uploadSelectedFile</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},"ZzN+":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return c}));var n=s("Llzl"),i=s("5MwF"),r=s("pjml"),o=s("0+Qs"),a=s("zGdY");const l="ultra.service.course.conversion",c="courseConversion",d=6e4,u=6e3;class h{constructor(e,t,s,n,i,r){this.interval=e,this.CourseModel=t,this.$modal=s,this.$q=n,this.$rootScope=i,this.ScheduledTaskModel=r,this.showPreviewAlert=!0,this.taskCache={},this.queuedTaskCache={}}_getConversionTask(e){return this.ScheduledTaskModel.$find(e)}isPreview(e){return!e.isOpen()&&e.isUltraPreview()}isConversionComplete(e){return!e||(e===a.QueueTaskStatus.Complete||e===a.QueueTaskStatus.CompleteErrors)}isConversionSuccess(e){return!e||e===a.QueueTaskStatus.Complete}setCheckConversionIntervalIfNotExist(e,t){this.taskCache[e.courseId]||this.setCheckConversionInterval(e,t)}setCheckConversionInterval(e,t){const s=this.cancelConversionInterval(e);this.removeQueuedTaskFromCache(e),void 0===t&&s&&(t=s.onCompleteCallback),e.refreshConvertToUltraStatus().then(s=>{this.queuedTaskCache[e.courseId]=s.ui.convertToUltraTaskId,this._getConversionTask(this.queuedTaskCache[e.courseId]).$then(s=>{this.setUpIntervalToPollForConversionTaskCompletion(s,e,t)})})}setUpIntervalToPollForConversionTaskCompletion(e,t,s){const n=e.taskTitle;if(n&&(n.indexOf("ConvertTOUltraQueuedOperation")>=0||n.indexOf("UndoUltraQueuedOperation")>=0)){let n;const r=()=>{n()};if(n=()=>{this._getConversionTask(e.taskId).$then(e=>{const s=e.taskStatus.toString(),n=this.isConversionComplete(s),i=this.isConversionSuccess(s);if(n){const r=this.cancelConversionInterval(t);this.removeQueuedTaskFromCache(t),r&&r.onCompleteCallback&&r.onCompleteCallback(s,{complete:n,success:i,taskId:e.taskId,taskTitle:e.taskTitle})}})},!this.taskCache[t.courseId]){const e=i.a.production?d:u;this.taskCache[t.courseId]={interval:this.interval(r,this.$rootScope,e),onCompleteCallback:s}}}}cancelConversionInterval(e){const t=this.taskCache[e.courseId];return t&&(this.interval.cancel(t.interval),this.taskCache[e.courseId]=null),t}removeQueuedTaskFromCache(e){delete this.queuedTaskCache[e.courseId]}}h.$inject=[o.b,r.m.serviceName,"$modal","$q","$rootScope",r.nb.serviceName];class m extends h{}n.module(l,[r.N,o.a]).service(c,h)},ZzR9:function(e,t,s){"use strict";var n,i;s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return i})),function(e){e.$stateChangeError="$stateChangeError",e.$stateChangeStart="$stateChangeStart",e.$stateChangeSuccess="$stateChangeSuccess",e.$stateNotFound="$stateNotFound",e.$stateHasCourseInContextChanged="$stateHasCourseInContextChanged",e.$stateHasContentInContextChanged="$stateHasContentInContextChanged"}(n||(n={})),function(e){e.$locationChangeStart="$locationChangeStart",e.$locationChangeSuccess="$locationChangeSuccess"}(i||(i={}))},ZzYr:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s("D57K"),i=s("TnpK"),r=s("Qbdf"),o=s("aHpC"),a=s("Llzl");const l="ultra.components.directives.courseOrgTokenReplacementDirective",c=[{coursePrefix:"base.baseCourses",orgPrefix:"base.baseOrganizations"},{coursePrefix:"base.courses",orgPrefix:"base.organizations"},{coursePrefix:"course",orgPrefix:"organization"},{coursePrefix:"components.directives.message",orgPrefix:"components.directives.message.organization"},{coursePrefix:"components.directives.learning-module.ghost-panel",orgPrefix:"components.directives.learning-module.orgs-ghost-panel"},{coursePrefix:"components.directives.calendar",orgPrefix:"components.directives.calendar.organization"},{coursePrefix:"components.directives.content-visibility",orgPrefix:"components.directives.content-visibility.organization"},{coursePrefix:"components.directives.grade",orgPrefix:"components.directives.grade.organization"}];class d{constructor(e,t,s,n,i){this.element=e,this.attributes=t,this.scope=s,this.ultraState=n,this.currentCourse=i;try{if((n.includes("base.organizations.**")||i.course&&i.course.isOrganization)&&(t.bbTranslate&&(t.bbTranslate=this.replaceToken(t.bbTranslate),e.attr("bb-translate",this.replaceToken(t.bbTranslate))),t.bbTranslateAttrs)){let s=t.bbTranslateAttrs;a.forEach(this.scope.$eval(s),e=>{s=s.replace(e,this.replaceToken(e))}),t.bbTranslateAttrs=s,e.attr("bb-translate-attrs",s)}}catch(e){}}replaceToken(e){if(e){const t=c.find(t=>e.startsWith(t.coursePrefix));if(t)return e.replace(t.coursePrefix,t.orgPrefix)}return e}}let u=class{constructor(e,t){this.ultraState=e,this.currentCourse=t,this.restrict="A",this.scope=!1,this.priority=-1,this.compile=()=>(e,t,s)=>new d(t,s,e,this.ultraState,this.currentCourse)}};u=Object(n.__decorate)([Object(n.__param)(0,Object(o.b)(i.d)),Object(n.__param)(1,Object(o.b)(r.e))],u),a.module(l,[i.b]).directive("courseOrgTokenResolver",["$injector",e=>e.instantiate(u)])},aD4H:function(e,t){e.exports='<ng-form name="baseForm" bb-autosave save-func="saveForm.save()" validation-func="saveForm.validate()" delay-autosave="delayAutosave()"\n         debounce-save-destination="debounceSaveDestination()" novalidate>\n    <div ng-transclude />\n    <bb-save-buttons validate-save="saveForm.validate()"\n                     save-action="saveForm.saveClicked()"\n                     cancel-action="saveForm.cancelClicked()"\n                     delete-action="saveForm.deleteClicked()"\n                     hide-save="hideFooter"\n                     hide-cancel="hideFooter"\n                     mousedown-action="saveForm.mouseDown()"\n                     can-delete="canDelete"\n                     display-delete-after-saving="displayDeleteAfterSaving()"\n                     delete-confirmation-resource-type="{{deleteConfirmationResourceType}}"\n                     must-show-delete-confirmation="true"\n                     choices="choices"\n                     analytics-id-tag-prefix="{{::analyticsIdTagPrefix}}.saveForm">\n                          \x3c!-- TODO: will update the above “must-show-delete-confirmation” after PR #818 (update confirmation needed) is merged --\x3e\n    </bb-save-buttons>\n</ng-form>\n'},aHpC:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return l}));var n=s("nsO7");function i(e,...t){const s=Symbol(e.name);return function(n,i,r){const o=r.value;r.value=function(...n){return this[s]=this[s]||e.apply(null,[o].concat(t||[])),this[s].apply(this,n)}}}const r=function(e){return i(n.debounce,e)},o=function(...e){return function(t,s,i){const r=i.value,o=Symbol("@ScopeOnce("+t.constructor.name+"."+s+")"),a=Symbol("@ScopeOnce("+t.constructor.name+"."+s+")");i.value=function(...t){const s=this,i=s.$scope||s.scope;if(!i)throw new Error("NO_SCOPE_FOUND");return Object(n.isEmpty)(e)||(s[a]=s[a]||Object(n.once)(()=>{i.$watchGroup(e,()=>{s[o]=null})}),s[a]()),s[o]=s[o]||Object(n.once)((function(...e){return r.apply(s,e)})),s[o].apply(s,t)}}},a=function(e){if(!e)throw new Error("Empty name is not accepted");return function(t,s,n){if("function"!=typeof t)throw new Error("@Inject only supports constructor arguments");t.$inject=t.$inject||[],t.$inject[n]=e}},l=function(){return function(e,t,s){const n=s.value;s.value=function(...e){const t=n.apply(this,e),s=this.$injector;if(!s)throw new Error("$injector NotFound, the decorator requires $injector to be injected into class.");s.invoke(["$rootScope","$q",(e,s)=>{s.when(t).then(()=>e.$applyAsync())}])}}}},abE0:function(e,t){e.exports='<bb-modal class="notification" modal-translate-options="modalTranslateOptions"\n          modal-aria-type="{{modalAriaType}}"\n          analytics-id-tag-prefix="components.directives.confirmationNeeded">\n  <div name="modal-contents">\n    <p ng-bind-html="::modalStrings.instructions"></p>\n    <div ng-show="confirmationNeeded.choices && confirmationNeeded.choices.length > 0" ng-repeat="choice in confirmationNeeded.choices">\n      <input id="{{choice.key}}" ng-disabled="choice.isDisable" ng-model="choice.value" type="checkbox" analytics-id="components.directives.confirmationNeeded.input.checkbox"/>\n      <label for="{{choice.key}}" bb-translate="{{choice.localizedKey}}"></label>\n    </div>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="okAction()" analytics-id="primary.button.okAction.button">{{::modalStrings.ok}}</button>\n  <button name="modal-footer-button-secondary" class="button button--secondary confirm-cancel js-secondary-button" ng-click="cancelAction()" analytics-id="secondary.button.cancelAction.button">{{::modalStrings.cancel}}</button>\n</bb-modal>\n'},adx1:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("nsO7");class i{constructor(){this.events=Object.create(null)}$onEvent(e,t){return this.events[e]=this.events[e]||[],this.events[e].push(t),n.once(()=>{n.remove(this.events[e],e=>e===t)})}$emitEvent(e,...t){const s={type:e};(this.events[e]||[]).forEach(e=>{e.call(this,s,...t)})}}},aohr:function(e,t,s){"use strict";var n;!function(e){e.CcAdvisors="CC_ADVISORS",e.DisableAdvisorViewAllStudents="DISABLE_ADVISOR_VIEW_ALL_STUDENTS",e.EmailBranding="EMAIL_BRANDING",e.EmailSender="EMAIL_SENDER",e.EnableLogOut="ENABLE_LOG_OUT",e.InstructorViewMajorDegreeColumn="INSTRUCTOR_VIEW_MAJOR_DEGREE_COLUMN",e.OverrideLanguagePack="OVERRIDE_LANGUAGE_PACK",e.TypeaheadCourseLimit="TYPEAHEAD_COURSE_LIMIT",e.TypeaheadStudentLimit="TYPEAHEAD_STUDENT_LIMIT"}(n||(n={})),t.a=n},b2lU:function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return a}));var n=s("0JpG");const i="fileUtility",r="FileUtilFactory";var o;!function(e){e.bytes="components.directives.fileUpload.bytes",e.GB="components.directives.fileUpload.GB",e.KB="components.directives.fileUpload.KB",e.MB="components.directives.fileUpload.MB"}(o||(o={}));class a{constructor(e,t){this.bbLocalize=e,this.$q=t,this.calculateSize=e=>{let t=o.bytes;return e>1e3&&(e/=1e3,t=o.KB,e>1e3&&(e/=1e3,t=o.MB,e>1e3&&(e/=1e3,t=o.GB))),{size:e,sizeLabel:t}}}getLocalizedSize(e,t,s=1){const n=this.calculateSize(e),i=this.bbLocalize.translateSync({locale:t,key:n.sizeLabel}),r=this.bbLocalize.translateSync({locale:t,key:"global.localizedNumber",params:{number:n.sizeLabel===o.bytes?n.size:parseFloat(n.size.toFixed(s))},noWrap:!0});return this.bbLocalize.translateSync({locale:t,key:"components.directives.fileUpload.sizeOutput",params:{size:r,label:i},noWrap:!0,noEscape:!0})}}a.$inject=[n.serviceName,"$q"],angular.module(i,[n.moduleName]).factory(r,["$injector",e=>(function(){return e.instantiate(a)})])},bF8R:function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return h}));var n=s("nsO7"),i=s("Llzl"),r=s("pjml"),o=s("fYJU"),a=s("o5Lu"),l=s("Bu0u"),c=s("zGdY"),d=s("0JpG");const u="ultra.components.services.courseContent",h="courseContent";class m{constructor(e,t,s,n,i,r,o){this.$q=e,this.$rootScope=t,this.$log=s,this.grade=n,this.contextUser=i,this.UserModel=r,this.bbLocalize=o,this.contentDataResult=new p}loadContentAndGrades(e){let t;if(e.content)t=e.content.$asPromise&&e.content.$asPromise()||this.$q.when(e.content);else{if(!e.contentId)throw new l.a({message:"Content or contentId must be provided."});{const s="assignedGroups,selfEnrollmentGroups.group"+(e.contentExtraExpand?","+e.contentExtraExpand:"");t=e.course.contents.$find(e.contentId,{expand:s}).$asPromise()}}if(!this.contextUser.userId)throw new l.a({message:"There is no userId in the context."});return t.then(t=>{const s=new p;return s.courseContent=t,s.groupMembers=[],e.column?s.gradingColumn=e.column:s.gradingColumn=e.course.gradebook.columns.$buildRaw(t.getAssociatedGradingColumn(e.columnId)),s.gradingColumn.rubricAssociations||s.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise().then(e=>{s.gradingColumn.rubricAssociations=e.rubricAssociations}),this.grade.loadGrade({attemptQueryParams:{expand:"toolAttemptDetail,alignedGoals,members,attempts,attempts.toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor",overrideAggregationModel:r.C.AttemptAggregationModel.Last},gradeQueryParams:{expand:"attemptsLeft"},courseId:e.course.id,column:s.gradingColumn,content:s.courseContent,userId:this.contextUser.userId},!0).then(i=>{if(s.submitter=this.contextUser.userModel,i){if(s.gradeDetail=i,s.attempt=i.ui.attempt,s.groupAttempt=i.ui.groupAttempt,t.isGroupContent)return this.getGroupMembers(e.course,t,s.groupAttempt).then(e=>(s.groupMembers=e,s.groupAttempt&&(s.submitter=n.find(e,e=>e.id===s.groupAttempt.submittedBy),!s.submitter&&(s.submitter=null,s.groupAttempt.submittedBy))?this.UserModel.$find(s.groupAttempt.submittedBy).$then(e=>{s.submitter=e||null},e=>this.$log.error(e.$response)).$asPromise().then(()=>s):s))}else if(t.isGroupContent)return this.getGroupMembers(e.course,t).then(e=>(s.groupMembers=e,s));return s})})}getGroupMembers(e,t,s){return t.assignedGroups&&t.assignedGroups.length>0?e.groups.$find(t.assignedGroups[0].groupId,{expand:"memberships",excludeUnavailableMembers:!0}).$asPromise().then(t=>e.memberships.$refresh({fields:"id, user, courseRole",roleBucket:c.CourseRoleBucket.Taking}).$asPromise().then(e=>this.sortGroupMembers(e,t))):this.$q.when([])}sortGroupMembers(e,t){const s={},n=[];let i=t.memberships||t.members;e.forEach(e=>{e.user&&(e.user.ui=e.user.ui||{},s[e.user.id]=e.user)});const r=[];return i.forEach(e=>{const t=e.userId||e,n=s[t];if(n){const e=this.bbLocalize.formatUsername(n,d.ILocaleUsernameFormat.Short,this.$rootScope);r.push(e),e.then(e=>{n.ui.formatUserName=e})}}),this.$q.all(r).then(()=>((i=i.filter(e=>!!s[e.userId||e])).sort((e,t)=>{const n=e.userId||e,i=t.userId||t;return s[n].ui.formatUserName.localeCompare(s[i].ui.formatUserName)}),i.forEach(e=>{const t=e.userId||e;s[t]&&(n.push(s[t]),delete s[t])}),n))}}m.$inject=["$q","$rootScope","$log",a.i,o.b,r.Jb.serviceName,d.serviceName];class p{}class g extends m{}i.module(u,[r.N,o.a]).service(h,m)},bMxM:function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return h}));var n=s("Llzl"),i=s("pjml"),r=s("P2dS"),o=s("IbyE"),a=s("CY5M"),l=s("zGdY"),c=s("VAMW"),d=s("6fZB");const u="ultra.components.services.courseContentIconService",h="courseContentIconService",m=["-a","-c","-o","-hc"].join("|").replace(/-/g,""),p=new RegExp(`-(${m})$`,"g");class g{constructor(e){this.service=e,this.key=c.TransitService.ContentIcon}getIconClass(e){return Object(d.a)(this.service.getIconClass(e))}}class b{constructor(e,t){this.$q=e,this.gradeColumnCategoryService=t,Object(c.registerService)(new g(this))}getIconClass(e){var t,s;const n=i.p.ContentHandler;let r,l="";if(e&&e.contentHandler){const c=e.contentHandler.toString(),d=n.parse(c);l=d&&d.iconClass;const u=e.getAssociatedGradingColumn?e.getAssociatedGradingColumn():null;if(u&&u.gradebookCategory&&u.gradebookCategory.title)l=this.getColumnIconClassAsString(u);else if(e.contentDetail){if(n.File.isEqualTo(d)){const t=e.contentDetail[n.File.toString()]&&e.contentDetail[n.File.toString()].file&&e.contentDetail[n.File.toString()].file.mimeType||"";l=b.fileMIMETypeToIconClass[t]=b.fileMIMETypeToIconClass[t]||Object(o.getFileTypeIconClass)(t)}if(n.CourseLink.isEqualTo(d)&&(r=e.getLinkContentSource().$then(e=>{const t=n.parse(e.contentHandler.toString());l=t&&t.iconClass})),n.LtiLink.isEqualTo(d)){(null===(s=null===(t=e.contentDetail)||void 0===t?void 0:t[c])||void 0===s?void 0:s.itemOrigin)===a.LtiItemOrigin.CloudDocument&&(l=n.CloudDocumentPlacement.iconClass)}}n.Folder.isEqualTo(d)&&(l=e.contentDetail&&e.contentDetail[n.Folder.toString()]&&e.contentDetail[n.Folder.toString()].isBbPage?n.Document.iconClass:e.ui&&e.ui.isOpen?i.p.FolderContentHandlerIcon.OpenFolder.toString():i.p.FolderContentHandlerIcon.ClosedFolder.toString())}return r?r.$asPromise().then(()=>this.$q.when(l||b.DEFAULT_ICON_CLASS)):this.$q.when(l||b.DEFAULT_ICON_CLASS)}getColumnIconClassAsString(e){var t,s,n;let i="";const a=(null===(t=e.isDiscussion)||void 0===t?void 0:t.call(e))||(null===(s=e.isJournal)||void 0===s?void 0:s.call(e));if(e.externalGrade?i=b.GRADE_OVERALL_ICON_CLASS:e.calculationType&&l.CalculationType.NonCalculated!==e.calculationType?i=b.GRADE_CALCULATIONS_ICON_CLASS:e.gradebookCategory&&e.gradebookCategory.title&&!a&&(i=this.gradeColumnCategoryService.getCategoryIcon(e.gradebookCategory)),(""===i||i===r.a.DEFAULT_ICON_FOR_CATEGORY&&a)&&e.scoreProviderHandle){const t=o.ScoreProviderHandle.parse(e.scoreProviderHandle.toString());null!=t&&(i=t.iconClass,(null===(n=e.isScormSCO)||void 0===n?void 0:n.call(e))&&(i+=b.SCORM_SCO_ICON_CLASS_SUFFIX))}return i}getColumnIconClass(e){const t=this.getColumnIconClassAsString(e);return this.$q.when(t||b.DEFAULT_ICON_CLASS)}getIconName(e){return e.replace("img-icon-","")}getIconNameForLocalization(e){return e.replace(p,"")}}b.DEFAULT_ICON_CLASS="img-icon-document-blank",b.GRADE_OVERALL_ICON_CLASS="img-icon-overall-grade",b.GRADE_CALCULATIONS_ICON_CLASS="img-icon-calculation",b.SCORM_SCO_ICON_CLASS_SUFFIX="-sco",b.$inject=["$q",r.c],b.fileMIMETypeToIconClass=Object.create(null);class f extends b{}n.module(u,[r.b]).service(h,b)},bTsL:function(e,t){e.exports='<div class="dropdown-directive">\n  <select id="{{::listId}}" ng-if="::dropdown.useNativeSelect()" ng-model="dropdown.selectedItem"\n          ng-options="item.name disable when item.isHeader for item in itemList"\n          ng-class="{\'drowdown-group\': listKind === \'group\'}"\n          ng-change="dropdown.clickItem()" analytics-id="directives.dropdown.item.select">\n    \x3c!--for the listkind=group, ios mobile will show a blank option--\x3e\n    <option ng-if="dropdown.shouldHaveBlankOption(listKind)" class="default-option" value="" analytics-id="directive.dropdown.option"></option>\n  </select>\n\n  <ul ng-attr-role="{{dropdown.getRole()}}"\n      ng-class="{\'feature-filter\': listKind !== \'custom\', \'selection-full-width\': selectionFullWidth(), \'force-above\': forceAbove}"\n      id="{{::listId}}" ng-if="::!dropdown.useNativeSelect()" class="f-dropdown ignore-accordion" data-dropdown-content\n      aria-hidden="true" tabindex="-1">\n    <li class="list-header" ng-if="listHeader">\n      <a href="javascript:void(0);"\n         analytics-id="{{::analyticsIdTagPrefix}}.listHeader.link"\n      >\n        {{listHeader}}\n      </a>\n    </li>\n    <li role="presentation" ng-repeat="item in itemList" ng-if="listKind === \'filter\'"\n        ng-class="{\'item-selected\': selectedItem === item}"\n        class="{{item.extraClass}}"\n    >\n      <a href="javascript:void(0);"\n         role="option"\n         aria-selected="{{selectedItem === item}}"\n         aria-setsize="{{itemList.length}}"\n         aria-posinset="{{itemList.indexOf(item) + 1}}"\n         class="js-filter-id-{{::item.index}}"\n         data-filter-id="{{::item.nature.toString()}}"\n         ng-click="dropdown.selectItem(item)"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name.split(\' \').join(\'\')}}.link">\n        <span class="ellipse" title="{{item.name}}">{{item.name}}</span>\n        <i></i>\n      </a>\n    </li>\n    <li ng-repeat="item in itemList" ng-if="listKind === \'avatar-list\'">\n      <a href="javascript:void(0);"\n         class="item-container"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name}}.avatar.link">\n        <div class="info-container">\n          <div class="avatar-container">\n            <bb-avatar user="item" inactive="!dropdown.isUserCourseAvailable(item.id)"></bb-avatar>\n          </div>\n          <div class="username-container">\n            <bb-username user="item" format="short" show-pronouns="true" show-pronunciation="true"></bb-username>\n            <div ng-if="selectedItem === item" class="sub-text" ng-bind-html="selectedText"></div>\n          </div>\n        </div>\n      </a>\n    </li>\n    <li role="presentation" ng-if="listKind === \'group\'" ng-repeat="item in itemList"\n        ng-class="{\'group-header-li\': item.isHeader }">\n      <a href="javascript:void(0);"\n         role="option"\n         aria-setsize="{{itemList.length}}"\n         aria-posinset="{{itemList.indexOf(item) + 1}}"\n         ng-class="{\'group-header\': item.isHeader}"\n         ng-attr-tabindex="{{ item.isHeader ? -1 : 0 }}"\n         ng-click="dropdown.selectItem(item, $event)"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name}}.group.link">\n        <span class="ellipse" title="{{item.name}}">{{item.name}}</span>\n      </a>\n    </li>\n    <div bb-dropdown-transclude></div>\n  </ul>\n</div>\n'},bd3f:function(e,t){e.exports='<p class="sr-only read-info-polite" role="alert" aria-live="polite">{{readInfo.message}}</p>\n<p class="sr-only read-info-assertive" role="alert" aria-live="assertive">{{readInfo.alertMessage}}</p>'},bd9L:function(e,t,s){"use strict";s.d(t,"e",(function(){return u})),s.d(t,"d",(function(){return h})),s.d(t,"b",(function(){return m})),s.d(t,"c",(function(){return p})),s.d(t,"a",(function(){return g}));var n=s("Llzl"),i=s("nbDY"),r=s.n(i),o=s("+brj"),a=s("7/CN"),l=s("RNuw"),c=s("lEL+"),d=s("AuQm");const u="ultra.directives.autosave",h="bb-autosave-save-to-server-now",m="bb-autosave-browser-delete",p="bb-autosave-form",g="bb-autosave-save-trigger-debounce";class b extends r.a{}b.BrowserLocalStorage=new b("browserLocalStorage"),b.BrowserSessionStorage=new b("browserSessionStorage"),b.Server=new b("server");class f{constructor(e,t,s,n,i){switch(this.$q=e,this.scope=t,this.formController=s,this.browserStorage=n,this.timeout=i,this.timeoutMillis=2e3,this.startAutoSubmit=!1,this.saveNumber=0,this.saveTo=this.scope.debounceSaveDestination&&b.parse(this.scope.debounceSaveDestination())||b.Server,this.saveTo){case b.BrowserSessionStorage:this.browserStorageDestination=o.a.SessionStorage;break;case b.BrowserLocalStorage:this.browserStorageDestination=o.a.LocalStorage}this.checkForDirectiveConfigErrors(),t.timeoutMillis?this.timeoutMillis=t.timeoutMillis():this.browserStorageDestination&&(this.timeoutMillis=1e3),this.setupListeners(),this.browserStorageDestination&&this.restoreFromBrowser(),this.setupWatcher()}setupListeners(){this.scope.$on("bb-autosave-interrupt-timer",()=>{this.timeout.cancel(this.autoSaveTimeout)}),this.scope.$on(g,()=>{this.scope.delayAutosave&&this.scope.delayAutosave()||this.debounceSave()}),this.scope.$on(h,()=>{this.scope.delayAutosave&&this.scope.delayAutosave()||(this.timeout.cancel(this.autoSaveTimeout),this.saveToServerNow())}),this.scope.$on("bb-autosave-save-to-browser-now",()=>{this.scope.delayAutosave&&this.scope.delayAutosave()||(this.scope.$emit(p,d.AutoSaveMessage.Change),this.timeout.cancel(this.autoSaveTimeout),this.saveToBrowserNow())}),this.scope.$on("bb-autosave-browser-restore",()=>{this.restoreFromBrowser()}),this.scope.$on(m,()=>{this.deleteFromBrowser()}),this.scope.$on("bb-start-auto-submission",(e,t)=>{this.startAutoSubmit=!0,t.resolve()}),this.scope.$on("bb-cancel-auto-submission",()=>{this.startAutoSubmit=!1})}setupWatcher(){const e=(e,t)=>{if(!this.scope.delayAutosave||!this.scope.delayAutosave()){if(null===e&&""===t)return;this.debounceSave()}};if(!this.scope.delayAutosave||!this.scope.delayAutosave())return l.a(this.scope,this.formController,e);const t=this.scope.$watch(()=>this.scope.delayAutosave(),s=>{null==s||s||(l.a(this.scope,this.formController,e),t())})}checkForDirectiveConfigErrors(){if(this.saveTo.isEqualTo(b.Server)&&(!this.scope.saveFunc||!this.scope.validationFunc))throw new Error("saving to the server requires save-func and validate to be defined")}isValid(){return this.formController.$valid&&this.scope.validationFunc()}debounceSave(){if(this.startAutoSubmit)return;this.scope.useSaveNumbers&&(this.saveNumber=this.saveNumber+1);const e=this.saveNumber;this.scope.$emit(p,d.AutoSaveMessage.Change,void 0,{id:this.scope.autoSaveContextId,area:this.scope.autoSaveContextArea,saveNumber:e}),this.scope.$emit("bb-autosave-form-to-browser",d.AutoSaveMessage.Change),this.timeout.cancel(this.autoSaveTimeout);const t=()=>{this.saveToDestination(e)};!this.autoSaveTimeout&&this.scope.useLeadingEdge?(this.saveToDestination(e),this.autoSaveTimeout=this.timeout(()=>{},this.scope,this.timeoutMillis)):this.autoSaveTimeout=this.timeout(t,this.scope,this.timeoutMillis)}saveToDestination(e){this.saveTo.isEqualTo(b.Server)?this.saveToServerNow(e):this.browserStorageDestination&&this.saveToBrowserNow()}saveToServerNow(e=0){if(this.startAutoSubmit||!a.c()){if(!this.scope.saveFunc||!this.scope.validationFunc)throw new Error("saving to the server requires save-func and validate to be defined");this.isValid()?(this.scope.$emit(p,d.AutoSaveMessage.Saving,void 0,{id:this.scope.autoSaveContextId,area:this.scope.autoSaveContextArea,saveNumber:e}),this.scope.saveFunc().then(t=>{this.scope.$emit(p,d.AutoSaveMessage.Saved,t,{id:this.scope.autoSaveContextId,area:this.scope.autoSaveContextArea,saveNumber:e}),this.browserStorageDestination&&this.deleteFromBrowser()},t=>{this.scope.$emit(p,d.AutoSaveMessage.SaveFailure,t,{id:this.scope.autoSaveContextId,area:this.scope.autoSaveContextArea,saveNumber:e})})):this.scope.$emit(p,d.AutoSaveMessage.ValidationFailure)}}saveToBrowserNow(){if(!this.browserStorageDestination)throw new Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");this.scope.$emit("bb-autosave-form-to-browser",d.AutoSaveMessage.Saving),this.browserStorage.serializeCurrentRouteScopes(this.browserStorageDestination,this.scope.$parent).then(e=>{this.scope.$emit("bb-autosave-form-to-browser",d.AutoSaveMessage.Saved,e)})}restoreFromBrowser(){if(!this.browserStorageDestination)throw new Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");return this.browserStorage.deserializeCurrentRouteScopes(this.browserStorageDestination,this.scope.$parent).then(e=>{if(e)return this.scope.$root.$broadcast("bb-autosave-browser-restore-data",e),e})}deleteFromBrowser(){if(!this.browserStorageDestination)throw new Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");return this.browserStorage.deleteCurrentRouteScopes(this.browserStorageDestination)}}f.$inject=["$q","scope","formController",o.c,c.b];class v{constructor(e){this.$injector=e,this.restrict="A",this.require="^form",this.scope={debounceSaveDestination:"&?",delayAutosave:"&?",saveFunc:"&?",autoSaveContextId:"@?",autoSaveContextArea:"@?",timeoutMillis:"&?",validationFunc:"&?",useLeadingEdge:"<?",useSaveNumbers:"<?"},this.link=(e,t,s,n)=>{e.autoSave=this.$injector.instantiate(f,{scope:e,formController:n})}}}v.$inject=["$injector"],n.module(u,[c.a,o.b]).directive("bbAutosave",["$injector",e=>e.instantiate(v)])},bzJv:function(e,t,s){"use strict";var n;!function(e){e.NotStarted="NotStarted",e.Started="Started",e.Completed="Completed",e.PastDue="PastDue",e.Unavailable="Unavailable"}(n||(n={})),t.a=n},cFWd:function(e,t,s){"use strict";var n=s("nsO7"),i=s("Llzl"),r=s("oQrK"),o=s("+4Px"),a=s("lEL+"),l=s("bTsL"),c=s("yC9S");s.d(t,"a",(function(){return d}));const d="ultra.components.directives.dropdown";class u{constructor(e,t,s,a){if(this.scope=e,this.element=t,this.$window=s,this.timeout=a,this.RESIZE_DELAY=150,this.isMobile=!1,this.isIos=!1,this.setMaxHeight=()=>{const e=this.element.offset().top,t=i.element(this.$window).height();let s=34;"avatar-list"===this.scope.listKind&&(s=57);let n=Math.max(Math.floor((this.scope.forceAbove?e:t-e)/s),2);this.scope.simplifiedMaxItemsPerPage&&this.scope.simplifiedMaxItemsPerPage()>0&&(n=Math.min(n,this.scope.simplifiedMaxItemsPerPage())),this.element.find(".dropdown-directive").css({maxHeight:s*n+2})},this.element.addClass("bb-dropdown"),this.isMobile=!r.a.detect().desktop(),this.isIos=r.a.detect().ios(),this.selectedItem=this.scope.selectedItem,e.$watch("::selectedItem",e=>{this.selectedItem=e}),!this.useNativeSelect()){let t;this.element.on("keyup",e=>{e.keyCode!==o.f&&e.keyCode!==o.t||e.stopPropagation()}),this.element.on("opened.fndtn.dropdown",()=>{this.setMaxHeight(),this.scope.$applyAsync(),t=c.b.OnWindow("resize",n.debounce(this.setMaxHeight,this.RESIZE_DELAY),e),(this.scope.onOpen||i.noop)()}),this.element.on("closed.fndtn.dropdown",()=>{t(),(this.scope.onClose||i.noop)()})}}selectItem(e,t){e.isHeader?t.stopPropagation():this.scope.clickFunction({item:e})}getRole(){let e;return e="menu"===this.scope.listKind?"menu":"listbox"}clickItem(){this.selectedItem&&(this.scope.selectedItem=this.selectedItem,this.scope.clickFunction({item:this.selectedItem}))}useNativeSelect(){return!this.scope.forceCustomDropdown&&this.isMobile&&"avatar-list"!==this.scope.listKind&&"custom"!==this.scope.listKind&&"region"!==this.scope.listKind}isUserCourseAvailable(e){const t=this.scope.getUserCourseAvailabilities&&this.scope.getUserCourseAvailabilities();return!(t&&!t[e])}shouldHaveBlankOption(e){return this.isIos&&"group"===e}}u.$inject=["scope","element","$window",a.b];class h{constructor(e){this.$injector=e,this.restrict="E",this.template=l,this.transclude=!0,this.scope={listId:"@",itemList:"=",listKind:"@",selectedItem:"=?",selectedText:"@?",listHeader:"@?",clickFunction:"&?",onOpen:"&?",onClose:"&?",getUserCourseAvailabilities:"&?userCourseAvailabilities",selectionFullWidth:"&?",simplifiedMaxItemsPerPage:"&?",forceAbove:"=?",forceCustomDropdown:"=?",analyticsIdTagPrefix:"@?"},this.link=(e,t,s,n,i)=>{e.dropdown=this.$injector.instantiate(u,{scope:e,element:t})}}}h.$inject=["$injector"];class m{constructor(e){this.$injector=e,this.restrict="EA",this.link=(e,t,s,n,i)=>{"custom"===e.listKind||"region"===e.listKind||"menu"===e.listKind?i((s,n)=>{n.dropdown=e.dropdown,t.replaceWith(s)}):t.remove()}}}m.$inject=["$injector"],i.module(d,[a.a]).directive("bbDropdown",["$injector",e=>e.instantiate(h)]).directive("bbDropdownTransclude",["$injector",e=>e.instantiate(m)])},cGmE:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error.description</p>\n    <pre>{{ response | json }}</pre>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},cMqb:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("9zo4"),i=s("Llzl"),r=s("w9Zy"),o=s("XGja");const a="ultra.directives.accessibility.focus";class l{constructor(e,t){this.bbOffcanvas=e,this._accessibility=t,this.restrict="A",this.link=(e,t,s)=>{const n=s.keepTriggerFocus,i=e.$watch(s.bbFocus,e=>{null!=e&&"true"!==e.toString().toLowerCase()||!this._accessibility.isElementInActivePanel(t)||(o.a(t,this.bbOffcanvas.safeFocus.bind(this.bbOffcanvas)),"true"!==n&&i())})}}}l.$inject=[r.e,n.c],i.module(a,[r.d]).directive("bbFocus",["$injector",e=>e.instantiate(l)])},cQcs:function(e,t){e.exports='<div class="reveal-modal-bg fade"\n     ng-class="{in: animate, dark: darkenBackdrop}"\n     ng-click="close($event)"\n     style="display: block"\n     analytics-id="components.services.backdrop"\n></div>'},cYWG:function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return a}));var n=s("Llzl"),i=s("nsO7"),r=s("5MwF");const o="ultra.components.services.angular.http.ease",a="shelfLifeInEase";class l{constructor(e,t){this.$q=e,this.$log=t,this._queue={},this._queueSeq=0,this.delay=500}enqueue(e){e.shelfLifeInEase=(e.params||{})[a]||this.delay,(e.params||{})[a]=void 0;const t=this.$q.defer(),s=(new Date).getTime();if(!i.some(this._queue,(n,i)=>{if(!n)return!1;if(n.completedAt&&s-n.completedAt>n.shelfLifeInEase)return this._queue[i]=void 0,!1;let r;return(n.originalUrl||n.url)===(e.originalUrl||e.url)&&(r=this.isServableBy(n,e)),!!r&&(n.httpEaseResponseQ.promise.then(e=>{this.$q.when(r(e)).then(e=>{t.resolve(e)})}),!0)})){const s="x"+this._queueSeq++;e.originalUrl=e.url,e.httpEaseResponseQ=this.$q.defer(),e.httpEaseResponseQ.promise.finally(()=>{e.completedAt=(new Date).getTime()}),this._queue[s]=e,t.resolve()}return t.promise}getHttpInterceptor(){const e=e=>t=>{const s=t.config||t;return this.isDebouncable(s)?e(s,t):this.$q.when(t)};return{request:e(e=>e.cache?e:this.enqueue(e).then(t=>void 0===t?e:i.extend(e,{method:"JSONP",cache:{get:()=>t}}))),responseError:e=>{const t=e.config;return t.httpEaseResponseQ&&t.httpEaseResponseQ.resolve([e.status,JSON.parse(JSON.stringify(e.data)),{}]),this.$q.reject(e)},response:e((e,t)=>(e.httpEaseResponseQ&&e.httpEaseResponseQ.resolve([t.status,void 0===t.data?void 0:JSON.parse(JSON.stringify(t.data)),{}]),this.$q.when(t)))}}isDebouncable(e){return r.a.features.httpEase&&"GET"===e.method&&new RegExp("^(http.+)?(/learn/api/.*)$").test(e.url)}isServableBy(e,t){if(!(e.method===t.method))return null;const s=(()=>{const s=e=>{const t=[];return i(e).keys().sortBy().value().forEach(s=>{"expand"!==s&&t.push(`${encodeURIComponent(s)}=${encodeURIComponent(e[s])}`)}),t.join("&")};return s(e.params)===s(t.params)})(),n=(()=>{const s={};return((e.params||{}).expand||"").split(",").forEach(e=>{""!==e&&(s[e]=e)}),((t.params||{}).expand||"").split(",").every(e=>""===e||Object.prototype.hasOwnProperty.call(s,e))})();if(s&&n)return this.$log.debug(`Eased ${t.url}`,e,t),e=>e;this.$log.warn(`Concurrent Requests Captured - "${t.method} ${t.url}" (with different parameters). Please consider to merge them for performance`)}}l.$inject=["$q","$log"];const c=n.module(o,["ng"]);r.a.features.learnApiCaching||c.config(["$httpProvider",function(e){e.interceptors.push(["$injector",e=>{return e.instantiate(l).getHttpInterceptor()}])}])},cacA:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("Llzl"),i=s("Qbdf"),r=s("X455"),o=s("0JpG"),a=s("TnpK"),l=s("nmzr");const c="ultra.base.messages.routes";n.module(c,[i.b,r.a,a.b]).config([a.c,i.c,r.b,(e,t,n)=>{e.peekState("create-message",{url:"/create?courseId&{allowReplies:bool}",resolve:{[i.d]:t.resolve,[r.c]:n.resolve},require:()=>Promise.all([s.e(31),s.e(33),s.e(48)]).then(s.bind(null,"BrlV")),pageTitle:"components.directives.message.newMessage",panelClass:"full"}).peekState("edit-message",{url:"/edit/:conversationId?courseId&offset&count",require:()=>Promise.all([s.e(31),s.e(33),s.e(48)]).then(s.bind(null,"BrlV")),pageTitle:"components.directives.message.message",panelClass:"full"}).peekState(l.CourseRoutes.COURSE_MESSAGE,{url:"/message?courseId&recipientIds&conversationPerRecipient",onExit:["$rootScope","$stateParams",(e,t)=>{!function(e,t){e.$broadcast("bb-message-refresh",t)}(e,t.courseId)}],resolve:{[r.c]:n.resolve,translations:[o.serviceName,e=>e.loadBundle("features/base/messages/base-messages")]},require:()=>Promise.all([s.e(31),s.e(33),s.e(48)]).then(s.bind(null,"BrlV")),pageTitle:"base.messages.newMessage",panelClass:"full"})}])},cwoR:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("Llzl"),i=s("0JpG"),r=s("TnpK");const o="ultra.base.system-content-market.router";n.module(o,[i.moduleName,r.b]).config([r.c,e=>{e.peekState("system-content-market",{url:"/systemcontentmarket",require:()=>Promise.all([s.e(62),s.e(636)]).then(s.bind(null,"tcBX")),resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/base/system-content-market/system-content-market"),t.loadBundle("features/course/content-market/content-market"),t.loadBundle("features/course/books-and-tools/books-and-tools")])]},panelClass:"full",pageTitle:"base.systemContentMarket.title",params:{mode:null}})}])},d2bc:function(e,t,s){"use strict";var n;!function(e){e.AllGrading="course.gradebook-grades.EXECUTE",e.DeanonymizeGrades="course.gradebook-deanonymize.EXECUTE",e.EnterFeedback="course.gradebook-grades.feedback.EXECUTE",e.EnterItemGrades="course.gradebook-grades.attempt.EXECUTE",e.ExportGradebookData="course.gradebook-data.export.EXECUTE",e.FullGradebookAccess="course.gradebook.MODIFY",e.ModifyGradebook="course.gradebook.MODIFY",e.ModifyItemDueDate="course.gradebook-item.duedate.MODIFY",e.Observe="observer.gradebook.VIEW",e.OverrideItemGrades="course.gradebook-grades.override.EXECUTE",e.ProvideGradingFeedback="course.gradebook-grades.feedback.EXECUTE",e.PublishGrades="course.gradebook-grades.publish.EXECUTE",e.ViewAttempts="course.gradebook.attempts.VIEW",e.ViewGradebook="course.gradebook.VIEW",e.ViewGradebookMetaData="course.gradebook-metadata.VIEW",e.OverrideGrade="course.gradebook-grades.override.EXECUTE",e.ViewGrades="course.gradebook-grades.VIEW",e.ViewUserGrades="course.user.grades.VIEW"}(n||(n={})),t.a=n},d7QB:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("Llzl"),i=s("N7x3");const r="ultra.components.services.event-emitter",o="integration-event-emitter";class a{constructor(){this.emitIntegrationEvent=e=>{e.originalEvent||(e.originalEvent=e.originalEvent||{}),e.originalEvent.manualFireFlag||(this._triggerForceClick(e.target),e.originalEvent.manualFireFlag=!0)},this.addIntegrationEventClickListener=e=>(e.on("click",this.emitIntegrationEventOnClickHandler),()=>{e.off("click",e.selector,this.emitIntegrationEventOnClickHandler)}),this.emitIntegrationEventOnClickHandler=e=>this.emitIntegrationEvent(e)}_triggerForceClick(e){n.element(e).trigger(i.a.integrationForceClick)}}class l extends a{}n.module(r,[]).service(o,a)},d8yC:function(e,t,s){"use strict";function n(e){const t=[];let s=0;e.forEach((e,n)=>{s+=Math.floor(e),t.push({integer:Math.floor(e),remainder:e-Math.floor(e),index:n})});let n=100-s;if(n>0){t.sort((e,t)=>t.remainder-e.remainder);let e=0;for(;n>0;)t[e].integer>0||t[e].remainder>0?(t[e].integer+=1,e++,n-=1):e++,e===t.length&&(e=0);t.sort((e,t)=>e.index-t.index)}return t.map(e=>e.integer)}function i(e,t){const s=e.toString(),n=s.indexOf(".");if(n>0&&s.length-n-1>t){const e=s.slice(0,n+t+1);return parseFloat(e)}return e}s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i}))},dtd2:function(e,t,s){"use strict";var n=s("nbDY"),i=s.n(n);class r extends i.a{}r.Outline=new r("outline"),r.Inline=new r("inline"),t.a=r},e6ZA:function(e,t,s){"use strict";s.r(t);s("BfLg"),s("Ddvy"),s("OkIp"),s("dY8P"),s("W67r"),s("juDU"),s("9RbK"),s("1dyP"),s("RB+a"),s("nsGK"),s("LNcM"),s("T4UF"),s("FNJT"),s("zhNR"),s("abLi"),s("B1ET"),s("1wt3"),s("rEGj"),s("qY1S"),s("lGTS"),s("Jsos"),s("HopG");const n=new Map;class i{constructor(e){this.name=e,this.id=`$BroadcastChannel$${e}$`,n.has(this.id)||n.set(this.id,new Set),n.get(this.id).add(this),this.onStorage=this._onStorage.bind(this),window.addEventListener("storage",this.onStorage),this.messageChannel=new MessageChannel}close(){window.removeEventListener("storage",this.onStorage);const e=n.get(this.id);e.delete(this),e.size||n.delete(this.id)}_onStorage({key:e,newValue:t,storageArea:s}){if(s===window.localStorage&&null!==t&&e.substring(0,this.id.length)===this.id)try{const e=JSON.parse(t);this.dispatchEvent(new MessageEvent("message",{data:e}))}catch(e){this.dispatchEvent(new ErrorEvent("messageerror",{error:e,message:"Failed to deserialize incoming message."}))}}postMessage(e){e=JSON.stringify(e);const t=`${this.id}${Date.now()}$${Math.random()}`;window.localStorage.setItem(t,e),setTimeout(()=>window.localStorage.removeItem(t),500),n.get(this.id).forEach(t=>{t!==this&&t.dispatchEvent(new MessageEvent("message",{data:JSON.parse(e)}))})}get onmessage(){return this.messageChannel.port1.onmessage}set onmessage(e){this.messageChannel.port1.onmessage=e}get onmessageerror(){return this.messageChannel.port1.onmessageerror}set onmessageerror(e){return this.messageChannel.port1.onmessageerror=e}addEventListener(...e){return this.messageChannel.port1.addEventListener.apply(this.messageChannel.port1,e)}removeEventListener(...e){return this.messageChannel.port1.removeEventListener.apply(this.messageChannel.port1,e)}dispatchEvent(...e){return this.messageChannel.port1.dispatchEvent.apply(this.messageChannel.port1,e)}}"BroadcastChannel"in window||(window.BroadcastChannel=i);var r=s("5iHu"),o=s("Llzl"),a=s("ssIi"),l=s("0uRC"),c=s("V8Kl"),d=s("OrNH"),u=s("kcGO"),h=s("/5AG"),m=s("IbyE");const p={"course-content":u.sagas,"course-core":h.sagas,"learn-data-services":m.sagas};let g,b={};function f(e=p){return e!==g&&(b=function(e=p){const t={};return Object.keys(e).forEach(s=>{const n=e[s];Object.keys(null!=n?n:{}).forEach(e=>{const i=n[e];t[`${s}/${e}`]=i})}),g=e,Object.freeze(t)}(e)),b}function*v(){const e=f(),t=Object.keys(e).map(t=>Object(d.spawn)(function(e,t=e.name){return function*(){for(;;)try{yield Object(d.call)(e);break}catch(e){console.error(`Uncaught error in saga ${t}:`,e)}}}(e[t],t)));yield Object(d.all)(t)}var S=s("In+A"),y=s("lEL+");const C="ultra.components.directives.animatedGif";class I{constructor(e,t){this.$injector=e,this.timeout=t,this.restrict="E",this.link=(e,t,s)=>{const n=o.element('<img role="presentation" alt="" style="width:0; height:0">');n.attr("src",t.attr("src")),t.append(n),this.timeout(()=>{t.attr("alt")&&n.attr("alt",t.attr("alt"))},e,0,!1);const i=()=>{n.off("load",i),n.attr("src",""),n.addClass("animated-gif"),this.timeout(()=>{n.removeAttr("style"),n.attr("src",t.attr("src"))},e,250,!1)};n.on("load",i)}}}I.$inject=["$injector",y.b],o.module(C,[y.a]).directive("bbAnimatedGif",["$injector",e=>e.instantiate(I)]);s("4MCF"),s("p95z");var $=s("NI+y"),w=s("5MwF"),T=s("Qbdf"),E=s("YzQO"),k=s("pjml"),P=s("w9mJ"),A=s("myse"),R=s("ZzR9"),O=s("TnpK");const D="ultra.bb.angulartics",_=1e3;let N=e=>{},L=(e,t)=>{},M={subscribeToFramework:A.subscribeToFramework};o.module(D,["angulartics","angulartics.scroll",k.N,P.a,T.b]).config(["$analyticsProvider",e=>{e.registerPageTrack(e=>{N(e)}),e.registerEventTrack((e,t)=>{L(e,t)}),r.fn.extend({waypoint(){return this.each((function(){r(this).triggerHandler("scrollby")}))}})}]).run(["$rootScope","$timeout",k.b.serviceName,P.b,T.e,(e,t,s,n,i)=>{const r=n.getQueue("telemetry");function a(e){r.enqueue(()=>t(()=>($.b.addHistory(e),s.$create(e)),_,!1))}function l(){return i.course?{id:i.course.id,uuid:i.course.uuid,batchUid:i.course.batchUid,ultraStatus:i.course.ultraStatus}:null}function c(e){if(e){if("{"===e[0])try{return JSON.parse(e)}catch(e){}return{value:e}}}M.subscribeToFramework("UltraTelemetry",(e,t)=>{const{analyticsId:s,...n}=null!=t?t:{};e===A.AnalyticsEventTypes.CLICK_EVENT&&a({action:"click",analyticsId:s,context:n,url:document.URL,applicationId:w.a.telemetryAppId,course:l()}),e===A.AnalyticsEventTypes.CHANGE_EVENT&&a({action:"change",analyticsId:s,context:n,url:document.URL,applicationId:w.a.telemetryAppId,course:l()})}),N=e=>{a({action:"pageview",analyticsId:e,url:document.URL,applicationId:w.a.telemetryAppId,course:l(),screenDimension:{innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth}})},L=(e,t)=>{!t.id||"click"!==t.eventType&&"scrollby"!==t.eventType||a({action:t.eventType,analyticsId:t.id,url:document.URL,context:c(t.context),applicationId:w.a.telemetryAppId,course:l()})},e.$on(R.b.$stateChangeSuccess,(e,t,s,n)=>{var i;null!==(i=null==t?void 0:t.name)&&void 0!==i&&i.startsWith(null==n?void 0:n.name)||function(e){if(!e)return[];const t=e.split(O.a),s=[];let n="";return t.forEach(e=>{""!==e&&(n=n.length>0?`${n}${O.a}${e}`:e,s.push(n))}),s}(null==n?void 0:n.name).forEach(e=>{var s;!(null===(s=null==t?void 0:t.name)||void 0===s?void 0:s.startsWith(e))&&e.includes(O.a)&&a({action:"panelclosed",analyticsId:e,url:document.URL,applicationId:w.a.telemetryAppId,course:l()})})});document.addEventListener("click",e=>{var t,s;if(Object(E.f)(e.target))return;const n=o.element(e.target),i=n.closest("a"),r="_blank"===i.attr("target"),d=Object(E.e)(n);let u,h;d||(u=Object(E.b)(n)||Object(E.d)(n.parent())),!u&&r&&(u=n.attr("analytics-id")||"external-link"),u&&(d||(h=c(Object(E.a)(n))),r&&((h=null!=h?h:{}).value=null!==(t=h.value)&&void 0!==t?t:i.attr("href"),h.valueType=null!==(s=h.valueType)&&void 0!==s?s:"link"),a({action:"click",analyticsId:u,url:document.URL,context:h,applicationId:w.a.telemetryAppId,course:l()}))},!0)}]);var x=s("/KQw"),j=s("lmMM"),G=s("0JpG");const U="ultra.components.directives.dir";class F{constructor(e){this.bbLocalize=e,this.restrict="A",this.link=(e,t,s)=>{e.$watch("locale",()=>{s.attr=s.attr||"dir",s.rtl=s.rtl||"rtl",s.ltr=s.ltr||"ltr",this.bbLocalize.isRTL(e)?t.attr(s.attr,s.rtl):t.attr(s.attr,s.ltr)})}}}F.$inject=[G.serviceName],o.module(U,[]).directive("bbDir",["$injector",e=>e.instantiate(F)]);var B=s("Xq/A"),q=s("07uq"),H=s("Us01"),z=s("t3AZ"),V=s("J0Qq");const K="ultra.directives.bbTime";class W{constructor(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}compile(e){const t=e.html();return(e,s,n)=>{const i=t=>{const i=this.bbLocalize.getFormatEnum(G.ILocaleTimeFormat,n.format)||G.ILocaleTimeFormat.Short;if("true"===n.epoch){const e=new Date(0);e.setUTCSeconds(t),t=e}const r=e=>{"bb-time"===s.prop("tagName").toLowerCase()?s.replaceWith(e):s.html(e)};null==t?r(""):this.bbLocalize.formatTime(t,i,e).then(r)};let r;"true"===n.autoUpdate?n.$observe("bbTime",()=>{r=new Date(this.$parse(n.bbTime)(e)),i(r)}):(r=this.$parse(t)(e)||new Date(this.$parse(n.bbTime)(e)),i(r))}}}W.$inject=["$parse",G.serviceName];class J extends W{}o.module(K,[G.moduleName]).directive("bbTime",["$injector",e=>e.instantiate(W)]);var Y=s("UioO");const Q="ultra.directives.bbNumber";class Z{constructor(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}compile(e){const t=e.html();return(e,s,n)=>{const i=this.$parse(t)(e);this.bbLocalize.formatNumber(i,e).then(e=>{"bb-number"===s.prop("tagName").toLowerCase()?s.replaceWith(e):s.html(e)})}}}Z.$inject=["$parse",G.serviceName];class X extends Z{}o.module(Q,[G.moduleName]).directive("bbNumber",["$injector",e=>e.instantiate(Z)]);var ee=s("Oyr+"),te=s("bd9L"),se=s("pIXs"),ne=s("43zP"),ie=s("aD4H"),re=s("AuQm");const oe="ultra.directives.saveForm";class ae{constructor(e,t){this.scope=e,this.$q=t,this.queuedSave=!1,e.editMode?(e.$broadcast("bb-save-button",re.AutoSaveMessage.Saved),this.autoSaveState=ne.a.Saved):this.autoSaveState=ne.a.NotSaved,e.$on(te.c,(t,s,n)=>{switch(e.$broadcast("bb-save-button",s,n),s){case re.AutoSaveMessage.Change:this.autoSaveState=ne.a.NotSaved;break;case re.AutoSaveMessage.Saving:this.autoSaveState=ne.a.Saving;break;case re.AutoSaveMessage.Saved:this.autoSaveState=ne.a.Saved;break;case re.AutoSaveMessage.SaveFailure:case re.AutoSaveMessage.ValidationFailure:}})}validate(){return this.scope.validate()&&this.scope.baseForm&&this.scope.baseForm.$valid}save(){if(this.validate()){if(this.savePromise)this.queuedSave||(this.queuedSave=!0,this.savePromise=this.savePromise.finally(()=>(this.savePromise=null,this.queuedSave=!1,this.save())));else{this.autoSaveState=ne.a.Saving;const e=this.scope.save();this.savePromise=e.then(e=>(this.autoSaveState=ne.a.Saved,e))}return this.savePromise}}saveClicked(){if(this.autoSaveState===ne.a.NotSaved)return this.save().then(()=>{this.scope.$emit("autosave-button-click",{target:"save"}),this.scope.showAlertMessage&&this.scope.showAlertMessage()});this.scope.$emit("autosave-button-click",{target:"save"})}cancelClicked(){if(this.scope.cancel){const e=this.scope.cancel();e?e.then(()=>{this.scope.$emit("autosave-button-click",{target:"cancel"})}):this.scope.$emit("autosave-button-click",{target:"cancel"})}}deleteClicked(){if(this.scope.delete){const e=this.scope.delete();e?e.then(()=>{this.scope.$emit("autosave-button-click",{target:"delete"})}):this.scope.$emit("autosave-button-click",{target:"delete"})}}mouseDown(){this.scope.$emit("bb-autosave-interrupt-timer"),this.scope.$emit("autosave-button-click",{target:"mouseDown"})}}class le{constructor(e){this.$q=e,this.transclude=!0,this.restrict="E",this.scope={save:"&",cancel:"&?",validate:"&",delete:"&?",canDelete:"=",deleteConfirmationResourceType:"@?",choices:"=?",editMode:"=",hideFooter:"=",baseForm:"=?",delayAutosave:"&?",displayDeleteAfterSaving:"&?",debounceSaveDestination:"&?",showAlertMessage:"&?",analyticsIdTagPrefix:"@"},this.link=(e,t)=>{e.saveForm=new ae(e,this.$q)},this.template=ie}}le.$inject=["$q"],o.module(oe,[te.e,se.a]).directive("bbSaveForm",["$injector",e=>e.instantiate(le)]);var ce=s("gZo5");const de="ultra.services.security",ue="xsrf",he="X-Blackboard-XSRF",me="xsrf-token-changed";class pe{constructor(e,t){this.$rootScope=e,this.crossWindowMessaging=t,this.xsrfCallbacks=new Set,e.$on(me,(e,t)=>this.updateToken(t)),e.$on("$destroy",()=>{this.xsrfCallbacks.clear()})}registerXsrfCallback(e){this.xsrfCallbacks.add(e),this.token&&this.invokeXsrfCallback(e)}unregisterXsrfCallback(e){return this.xsrfCallbacks.delete(e)}getToken(){return this.token}updateToken(e){return this.token===e?this.token:(this.token=e,this.xsrfCallbacks.forEach(e=>this.invokeXsrfCallback(e)),this.crossWindowMessaging.postMessage(me,this.token),this.token)}invokeXsrfCallback(e){try{e(this.token)}catch(e){}}}pe.$inject=["$rootScope",ce.b];class ge extends pe{}o.module(de,[ce.a]).service(ue,pe);var be=s("Fvsw"),fe=s("fYJU"),ve=s("Si89"),Se=s("t6zR"),ye=s("QaOk"),Ce=s("Y88D"),Ie=s("FR7u"),$e=s("+g6d"),we=s("RDfZ"),Te=s("V17J"),Ee=s("tcaZ"),ke=s("V6ed"),Pe=s("P2dS"),Ae=s("g66W"),Re=s("w9Zy"),Oe=s("SBFF");const De="ultra.components.directives.bbGuidance",_e=/[_-]/g;Object(S.registerComponentType)({name:S.BB_GUIDANCE_FTUE_TYPE,priority:S.BB_GUIDANCE_PRIORITY_NUMBER});class Ne{constructor(e,t,s,n){this.ultraState=e,this.offCanvas=t,this.timeout=s,this.$document=n,this.require="^bbFirstTimeContainer",this.replace=!0,this.restrict="E",this.scope={componentKey:"@",pageContainerSelector:"@?",alwaysShow:"@",displayPriority:"&?",broadcastGuidanceHideEvent:"@?",onGuidanceEnabledEvent:"@?",disableHideInPanelState:"@?",forceShowInPanelState:"@?"},this.transclude={title:"?bbGuidanceTitle"},this.template=Oe,this.link=(e,t,s,n)=>{if(!e.componentKey)throw new Error("'component-key' attribute required in bb-guidance");e.componentKey=Ae.a(e.componentKey,_e);const i=t.closest(".bb-offcanvas-panel").attr("data-base-state-name"),o=!!e.onGuidanceEnabledEvent,a=new S.DefaultGuidanceComponent(t.get(0),S.BB_GUIDANCE_FTUE_TYPE,e.componentKey,n.manager,n.firstTimeHelper,S.guidanceConnector,e.displayPriority&&e.displayPriority(),o);a.setShouldShow(()=>{const s=r(t).parent().is(":visible"),o=!!e.pageContainerSelector&&r(e.pageContainerSelector).is(":visible");return s||o?n.firstTimeHelper.shouldShow(a.componentKey,i,e.$eval(e.alwaysShow)):Promise.resolve(!1)}),e.isShown=a.shown,a.onShownChanged(t=>{e.$applyAsync(()=>{e.isShown=t})}),a.registerToManager();const l=t=>{r(t.target).parents().addBack();const s=!!e.disableHideInPanelState&&this.ultraState.includes(e.disableHideInPanelState);!e.isShown||this.ultraState.transition||s||(a.hide(),this.$document[0].removeEventListener("click",l,!0),e.broadcastGuidanceHideEvent&&e.$root.$broadcast(e.broadcastGuidanceHideEvent))},c=()=>{a.showComponent(),this.$document[0].addEventListener("click",l,!0)};let d;d=null,e.onGuidanceEnabledEvent?(d=e.$root.$on(e.onGuidanceEnabledEvent,()=>{c()}),d=e.$root.$on("show-guidance-component",()=>{this.timeout(()=>{c()},e,600)}),n.firstTimeHelper.shouldShow("predict.wizard").then(t=>{const s=!!e.forceShowInPanelState&&this.ultraState.includes(e.forceShowInPanelState);t&&!s||c()})):this.$document[0].addEventListener("click",l,!0),e.$on("$destroy",()=>{a.deregisterFromManager(),this.$document[0].removeEventListener("click",l,!0),d&&d()})},this.ultraState=e}}Ne.$inject=[O.d,Re.e,y.b,"$document"],o.module(De,[O.b,Ee.a]).directive("bbGuidance",["$injector",e=>e.instantiate(Ne)]);const Le="ultra.components.directives.guidanceTarget";class Me{constructor(e,t,s){this.element=e,this.componentKey=t,this.containerController=s,this.manager=s.manager}get multiTargetSupport(){return this.containerController.firstTimeHelper.hasMultiTargetSupport(this.componentKey)}registerToManager(){this.manager&&(this.hideImpl(),this.manager.registerTarget(this))}deregisterToManager(){this.manager&&this.manager.deregisterTarget(this)}onShown(){this.showImpl()}onHidden(){this.hideImpl()}showImpl(){this.element.addClass("is-guided")}hideImpl(){this.element.removeClass("is-guided")}}class xe{constructor(){this.require="^bbFirstTimeContainer",this.restrict="A",this.link=(e,t,s,n)=>{if("false"!==s.showGuidanceTarget){let i=s.componentKey;const r=s.componentKeyList,o=[],a=(e,s)=>{const n=new Me(t,e,s);n.registerToManager(),o.push(n)};if(!i&&!r)throw new Error("'component-key' or 'component-key-list' attribute required in bb-guidance-target");if(r){const t=e.$watch(r,e=>{e&&e.length>0&&(e.forEach(e=>{e=Ae.a(e,_e),a(e,n)}),t())})}if(i&&(i=Ae.a(i,_e),a(i,n)),"true"!==s.keepGuidanceWhenFocusout){const s=()=>{e.$root.$broadcast("hide-ftue-component",i)};t.on("focusout",s),t.on("keypress",s),e.$on("$destroy",()=>{t.off("focusout",s),t.off("keypress",s)})}e.$on("$destroy",()=>{o.forEach(e=>e.deregisterToManager())})}}}}o.module(Le,[Ee.a]).directive("bbGuidanceTarget",["$injector",e=>e.instantiate(xe)]);var je=s("XseH"),Ge=s("iVgd"),Ue=s("/qpZ");const Fe="ultra.components.directives.keyHideFtue";class Be{constructor(){this.restrict="A",this.link=(e,t,s)=>{const n=s.bbKeyHideFtue;if(!n)throw new Error("'bb-key-hide-ftue' attribute should have value");const i=()=>{e.$root.$broadcast("hide-ftue-component",n)};t.on("focusout",i),t.on("keypress",i),e.$on("$destroy",()=>{t.off("focusout",i),t.off("keypress",i)})}}}o.module(Fe,[]).directive("bbKeyHideFtue",["$injector",e=>e.instantiate(Be)]);var qe=s("cMqb"),He=s("+4Px");const ze="ultra.directives.accessibility.focusNext";class Ve{constructor(){this.restrict="A",this.link=(e,t,s)=>{const n="true"===s.bbFocusNextOneTimeOnly;!function(e,t,s){e.on("keydown.focusNext",n=>{if(n.keyCode===He.u&&!n.shiftKey&&t){const i=o.element(t);i.length>=1&&-1!==parseInt(i.attr("tabindex"),10)&&(i.first().focus(),n.preventDefault(),s&&e.off("keydown.focusNext"))}})}(t,s.bbFocusNext,n)}}}o.module(ze,[]).directive("bbFocusNext",["$injector",e=>e.instantiate(Ve)]);const Ke="ultra.directives.accessibility.focusPrev";class We{constructor(){this.restrict="A",this.link=(e,t,s)=>{const n="true"===s.bbFocusPrevOneTimeOnly;!function(e,t,s){e.on("keydown.focusPrev",n=>{if(n.keyCode===He.u&&n.shiftKey&&t){const i=o.element(t);i.length>=1&&-1!==i.prop("tabindex")&&(i.first().focus(),n.preventDefault(),s&&e.off("keydown.focusPrev"))}})}(t,s.bbFocusPrev,n)}}}o.module(Ke,[]).directive("bbFocusPrev",["$injector",e=>e.instantiate(We)]);var Je=s("i8dz"),Ye=s("K3JI"),Qe=s("GbAM"),Ze=s("vhkR"),Xe=s("OvxF"),et=s("TB6y"),tt=s("ZMjE");const st="ultra.directives.contentImportStatusBar";class nt{constructor(e,t,s,n,i,r,a,l,c){this.$scope=e,this.$rootScope=t,this.element=s,this.$q=n,this.CourseModel=i,this.ultraState=r,this.context=a,this.bbLocalize=l,this.contextCourse=c,this.identifyCourse().then(t=>{this.course=t,this.baseState=r.current.name,s.detach().appendTo(o.element(".side-panel-content")),e.$on("$destroy",()=>{o.element(".side-panel-content > "+s.get(0).tagName).length>0&&o.element(".side-panel-content > "+s.get(0).tagName).remove()}),e.$watch("taskId",()=>{e.taskId&&this.getItemsCount().then(e=>{this.notCarriedForwardItemsCount=e})})})}identifyCourse(){return this.courseId=this.$scope.courseId?this.$scope.courseId:this.contextCourse.courseId,this.$scope.$parent.course?this.$scope.$parent.course.model.$asPromise():this.CourseModel.$find(this.courseId).$asPromise()}confirm(){const e="courseImport"+this.course.id.replace(/\_/g,".");this.context.setPreference(e,"false").then(()=>{this.$scope.display=!1})}undo(){const e="courseImport"+this.course.id.replace(/\_/g,".");this.context.setPreference(e,"true").then(()=>{this.$scope.display=!1})}goToImportReport(){this.ultraState.goPeekState("content-manage.import-report",{id:this.$scope.taskId})}hideStatusBar(){return-1!==this.ultraState.current.name.indexOf(this.baseState)&&this.ultraState.current.name.length>this.baseState.length}getItemsCount(){return this.course.getImportCopyTaskStatus(this.$scope.taskId).then(e=>{const t=e.$response.data.conversionReportTORest;if(t){return t.filter(e=>!k.l.ConversionReportStatus.Success.isEqualTo(e.ultraConversionStatus)).length}return 0})}}nt.$inject=["scope","$rootScope","element","$q",k.m.serviceName,O.d,be.b,G.serviceName,T.e];class it{constructor(e){this.$injector=e,this.restrict="E",this.template=tt,this.scope={display:"=",taskId:"=",courseId:"@?"},this.link=(e,t)=>{e.contentImportStatusBarController=this.$injector.instantiate(nt,{scope:e,element:t})}}}it.$inject=["$injector"],o.module(st,[be.a,G.moduleName,k.N,O.b]).directive("bbContentImportStatusBar",["$injector",e=>e.instantiate(it)]);var rt=s("yA26"),ot=s("SGFZ");const at="ultra.directives.preventClick";class lt{constructor(e,t){this.$parse=e,this.$rootScope=t,this.priority=101,this.restrict="A",this.compile=(e,t)=>{const s=this.$parse(t.bbPreventClickIf);return{pre:(e,t)=>{t.on("click",t=>{function n(){if(s(e,{$event:t}))return t.stopImmediatePropagation(),t.preventDefault(),!1}this.$rootScope.$$phase?e.$evalAsync(n):e.$apply(n)})}}}}}lt.$inject=["$parse","$rootScope"],o.module(at,[]).directive("bbPreventClickIf",["$injector",e=>e.instantiate(lt)]);var ct=s("yC9S"),dt=s("bd3f");const ut="ultra.components.directives.accessibility.readInfo";class ht{constructor(e,t,s,n){this.scope=e,this.element=t,this.attrs=s,this.timeout=n,this.message="",this.alertMessage="",ct.b.OnRootScope(e,"read-info-directive",(t,s)=>{this.message=s,n(()=>{this.message=""},e,1e3)}),ct.b.OnRootScope(e,"read-info-directive-alert",(t,s,i)=>{void 0!==i?(this.alertMessage="",n(()=>{this.alertMessage=s},e,i)):(this.alertMessage=s,n(()=>{this.alertMessage=""},e,1e3))})}}ht.$inject=["scope","element","attrs",y.b];class mt{constructor(e,t){this.$injector=e,this.$compile=t,this.restrict="A",this.link=(e,t,s)=>{t.append(this.$compile(dt)(e)),e.readInfo=this.$injector.instantiate(ht,{scope:e,element:t,attrs:s})}}}mt.$inject=["$injector","$compile"],o.module(ut,[y.a]).directive("bbReadInfo",["$injector",e=>e.instantiate(mt)]);var pt=s("7/0s");const gt="ultra.components.directives.accessibility.skipLink";class bt{constructor(){this.restrict="E",this.scope={bbSkipLinkTarget:"@",bbSkipLinkFocusNext:"@?"},this.template=pt,this.link=(e,t,s)=>{t.find(".skip-link").on("click",()=>{let e=t.closest(".bb-offcanvas-panel");e.length||(e=t.closest("#site-wrap"));const n=e.find(s.bbSkipLinkTarget).first();n.focus(),n.is(document.activeElement)||null!=n.attr("tabindex")||(n.attr("tabindex","-1"),n.focus())})}}}o.module(gt,[]).directive("bbSkipLink",["$injector",e=>e.instantiate(bt)]);var ft=s("TAnh"),vt=s("YOs/"),St=s("Dwp2"),yt=s("fGgA"),Ct=s("4HBD"),It=s("3vti"),$t=s("cFWd"),wt=s("HDxW"),Tt=s("zXZW"),Et=s("k9iv"),kt=s("nsX6"),Pt=s("OcoR"),At=s("td+C"),Rt=s("v6Sp"),Ot=s("oPIA"),Dt=(s("J++8"),s("e6jQ"));var _t=new class{constructor(e,t){this.integrationService=e,this.portalManager=t,this.sendNewPortal=e=>{this.integrationService.sendEventMessage({type:Ot.i,eventType:Ot.fb.PortalNew,portalId:e.portalId,selector:e.selector,selectorData:e.selectorData},e.owningIntegrationId)},this.sendRemovedPortal=e=>{this.integrationService.sendEventMessage({type:Ot.i,eventType:Ot.fb.PortalRemove,portalId:e.portalId,selector:e.selector,selectorData:e.selectorData},e.owningIntegrationId)},this.sendCallbackPortal=e=>{this.integrationService.sendMessage({type:Ot.f.PortalCallback,callbackId:e.callbackId,portalId:e.portalId,event:e.event},e.owningIntegrationId)},this.sendRenderFailure=e=>{e.requestingIntegrationId?this.integrationService.sendMessage({type:Ot.F,portalId:e.portalId,status:Ot.p.Failure,error:e.error,errorMessage:e.errorMessage},e.requestingIntegrationId):console.warn("Unable to send error to targetless portal")},this.onPortalEvent=(e,t)=>{switch(e){case Ot.eb.NewPortal:this.sendNewPortal(t);break;case Ot.eb.RemovedPortal:this.sendRemovedPortal(t);break;case Ot.eb.CallbackPortal:this.sendCallbackPortal(t);break;case Ot.eb.FailedValidationPortal:this.sendRenderFailure(t)}},this.updatePortal=(e,t)=>{if(!e)return;const{portalId:s,contents:n}=e;this.portalManager.updatePortal({portalId:s,contents:n,requestingIntegrationId:t.id},()=>{const e=this.portalManager.getPortalData(s).getOwningIntegrationId();if(e&&e!==t.id)return{portalId:s,error:Ot.K.Authorization,errorMessage:`Portal ${s} is already owned by ${e} -- not allowing render from ${t.id}`,requestingIntegrationId:t.id}})&&(this.portalManager.setPortalOwnership(s,t.id),this.sendRenderSuccess(t.id,s))},this.sendRenderSuccess=(e,t)=>{this.integrationService.sendMessage({type:Ot.F,portalId:t,status:Ot.p.Success},e)}}init(){this.integrationContainer=document.querySelector(".integration-react-container"),this.portalManager.addPortalListener(this.onPortalEvent),this.integrationService.addIntegrationMessageType(Ot.G,this.updatePortal)}generateUniqueDomElement(){const e=Dt.b(),t=document.createElement("div");return t.id=e,this.integrationContainer.appendChild(t),t}getIntegrationContainer(){return this.integrationContainer}}(At.a,Rt.e),Nt=s("ERkP"),Lt=s("7nmT"),Mt=s("MC1S"),xt=s("wWlP"),jt=s("caKH");const Gt=e=>{const{integrationId:t,contents:s,portalId:n}=e;return Nt.createElement(Rt.d,{portalType:Ft,initialOwningIntegrationId:t,initialContents:s,portalId:n})};var Ut=s("4JTD");const Ft="modal",Bt={[Ot.X.Small]:Mt.DialogType.small,[Ot.X.Large]:Mt.DialogType.large,[Ot.X.Medium]:Mt.DialogType.normal};var qt=new class{constructor(e,t,s,n){this.integrationService=e,this.integrationPortalService=t,this.componentManager=s,this.portalManager=n,this.modalWhitelist=new Map,this.isValidModalElement=(e,t)=>{if(!Ot.O.has(e.props.width))return console.warn(`Invalid prop \`width\` of value ${e.props.width} supplied to ${e.tag}, expected one of [${Object.values(Ot.N)}].`),!1;if(!e.children)return console.warn(`Children are needed for ${Ot.r.Modal}, but no value for \`children\` was given.`),!1;if("string"==typeof e.children)return console.warn("Incorrect children value: expected `Array` but received `string`."),!1;const s=[Ot.r.ModalHeader,Ot.r.ModalBody,Ot.r.ModalFooter];if(e.children.length!==s.length)return console.warn(`Incorrect number of children elements: expected ${s.length}, but received ${e.children.length}.`),!1;for(let n=0;n<s.length;n++){const i=e.children[n];if(i.tag!==s[n])return console.warn(`Incorrect order of children: position ${n} expected ${s[n]}, but received ${i.tag}.`),!1;if(!this.componentManager.isValidComponent({componentContext:Ft,componentName:s[n],contents:i,integrationId:t}))return!1}return!0},this.onPortalModal=(e,t)=>{if(!this.isValidRequestParameters(e,t))return;const s=xt.a.length()>0,n=jt.ModalManager.getInstance().isModalDisplaying();if(this.componentManager.overMaxComponents(Ft)||n||s)return console.error("A modal is already open; not opening another one."),void this.sendModalMessage(t,null,e.modalId,Ot.p.Failure,Ot.s.ModalAlreadyOpenError,"A modal is already open; not opening another one.");if(!this.portalManager.validateContents({portalType:Ft,contents:e.contents,integrationId:t.id}).passed)return void this.sendModalMessage(t,null,e.modalId,Ot.p.Failure,Ot.s.FailedComponentValidationError,`Component validation failed; not rendering ${Ot.r.Modal}.`);this.modalId=e.modalId,this.owningIntegration=t;const i=Dt.b();this.currentModal=this.integrationPortalService.generateUniqueDomElement();const r={owningIntegrationId:t.id,portalId:i,element:this.currentModal};return this.render(r,e.contents).then(()=>{this.sendModalMessage(t,r.portalId,this.modalId,Ot.p.Success)})},this.isValidRequestParameters=(e,t)=>e.type&&e.type===Ot.M.ModalNew?e.modalId?!!e.contents||(console.warn("Not a valid new modal request, `contents` were not provided."),this.sendModalMessage(t,null,e.modalId,Ot.p.Failure,Ot.s.MissingContentsError,"Not a valid new modal request, `contents` were not provided."),!1):(console.warn("Not a valid new modal request, `modalId` must be a unique non-empty value."),this.sendModalMessage(t,null,e.modalId,Ot.p.Failure,Ot.s.InvalidIdError,"Not a valid new modal request, `modalId` must be a unique non-empty value."),!1):(console.warn(`Not a valid new modal request, \`type\` must be ${Ot.M.ModalNew}.`),this.sendModalMessage(t,null,e.modalId,Ot.p.Failure,Ot.s.InvalidRequestTypeError,`Not a valid new modal request, \`type\` must be ${Ot.M.ModalNew}.`),!1),this.render=(e,t)=>new Promise(s=>{Lt.render(Nt.createElement(Ut.a,{babelfishInstance:this.bbLocalize.intl,babelfishFormatInstance:this.bbLocalize.frmt,locale:this.bbLocalize.getLocale(null),isRtl:this.bbLocalize.isRTL()},Nt.createElement(Gt,{integrationId:e.owningIntegrationId,portalId:e.portalId,contents:t})),e.element,()=>{s()})}),this.onPortalModalClose=(e,t)=>this.owningIntegration&&this.owningIntegration.id!==t.id?(console.warn(`The integration ${t.id} does not own the modal of ${e.modalId}; not closing modal`),void this.sendModalCloseResponseMessage(t,e.modalId,Ot.p.Failure,Ot.s.WrongOwnerError,`The integration ${t.id} does not own the modal of ${e.modalId}; not closing modal`)):this.modalId!==e.modalId?(console.warn(`No modal has an id of ${e.modalId}`),void this.sendModalCloseResponseMessage(t,e.modalId,Ot.p.Failure,Ot.s.ModalNotFoundError,`No modal has an id of ${e.modalId}`)):void this.closePortalModal(e.modalId,t),this.closePortalModal=(e,t)=>{this.currentModal&&(Lt.unmountComponentAtNode(this.currentModal),this.sendModalCloseResponseMessage(t||this.owningIntegration,e||this.modalId,Ot.p.Success))},this.sendModalMessage=(e,t,s,n,i,r)=>{this.integrationService.sendMessage({type:Ot.M.ModalResponse,status:n,portalId:t,modalId:s,...i&&{error:i},...r&&{errorMessage:r}},e)},this.sendModalCloseResponseMessage=(e,t,s,n,i)=>{this.integrationService.sendMessage({type:Ot.M.ModalCloseResponse,status:s,modalId:t,...n&&{error:n},...i&&{errorMessage:i}},e)}}init(e){this.bbLocalize=e,this.integrationService.addIntegrationMessageType(Ot.M.ModalNew,this.onPortalModal),this.integrationService.addIntegrationMessageType(Ot.M.ModalClose,this.onPortalModalClose),this.initializeWhitelist()}initializeWhitelist(){this.modalWhitelist.set(Ot.r.Modal,{props:{width:!0},isValid:(e,t)=>this.isValidModalElement(e,t),render:(e,t,s)=>{const{width:n,...i}=t,r=Bt[n];return Nt.createElement(jt.UltraModalDialog,{...i,dialogContentProps:{type:r},hidden:!1,onDismiss:()=>this.closePortalModal()},s)}}),this.modalWhitelist.set(Ot.r.ModalHeader,{props:{title:!1},isValid:e=>(e.props&&e.props.title&&"string"!=typeof e.props.title&&console.warn(`Invalid prop \`title\` value: expected \`string\` but received \`${typeof e.props.title}\`, defaulting to no title.`),!0),render:(e,t,s)=>Nt.createElement(Mt.DialogHeader,{...t,analyticsId:"integration.modal.header",showCloseButton:!0,onDismiss:()=>this.closePortalModal(),closeButtonAriaLabel:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(null),key:"global.close"})},s)}),this.modalWhitelist.set(Ot.r.ModalBody,{isValid:e=>!0,render:(e,t,s)=>Nt.createElement("div",{key:t.key},s)}),this.modalWhitelist.set(Ot.r.ModalFooter,{isValid:e=>!0,render:(e,t,s)=>Nt.createElement(Mt.DialogFooter,{...t},s)}),this.componentManager.addComponentType(Ft,1,this.modalWhitelist)}}(At.a,_t,Rt.b,Rt.e),Ht=s("q/wk"),zt=s("N7x3"),Vt=s("x9Ok");const Kt=e=>{const{component:t,contents:s}=e,[n,i]=Nt.useState(t.shown);return Nt.useEffect(()=>(i(t.shown),t.addListener(i),()=>{t.removeListener(i)}),[t]),n&&Nt.createElement(Rt.d,{portalType:os,initialOwningIntegrationId:t.integrationId,initialContents:s,portalId:t.portalId})};var Wt=s("uFyr"),Jt=s("jGf1"),Yt=s("xkx/");const Qt={[Ot.X.Small]:250,[Ot.X.Medium]:300,[Ot.X.Large]:500},Zt={[Ot.y.Light]:Yt.DefaultPalette.white,[Ot.y.Dark]:Yt.DefaultPalette.neutralDark},Xt={[Ot.Q.BottomLeft]:Jt.ScreenPosition.bottomLeft,[Ot.Q.BottomRight]:Jt.ScreenPosition.bottomRight,[Ot.Q.TopLeft]:Jt.ScreenPosition.topLeft,[Ot.Q.TopRight]:Jt.ScreenPosition.topRight},es=(e,t)=>{const s=Qt[Ot.X.Medium];return!e.isSmallBreakpoint()||Qt[t]<=s?Qt[t]:(console.warn("Requested prop `size` is greater than current breakpoint size: reducing `size` to medium breakpoint."),s)},ts=e=>{if(e.isSmallBreakpoint())return Mt.DirectionalHint.bottomCenter},ss=(e,t)=>{if(e.isSmallBreakpoint())return Object(Jt.getScreenPositionPoint)(Jt.ScreenPosition.bottomCenter);if(t.selector.type===Ot.S.Region){const e=Xt[t.selector.value];return Object(Jt.getScreenPositionPoint)(e)}return t.targetElementFinder()},ns=e=>e.isLargeBreakpoint()?Ot.w.Large:e.isMediumBreakpoint()?Ot.w.Medium:Ot.w.Small,is=Object(Wt.windowResizingResponsiveComponentWrapper)(e=>{const{children:t,hideBeak:s,key:n,notificationData:i,onDismiss:r,size:o,theme:a,UltraWindowSize:l}=e,c=ss(l,i),d=ns(l),u=es(l,o),h=Zt[a],m=ts(l);return Nt.createElement(Mt.Callout,{key:n,target:c,onDismiss:r,calloutWidth:u,setInitialFocus:!0,isBeakVisible:!s,directionalHint:m,className:`integration-notification-${a}`,backgroundColor:h,minPagePadding:d,allowDismissOnFocusTarget:!0},Nt.createElement("div",{tabIndex:0},t))});class rs{constructor(e,t){this.notificationData=e,this.guidanceManager=t,this.componentType="IntegrationNotification",this.priority=2*S.DEFAULT_PRIORITY,this.isInitialHide=!1,this._shown=!1,this.listeners=[],this.shouldShow=()=>new Promise((e,t)=>{e(!!this.notificationData.targetElementFinder())}),this.addListener=e=>{this.listeners.push(e)},this.removeListener=e=>{const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)},this.onShown=()=>{this.setShown(!0)},this.onHidden=e=>{this.setShown(!1)},this.dispose=()=>{this.listeners=[],this.guidanceManager.deregisterComponent(this)},this.componentKey=`integration.notification.${e.portalId}`,this.notificationId=e.notificationId,this.portalId=e.portalId,this.integrationId=e.owningIntegrationId,this.data=e,this.guidanceManager.registerComponent(this),this.guidanceManager.startQueue()}get shown(){return this._shown}setShown(e){this.shown!==e&&(this._shown=e,this.listeners.forEach(t=>t(e)))}}const os="notification";var as=new class{constructor(e,t,s,n,i){this.integrationService=e,this.integrationPortalService=t,this.componentManager=s,this.ftueManager=n,this.portalManager=i,this.notificationWhitelist=new Map,this.isValidNotificationElement=e=>Ot.Y.has(e.props.size)?(e.props.theme&&!Ot.z.has(e.props.theme)&&console.warn(`Invalid prop \`theme\` of value ${e.props.theme} supplied to ${e.tag}, expected one of [${Object.values(Ot.y)}];\n        defaulting to ${Ot.y.Light} theme.`),e.props.hideBeak&&"boolean"!=typeof e.props.hideBeak&&console.warn(`Invalid prop \`hideBeak\` value: expected a \`boolean\` but received \`${typeof e.props.hideBeak}\`; defaulting to a visible beak.`),!0):(console.warn(`Invalid prop \`size\` of value ${e.props.size} supplied to ${e.tag}, expected one of [${Object.values(Ot.X)}].`),!1),this.findElementByAnalyticsId=e=>{if(!e)return null;const t=document.querySelector(`[data-analytics-id="${e}"]`);return t||document.querySelector(`[analytics-id="${e}"]`)},this.createFTUEComponent=(e,t)=>{const s=new rs(t,this.ftueManager),n={component:s,element:t.element};return s.addListener(s=>{if(!s)return void this.sendNotificationStatus(e,t.portalId,t.notificationId,Ot.x.Removed);if(!t.targetElementFinder())return this.closeNotification(t.portalId),void this.sendNotificationStatus(e,t.portalId,t.notificationId,Ot.x.Failed);this.currentNotification=n,this.sendNotificationStatus(e,t.portalId,t.notificationId,Ot.x.Visible)}),this.notificationMap.set(t.portalId,n),s},this.onPortalNotification=(e,t)=>{if(!e.selector||!Ot.T.has(e.selector.type))return console.warn(`Invalid selector type provided ${e.selector&&e.selector.type}`),void this.sendNotificationResponseMessage(t,null,Ot.p.Failure,Ot.v.InvalidSelectorError,`Invalid selector type provided ${e.selector&&e.selector.type}`);if(e.selector.type===Ot.S.Region&&!Ot.R.has(e.selector.value))return console.warn(`Invalid selector value provided ${e.selector&&e.selector.value}`),void this.sendNotificationResponseMessage(t,null,Ot.p.Failure,Ot.v.InvalidSelectorError,`Invalid selector value provided ${e.selector&&e.selector.value}`);if(!this.portalManager.validateContents({portalType:os,contents:e.contents,integrationId:t.id}).passed)return void this.sendNotificationResponseMessage(t,null,Ot.p.Failure,Ot.v.FailedComponentValidationError,`Component validation failed; not rendering ${Ot.u.Notification}.`);const s=this.getTargetElementFinder(e.selector,t);if(!s)return;const n={element:this.integrationPortalService.generateUniqueDomElement(),portalId:Dt.b(),notificationId:Dt.b(),owningIntegrationId:t.id,targetElementFinder:s,selector:e.selector},i=this.createFTUEComponent(t,n);return this.render(i,n.element,e.contents).then(()=>{this.sendNotificationResponseMessage(t,n.notificationId,Ot.p.Success),this.sendNotificationStatus(t,n.portalId,n.notificationId,Ot.x.Queued)})},this.removeNotificationFromQueue=e=>{e.dispose(),this.notificationMap.delete(e.portalId)},this.clearPortalNotification=()=>{this.notificationMap.forEach(e=>{const t=this.findNotification(e.component.notificationId);this.currentNotification&&this.currentNotification.component.notificationId===t.notificationId?this.closeNotification(t.portalId):this.removeNotificationFromQueue(t)})},this.onPortalNotificationClose=(e,t)=>{const s=this.findNotification(e.notificationId);return s?s.integrationId!==t.id?(console.warn(`${t.id} does not have ownership of the current notification`),void this.sendCloseNotificationResponse(t,e.notificationId,Ot.p.Failure,Ot.v.NoOwnershipError,`${t.id} does not have ownership of the current notification--not closing notification`)):(this.currentNotification&&this.currentNotification.component.notificationId===e.notificationId?this.closeNotification():(this.removeNotificationFromQueue(s),this.sendNotificationStatus(t,s.portalId,s.notificationId,Ot.x.Removed)),void this.sendCloseNotificationResponse(t,e.notificationId,Ot.p.Success)):(console.warn("Notification not found"),void this.sendCloseNotificationResponse(t,e.notificationId,Ot.p.Failure,Ot.v.NotificationNotFoundError,"Notification not found"))},this.render=(e,t,s)=>new Promise(n=>{Lt.render(Nt.createElement(Ut.a,{babelfishInstance:this.bbLocalize.intl,babelfishFormatInstance:this.bbLocalize.frmt,locale:this.bbLocalize.getLocale(null),isRtl:this.bbLocalize.isRTL()},Nt.createElement(Kt,{component:e,contents:s})),t,()=>{n()})}),this.sendCloseNotificationResponse=(e,t,s,n,i)=>{this.integrationService.sendMessage({type:Ot.P.NotificationCloseResponse,notificationId:t,status:s,...n&&{error:n},...i&&{errorMessage:i}},e)},this.sendNotificationResponseMessage=(e,t,s,n,i)=>{this.integrationService.sendMessage({type:Ot.P.NotificationResponse,status:s,notificationId:t,...n&&{error:n},...i&&{errorMessage:i}},e)},this.sendNotificationStatus=(e,t,s,n)=>{this.integrationService.sendMessage({type:Ot.P.NotificationStatus,status:n,notificationId:s,portalId:t},e)},this.closeNotification=e=>{if(!this.currentNotification&&!e)return;let t=this.currentNotification;e&&(t=this.notificationMap.get(e)),t&&(Lt.unmountComponentAtNode(t.element),setTimeout(()=>{this.removeNotificationFromQueue(t.component),this.currentNotification=void 0},500))},this.notificationMap=new Map}init(e){this.bbLocalize=e,this.integrationService.addIntegrationMessageType(Ot.P.NotificationNew,this.onPortalNotification),this.integrationService.addIntegrationMessageType(Ot.P.NotificationClose,this.onPortalNotificationClose),this.notificationWhitelist.set(Ot.u.Notification,{props:{size:!0,theme:!1,hideBeak:!1,directionalHint:!1},isValid:e=>this.isValidNotificationElement(e),render:(e,t,s)=>{const{key:n,size:i,theme:r=Ot.y.Light,hideBeak:o}=t,a=this.notificationMap.get(e);return Nt.createElement(is,{size:i,hideBeak:o,key:n,notificationData:a.component.data,onDismiss:()=>{this.closeNotification(e)},theme:r},s)}}),this.componentManager.addComponentType(os,0,this.notificationWhitelist)}getTargetElementFinder(e,t){if(e.type===Ot.S.Region)return()=>this.integrationPortalService.getIntegrationContainer();const s=()=>this.findElementByAnalyticsId(e.value);if(s())return s;console.warn("Invalid notification target"),this.sendNotificationResponseMessage(t,null,Ot.p.Failure,Ot.v.InvalidTargetError,"Invalid notification target")}findNotification(e){const t=Array.from(this.notificationMap.values()).find(t=>t.component.notificationId===e);if(t)return t.component}}(At.a,_t,Rt.b,S.guidanceManager,Rt.e);var ls=s("Zwiy"),cs=s("YK4x");const ds=e=>{const t=Object(cs.a)(),{panelType:s,panelTitle:n,panelSubtitle:i,integrationId:r,showPanel:o,portalId:a,onPanelClose:l,stackIndex:c,useCustomPadding:d,closeButtonAriaLabel:u,resolver:h}=e,m=null!=u?u:t("global.close");return Nt.createElement(ls.BbPanel,{isOpen:o,onDismiss:()=>l(a,r),type:s,stackIndex:c,analyticsId:"components.directives.integration.integrationPanel",excludeContentPadding:d,closeButtonAriaLabel:m},Nt.createElement(ls.BbPanelHeader,{title:n,smallHeaderTitle:i}),Nt.createElement("div",{className:"integration-panel"},Nt.createElement("div",{className:"integration-panel-contents"},Nt.createElement(Rt.d,{portalId:a,initialOwningIntegrationId:r,portalType:us,skipCustomValidation:!0,onRegistered:h}))))},us="panel",hs=e=>{switch(e){case Ot.W.Full:return Mt.BbPanelType.full;case Ot.W.Small:return Mt.BbPanelType.peek;default:return console.warn(`Received unknown panel type ${e}`),null}};var ms=new class{constructor(e,t,s,n){this.integrationService=e,this.integrationPortalService=t,this.componentManager=s,this.portalManager=n,this.onPortalPanel=(e,t)=>{const{panelTitle:s,correlationId:n,useCustomPadding:i}=e;if(this.componentManager.overMaxComponents(us))return console.warn("Panel is already open; not opening another one"),void this.sendPanelMessage(t,null,Ot.p.Failure,n);if(!s)return console.warn("Received a panel event without a panelTitle; not opening panel"),void this.sendPanelMessage(t,null,Ot.p.Failure,n);if(null===hs(e.panelType))return void this.sendPanelMessage(t,null,Ot.p.Failure,n);const r=Dt.b();if(!this.updatePanelAttributes(e,r))return console.warn("Received a panel event without proper attributes or with a missing callback id."),void this.sendPanelMessage(t,null,Ot.p.Failure,n);const o=this.integrationPortalService.generateUniqueDomElement();return o.className="integration-panel",this.currentPanelData={element:o,panelType:e.panelType,panelTitle:e.panelTitle,panelSubtitle:e.panelSubtitle,owningIntegrationId:t.id,portalId:r,useCustomPadding:i||!1,closeButtonAriaLabel:e.closeButtonAriaLabel},this.renderPanel(this.currentPanelData,!0).then(()=>{this.sendPanelMessage(t,this.currentPanelData.portalId,Ot.p.Success,n)})},this.updatePanelAttributes=(e,t)=>{const s=e.attributes;if(!s)return!0;let n={};const i=Object.keys(s).filter(e=>!s[e]||!s[e].callbackId);return i.length>0?(console.warn(`Panel attributes [${i.join(",")}] are missing callbackId parameters`),!1):(Object.keys(s).forEach(e=>{const t=s[e];n={...n,[e]:{callbackId:t.callbackId}}}),this.panelAttributesEvents.set(t,{portalId:t,subscribedAttributes:n}),!0)},this.renderPanel=(e,t)=>{const s=document.getElementsByClassName("bb-offcanvas-panel").length+1,n=hs(e.panelType);return new Promise(i=>{Lt.render(Nt.createElement(Ut.a,{locale:this.bbLocalize.getLocale(null),babelfishInstance:this.bbLocalize.intl,babelfishFormatInstance:this.bbLocalize.frmt,isRtl:this.bbLocalize.isRTL()},Nt.createElement(ds,{panelType:n,panelTitle:e.panelTitle,panelSubtitle:e.panelSubtitle,integrationId:e.owningIntegrationId,showPanel:t,portalId:e.portalId,onPanelClose:this.onPanelCloseAction,stackIndex:s,useCustomPadding:e.useCustomPadding,resolver:i,closeButtonAriaLabel:e.closeButtonAriaLabel})),e.element)})},this.onPortalPanelClose=(e,t)=>{const s=t.id,n=this.portalManager.getPortalData(e.id);if(n){if(n.getOwningIntegrationId()===s)return this.renderPanel(this.currentPanelData,!1);console.warn(`The integration ${s} does not own the portalId of ${e.id}; not closing anything`)}else console.warn(`no panel has an id of ${e.id}`)},this.onPanelCloseAction=(e,t)=>{this.renderPanel(this.currentPanelData,!1);const s=this.portalManager.getPortalData(e);if(!s)return;const n=Ot.U.onClose,i=this.panelAttributesEvents.get(s.portalId),r=i&&i.subscribedAttributes[n],o=this.integrationService.findIntegration(t);if(this.portalManager.removePortal({portalId:e,owningIntegrationId:t}),this.removePanel(this.currentPanelData.element),this.currentPanelData=null,r&&o){const e={type:Ot.f.PortalCallback,callbackId:i.subscribedAttributes[n].callbackId,portalId:s.portalId,event:n};this.integrationService.sendMessage(e,o)}},this.sendPanelMessage=(e,t,s,n)=>{this.integrationService.sendMessage({type:Ot.V.PanelResponse,status:s,portalId:t,correlationId:n},e)},this.panelAttributesEvents=new Map}init(e){this.bbLocalize=e,this.integrationService.addIntegrationMessageType(Ot.V.PanelNew,this.onPortalPanel),this.integrationService.addIntegrationMessageType(Ot.V.PanelClose,this.onPortalPanelClose),this.componentManager.addComponentType(us,1)}removePanel(e){if(!e)return;setTimeout(()=>{Lt.unmountComponentAtNode(e),e.remove()},500)}}(At.a,_t,Rt.b,Rt.e),ps=s("vJBG"),gs=s("zJP2"),bs=s("4vd5"),fs=s("CY5M");const vs=e=>{const{handle:t,customParameters:s,courseId:n,style:i}=e,r=((e,t,s)=>{const[n,i]=Object(Nt.useState)("");return Object(Nt.useEffect)(()=>{const n=Object(fs.configureLaunchArgs)({bbFileData:{linkType:m.ContentHandler.LtiPlacement.toString()},handle:e,courseId:s});n.customParameters=t,i(Object(fs.getLaunchLinkFromLinkRef)(n))},[e,t,s]),n})(t,s,n);return Nt.createElement("iframe",{src:r,style:i})};var Ss=new class{constructor(e){this.componentManager=e}init(){this.componentManager.addGlobalComponent(Ot.j.LtiLaunch,{props:{handle:!0,customParameters:!1,courseId:!1,style:!1},isValid:e=>!e.children,render:(e,t)=>Nt.createElement(vs,{...t})})}}(Rt.b),ys=s("Agfx");const Cs=Object(ys.makeStyles)({container:{maskImage:e=>`url(${e.url})`,WebkitMaskImage:e=>`url(${e.url})`,height:e=>`${e.height}`,width:e=>`${e.width}`,backgroundColor:"currentColor"}}),Is=new RegExp(`(^[\\u0000-\\u001F ]*${/d([\r\n\t])*a\1*t\1*a\1*:\1*i\1*m\1*a\1*g\1*e\1*\/\1*s\1*v\1*g\1*\+\1*x\1*m\1*l\1*;\1*/i.source})|(${/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/i.source})`,"i"),$s=new Map([["uef--base-nav-svg","svg-icon medium-icon default integration-svg-icon"]]),ws=new Map([["classname",e=>Object(Rt.h)(e,$s)]]),Ts=e=>{const{url:t,height:s,width:n,className:i,style:r}=e,o=Cs({url:t,height:s,width:n});return Nt.createElement("div",{className:`${i} ${o.container}`,style:r})};var Es=new class{constructor(e){this.componentManager=e,this.init=()=>{this.componentManager.addGlobalComponent(Ot.j.SvgIcon,{props:{url:!0,height:!0,width:!0,className:!1,style:!1},isValid:e=>this.isValidSvgUrl(e.props),render:(e,t)=>Nt.createElement(Ts,{...t}),transformers:ws})},this.isValidSvgUrl=e=>e.url?e.height||e.width?!!Is.test(e.url)||(console.warn(`Unsupported URI received for ${Ot.j.SvgIcon}: [${e.url}] Only HTTPS and data:image/svg+xml data URIs are supported.`),!1):(console.warn(`A height and/or width is required for ${Ot.j.SvgIcon}, but no value for \`height\` and/or \`width\` was given.`),!1):(console.warn(`A url is required for ${Ot.j.SvgIcon}, but no value for \`url\` was given.`),!1)}}(Rt.b),ks=s("7n5u");const Ps=new Map([["uef--action-menu--extension","action-menu-extension"],["uef--action-menu--labeled","action-menu-labeled"]]),As=new Map([["uef--course-details--menu-label","blue-link select-value"]]);var Rs=new class{constructor(e){this.componentManager=e}init(){const e=new Map;e.set("items",(e,t,s)=>e?e.map(e=>({...e,callback:Object(Rt.g)(e.callbackId,Ot.L.onClick,t,s)})):e),this.componentManager.addGlobalComponent(Ot.j.ActionMenu,{props:{items:!0,label:!0,className:!0,labelClassName:!0},transformers:e,isValid:e=>!e.children,render:(e,t)=>{var s;if(!t.items)return;const n=t.items.map((e,t)=>({key:t,name:e.name,onClick:e.callback})),i=t.label?Nt.createElement("span",{className:Object(Rt.h)(t.labelClassName,As)},t.label):null,r={items:n},o=`components.services.integration.${t.analyticsId||"unknown"}.actionMenu`;return Nt.createElement(Mt.ActionMenu,{ariaLabel:t.ariaLabel,menuProps:r,className:null!==(s=Object(Rt.h)(t.className,Ps))&&void 0!==s?s:"action-menu-extension",analyticsId:o},i)}})}}(Rt.b);const Os=(e,t)=>{Ht.a.init(),_t.init(),ps.a.init(e,t),gs.a.init(t),ms.init(e),qt.init(e),as.init(e),zt.a.addHoverListener(),zt.a.addClickListener(),Vt.b.subscribe((e,t)=>{At.a.sendEventMessage({type:Ot.i,eventType:Ot.fb.Route,routeName:e,routeData:t})},Vt.a.Changed),Vt.b.subscribe((e,t)=>{e.includes("classic")&&as.clearPortalNotification(),At.a.sendEventMessage({type:Ot.i,eventType:Ot.fb.RouteChanging,routeName:e,routeData:t})},Vt.a.Changing),bs.a.init(e),Ss.init(),Es.init(),Rs.init(),ks.b.init()};class Ds{constructor(e,t){this.routeListener=e,this._started=!0,this.handleRouteChanging=()=>{this.started=!1},this.handleRouteChanged=()=>{this.started=!0},this.onStateChanged=e=>{this.startedCallback=e},t.addWatcher(this)}start(){this.routeListener.subscribe(this.handleRouteChanging,Vt.a.Changing),this.routeListener.subscribe(this.handleRouteChanged,Vt.a.Changed)}get started(){return this._started}set started(e){this._started=e,this.startedCallback&&this.startedCallback(e)}}var _s=s("0+Qs"),Ns=s("4HXK"),Ls=s("eUpQ"),Ms=s("WIGI"),xs=s("6Ksg"),js=s("vT39"),Gs=s("WShm"),Us=s("OmEq");class Fs{constructor(){this.require="ngModel",this.link=(e,t,s,n)=>{n.$validators.email=function(e){return Us.b.test(e)||!e}}}}o.module("ultra.directives.validate.emailAddress",[]).directive("bbValidateEmailAddress",["$injector",e=>e.instantiate(Fs)]);class Bs{constructor(){this.require="ngModel",this.link=(e,t,s,n)=>{n.$validators.email=function(e){return!e||Us.a.test(e)}}}}o.module("ultra.directives.validate.emailAddresses",[]).directive("bbValidateEmailAddresses",["$injector",e=>e.instantiate(Bs)]);class qs{constructor(){this.require="?ngModel",this.link=(e,t,s,n)=>{n&&(t.on("focusin",()=>{n.$focused=!0,e.$root.$$phase||e.$$phase||e.$root.$digest()}),t.on("focusout",()=>{n.$focused=!1,e.$root.$$phase||e.$$phase||e.$root.$digest()}))}}}o.module("ultra.directives.validate.input",[]).directive("input",["$injector",e=>e.instantiate(qs)]).directive("textarea",["$injector",e=>e.instantiate(qs)]);class Hs{constructor(){this.require="ngModel",this.restrict="A",this.link=(e,t,s,n)=>{n.$validators.kvp=this.getKVPValidator(e,t,s,n)}}getKVPValidator(e,t,s,n){return(e,t)=>{const s=t+"";if(""===s)return!0;let n=!0;return s.split("\n").forEach(e=>{if(e.trim().length>0&&n){2!==e.split("=").length&&(n=!1)}}),n}}}class zs extends Hs{}o.module("ultra.directives.validate.kvp",[]).directive("bbValidateKeyValuePair",["$injector",e=>e.instantiate(Hs)]);var Vs=s("f4B+");const Ks="bbValidateMaxlength";class Ws{constructor(e){this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.getMaxlengthValidator=(e,t,s,n)=>e=>{const t=r("<textarea/>").val(e).text()||e;if(null==t)return!0;const i=s[Ks];if(null==i||""===i)return!0;let o=t.length;"true"===(!!s.maxlengthAfterEscape&&s.maxlengthAfterEscape)&&(o=Vs.a.HTML(t).length);let a=s.maxlengthNotice?s.maxlengthNotice:Math.floor(.9*i).toString();return a.match(/\%$/)&&(a=a.replace(/\D/,""),a=Math.floor(i*(1-a/100)).toString()),o>i?(delete n.$warning.maxlengthWarning,n.$error.maxlength={maxlength:i,diff:o-i},n.$errorImmediate.maxlengthImmediate={maxlength:i,diff:o-i},!1):o>=a?(delete n.$error.maxlength,delete n.$errorImmediate.maxlengthImmediate,n.$warning.maxlengthWarning={maxlength:i,left:i-o},!0):(delete n.$error.maxlength,delete n.$errorImmediate.maxlengthImmediate,delete n.$warning.maxlengthWarning,!0)},this.link=(e,t,s,n)=>{n.$validators.maxlengthValidator=this.getMaxlengthValidator(e,t,s,n),n.$warning||(n.$warning={}),n.$errorImmediate||(n.$errorImmediate={})}}}class Js extends Ws{}o.module("ultra.directives.validate.maxlength",[G.moduleName]).directive(Ks,[G.serviceName,e=>new Ws(e)]);class Ys{constructor(e){this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.selectionStart=0,this.selectionEnd=0,this.oldViewValue="",this.getNumberParser=(e,t,s,n)=>t=>{if(n.$isEmpty(t))return n.$setValidity("numberInvalid",!0),t;const i=this.regroup(e,n);let r=this.bbLocalize.parseNumberSync(i,e);if(Number.isNaN(r))return n.$setValidity("numberInvalid",!1),r;n.$setValidity("numberInvalid",!0);const o=this.bbLocalize.getDecimalStringForScope(e);let a=r.toString();const l=a.split(String(o)),c=s&&s.maxDecimal?Number(s.maxDecimal):G.Service.defaultDecimalPrecision;return l.length>1&&l[1].length>c&&(a=l[0]+o+l[1].substring(0,c),r=parseFloat(a),this.reformatFromModel(n,r)),this.updateSelection(e,n,this.target,this.key),r},this.getMinValidator=(e,t,s,n)=>e=>{const t=parseFloat(s.min),i=n.$isEmpty(e);if(!i&&Number.isNaN(Number(e)))return delete n.$error.numberSmall,!1;const r=i||e>=t;return r?delete n.$error.numberSmall:n.$error.numberSmall={min:t},r},this.getMaxValidator=(e,t,s,n)=>e=>{const t=parseFloat(s.max),i=n.$isEmpty(e);if(!i&&Number.isNaN(Number(e)))return delete n.$error.numberLarge,!1;const r=i||e<=t;return r?delete n.$error.numberLarge:n.$error.numberLarge={max:t},r},this.getNumberFormatter=(e,t,s,n)=>t=>{const i=t||n.$modelValue;if(n.$setValidity("numberInvalid",!0),i||0===i){const t=s&&s.maxDecimal?s.maxDecimal:G.Service.defaultDecimalPrecision;return this.bbLocalize.formatNumberSync(parseFloat(i),e,{maximumFractionDigits:t,useGrouping:!0})}return""},this.regroup=(e,t)=>{const s=this.bbLocalize.regroupNumberSync(t.$viewValue,e);return t.$viewValue!==s&&(t.$viewValue=s,t.$render(),t.$validate()),s},this.reformatFromModel=(e,t)=>{t=t||e.$modelValue;const s=e.$formatters;let n=s.length,i=t;for(;n--;)i=s[n](i);e.$viewValue!==i&&(e.$viewValue=i,e.$render(),e.$validate())},this.allowInput=(e,t,s,n)=>{if(!t||!t.key)return!1;const i=n.$viewValue,{selectionStart:r,selectionEnd:o}=t.target,a=this.bbLocalize.getGroupingStringForScope(e),l=this.bbLocalize.getDecimalStringForScope(e),c=this.bbLocalize.parseNumberSync(i,e),d=s&&s.maxDecimal?Number(s.maxDecimal):G.Service.defaultDecimalPrecision,u=o-r>1,h=t.key===a,m=o-r==0&&"Backspace"===t.key&&i[r-1]===a,p=o-r==0&&"Delete"===t.key&&i[r]===a,g=o-r==1&&i[r]===a&&("Backspace"===t.key||"Delete"===t.key),b=o-r==0&&!Number.isNaN(Number(t.key))&&this.target.selectionStart>i.indexOf(l)&&i.split(l)[1]&&i.split(l)[1].length>=d;u||Number.isNaN(c)||!(m||p||h||g||b)||t.preventDefault()},this.updateSelection=(e,t,s,n)=>{if(!n||-1!==["ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Shift","Meta","Tab","End","Home","-"].indexOf(n))return;const i=Math.max(0,this.selectionEnd+t.$viewValue.length-this.oldViewValue.length);s.selectionStart=i,s.selectionEnd=i},this.link=(e,t,s,n)=>{t.on("blur",()=>{n.$valid&&this.reformatFromModel(n)}),t.on("focus",()=>{t.select()}),t.on("keydown",t=>{this.target=t.target,this.key=t.key,this.selectionStart=this.target.selectionStart,this.selectionEnd=this.target.selectionEnd,this.oldViewValue=n.$viewValue,this.allowInput(e,t,s,n)}),n.$parsers.push(this.getNumberParser(e,t,s,n)),n.$formatters.push(this.getNumberFormatter(e,t,s,n)),s.min&&(n.$validators.minValidator=this.getMinValidator(e,t,s,n),s.$observe("min",()=>{n.$validate()})),s.max&&(n.$validators.maxValidator=this.getMaxValidator(e,t,s,n),s.$observe("max",()=>{n.$validate()}))}}}class Qs extends Ys{}o.module("ultra.directives.validate.number",[G.moduleName]).directive("bbValidateNumber",[G.serviceName,e=>new Ys(e)]);class Zs{constructor(e){this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.getISOTime=e=>("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2),this.getTimeParser=(e,t,s,n)=>i=>{if(n.$isEmpty(i))return n.$setValidity("time",!0),n.$modelValue;let r;try{r=this.bbLocalize.parseTimeSync(i,G.ILocaleTimeFormat.Short,e,n.$modelValue)}catch(e){return n.$setValidity("time",!1),n.$modelValue}return n.$setValidity("time",!0),(i="time"===s.type?this.getISOTime(r):this.formatTime(r,e))!==n.$viewValue&&(n.$setViewValue(i),t.is(":focus")||n.$render()),r},this.getTimeFormatter=(e,t,s,n)=>()=>{n.$setValidity("time",!0);const i=n.$modelValue;return n.$isEmpty(i)?t.val():"time"===s.type?this.getISOTime(i):this.formatTime(i,e)},this.link=(e,t,s,n)=>{n.$parsers.push(this.getTimeParser(e,t,s,n)),n.$formatters.push(this.getTimeFormatter(e,t,s,n)),t.on("blur",()=>{n.$render()})}}formatTime(e,t){return"ar-sa"===this.bbLocalize.getLocale(t)?this.getISOTime(e):this.bbLocalize.formatTimeSync(e,G.ILocaleTimeFormat.Short,t)}}class Xs extends Zs{}o.module("ultra.directives.validate.time",[G.moduleName]).directive("bbValidateTime",[G.serviceName,e=>new Zs(e)]);const en=new RegExp("^(?:(?:https?|ftp)://)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$","i");new RegExp("^(http://|https://)");class tn{constructor(){this.require="ngModel",this.restrict="A",this.link=(e,t,s,n)=>{n.$validators.url=this.getUrlValidator(e,t,s,n),n.$warning||(n.$warning={}),n.$errorImmediate||(n.$errorImmediate={})}}getUrlValidator(e,t,s,n){return e=>{if(!e)return n.$error.urlInvalid&&delete n.$error.urlInvalid,!0;const t=e+"";return en.test(t)?(delete n.$error.urlInvalid,!0):(n.$error.urlInvalid=!0,!1)}}}class sn extends tn{}o.module("ultra.directives.validate.url",[]).directive("bbValidateUrl",["$injector",e=>e.instantiate(tn)]);var nn=s("lDJ8");const rn=[xs.b,js.a,Gs.b,"ultra.directives.validate.emailAddress","ultra.directives.validate.emailAddresses","ultra.directives.validate.input","ultra.directives.validate.kvp","ultra.directives.validate.maxlength","ultra.directives.validate.number","ultra.directives.validate.time","ultra.directives.validate.url",nn.a];var on=s("2qV7"),an=s("Q/M7"),ln=s("HtY7"),cn=s("H8CZ");const dn="ultra.components.directives.preventEventBubbling";class un{constructor(e,t,s){this.scope=e,this.element=t,this.attrs=s,s.bbPreventEventBubbling&&t.on(s.bbPreventEventBubbling,(function(e){e.stopPropagation()}))}}un.$inject=["scope","element","attrs"];class hn{constructor(e){this.$injector=e,this.restrict="A",this.link=(e,t,s)=>{e.bbPreventEventBubbling=this.$injector.instantiate(un,{scope:e,element:t,attrs:s})}}}hn.$inject=["$injector"],o.module(dn,[]).directive("bbPreventEventBubbling",["$injector",e=>e.instantiate(hn)]);const mn="ultra.components.directives.sizeToFitTextArea";class pn{constructor(e,t,s,n){if(this.scope=e,this.element=t,this.attrs=s,this.timeout=n,this.defaultHeight=null!=this.scope.defaultHeight?parseInt(this.scope.defaultHeight,10):37,"textarea"!==t[0].tagName.toLowerCase())throw new Error("This directive is only for use as an attribute on textareas");this.maxHeight=this.scope.maxHeight?parseInt(this.scope.maxHeight,10):null,t.addClass("size-to-fit-textarea"),null!=e.textareaModel?this.scope.$watch("textareaModel",(e,t)=>{e!==t&&this.sizeToFit()}):t.keyup(this.sizeToFit.bind(this)),this.timeout(()=>{this.minHeight="true"===this.scope.initialHeightLock?this.element.get(0).clientHeight:null,this.sizeToFit()},this.scope,0,!1)}sizeToFit(){const e=this.element.get(0);e.clientHeight===e.scrollHeight&&(e.style.height=this.defaultHeight+"px");let t=e.clientHeight;(!this.maxHeight||this.maxHeight>t)&&(t=Math.max(e.scrollHeight,t,this.minHeight),this.scope.maxHeight&&(t=Math.min(this.maxHeight,t)),t>e.clientHeight&&(e.style.height=t+"px"))}}pn.$inject=["scope","element","attrs",y.b];class gn{constructor(e){this.$injector=e,this.replace=!1,this.restrict="A",this.priority=1,this.terminal=!1,this.scope={defaultHeight:"@",maxHeight:"@",initialHeightLock:"@",textareaModel:"=?"},this.link=(e,t,s)=>{e.sizetofittextarea=this.$injector.instantiate(pn,{scope:e,element:t,attrs:s})}}}gn.$inject=["$injector"],o.module(mn,[y.a]).directive("bbSizeToFitTextarea",["$injector",e=>e.instantiate(gn)]);const bn="ultra.components.directives.bbPreventDrag";class fn{constructor(e){this.$rootScope=e,this.restrict="A",this.link=(e,t)=>{t.attr("draggable","false"),t.on("dragstart",e=>{const t=e.originalEvent.target;if(!(t.ownerDocument.activeElement.className.includes("bb-editor")||t.getAttribute&&"true"===t.getAttribute("draggable")))return!1})}}}fn.$inject=["$rootScope"],o.module(bn,[]).directive("bbPreventDrag",["$injector",e=>e.instantiate(fn)]);s("my/J");var vn=s("nsO7");const Sn="ultra.components.directives.formlabel",yn="bbFormLabelDecorator";class Cn{constructor(e,t,s){this.$q=e,this.$log=t,this.timeout=s,this.restrict="A",this.scope=!0,this.waitForElement=(e,t)=>{null==t.elementInspectStartAt&&(t.elementInspectStartAt=(new Date).getTime());const s=this.$q.defer();return this.timeout(()=>o.element(document.getElementById(e)),t,50).then(n=>{n.length>0?s.resolve(n):(new Date).getTime()-t.elementInspectStartAt>Cn.elementInspectTimeout?s.reject("Cannot find element #"+e+" in "+Cn.elementInspectTimeout+"ms"):this.waitForElement(e,t).then(e=>{s.resolve(e)}).catch(e=>{s.reject(e)})}),s.promise},this.link=(e,t,s)=>{const n=e.$eval(s[yn])||{},i=s.for;i&&this.waitForElement(i,e).then(t=>{const s=()=>{e.attrsElement=vn.mapValues(vn.keyBy(t[0].attributes,"nodeName"),e=>e.nodeValue)};n.autoupdate&&(e.domObserver=new MutationObserver(s),e.domObserver.observe(t[0],{childList:!1,attributes:!0,subtree:!1})),s()}).catch(e=>{this.$log.warn(e)}),e.$watchGroup(vn.compact(["attrsElement",s[yn]]),e=>{Cn.decorators.forEach(s=>{s(t,o.extend({},e[0],e[1]))})}),e.$on("$destroy",()=>{void 0!==e.domObserver&&e.domObserver.disconnect()})}}}Cn.elementInspectTimeout=1e4,Cn.$inject=["$q","$log","timeout"],Cn.decorators=[(e,t)=>{const s=t.required;!0===s||["true","required",""].indexOf(s)>=0?e.addClass("required"):e.removeClass("required")}],o.module(Sn,[]).directive(yn,["$injector",e=>e.instantiate(Cn)]);var In=s("+e2k"),$n=s("D57K"),wn=s("GGEJ");s("JbSi"),s("0Y4C");const Tn="ultra.components.directives.collabSessionIcon";let En=class{constructor(e,t,s){this.$scope=e,this.$element=t,this.bbLocalize=s}$onChanges(e){this.bbLocalize.translate({locale:this.bbLocalize.getLocale(this.$scope),key:this.runningSessionFlag?"components.directives.collab-session-icon.aria-label.active-collab":"components.directives.collab-session-icon.aria-label.inactive-collab"}).then(e=>{this.$element.attr("aria-label",e)})}};En.$inject=["$scope","$element",G.serviceName],En=Object($n.__decorate)([Object(ct.a)({moduleName:Tn,componentName:"bbCollabSessionIcon",template:wn,bindings:{runningSessionFlag:"<"},requireModules:[G.moduleName]})],En);const kn="ultra.directives.elementimage.accessibility",Pn="aria-label",An=["components","directives","element-image","element-image-accessibility"];class Rn{constructor(e,t){this.$injector=e,this.bbLocalize=t,this.restrict="C",this.link=(e,t,s)=>{if(t.attr(Pn))return;let n=t.attr("class");const i=s=>{const n=/\bimg-icon-[\w-]+\b/.exec(s);null===n?t.removeAttr(Pn):(this.loadBundle.then(()=>{t.attr(Pn,this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(e),key:An.join(".")+"."+n[0].replace(/-[aco]$/,"")}))}),e.$digest())};requestAnimationFrame(()=>{i(n)});const r=new MutationObserver(vn.debounce(()=>{requestAnimationFrame(()=>{const e=t.attr("class");n!==e&&i(n=e)})},100,{leading:!0}));r.observe(t[0],{attributes:!0,attributeFilter:["class"]}),e.$on("$destroy",()=>{r.disconnect()})},this.loadBundle=t.loadBundle(An.join("/"))}}Rn.$inject=["$injector",G.serviceName],o.module(kn,[G.moduleName]).directive("elementImage",["$injector",e=>e.instantiate(Rn)]);var On=s("cYWG"),Dn=s("K/D1");const _n="/learn/api/v1",Nn=["scheduledTasks","telemetry"];let Ln=null;class Mn{constructor(){this.pendingRequests=[],this.httpRequestLog=[],this.registerWebRequestListener()}registerWebRequestListener(){window.addEventListener("message",e=>{e.source===window&&e.data&&e.data.type&&e.data.details&&this.handleWebRequestMessage(e.data.type,e.data.details)})}handleWebRequestMessage(e,t){if(this.isMonitoredUrl(t.url))switch(e){case"onBeforeRequest":this.onRequestStarted(t);break;case"onCompleted":case"onErrorOccurred":this.onRequestCompleted(t)}}isMonitoredUrl(e){return e&&e.indexOf(_n)>=0&&0===Nn.filter(t=>e.indexOf(t)>-1).length}onRequestStarted(e){this.pendingRequests.push(e)}onRequestCompleted(e){const t=vn.findIndex(this.pendingRequests,t=>t.requestId===e.requestId);if(t>-1){const s=this.pendingRequests[t],n={requestId:e.requestId,type:e.type,method:e.method,url:e.url,statusCode:e.statusCode,elapsedTime:e.timeStamp-s.timeStamp,requestBody:s.requestBody,error:e.error};this.httpRequestLog.push(n),this.pendingRequests.splice(t,1)}}dumpHttpRequestLog(){const e={};window.httpRequestLog.forEach(t=>{const s=t.method+" "+t.url;null==e[s]&&(e[s]=[]),e[s].push(t.params)});for(const t of Object.keys(e))if(Object.prototype.hasOwnProperty.call(e,t)){const s=e[t];console.log(t+" ["+s.length+"]",s)}}clearHttpRequestLog(){this.httpRequestLog.length=0}}var xn=s("oQrK");const jn="ultra.services.zoomUtility";o.module(jn,[]),xn.a.detect().mobile()&&r(document).on("mouseover","input, textarea, select, .editor-element",(function(){r(this).css("font-size","16px")}));var Gn=s("aHpC"),Un=s("gkef"),Fn=s("eQBN"),Bn=s("90v0");const qn="ultraUi.components.directives.conversion.previewHeader";let Hn=class{constructor(e,t,s,n,i){this.scope=e,this.element=t,this.attrs=s,this.windowSize=n,this.studentPreview=i;const r=e.course,o=n.isMediumBreakpoint()||n.isLargeBreakpoint();this.scope.shouldShowHeader=o&&r.isUltraPreview(),this.scope.hasExceptionReport=!!r.ultraConversionReportId,e.$on("reloadCourse",(e,t)=>{t===r.id&&(this.scope.shouldShowHeader=r.isUltraPreview())})}};Hn=Object($n.__decorate)([Object($n.__param)(0,Object(Gn.b)("scope")),Object($n.__param)(1,Object(Gn.b)("element")),Object($n.__param)(2,Object(Gn.b)("attrs")),Object($n.__param)(3,Object(Gn.b)(Un.b)),Object($n.__param)(4,Object(Gn.b)(Fn.e))],Hn);class zn{constructor(e){this.$injector=e,this.restrict="AE",this.template=Bn,this.scope={course:"="},this.link=(e,t,s)=>{e.previewHeader=this.$injector.instantiate(Hn,{scope:e,element:t,attrs:s})}}}zn.$inject=["$injector"],o.module(qn,[Fn.b]).directive("bbPreviewHeader",["$injector",e=>e.instantiate(zn)]);const Vn=[{symbol:"d",base:86400,label:"days"},{symbol:"h",base:3600,label:"hours"},{symbol:"m",base:60,label:"minutes"},{symbol:"s",base:1,label:"seconds"}];o.module("ultra.service.filters.timespan",[G.moduleName]).filter("timeSpan",["$log",G.serviceName,function(e,t){const s={};return Vn.forEach(e=>{s[e.symbol]=e}),function(n,i="hm",r){const o={},a={};return vn.forEach(i,t=>{const n=t.toLowerCase();Object.prototype.hasOwnProperty.call(s,n)?a[n]=n!==t:e.error(`${n} is not supported!`)}),vn(s).filter(e=>Object.prototype.hasOwnProperty.call(a,e.symbol)).forEach(e=>{const i=e.symbol,l=1===vn.size(a),c=Math.floor(n/s[i].base),d=s[i].label;(c>0||!0===a[i]||l&&0===vn.size(o))&&(o[d]=t.translateSync({locale:t.getLocale(r),key:`global.timeSpan.${d}.plural`,params:{v:c},noEscape:!0})),n%=s[i].base,delete a[i]}),vn.defaults(o,{days:"",hours:"",minutes:"",seconds:""}),t.translateSync({locale:t.getLocale(r),key:"global.timeSpan.oneline",params:o,noWrap:!0,noEscape:!0}).trim().replace(/\s+/g," ")}}]);const Kn=["ultra.service.filters.timespan"];var Wn=s("0fB1"),Jn=s("z6Q5");const Yn="ultra.service.batch-utility-rest-api.directive";o.module(Yn,[Jn.a,y.a]).directive("bbBatchScope",[Jn.b,y.b,function(e,t){return{restrict:"A",link(s){let n,i;s.$on("BEFORE_REQUEST",(function(r,o){r.stopPropagation(),o.params=o.params||{},o.params[Jn.c]||(n=n||e.newToken(),o.params[Jn.c]=n),n&&(t.cancel(i),i=t(()=>{n.send(),n=null},s))}))}}}]);var Qn=s("gCXj"),Zn=s("BXiQ"),Xn=s("tb/u");const ei="ultra.directives.user-avatar-group";o.module(ei,[Zn.a]).directive("bbUserAvatarGroup",(function(){return{restrict:"E",template:Xn,scope:{users:"=?"},link(e,t){t.addClass("avatar element-image"),e.$watch("users",t=>{t&&(e.displayUsers=Object(vn.compact)([e.users[0],e.users.length>2?{id:"_groupedusers_"+(e.users.length-1),getInitials:()=>"+"+(e.users.length-1),avatar:{permanentUrl:"default"},lastModifiedAt:void 0}:e.users[1]]))})}}}));var ti=s("zFCC"),si=s("NXdT"),ni=s("/jNt");var ii=new class{init(){if(this._isEventAlreadyWrapped)return;const e=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(...t){return this.addEventListener("load",(function(){if(this.status>399){const e=new URL(this.responseURL).pathname.substring(1),s=e.substr(0,e.lastIndexOf("/"));if(!vn.includes(["learn/api/v1/users/me/preferences","learn/api/v1/systemPreferences","telemetry/api/v1/browser"],s)){const s=this.responseText.replace(/(\r\n|\n|\r)/gm,"").substr(0,150),n=`${t[0]} ${e} ${this.status} - ${this.statusText} "${s}"`;$.b.addHistory({applicationId:"",analyticsId:n,action:"request error",url:e})}}})),e.apply(this,[].slice.call(t))},this._isEventAlreadyWrapped=!0}};let ri;s.d(t,"userId",(function(){return ri})),s.d(t,"moduleName",(function(){return oi})),s.d(t,"useAbsoluteUrl",(function(){return ui})),s.d(t,"appInjector",(function(){return li})),s.d(t,"init",(function(){return pi}));const oi="ultra";let ai;window.Foundation.libs.reveal.settings.dismiss_modal_class="close-reveal-modal, .reveal-close",!Ln&&function(){const e=an.j();return!w.a.production||e.indexOf("perf-ultra")>-1||e.indexOf("mylearn.int.bbpd.io")>-1||e.indexOf(".dev.bbpd.io")>-1||e.indexOf(".animal.bbsaas.io")>-1}()&&(Ln=new Mn,window.httpRequestLog=Ln.httpRequestLog,window.pendingRequests=Ln.pendingRequests,window.dumpHttpRequestLog=Ln.dumpHttpRequestLog,window.clearHttpRequestLog=Ln.clearHttpRequestLog,window.disableFtueGuidance=()=>{w.a.disableAllFtueGuidance=!0});let li,ci=["angulartics","angulartics.scroll","ngAnimate","ngAria","ngMessages","ngOnload","ngSanitize","ui.router","angular-data.DSCacheFactory","fng","ngRedux",C,D,ye.a,Yn,x.a,ln.a,Ce.a,Ie.a,$e.a,j.d,we.a,V.a,Y.a,U,$t.a,Te.a,ee.f,Ee.a,qe.a,ke.b,ze,Ke,Sn,et.a,Je.a,Pe.b,De,Le,je.a,Ye.a,st,Fe,Ge.a,Ue.a,Qe.c,Ze.a,B.b,Xe.a,q.a,Q,rt.moduleName,ot.a,at,ut,oe,gt,It.b,ft.a,vt.b,St.a,K,yt.b,z.a,H.a,Ct.a,de,be.a,ve.a,Et.c,wt.a,Tt.a,kt.a,Pt.a,dn,bn,Vt.c,_s.a,Ns.a,y.a,k.N,mn,In.a,Tn,kn,on.a,O.b,Dn.a,On.b,jn,qn,Wn.a,Qn.a,Zn.a,ei,ni.c,ti.b,si.b].concat(rn).concat(Kn);function di(){return ai=Object(l.default)(),o.module(oi,ci).config([G.providerName,e=>{e.setOptions({production:w.a.production})}]).config(["$locationProvider",O.c,"$urlRouterProvider",(e,t,s)=>{e.html5Mode(!0),s.rule((e,t)=>{const s=t.url();if(!s)return;const n=an.r(s);return"/"===n[n.length-1]?n.substring(0,n.length-1):void 0}),s.otherwise((e,t)=>{const s=t.url(),n=e.get(O.d);if("/"===an.r(s)){e.get(ve.b).navigateToLandingPage()}else n.go("base.not-found")})}]).config(["$ocLazyLoadProvider",e=>{e.config({loadedModules:[oi]})}]).config(["$animateProvider",e=>{e.classNameFilter(/angular-animate/)}]).config(["$compileProvider",e=>{e.debugInfoEnabled(!w.a.production)}]).config(["$httpProvider",e=>{e.useApplyAsync(!0),hi(e)}]).config(["DSCacheFactoryProvider",e=>{e.setCacheDefaults({capacity:1e3,maxAge:18e5,deleteOnExpire:"passive"})}]).config(["$ariaProvider",e=>{e.config({bindRoleForClick:!1,bindKeydown:!1,ariaRequired:!1,ariaInvalid:!1,tabindex:!1})}]).config(["$logProvider",e=>{e.debugEnabled(!w.a.production)}]).config(["$provide",function(e){e.decorator("$rootScope",["$delegate",function(e){return Object.defineProperty(e.constructor.prototype,"$$digestPaused",{get(){const e=this;return Object.prototype.hasOwnProperty.call(e,"$$__digestPaused")&&null!=e.$$__digestPaused?e.$$__digestPaused:(e.$parent||{}).$$digestPaused}}),e}])}]).config(["$ngReduxProvider",e=>{const t=window,s=[ai,c.default],n=[];if(!w.a.production){const e=Object(a.createLogger)({level:"info",collapsed:!0});s.unshift(e),t.__REDUX_DEVTOOLS_EXTENSION__&&n.push(t.__REDUX_DEVTOOLS_EXTENSION__&&t.__REDUX_DEVTOOLS_EXTENSION__())}e.createStoreWith(m.rootReducer,s,n)}]).config(["$qProvider",e=>{e.errorOnUnhandledRejections(!1)}])}function ui(e){return e&&e.url&&(e.url.indexOf("/api/")>=0||e.url.indexOf("/partner-cloud/app/")>=0)}function hi(e){e.interceptors.push(()=>({request:e=>(ui(e)&&(e.url=an.c(e.url)),e)}))}function mi(e){e.run(["$rootScope","$ngRedux",G.serviceName,wt.b,ue,(e,t,s,n,i)=>{let r;i.registerXsrfCallback(e=>{Object(m.configure)({apiBasePath:w.a.apiBasePath,xsrf:e,partnerCloudBasePath:w.a.partnerCloudBasePath})}),ai.run(v);const o=t.connect(e=>({}),m.actions.app)((e,t)=>{r=t});e.$on("destroy",o),e.$on(R.b.$stateChangeSuccess,(t,n,i,o,a)=>{r&&r.handleStateChangeSuccess({toState:n,toParams:i});let l="base.recentActivity";o.name&&(l=o.name),e.previousState=l,e.previousStateSref=`${l}${a?`(${JSON.stringify(a)})`:""}`,e.index=Object.create(null),e.index.locale=(s.getLocale(e)||"").replace("_","-");const c=()=>{const t=n.pageTitle||"base.ultra";s.translate({locale:e.index.locale,key:t}).then(t=>{e.index.title=t})};new Promise((e,t)=>{try{if(n.pageTitleHandler){const t=n.pageTitleHandler;t.build({injector:li,name:n.name,pageTitle:n.pageTitle}).process(),e(t)}else c()}catch(e){console.error(`Uncaught error in dynamic title for state ${n.name}:`,e),t()}}).then(null,c)}),e.$on(R.a.$locationChangeSuccess,(e,t)=>{if(!r)return;const s=t.split("?")[1],n={};if(s){const e=new URLSearchParams(s);for(const[t,s]of Array.from(e.entries()))n[t]=s}r.handleLocationChangeSuccess({queryParams:n})});const a=n.subscribe();e.$on("destroy",a)}]).run(["$http",be.b,ue,(e,t,s)=>{s.registerXsrfCallback(t=>{e.defaults.headers.common[he]=t,o.element.ajaxSetup({headers:{[he]:t}})}),o.element.ajaxPrefilter(e=>{ui(e)&&(e.url=an.c(e.url))})}]).run(["$rootScope",be.b,fe.b,G.serviceName,function(e,t,s,n){e.context=t,e.$on("bbCurrentUserModified",()=>{s.userModel.$fetch()}),Object(Ms.b)(t,s,n)}]).run(["$rootScope",e=>{e.Modernizr=window.Modernizr}])}function pi(){an.m("inPreviewMode",window.location.href)&&r("body").addClass("in-preview-mode"),o.element(document).ready(()=>{o.module("pre-bootstrap-ultra",["ng",be.a]).config(["$httpProvider",e=>{hi(e)}]);const e=o.injector(["pre-bootstrap-ultra"]),t=e.get(be.b),s=e.get(fe.b),n=e.get("$http"),i=e.get(y.b),a=e.get("$q");r(document).foundation(),/Android/.test(navigator.appVersion)&&"function"==typeof document.activeElement.scrollIntoViewIfNeeded&&window.addEventListener("resize",()=>{"INPUT"===document.activeElement.tagName&&i(()=>{document.activeElement.scrollIntoViewIfNeeded()},this.scope,0,!1)});const l=an.j(),c=window.__initialContext.xsrf?a.when({data:{xsrfToken:window.__initialContext.xsrf}}):n.get(l+w.a.apiBasePath+"/v1/utilities/xsrfToken");a.all([s.userModel.$asPromise(),c,t.getSystemInfo().$asPromise()]).then(e=>{const t=e[0];ri=t.id;const n=e[2];Se.a.userId=ri,Ls.a.setClientOffset(n.now.getTime()-(new Date).getTime());const i=r("base"),a=i.attr("href");i.attr("href",w.a.basePath+"/");const l=(li=o.bootstrap(document.documentElement,[oi],{strictDi:!0})).get(be.b),c=li.get(ue);li.get(Vt.d).addRouteListener(),new Ds(Vt.b,S.guidanceConnector).start(),c.updateToken(e[1].data.xsrfToken),s._setUserId(ri),c.registerXsrfCallback(e=>{l.sessionId=e,l.xsrfToken=e}),fs.ltiToolService.init(window),At.a.init(window),Os(li.get(G.serviceName),li.get("$ngRedux")),ii.init(),i.attr("href",a)}).catch(e=>{401===e.status&&(window.location.href="/?new_loc="+encodeURIComponent(window.location.pathname+(window.location.search||"")+(window.location.hash||"")))}).finally(()=>{const e=()=>{const e=r("#initial-load-area");if(e&&e.length>0){if(window.__e2eTestingEnabled)return void e.remove();e.addClass("fade-out");const t=t=>{if(!t.data.noTransitions&&"opacity"!==t.originalEvent.propertyName)return!1;e.remove()};cn.b(e,t),setTimeout(()=>e.remove(),500)}};if(window.__e2eTestingEnabled)e();else if(li){const t=li.get("$rootScope");let s;const n=t.$on("$stateChangeSuccess",()=>{e(),n(),s()});s=t.$on("$stateChangeError",()=>{e(),s(),n()}),t.$on("hideInitialLoadingArea",()=>{e()})}else e()})})}if(w.a.production){mi(di()),pi()}else Promise.all([s.e(539),s.e(236)]).then((()=>{Promise.resolve().then(s.bind(null,"tWb8")).then(e=>{ci=ci.concat(e.modules);const t=di();mi(t),e.init(t),pi()})}).bind(null,s)).catch(()=>{})},e6jQ:function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r}));let n=0;function i(){return"id_"+ ++n}function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},eQBN:function(e,t,s){"use strict";s.d(t,"b",(function(){return g})),s.d(t,"e",(function(){return b})),s.d(t,"c",(function(){return f})),s.d(t,"d",(function(){return v})),s.d(t,"a",(function(){return S}));var n=s("D57K"),i=s("aHpC"),r=s("yC9S"),o=s("Q/M7"),a=s("ZzR9"),l=s("qhd3"),c=s("lVRt"),d=s("12mu"),u=s("0JpG"),h=s("x+T+"),m=s("hkqm"),p=s("zIHT");const g="ultra.service.studentPreview",b="studentPreview",f=b+"Provider",v=c.d,S="TOGGLE-PREVIEW";let y=class{constructor(e,t,s,n,i,o,l,c){this.$q=e,this.$rootScope=t,this.$sce=s,this.entitlementCache=n,this.localize=i,this.modal=o,this.toast=l,this.UserModel=c,r.b.OnRootScope(this.$rootScope,a.b.$stateHasCourseInContextChanged,(e,t,s)=>{var n;s&&!t&&(null===(n=this.previewStatus)||void 0===n?void 0:n.previewing)&&this.exitPreviewMode()}),r.b.OnRootScope(this.$rootScope,a.a.$locationChangeSuccess,(e,t)=>{this.isInIframeOfPreviewMode()&&this.course&&sessionStorage.setItem(this.previewUrlStorageKey,t)})}get previewUrlStorageKey(){return`PREVIEW_URL_${this.course.id}`}get course(){return this._course}get previewStatus(){return this._previewStatus}get previewUrl(){return this._previewUrl}load(){return this.course.studentPreview.$fetch().$asPromise().then(e=>(this._previewStatus=e,this.updateClasses(),e.courseMembershipId?this.course.memberships.$new(e.courseMembershipId).$fetch().$asPromise().then(t=>(e.user=this.UserModel.$buildRaw(e.user),e.user.memberships.push(this.course.memberships.$buildRaw(t)),e)):this.$q.when(e)))}init(e){var t;return(null===(t=this.course)||void 0===t?void 0:t.id)===e.id&&this.previewStatus?this.$q.resolve(this.previewStatus):(this._course=e,this.setPreviewUrl(),this.load())}setPreviewUrl(){const e=sessionStorage.getItem(this.previewUrlStorageKey);let t;t=e?Object(o.a)(e,"inPreviewMode","true"):Object(o.c)(`/ultra/courses/${this.course.id}/outline/?inPreviewMode=true`),this._previewUrl=this.$sce.trustAsResourceUrl(t)}openStartPreviewModal(){const e=this.$rootScope.$new();return e.courseOrgTokenPrefix=this.course.isOrganization?"components.services.organization":"components.services",document.body.classList.add("dialog-pop-up-in-preview-mode"),this.modal.open({scope:e,template:p,resolve:{translations:[u.serviceName,e=>e.loadBundle("components/services/student-preview")]}}).result}updateClasses(){var e;(null===(e=this.previewStatus)||void 0===e?void 0:e.previewing)?document.body.classList.add("in-preview-mode-parent"):(document.body.classList.remove("in-preview-mode-parent"),document.body.classList.remove("has-footer-in-preview-mode"))}showToastNotification(e){this.toast.show({messageKey:e,icon:"icon-check",toastStatus:"success"})}exitPreviewMode(e=!1){return this.entitlementCache.clearEntitlementCache(this.course.id),this.$q.all([this.course.studentPreview.withParams({discardData:e}).$destroy().$asPromise(),this.localize.loadBundle("components/services/student-preview")]).then(e=>this.entitlementCache.loadCourseEntitlements(this.course.id).then(()=>{this.$rootScope.$broadcast(S,!1),this.setPreviewUrl(),this.showToastNotification("components.services.studentPreview.previewEnded"),this._previewStatus=e[0],this.updateClasses()}))}launchPreviewMode(){return this.openStartPreviewModal().then(()=>this.course.studentPreview.$save().$asPromise().then(e=>{this._previewStatus=e,this.$rootScope.$broadcast(S,!0),this.updateClasses()}))}resetPreviewMode(){return this.course.studentPreview.withParams({discardData:!0}).$destroy().$asPromise().then(()=>this.course.studentPreview.$save().$asPromise().then(()=>{this.setPreviewUrl(),this.showToastNotification("components.services.studentPreview.activityReset")}))}isInIframeOfPreviewMode(){var e;return(null===(e=this.previewStatus)||void 0===e?void 0:e.previewing)&&window.top!==window}};y=Object(n.__decorate)([Object(n.__param)(0,Object(i.b)("$q")),Object(n.__param)(1,Object(i.b)("$rootScope")),Object(n.__param)(2,Object(i.b)("$sce")),Object(n.__param)(3,Object(i.b)(h.c)),Object(n.__param)(4,Object(i.b)(u.serviceName)),Object(n.__param)(5,Object(i.b)(d.b)),Object(n.__param)(6,Object(i.b)(m.b)),Object(n.__param)(7,Object(i.b)(l.serviceName))],y);class C extends y{}angular.module(g,[h.b,u.moduleName,d.a,m.a]).provider(b,class{constructor(){this.$get=["$injector",e=>e.instantiate(y)],this.name=v,this.resolve=[c.c,b,(e,t)=>t.init(e)]}})},eUpQ:function(e,t,s){"use strict";class n{static getServerTime(){return new Date((new Date).getTime()+n.clientTimeDifferenceMS)}static getServerTimeAsEpochTime(){return this.getServerTime().getTime()/1e3}static setClientOffset(e){n.clientTimeDifferenceMS=e}}n.clientTimeDifferenceMS=0,t.a=n},emI2:function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return l}));var n=s("D57K"),i=s("pjml"),r=s("aHpC");const o="ultra.service.preference",a="preferenceService",l=250;let c=class{constructor(e,t){this.$q=e,this.MyPreferenceModel=t,this.preferences={}}getPreference(e,t,s){const n=this.$q.defer();return s||!Object.prototype.hasOwnProperty.call(this.preferences,e)?this.MyPreferenceModel.$find(e).$allow([404]).$asPromise().then(s=>{if(s.$response&&404===s.$response.status){if(void 0===t)return void n.reject(s);this._addPreferenceToCache(e,t),n.resolve(this.preferences[e])}else this.preferences[s.key]=s,n.resolve(s)},e=>{n.reject(e)}):n.resolve(this.preferences[e]),n.promise}_addPreferenceToCache(e,t,s){const n=this.MyPreferenceModel.$new(e);n.key=e,n.value=t,n.isRequired=!s,this.preferences[e]=n}setPreference(e,t,s){if(e.length>l)throw new Error("Preference key is too long!");return this._addPreferenceToCache(e,t,s),this.preferences[e].$save().$asPromise()}};c=Object(n.__decorate)([Object(n.__param)(0,Object(r.b)("$q")),Object(n.__param)(1,Object(r.b)(i.O.serviceName))],c);class d extends c{}angular.module(o,[i.N]).service(a,c)},en1n:function(e,t,s){"use strict";s.d(t,"d",(function(){return a})),s.d(t,"c",(function(){return l})),s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return h})),s.d(t,"e",(function(){return p})),s.d(t,"g",(function(){return f})),s.d(t,"f",(function(){return v})),s.d(t,"k",(function(){return S})),s.d(t,"j",(function(){return y})),s.d(t,"h",(function(){return C})),s.d(t,"l",(function(){return I})),s.d(t,"m",(function(){return $})),s.d(t,"i",(function(){return w})),s.d(t,"n",(function(){return k}));s("9RbK");var n=s("5iHu"),i=s("nbDY"),r=s.n(i),o=s("xkx/");const a=39.9375,l=40,c=63.9375;let d;const u=e=>e*parseFloat(n("html").css("font-size"));class h extends r.a{}h.Small=new h("small"),h.Medium=new h("medium"),h.Large=new h("large"),h.Xlarge=new h("xlarge"),h.Xxlarge=new h("xxlarge");const m=function(){return d||(d={small:{start:0,end:u(a)},medium:{start:u(a),end:u(c)},large:{start:u(c),end:u(89.9375)},xlarge:{start:u(89.9375),end:u(119.9375)},xxlarge:{start:u(119.9375),end:999999999}}),d};let p=m,g=null;n(window).resize(()=>{g=null});const b=function(){return null==g&&(g=n(window).width()),g};let f=b;function v(){const e=p(),t=f();return t>=e.small.start&&t<e.small.end?h.Small:t>=e.medium.start&&t<e.medium.end?h.Medium:t>=e.large.start&&t<e.large.end?h.Large:t>=e.xlarge.start&&t<e.xlarge.end?h.Xlarge:h.Xxlarge}function S(){return v().isEqualTo(h.Small)}function y(){return v().isEqualTo(h.Medium)}function C(){return v().isEqualTo(h.Large)}function I(){return v().isEqualTo(h.Xlarge)}function $(){return v().isEqualTo(h.Xxlarge)}function w(){return C()||I()||$()}function T(e){return e.replace("@media","").trim()}const E={smallUp:window.matchMedia(T(o.BbMediaQueries.smallUp)),smallOnly:window.matchMedia(T(o.BbMediaQueries.smallOnly)),mediumUp:window.matchMedia(T(o.BbMediaQueries.mediumUp)),mediumOnly:window.matchMedia(T(o.BbMediaQueries.mediumOnly)),largeUp:window.matchMedia(T(o.BbMediaQueries.largeUp)),largeOnly:window.matchMedia(T(o.BbMediaQueries.largeOnly)),xlargeUp:window.matchMedia(T(o.BbMediaQueries.xLargeUp)),xlargeOnly:window.matchMedia(T(o.BbMediaQueries.xLargeOnly)),xxlargeUp:window.matchMedia(T(o.BbMediaQueries.xXLargeUp))},k={smallUp:E.smallUp,smallOnly:E.smallOnly,mediumUp:E.mediumUp,mediumOnly:E.mediumOnly,largeUp:E.largeUp,largeOnly:E.largeOnly,xlargeUp:E.xlargeUp,xlargeOnly:E.xlargeOnly,xxlargeUp:E.xxlargeUp,"small-up":E.smallUp,"small-only":E.smallOnly,"medium-up":E.mediumUp,"medium-only":E.mediumOnly,"large-up":E.largeUp,"large-only":E.largeOnly,"xlarge-up":E.xlargeUp,"xlarge-only":E.xlargeOnly,"xxlarge-up":E.xxlargeUp}},"f4B+":function(e,t,s){"use strict";var n=s("5iHu"),i=s("BqZm"),r=s.n(i);class o extends r.a{static text(e){return n("<div></div>").html(e).text()}}Object.setPrototypeOf(o,r.a),t.a=o},f8ya:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return d}));var n,i=s("zGdY");!function(e){e.Add="Add",e.Delete="Delete",e.ValueChange="ValueChange",e.NoChange="NoChange"}(n||(n={}));class r{constructor(e,t){this.type=e,this.value=t}equals(e){return null==e?this.hasNoAccommodation():this.type===i.TimeLimitException.Custom?this.value===e.value:this===e||this.type===e.type}hasNoAccommodation(){return!1}get hasAccommodation(){return!this.hasNoAccommodation()}}class o extends r{compare(e){return this.equals(e)?n.NoChange:this.hasAccommodation?n.Add:n.Delete}}class a extends o{constructor(){super(i.DueDateException.Normal)}hasNoAccommodation(){return!0}}class l extends r{compare(e){return this.equals(e)?n.NoChange:this.hasAccommodation?e.hasAccommodation?n.ValueChange:n.Add:n.Delete}toKey(){switch(this.type){case i.TimeLimitException.NoAccommodation:return"NoAccommodation";case i.TimeLimitException.Unlimited:return"Unlimited";default:return"Custom"}}}class c extends l{constructor(){super(i.TimeLimitException.NoAccommodation)}hasNoAccommodation(){return!0}}class d{constructor(e,t){null!=e&&(this.dueDate=e),null!=t&&(this.timeLimit=t)}static fromTypes(e,t){const s=new d;var n;return s.dueDate=null==(n=e)||n===i.DueDateException.Normal?new a:new o(n),s.timeLimit=function(e){if(null==e||e===i.TimeLimitException.NoAccommodation)return new c;if(e!==i.TimeLimitException.Unlimited){const t=parseInt(e+"",10);return new l(i.TimeLimitException.Custom,t)}return new l(e)}(t),s}clone(){return this.timeLimit.type===i.TimeLimitException.Custom?d.fromTypes(this.dueDate.type,this.timeLimit.value):d.fromTypes(this.dueDate.type,this.timeLimit.type)}equals(e){return e.dueDate.equals(this.dueDate)&&e.timeLimit.equals(this.timeLimit)}compare(e){return{dueDate:this.dueDate.compare(e.dueDate),timeLimit:this.timeLimit.compare(e.timeLimit)}}get hasAccommodation(){return this.dueDate.hasAccommodation||this.timeLimit.hasAccommodation}}},fGgA:function(e,t,s){"use strict";s("zAxy");var n=s("7O4Y"),i=s("nsO7"),r=s("5iHu"),o=s("Llzl"),a=s("0JpG"),l=s("lEL+"),c=s("gkef"),d=s("/J7e"),u=s("+4Px"),h=s("e6jQ");s.d(t,"b",(function(){return m})),s.d(t,"a",(function(){return p}));const m="ultra.components.directives.tooltip";class p{constructor(e,t,s,n,i,o){this.scope=e,this.element=t,this.attrs=s,this.localizeService=n,this.timeoutService=i,this.windowSizeService=o,this.tooltipCreated=!1,this.tooltip=null,this.pip=null,this.timeout=null,this.timeoutMS=500,p.initEnhancedTooltipEvents(),this.controlId=this.attrs.tooltipId||`tooltip-${h.a()}`,this.tooltipPosition=this.attrs.tooltipPosition||"top","true"===this.attrs.tooltipAlwaysUnderline&&this.getTriggerElement().addClass("tooltip-always-underline"),this.$body=r("body"),this.attrs.$observe("title",e=>{e&&(this.content=e,this.updateTooltip())}),this.scope.$on("$destroy",()=>{this.getTooltip()&&this.getTooltip().remove(),this.$body=null,this.tooltip=null,this.pip=null}),"true"!==this.attrs.tooltipDisableOnMouseLeave&&t.on("mouseleave",()=>{(this.windowSizeService.isLargeBreakpoint()||"true"===this.attrs.tooltipEnableOnMouseLeaveForAllBreakpoints)&&(this.timeoutMS>0?this.timeout=this.timeoutService(()=>{this.hideTooltip()},this.scope,this.timeoutMS):this.hideTooltip())}),"true"!==this.attrs.tooltipDisableOnMouseOver&&t.on("mouseover",()=>{(this.windowSizeService.isLargeBreakpoint()||"true"===this.attrs.tooltipEnableOnMouseOverForAllBreakpoints)&&this.showTooltip()}),"true"!==this.attrs.tooltipDisableOnFocus&&(t.on("focus",()=>{r("body").hasClass("hide-focus-outline")||this.showTooltip()}),t.on("blur",()=>{this.hideTooltip()})),t.on("click",e=>{if(!r("body").hasClass("hide-focus-outline"))return"true"===this.attrs.tooltipHideOnActivation&&this.hideTooltip(),void e.stopPropagation();const t=this.windowSizeService.isSmallBreakpoint(),s=this.windowSizeService.isMediumBreakpoint();if("true"===this.attrs.tooltipOpenOnActivation||t||s){if("true"===this.attrs.tooltipDisableOnMediumDownBreakpoint&&(s||t))return;this.isTooltipVisible()?this.hideTooltip():(this.showTooltip(),e.stopPropagation())}else this.hideTooltip()}),t.on("keydown",e=>{e.which===u.g&&this.isTooltipVisible()?(this.hideTooltip(),e.stopPropagation()):e.which!==u.t&&e.which!==u.f||("true"===this.attrs.tooltipOpenOnActivation?this.isTooltipVisible()?this.hideTooltip():(this.showTooltip(),e.stopPropagation()):"true"===this.attrs.tooltipHideOnActivation&&this.hideTooltip())})}isTooltipVisible(){return this.getTooltip()&&"false"===this.getTooltip().attr("aria-hidden")}cancelTimeout(){this.timeout&&this.timeoutService.cancel(this.timeout)}showTooltip(){this.content&&(this.tooltipCreated||(this.addTooltipToDom(),this.attrs.tooltipInitImmediate)?(this.getTriggerElement().attr("title",""),(o.isUndefined(this.attrs.tooltipOnOverflowOnly)||"true"===this.attrs.tooltipOnOverflowOnly&&"true"===o.element(this.getTriggerElement().children()[0]).attr("data-overflowed"))&&(this.cancelTimeout(),this.hideAllTooltips(),this.positionTooltip(),this.getTooltip().attr("aria-hidden","false"),this.postShowTooltip())):this.timeoutService(()=>{this.showTooltip()},this.scope,100))}hideTooltip(){this.tooltipCreated&&this.getTooltip().attr("aria-hidden","true").css({top:0,left:0})}hideAllTooltips(){r("body").find(".enhanced-tooltip").attr("aria-hidden","true").css({top:0,left:0})}addTooltipToDom(){const e=void 0===this.attrs.tooltipCenterContent||"true"===this.attrs.tooltipCenterContent,t="true"===this.attrs.tooltipDarkTheme,s=Object(n.default)("enhanced-tooltip","tooltip-max-width",{"tooltip-center-content":e,"tooltip-dark-theme":t},this.attrs.tooltipClassNames),i=r(`<span class="${s}" aria-hidden="true" role="tooltip" id="${this.controlId}">${this.getPipHtml()}</span>`);this.addTooltipStyles(i),this.addTooltipContent(i),this.addTooltipEvents(i),this.addTooltipClose(i),this.$body.append(i),this.getTriggerElement().attr("aria-describedby",this.controlId),this.tooltipCreated=!0}getPipHtml(){return"true"===this.attrs.tooltipDisablePip?"":'<span class="enhanced-tooltip-pip"></span>'}getPipPadding(){return"true"===this.attrs.tooltipDisablePip?0:13}getTriggerElement(){return this.element}getTooltip(){if(!this.tooltip){const e=this.$body.find(`#${this.controlId}`);this.tooltip=e.length>0?e:null}return this.tooltip}updateTooltip(){if(this.tooltipCreated){const e=this.getTooltipPip()||"";this.getTooltip().html("").append(e).append(document.createTextNode(this.content))}}getTooltipPip(){return this.pip||(this.pip=this.getTooltip().find(".enhanced-tooltip-pip")),this.pip}positionTooltip(){this.getTooltipPip().removeClass(this.adjustedTooltipPosition);const e=this.getTriggerElement().offset().left,t=e+this.getTriggerElement().outerWidth()/2;switch(this.checkPositionInBoundary(t),this.adjustedTooltipPosition){case"top-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-this.getTooltip().outerWidth()/2);break;case"top-left":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-this.getTooltip().outerWidth()+20);break;case"top-right":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-20);break;case"bottom-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-this.getTooltip().outerWidth()/2);break;case"bottom-left":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-this.getTooltip().outerWidth()+p.TOOLTIP_PIP_PADDING);break;case"bottom-right":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-p.TOOLTIP_PIP_PADDING);break;case"right-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()/2,e+this.getTriggerElement().outerWidth()+this.getPipPadding());break;case"right-top":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()+p.TOOLTIP_PIP_PADDING,e+this.getTriggerElement().outerWidth()+this.getPipPadding());break;case"right-bottom":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-p.TOOLTIP_PIP_PADDING,e+this.getTriggerElement().outerWidth()+this.getPipPadding());break;case"left-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()/2,e-this.getTooltip().outerWidth()-this.getPipPadding());break;case"left-top":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()+p.TOOLTIP_PIP_PADDING,e-this.getTooltip().outerWidth()-this.getPipPadding());break;case"left-bottom":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-p.TOOLTIP_PIP_PADDING,e-this.getTooltip().outerWidth()-this.getPipPadding())}this.getTooltipPip().addClass(this.adjustedTooltipPosition)}applyPosition(e,t,s){const n=this.adjustLeftPercentage(s),i=this.ensureTopInBounds(t);e.css({top:i||"auto",left:n||"auto"})}ensureTopInBounds(e){const t=e+this.getTooltip().outerHeight();if(this.getWindowHeight()-t<p.TOOLTIP_VIEWPORT_EDGE_PADDING?e=this.getWindowHeight()-this.getTooltip().outerHeight()-p.TOOLTIP_VIEWPORT_EDGE_PADDING:e<p.TOOLTIP_VIEWPORT_EDGE_PADDING&&(e=p.TOOLTIP_VIEWPORT_EDGE_PADDING),o.isDefined(this.attrs.tooltipTopAdjustPercent)){e+=this.getTriggerElement().outerHeight()/100*parseInt(this.attrs.tooltipTopAdjustPercent,10)}return e}adjustLeftPercentage(e){let t=e;if(o.isDefined(this.attrs.tooltipLeftAdjustPercent)){t+=this.getTriggerElement().outerWidth()/100*parseInt(this.attrs.tooltipLeftAdjustPercent,10)}return t}checkPositionInBoundary(e){const t=this.tooltipPosition.split("-");"bottom"!==t[0]&&"top"!==t[0]||(this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getTooltip().outerHeight()+this.getPipPadding()>this.getWindowHeight()?t[0]="top":this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding()<0&&(t[0]="bottom"),e+this.getTooltip().outerWidth()/2>this.getWindowWidth()?t[1]="left":e-this.getTooltip().outerWidth()/2<0?t[1]="right":t[1]=t[1]?t[1]:"center"),this.adjustedTooltipPosition=t.join("-")}getWindowWidth(){return r(window).width()}getWindowHeight(){return r(window).height()}addTooltipClose(e){const t=e.find(".close-icon");t.length>0&&t.on("click",()=>{this.hideTooltip()})}addTooltipStyles(e){}addTooltipContent(e){this.content=this.getTriggerElement().attr("title"),e.append(document.createTextNode(this.content))}addTooltipEvents(e){}postShowTooltip(){}}p.$inject=["scope","element","attrs",a.serviceName,l.b,c.b],p.TOOLTIP_PIP_PADDING=20,p.TOOLTIP_VIEWPORT_EDGE_PADDING=20,p.initEnhancedTooltipEvents=i.once(()=>{const e=i.throttle(()=>{r("body").find(".enhanced-tooltip").attr("aria-hidden","true")},500);document.addEventListener("scroll",e,!0),r(window).resize(e),r("body").click(e)});class g{constructor(e){this.$injector=e,this.restrict="A",this.scope={},this.link=(e,t,s)=>{d.a(s.enhancedTooltip)?e.tooltip=this.$injector.instantiate(p,{scope:e,element:t,attrs:s}):(g.instanceCount++,g.ensureEvents(),t.one("mouseover",e=>{const t=r(e.currentTarget);null==t.attr("data-tooltip")&&(t.attr("data-tooltip",""),t.parent().foundation({tooltip:{disable_for_touch:!0}}))}),e.$on("$destroy",()=>{g.instanceCount--,0===g.instanceCount&&g.unregisterEvents(),t.foundation("tooltip","off")}))}}static ensureEvents(){function e(){o.element("span.tooltip:visible").hide(),o.element(".button-with-active-tooltip").removeClass("open")}g.eventHandlers||(g.eventHandlers={click:e,blur:e,keyup:function(t){r.Event(t).keyCode===u.g&&e()}},Object.keys(g.eventHandlers).forEach(e=>{document.addEventListener(e,g.eventHandlers[e],!0)}))}static unregisterEvents(){Object.keys(g.eventHandlers).forEach(e=>{document.removeEventListener(e,g.eventHandlers[e],!0)}),g.eventHandlers=null}}g.instanceCount=0,g.eventHandlers=null,g.$inject=["$injector"],o.module(m,[a.moduleName,l.a,c.a]).directive("bbTooltip",["$injector",e=>e.instantiate(g)])},fYJU:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return d}));var n=s("D57K"),i=s("Llzl"),r=s("pjml"),o=s("qhd3"),a=s("eQBN"),l=s("aHpC");const c="ultra.service.context.user",d="contextUser";let u=class{constructor(e,t,s){this.$window=e,this.UserModel=t,this.studentPreview=s}get userId(){return this.studentPreview.isInIframeOfPreviewMode()?this.studentPreview.previewStatus.user.id:this._userId||null}get userModel(){return this.studentPreview.isInIframeOfPreviewMode()?this.studentPreview.previewStatus.user:(this._userModel||(this._userModel=this.getInitialUserModel(),this._userId=this._userModel.id),this._userModel)}getMemberships(){return this._userModel||(this._userModel=this.getInitialUserModel()),this._userModel.memberships.$fetch({limit:1e4,expand:"course.effectiveAvailability,course.permissions,courseRole"}).$asPromise()}getRoles(){return this.UserModel.$find("me",{expand:"systemRoles,insRoles"}).$asPromise()}update(){return this.UserModel.$find("me",{expand:"systemRoles"}).$then(e=>this._setUserModel(e))}getInitialUserModel(){return this.$window.__initialContext?this.UserModel.$buildRaw(this.$window.__initialContext.user):this.UserModel.$find("me",{expand:"systemRoles"})}_setUserId(e){return this._userId=e,this._userId}_setUserModel(e){return this._userModel=e,this._userId=e?e.id:null,this._userModel}};u=Object(n.__decorate)([Object(n.__param)(0,Object(l.b)("$window")),Object(n.__param)(1,Object(l.b)(o.serviceName)),Object(n.__param)(2,Object(l.b)(a.e))],u);class h extends u{}i.module(c,[r.N,a.b]).service(d,u)},fm95:function(e,t,s){"use strict";s.r(t);s("QLzv");var n=s("nsO7"),i=s("Llzl"),r=s("wgY5"),o=s("nbDY"),a=s.n(o),l=s("5MwF"),c=s("IbyE"),d=s("zGdY"),u=s("VAMW"),h=s("4nF1"),m=s("ohO4"),p=s("pjml"),g=s("yCC5"),b=s("nkTj"),f=s("Rjd/"),v=s("eUpQ"),S=s("Sa5G"),y=s("94iD"),C=s("6vR2"),I=s("DU7P"),$=s("Htol"),w=s("6fZB");class T{constructor(){this.key=u.TransitService.CreateContentCourseModelOperations}async createContent(e){const t=e.$save().$then(e=>{e.ui.isUploading=!1,e.isAvailable=!1}).$asPromise();await Object(w.a)(t)}}class E{constructor(e,t,s){this.$q=e,this.$rootScope=t,this.CourseModel=s,this.key=u.TransitService.DeleteContentCourseModelOperations,this.$q=e,this.$rootScope=t,this.CourseModel=s}deleteContentHelper(e){this.broadcastChildrenContentForDelete(e).then(()=>{e.hasCourseLinks()?e.getSoftLinks().$asPromise().then(t=>{t.length?this.$q.all(t.map(t=>this.CourseModel.$new(e.courseId).contents.$new(t.courseContent).$fetch().$asPromise().then(e=>{this.$rootScope.$broadcast("deleteContent",e,!1)}))).then(()=>{this.$rootScope.$broadcast("deleteContent",e)}):this.$rootScope.$broadcast("deleteContent",e)}):this.$rootScope.$broadcast("deleteContent",e)})}broadcastChildrenContentForDelete(e){return e.isFolder()||e.isLearningModule()?e.getChildren({recursive:!0}).$asPromise().then(e=>e.map(e=>(e.isCourseLink()||this.$rootScope.$broadcast("deleteContent",e,!1),Promise.resolve()))):this.CourseModel.$collection().$asPromise()}deleteContent(e){p.p.ContentHandler.CourseLink.isEqualTo(e.contentHandler)?e.getLinkContentSource().$then(t=>{var s;const n=null===(s=null==t?void 0:t.contentHandler)||void 0===s?void 0:s.toString();d.ContentHandlerHandle.Discussion===n?this.deleteContentHelper(t):this.deleteContentHelper(e)}):this.deleteContentHelper(e)}}class k{constructor(){this.key=u.TransitService.ConditionalReleaseCourseModelOperations}conditionalReleaseAsync(e,t,s,n,i){const r=e.conditionalReleaseAsync(t,s,n,i),o="function"==typeof r.$asPromise?r.$asPromise():r;return Object(w.a)(o)}async save(e,t){const s=e.withParams({fields:"id"}).$save(t).$asPromise();await Object(w.a)(s)}}var P=s("tBL6");class A{constructor(e){this.scope=e,this.key=u.TransitService.ContentFolderRefresher}refresh(e,t){this.scope.$applyAsync(()=>{this.scope.$broadcast($.a,e,t)})}}class R{constructor(e,t,s){this.$q=e,this.$rootScope=t,this.CourseModel=s,this.key=u.TransitService.CourseLinksCourseModelOperations}updateCourseLinks(e){return Object(w.a)(this.updateLinks(e))}updateLinks(e){return this.$rootScope.$broadcast("content-update",e),e.hasCourseLinks().then(t=>{if(t)return e.getSoftLinks().$asPromise().then(t=>{if(t.length)return this.$q.all(t.map(t=>this.CourseModel.$new(e.courseId).contents.$new(t.courseContent).$fetch().$asPromise().then(e=>{e.getLinkContentSource().$then(()=>this.$rootScope.$broadcast("content-update",e))})))})})}}s.d(t,"CREATE_CONTENT_ID",(function(){return O})),s.d(t,"FolderContentHandlerIcon",(function(){return D})),s.d(t,"getProctoredAssessmentSettings",(function(){return _})),s.d(t,"ForumAttacherAction",(function(){return N})),s.d(t,"ScormScoringMethod",(function(){return L})),s.d(t,"ScormLearningStandard",(function(){return M})),s.d(t,"serviceName",(function(){return x})),s.d(t,"ContentHandler",(function(){return c.ContentHandler})),s.d(t,"ContentRootNode",(function(){return S.g}));const O="create";class D extends a.a{constructor(e){super(e),this.iconClass=e}}D.OpenFolder=new D("img-icon-folder-open"),D.ClosedFolder=new D("img-icon-folder");const _=e=>{if(i.isUndefined(e)||null==e)return null;const t=e.contentHandler.toString();if(p.p.ContentHandler.TestLink.isEqualTo(e.contentHandler)&&e.contentDetail&&e.contentDetail[t]&&e.contentDetail[t].test&&e.contentDetail[t].test.deploymentSettings){const s=e.contentDetail[t].test&&e.contentDetail[t].test.deploymentSettings;return{proctoringDownloadUrl:s.proctoringDownloadUrl,proctoringServiceHandle:s.proctoringServiceHandle,proctoringServiceVendor:s.proctoringServiceVendor,isSecureBrowserRequiredToTake:s.isSecureBrowserRequiredToTake,isSecureBrowserRequiredToReview:s.isSecureBrowserRequiredToReview,isWebcamRequired:s.isWebcamRequired}}return null};class N extends a.a{}N.ADD=new N("ADD"),N.DELETE=new N("DELETE");class L extends a.a{}L.SCORE=new L("SCORE"),L.COMPLETION=new L("COMPLETION"),L.SATISFACTION=new L("SATISFACTION");class M extends a.a{}M.AICC=new M("AICC"),M.CMI5=new M("CMI5"),M.SCORM_11=new M("SCORM_11"),M.SCORM_12=new M("SCORM_12"),M.SCORM_2004_2ND_EDITION=new M("SCORM_2004_2ND_EDITION"),M.SCORM_2004_3RD_EDITION=new M("SCORM_2004_3RD_EDITION"),M.SCORM_2004_4TH_EDITION=new M("SCORM_2004_4TH_EDITION"),M.TINCAN=new M("TINCAN");const x=g.A,j=g.t;f.a.factory(x,["restmod",b.d,"$q","$rootScope","$ngRedux",j,m.b,(e,t,s,i,o,a,m)=>{Object(u.registerService)(new k),Object(u.registerService)(new R(s,i,a)),Object(u.registerService)(new T),Object(u.registerService)(new E(s,i,a));let g=!1;m.createWaiter("feature.course.content.inline-render").then(e=>g=e),Object(u.registerService)(new P.b(s)),Object(u.registerService)(new A(i));const b=e.model().mix({depth:{mask:!0},children:{mask:!0},softLinks:{mask:!0},"adaptiveReleaseRules.startDate":{serialize:"date"},"adaptiveReleaseRules.endDate":{serialize:"date"},position:{mask:"CU"},selfEnrollmentGroups:{mask:"CU"},positionBefore:{mask:"R"},positionAfter:{mask:"R"},hasMoreChildren:{mask:!0},launchInNewWindow:{init:!0},ui:{mask:!0,init:()=>({hasData:!1,isDeleted:!1,isOpen:!1})},$extend:{Record:{getDeployedAssessment(){var e;if(!this.contentDetail)return;const t=Object(d.getDeployedAssessmentTypeByContentHandler)(null===(e=this.contentHandler)||void 0===e?void 0:e.toString());if(t){const e=this.contentDetail[this.contentHandler.toString()];return e.gradingColumn?e:e[t]}},getAssociatedGradingColumn(e){const t=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];if(t&&t.gradingColumn)return t.gradingColumn;if(t){const e=this.getDeployedAssessment();if(e)return e.gradingColumn}},getDueDate(){return this.genericReadOnlyData&&this.genericReadOnlyData.dueDate},getContentHandlerByIconUrl(){const e=this.iconUrl.match("^/.*/(.*)_.*..*$");let t=c.ContentHandler.Unknown;if(e)switch(e[1]){case"assignment":t=c.ContentHandler.UltraAssignment;break;case"discussion":t=c.ContentHandler.Discussion;break;case"file":t=c.ContentHandler.File;break;case"folder":t=c.ContentHandler.Folder;break;case"link":t=c.ContentHandler.ExternalLink;break;case"test":t=c.ContentHandler.TestLink}return t},setupAssessmentContentDetail(e,t){const s=this.contentHandler.toString(),n=Object(d.getAssessmentTypeByContentHandler)(s),i=Object(d.getDeployedAssessmentTypeByContentHandler)(s);if(n&&i){this.contentDetail={},this.contentDetail[s]={};const o=r(v.a.getServerTime()).startOf("day").add({days:1}).toDate();this.contentDetail[s][i]={deployedAssessmentType:i,assessment:{title:this.title,type:n},deploymentSettings:{feedbackSettings:{[d.AssessmentFeedbackMode.AfterSubmission]:{options:[d.AssessmentFeedbackOption.InstructorFeedback,d.AssessmentFeedbackOption.UserAnswers,d.AssessmentFeedbackOption.AllAnswers]},[d.AssessmentFeedbackMode.AfterAttemptGraded]:{options:[d.AssessmentFeedbackOption.Score]}}},gradingColumn:{columnName:this.title,possible:0,visible:!1,gradebookCategoryId:t?t.id:null,gradebookCategory:t,gradingSchemaId:e,courseId:this.courseId,dueDate:o},permissions:{modify:!0}}}},createScormSettings(e){const t={method:"POST",url:this.$url()+"/scormSettings",data:e},n=s.defer();return this.$scope.$collection().$send(t,e=>{n.resolve(e.data)},e=>{n.reject(e)}),n.promise},conditionalReleaseAsync(e,t,s,n){let i=s?"/rules/"+s+"/conditions":"";n&&(i+=`/${n}`);const r={method:e,url:this.$url()+"/adaptiveReleaseRules"+i};if(t&&"DELETE"!==e&&(r.data=t),"GET"===e)return this.$scope.$collection().$send(r).$then(e=>e.$unwrap(e.$response.data));if("DELETE"===e){const e=c.ContentHandler.CourseLink.isEqualTo(this.contentHandler)?this.contentDetail[c.ContentHandler.CourseLink.toString()].linkSourceId:this.id;if(t&&t.type)o.dispatch(c.actions.content.deleteAdaptiveReleaseRuleInStore(e,t.type));else{if(this.isForcedSequenceItem())return this.removeNonForcedSequenceReleaseCriteria();o.dispatch(c.actions.content.deleteAdaptiveReleaseRulesInStore(e))}}return this.$scope.$collection().$send(r)},removeNonForcedSequenceReleaseCriteria(){const e=this.adaptiveReleaseRules.rules[0],t=c.ContentHandler.CourseLink.isEqualTo(this.contentHandler)?this.contentDetail[c.ContentHandler.CourseLink.toString()].linkSourceId:this.id,n=`/rules/${e.id}/conditions/`,i={method:"DELETE"},r=[];return e.criteria.filter(e=>e.type!==c.AdaptiveReleaseCriteriaType.ForcedSequence.toString()).forEach(e=>{o.dispatch(c.actions.content.deleteAdaptiveReleaseRuleInStore(t,e.type)),i.url=this.$url()+"/adaptiveReleaseRules"+n+e.id,r.push(this.$scope.$collection().$send(i).$asPromise())}),s.all(r).then(()=>{})},getChildren(e){e=e||{};const s=this,n=[];return this.$scope.$collection().$send({method:"GET",url:this.$url()+"/children",params:{offset:e.offset,limit:e.limit,contentHandler:e.contentHandler,recursive:e.recursive,onlyUltraConvertableContents:e.onlyUltraConvertableContents,contentSearchMode:e.contentSearchMode,title:e.title,"courseLinkPickerParam.contentHandlerGroups":e.courseLinkPickerParamContentHandlerGroups,expand:"assignedGroups,selfEnrollmentGroups.group",sort:e.sort,"@view":"Summary"}}).$then(s=>{if(e.resolveLinks&&s.$response.data.results&&s.$response.data.results.length){const e=t.getDataMixin(s.findMany.bind(s),"linkSourceId","linkSource");if(s.$response.data.results.forEach(e=>{c.ContentHandler.CourseLink.isEqualTo(e.contentHandler)&&e.contentDetail&&n.push({linkId:e.id,linkSourceId:e.contentDetail[c.ContentHandler.CourseLink.toString()].linkSourceId})}),n.length)return e(n,{}).then(()=>s)}}).$then(e=>{e.$unwrap(e.$response.data);const t={};n.forEach(e=>{t[e.linkId]=e.linkSource}),e.forEach(e=>{e.depth=s.depth+1,t[e.id]&&(e.ui.linkSource=t[e.id])})})},getClassicContent(){return this.$scope.$collection().$send({method:"GET",url:this.$scope.$url(),params:{onlyUltraConvertableContents:"true"}}).$then(e=>{e.$unwrap(e.$response.data)})},getLinkContentSource(e){if(e=e||{},c.ContentHandler.CourseLink.isEqualTo(this.contentHandler)&&this.contentDetail)return this.ui.linkSource&&this.ui.linkSource.$pk&&!e.fromServer?this.ui.linkSource:(this.ui.linkSource=this.$scope.$new(this.contentDetail[c.ContentHandler.CourseLink.toString()].linkSourceId),this.contentDetail[c.ContentHandler.CourseLink.toString()].linkSourceId?this.ui.linkSource.$fetch():this.ui.linkSource)},getChildrenCount(){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/children/count"}).$asPromise().then(e=>e.$response.data.count)},hasGradedContentItems(){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/hasGrades"}).$asPromise().then(e=>e.$response.data.result)},canForcedSequenceBeEnabled(){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/canForcedSequenceBeEnabled"}).$asPromise().then(e=>e.$response.data.result)},hasCourseLinks(){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/hasCourseLinks"}).$asPromise().then(e=>e.$response.data.result)},isCurrentUserEligibleToAlignGoals(){return this.permissions&&!0===this.permissions.createLearningStandardsAlignment&&this.permissions.edit},getContentIdForGoalAlignment(){return"blackboard.data.content.Content;"+this.id},getContentTitleForGoalAlignment(){return this.title},getSibling(e,t){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/"+e,params:{lessonContentId:t}}).$asPromise().then(e=>e.$response.data.id?this.$scope.$buildRaw(e.$response.data):null)},getAttemptCount(){const e=this.getAssociatedGradingColumn();return this.$scope.$collection().$send({method:"GET",url:e["@id"]+"/attempts/count"}).$suppressErrorDialog().$asPromise().then(e=>e.$response.data.count)},getTimeLimit(){return this.getDeployedAssessment()&&this.getDeployedAssessment().exceptions&&this.getDeployedAssessment().exceptions.length>0?this.getDeployedAssessment().exceptions[0].timeLimit:this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings?this.getDeployedAssessment().deploymentSettings.timeLimit:void 0},getExtraTime(){const e=this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings;if(e&&e.softTimeLimit)return e.timeLimit-e.softTimeLimit},getTimedTestDetail(){const e=this.contentDetail&&this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings;let t=null,s=null,n=null;const i=e?this.getDeployedAssessment().deploymentSettings.softTimeLimit:null;e&&(s=this.getDeployedAssessment().deploymentSettings.timeLimit,t=this.getDeployedAssessment().deploymentSettings.timerCompletion,n=this.getDeployedAssessment().deploymentSettings.isDueDateEnforced?new Date(this.getAssociatedGradingColumn().dueDate):null);const r={timerCompletion:t,timeLimitSec:s?60*s:null,softLimitSec:i?60*i:null,dueDate:n};return new y.a(r)},getSoftLinks(e){e=e||{};const t=this;return this.$scope.$collection().$send({method:"GET",url:this.$url()+"/softLinks",params:{offset:e.offset,limit:e.limit,label:e.label}},(function(e){this.$unwrap(e.data),t.softLinks=this}))},update(){const e=this.$scope.$build();for(const t of Object.keys(this))e[t]=this[t];return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id,data:e})},canEdit(){return c.ContentHelper.canEdit(this)},canEditPartial(){let e=this.canEdit();if(this.contentDetail){const t=this.getDeployedAssessment();if(t){const s=t.permissions;s&&(e=e||s.modifyDueDate||s.view)}}return!!e},canEditAvailability(){return c.ContentHelper.canEditAvailability(this)},canViewAsInstructor(){return this.canEdit()||this.permissions&&this.permissions.viewDesigner},canDelete(){return this.permissions&&this.permissions.delete},canUpdateReviewState(){var e;return null===(e=this.permissions)||void 0===e?void 0:e.canUpdateReviewState},hasConversation(){return!!this.attachedForumLink},hasDueDateException(){return null!=this.dueDateExceptionType&&this.dueDateExceptionType!==d.DueDateException.Normal},hasGradingColumn(){return!!this.getAssociatedGradingColumn()},hasDueDate(){return this.genericReadOnlyData&&this.genericReadOnlyData.hasGradeColumn},hasOnlyForcedSequenceConditionalReleaseCriteria(){return!!this.isForcedSequenceItem()&&1===this.adaptiveReleaseRules.rules[0].criteria.length},isVisible(){return this.visibility&&d.ContentVisibility.Visible===this.visibility},isRestricted(){return this.visibility&&d.ContentVisibility.Restricted===this.visibility},isStarted(){return this.state===d.ContentReviewState.Started},isCompleted(){return this.state===d.ContentReviewState.Completed},isHidden(){return this.visibility&&d.ContentVisibility.Hidden===this.visibility},isVisibleToStudents(){return c.ContentHelper.isVisibleToStudents(this)},isHiddenFromStudents(){return c.ContentHelper.isHiddenFromStudents(this)},isConditionalRelease(){return c.ConditionalReleaseContentHelper.isConditionalRelease(this)},isForcedSequenceModule(){return this.isLearningModule()&&this.contentDetail[p.p.ContentHandler.LearningModule.toString()].isSequential},isInForcedSequenceModule(){return this.inSequence},isForcedSequenceItem(){return this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules&&this.adaptiveReleaseRules.rules[0]&&!!n.find(this.adaptiveReleaseRules.rules[0].criteria,{type:"Pre_Content"})},isActiveForcedSequenceModule(){return this.isForcedSequenceModule()&&this.hasProgressed},applyForcedSequence(e){this.contentDetail[p.p.ContentHandler.LearningModule.toString()].isSequential=e,this.children&&(this.children.forEach(t=>{t.inSequence=e,t.children&&t.children.forEach(t=>t.inSequence=e)}),this.children.forEach(t=>{t.isPartiallyVisible=e,e?n.has(t,"adaptiveReleaseRules.rules[0].criteria[0]")?t.adaptiveReleaseRules.rules[0].criteria.push({type:"Pre_Content"}):n.set(t,"adaptiveReleaseRules.rules[0].criteria[0]",{type:"Pre_Content"}):t.adaptiveReleaseRules&&t.adaptiveReleaseRules.rules&&t.adaptiveReleaseRules.rules[0].criteria.length&&(n.remove(t.adaptiveReleaseRules.rules[0].criteria,{type:"Pre_Content"}),t.adaptiveReleaseRules.rules[0].criteria.length&&(t.isAvailable=!0)),i.$broadcast("refresh-conditional-release-rules",t)}))},isConditionalReleaseWithVisibleButNotAccessible(){return this.isConditionalRelease()&&this.isPartiallyVisible},isConditionalReleaseWithHiddenFromStudent(){return this.isConditionalRelease()&&!this.isPartiallyVisible&&!this.hasOnlyForcedSequenceConditionalReleaseCriteria()},isConditionalReleaseLocked(){const e=this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules;return e&&e.length>0&&this.isRestricted()},isConditionalReleaseUnlocked(){const e=this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules;return e&&e.length>0&&this.isVisible()},containsCriteriaWithGradeColumnId(e){var t,s;return null===(s=null===(t=this.adaptiveReleaseRules)||void 0===t?void 0:t.rules)||void 0===s?void 0:s.some(t=>{var s;return null===(s=t.criteria)||void 0===s?void 0:s.some(t=>t.type===c.AdaptiveReleaseCriteriaType.Grade.toString()&&t.gradeColumnId===e)})},getVisibilityAsStudent(){return this.isVisibleToStudents()?d.ContentVisibility.Visible:this.isConditionalRelease()?d.ContentVisibility.Restricted:d.ContentVisibility.Hidden},getContentDisplay(){return h.a.create(this,{supportsInlineRender:g})},saveAlignedGoals(e){return e&&(this.alignedGoals=e.map(e=>({goalId:e.id,isVisibleToStudent:!0,goal:e}))),this.$send({method:"PATCH",url:this.$url(),data:{alignedGoals:this.alignedGoals}}).$then(()=>{this.$getPreviousVersion()&&(this.$getPreviousVersion().alignedGoals=this.alignedGoals)})},saveAssignedGroups(e=!1){const t=this.getDeployedAssessment(),s=this.contentHandler.toString(),n=Object(d.getDeployedAssessmentTypeByContentHandler)(s),i={assignedGroups:this.assignedGroups,isGroupContent:this.isGroupContent},r=!e&&t&&t.deploymentSettings&&t.deploymentSettings.id&&1===t.deploymentSettings.attemptCount;if(r){const e={id:t.deploymentSettings.id,attemptCount:t.deploymentSettings.attemptCount,feedbackSettings:t.deploymentSettings.feedbackSettings};i.contentDetail={[s]:{[n]:{deployedAssessmentType:n,deploymentSettings:e}}}}return this.withParams({expand:"assignedGroups,selfEnrollmentGroups.group"}).$send({method:"PATCH",url:this.$url(),data:i},(function(e){this.isGroupContent=e.data.isGroupContent,this.assignedGroups=e.data.assignedGroups,this.selfEnrollmentGroups=e.data.selfEnrollmentGroups,r&&(t.gradingColumn.multipleAttempts=e.data.contentDetail[s][n].gradingColumn.multipleAttempts)})).$then(()=>{const e=this.$getPreviousVersion();if(e&&(e.isGroupContent=this.isGroupContent,e.assignedGroups=this.assignedGroups,e.selfEnrollmentGroups=this.selfEnrollmentGroups,r)){const i=e.contentDetail[s][n];i.deploymentSettings.attemptCount=t.deploymentSettings.attemptCount,i.gradingColumn.multipleAttempts=t.gradingColumn.multipleAttempts}})},removeTimeLimit(e){const t=this.contentHandler.toString(),s=Object(d.getDeployedAssessmentTypeByContentHandler)(t);if(e&&s)return this.$send({method:"PATCH",url:this.$url(),data:{contentDetail:{[t]:{[s]:{deployedAssessmentType:this.getDeployedAssessment().deployedAssessmentType,deploymentSettings:{attemptCount:e.attemptCount?e.attemptCount:1,timerCompletion:e.timerCompletion?e.timerCompletion:d.TimerCompletion.Continual,timeLimit:null,softTimeLimit:null}}}}}},(function(e){delete this.getDeployedAssessment().deploymentSettings.timeLimit,delete this.getDeployedAssessment().deploymentSettings.softTimeLimit,this.contentDetail[t].test.deploymentSettings.timerCompletion=e.data.contentDetail[t].test.deploymentSettings.timerCompletion})).$then(()=>{this.$getPreviousVersion()&&(delete this.$getPreviousVersion().contentDetail[t].test.deploymentSettings.timeLimit,delete this.$getPreviousVersion().contentDetail[t].test.deploymentSettings.softTimeLimit,this.$getPreviousVersion().contentDetail[t].test.deploymentSettings.timerCompletion=this.contentDetail[t].test.deploymentSettings.timerCompletion)})},patchProctoringService(e){const t=this.contentHandler.toString(),n=Object(d.getDeployedAssessmentTypeByContentHandler)(t),i=s.defer();return this.$send({method:"PATCH",url:this.$url(),data:{contentDetail:{[t]:{[n]:{deployedAssessmentType:this.getDeployedAssessment().deployedAssessmentType,deploymentSettings:{proctoringServiceHandle:e}}}}}},e=>i.resolve(e.data),()=>i.reject("Failed to change proctoring service.")),i.promise},updateProctoringSettings(e){const t=s.defer(),n=e=>{if(_(this)&&_(e)){const t=e.contentHandler.toString(),s=e.contentDetail[t].test.deploymentSettings,n=this.contentDetail[t].test.deploymentSettings;if(n.proctoringServiceHandle=s.proctoringServiceHandle,n.proctoringServiceVendor=s.proctoringServiceVendor,n.proctoringDownloadUrl=s.proctoringDownloadUrl,n.isSecureBrowserRequiredToTake=s.isSecureBrowserRequiredToTake,n.isSecureBrowserRequiredToReview=s.isSecureBrowserRequiredToReview,n.isWebcamRequired=s.isWebcamRequired,this.$getPreviousVersion()){const e=this.$getPreviousVersion().contentDetail[t].test.deploymentSettings;e.proctoringServiceHandle=s.proctoringServiceHandle,e.proctoringServiceVendor=s.proctoringServiceVendor,e.proctoringDownloadUrl=s.proctoringDownloadUrl,e.isSecureBrowserRequiredToTake=s.isSecureBrowserRequiredToTake,e.isSecureBrowserRequiredToReview=s.isSecureBrowserRequiredToReview,e.isWebcamRequired=s.isWebcamRequired}}};return e?(n(e),t.resolve(this)):this.withParams({fields:"contentHandler,contentDetail"}).$send({method:"GET",url:this.$url()},e=>{n(e.data),t.resolve(this)},()=>{t.reject("Failed to fetch latest when updating proctoring settings.")}),t.promise},updateProctoringAssociation(e){return this.patchProctoringService(e).then(e=>this.updateProctoringSettings(e))},getProctoringLaunchLink(e){const t=s.defer();let n=l.a.apiBasePath+"/v1/courses/"+this.courseId+"/contents/"+this.id;return e.attemptId&&(n+="/attempts/"+e.attemptId),n+="/proctoring/launchLink",e.password&&(n+=`?password=${encodeURIComponent(e.password)}`),this.$send({method:"GET",url:n},e=>{e?t.resolve(e.data.launchLink):t.reject("Failed to fetch assessment launch link.")}).$allow([d.HttpStatus.Unauthorized,d.HttpStatus.TooManyRequests]).$asPromise().then(e=>{t.reject(e.$response)}),t.promise},getProctoringServiceVendor(){const e=_(this);return null==e?null:e.proctoringServiceVendor||null},getProctoringServiceHandle(){const e=_(this);return null==e?null:e.proctoringServiceHandle||null},isSecureBrowserRequiredToTake(){const e=_(this);return null!=e&&!(e.proctoringServiceHandle!==I.b||!e.isSecureBrowserRequiredToTake)},isSecureBrowserRequiredToReview(){const e=_(this);return null!=e&&!(e.proctoringServiceHandle!==I.b||!e.isSecureBrowserRequiredToReview)},isWebcamRequired(){const e=_(this);return null!=e&&!(e.proctoringServiceHandle!==I.b||!e.isWebcamRequired)},getProctoringDownloadUrl(){const e=_(this);return null==e?null:e.proctoringDownloadUrl||null},userNeedsToSelfEnrollInGroup(){return this.isGroupContent&&this.assignedGroups&&0===this.assignedGroups.length&&this.selfEnrollmentGroups&&this.selfEnrollmentGroups.length>0},setVisibility(e,t=!0){switch(this.adaptiveReleaseRules={startDate:null,endDate:null},e){case d.ContentVisibility.Visible:this.isAvailable=!0,this.isPartiallyVisible=!1;break;case d.ContentVisibility.Hidden:this.isAvailable=!1,this.isPartiallyVisible=!1;break;case d.ContentVisibility.Restricted:this.isAvailable=!0,this.isPartiallyVisible=t}},setTitle(e){this.title=e;const t=this.getAssociatedGradingColumn();t&&(t.columnName=e);try{this.getDeployedAssessment().assessment.title=e}catch(e){}},isUiFolder(){return c.ContentHandler.Folder.isEqualTo(this.contentHandler)&&!this.isBbPage()},isFolder(){return!!c.ContentHandler.Folder.isEqualTo(this.contentHandler)||!!c.ContentHandler.Unknown.isEqualTo(this.contentHandler)&&void 0},isBbPage(){if(this.contentDetail){const e=this.contentDetail[c.ContentHandler.Folder.toString()];if(c.ContentHandler.Folder.isEqualTo(this.contentHandler)&&e&&e.isBbPage)return!0;if(c.ContentHandler.Unknown.isEqualTo(this.contentHandler))return;return!1}return!1},isRoot(){return S.g.ROOT.isEqualTo(this.$pk)||S.g.INTERACTIVE.isEqualTo(this.$pk)},isAssignment(){return c.ContentHandler.UltraAssignment.isEqualTo(this.contentHandler)},isDocument(){return c.ContentHandler.Folder.isEqualTo(this.contentHandler)&&this.isBbPage()},isFile(){return c.ContentHandler.File.isEqualTo(this.contentHandler)},isJournal(){return c.ContentHandler.Journal.isEqualTo(this.contentHandler)},isLink(){return c.ContentHandler.ExternalLink.isEqualTo(this.contentHandler)},isCourseLink(){return c.ContentHandler.CourseLink.isEqualTo(this.contentHandler)},isLtiLink(){return c.ContentHandler.LtiLink.isEqualTo(this.contentHandler)},isLtiPlacement(){return c.ContentHandler.LtiPlacement.startsWith(this.contentHandler)},isPartnerCloud(){return c.ContentHandler.PartnerCloud.isEqualTo(this.contentHandler)},isPlaceHolderContent(){return this.isLink()||this.isLtiLink()||this.isLtiPlacement()||this.isPartnerCloud()},isTest(){return c.ContentHandler.TestLink.isEqualTo(this.contentHandler)},isScorm(){return c.ContentHandler.RusticiScorm.isEqualTo(this.contentHandler)},isGradedScorm(){return this.isScorm()&&!!this.getAssociatedGradingColumn()},isDiscussion(){return!!c.ContentHandler.Discussion.isEqualTo(this.contentHandler)||c.ContentHandler.CourseLink.isEqualTo(this.contentHandler)&&this.isDiscussionInOutline()},isLearningModule(){return!!c.ContentHandler.LearningModule.isEqualTo(this.contentHandler)||!!c.ContentHandler.Unknown.isEqualTo(this.contentHandler)&&void 0},isDiscussionInOutline(){return this.getContentHandlerByIconUrl().isEqualTo(c.ContentHandler.Discussion)},getSafeAssignAttrs(){return this.contentDetail[this.contentHandler.toString()].safeAssignOptions},isSafeAssignOn(){return!!this.contentDetail&&!!this.contentDetail[this.contentHandler.toString()].safeAssignOptions},isSafeAssignEnabled(){return this.isSafeAssignOn()&&this.getSafeAssignAttrs().checkAttempts},canStudentViewReports(){return this.isSafeAssignOn()&&this.getSafeAssignAttrs().canStudentViewReports},canSubmitToGlobalReferenceDatabase(){return this.isSafeAssignOn()&&!this.getSafeAssignAttrs().excludeSubmissions&&this.getSafeAssignAttrs().globalSearch},canHaveAttempts(){return c.ContentHandler.UltraAssignment.isEqualTo(this.contentHandler)||c.ContentHandler.TestLink.isEqualTo(this.contentHandler)||c.ContentHandler.LtiLink.isEqualTo(this.contentHandler)||c.ContentHandler.LtiPlacement.startsWith(this.contentHandler)||c.ContentHandler.PartnerCloud.isEqualTo(this.contentHandler)||c.ContentHandler.Discussion.isEqualTo(this.contentHandler)||c.ContentHandler.CourseLink.isEqualTo(this.contentHandler)||c.ContentHandler.Journal.isEqualTo(this.contentHandler)||this.isScorm()},canHaveSharedGradingColumn(){return c.ContentHandler.PartnerCloud.isEqualTo(this.contentHandler)},applyAvailabilitySettings(e){this.adaptiveReleaseRules=e.adaptiveReleaseRules,this.isAvailable=e.isAvailable,this.isPartiallyVisible=e.isPartiallyVisible},applyGroupSettings(e){this.isGroupContent=e.isGroupContent,this.assignedGroups=e.assignedGroups,this.selfEnrollmentGroups=e.selfEnrollmentGroups},addAndRevealAtIndex(e){this.$moveTo(e),this.$reveal()},findInTreeById(e,t){return this.findLoadedNodeByIdAndCache(e,t)},findLoadedNodeByIdAndCache(e,t,s=3){return null!=t&&t.id===e||(t=this.findLoadedNodeById(e,s)),t},findLoadedNodeById(e,t){if(t<0)return null;if(null==e&&null==this.id||e===this.id)return this;if(this.children){t--;for(let s=0;s<this.children.length;s++){const n=this.children[s].findLoadedNodeById(e,t);if(n)return n}}},moveTo(e,t,s){if(this.id===t||this.id===s)return;this.$scope.$remove(this),this.$scope.fixPositions(),null!=t&&(s=void 0);const n=e.children.getInsertionIndex(t,s,!1,e.hasMoreChildren);null!=t&&0===n&&(t="start"),null==s||n!==e.children.length||e.hasMoreChildren||(s="end"),e.children.$add(this,n),this.$scope=e.children,this.$scope.fixPositions(),this.positionBefore=t,this.positionAfter=s,this.parentId=e.id,this.depth=null!=e.depth?e.depth+1:void 0},shouldRestrict(){return!this.canEdit()&&this.isRestricted()},isQuestionAnalysisAvailable(){return this.isAssignment()||this.isTest()},updateState(e,t=!1){var n;let r=s.when(this);return(null===(n=this.permissions)||void 0===n?void 0:n.canHaveReviewState)?(this.state=e,t&&(r=this.$send({method:"PATCH",url:`${this.$url()}/states/me`,data:{state:e}}).$asPromise()),r.then(()=>(i.$broadcast($.b,this,e),o.dispatch(c.actions.contentReviewState.getContentReviewState(this.courseId,this.id,!0)),this))):r}},Collection:{indexOfItemById(e){return this.$indexOf(t=>(t.id===e||null==t.id&&null==e)&&!t.ui.importPlaceholder)},buildAndRevealAtPosition(e,t){const s=this.getInsertionIndex(e.positionBefore,e.positionAfter);if(s>-1){const n=this.$build(t);return n.addAndRevealAtIndex(s),null!=e.positionBefore&&(n.positionBefore=e.positionBefore),null!=e.positionAfter&&null==e.positionBefore&&(n.positionAfter=e.positionAfter),n}},getInsertionIndex(e,t,s,n){const i=null==s||s;let r=-1;return null!=e&&(r="start"===e.toLowerCase()?0:this.indexOfItemById(e),!i&&r<0&&(r=0)),r<0&&null!=t&&("end"===t.toLowerCase()?null==n||n||(r=this.length):(r=this.indexOfItemById(t))>=0&&r++,!i&&r<0&&(r=this.length)),r},fixPositions(){for(let e=0;e<this.length;e++)this[e].position=e}}},$hooks:{"after-request":function(e){var t;if(200===e.status&&!(e.config.params&&e.config.params.fields||(e.data.adaptiveReleaseRules||(this.adaptiveReleaseRules=null),"GET"!==e.config.method&&"JSONP"!==e.config.method))){if(null===(t=e.data)||void 0===t?void 0:t.results)return void e.data.results.forEach(e=>{const t=Object(C.a)(e);o.dispatch(c.actions.content.setContents(t))});if(e.data){const t=e,s=Object(C.a)(t.data);o.dispatch(c.actions.content.setContents(s))}}},"before-request":function(e){if(!["/ROOT","/count","/softLinks"].some(t=>n.endsWith(e.url,t))&&"DELETE"!==e.method){const t="gradebookCategory";e.params&&e.params.expand?n.includes(e.params.expand,t)||(e.params.expand+=`,${t}`):e.params={expand:t,...e.params}}"PATCH"!==e.method&&"PUT"!==e.method||e.data&&e.data.title&&this.safeAssignOptions&&(e.data.safeAssignOptions=this.safeAssignOptions)},"before-render":function(e){const t=this;if(e.contentDetail){const s=t.getDeployedAssessment.call(e);if(s){const e=s.gradingColumn;e&&!e.peerGrading&&s&&s.peerSettings&&delete s.peerSettings}}},"after-save":e=>{const t=Object(C.a)(e.data);o.dispatch(c.actions.content.persistContentSync(t))}}});return b.$extendRecord((function(e,t){if(t.contentHandler&&c.ContentHandler.CourseLink.isEqualTo(t.contentHandler))return{getDueDate(){return this.getLinkContentSource()&&this.getLinkContentSource().getDueDate()},hasDueDate(){return this.getLinkContentSource()&&this.getLinkContentSource().hasDueDate()},hasReport:()=>!1}})),b.$extendRecord((function(e,t){if(t.contentHandler&&c.ContentHandler.LtiLink.isEqualTo(t.contentHandler))return{getDueDate(){return this.getAssociatedGradingColumn()&&this.getAssociatedGradingColumn().dueDate},hasDueDate(){return this.hasGradingColumn()}}})),b.$extendRecord((e,t)=>{if(t.contentHandler&&c.ContentHandler.RusticiScorm.isEqualTo(t.contentHandler))return{getAssociatedGradingColumn(e){const t=this.getScormGradebookItems();let s=null;return(s=e?t.find(t=>t.columnId===e):t.find(e=>e.root)||t[0])&&s.gradingColumn},getDueDate(){const e=this.getAssociatedGradingColumn();return e&&e.dueDate},hasDueDate(){return this.hasGradingColumn()},getScormGradebookItems(){const e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.gradebookItems||[]},getScormLearningStandard(){const e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.learningStandard||"UNKNOWN"},getScormAdvancedSettings(){const e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.advancedSettings||{}},getScormReport(){const e={method:"GET",url:this.$url()+"/scormReport"},t=s.defer();return this.$scope.$collection().$send(e,e=>{t.resolve(e.data)},e=>{t.reject(e)}),t.promise},isTinCan(){const e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return!(!e||!M.TINCAN.isEqualTo(e.learningStandard))},hasReport(){return!this.isTinCan()&&!!this.getScormGradebookItems().length},setTitle(e){this.title=e;const t=this.getScormGradebookItems().find(e=>e.root);t&&(t.title=e,t.gradingColumn.columnName=e)}}}),b}])},fmWv:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("In+A"),i=s("caKH");class r{constructor(e){this.modalStackedMap=e,this.hasAngularModal=!1,this.hasReactModal=!1,this._started=!0,this.onReactModalChanged=e=>{this.hasReactModal=e,this.updateGuidanceState()},this.onAngularModalChanged=e=>{this.hasAngularModal=!!e,this.updateGuidanceState()},n.guidanceConnector.addWatcher(this)}get started(){return this._started}set started(e){this._started=e,this.startedCallback&&this.startedCallback(e)}start(){i.ModalManager.getInstance().addOnModalDisplayingChanged(this.onReactModalChanged),this.modalStackedMap.addTopListener(this.onAngularModalChanged)}onStateChanged(e){this.startedCallback=e}updateGuidanceState(){this.started=!this.hasReactModal&&!this.hasAngularModal}}},fzj8:function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));var n=s("Llzl"),i=s("0JpG"),r=s("Qbdf"),o=s("UD9g"),a=s("Cxi4"),l=s("pjml"),c=s("TnpK"),d=s("g7Mf"),u=s("w9Zy"),h=s("nmzr"),m=s("36CG");const p="ultra.course.engagement.router";n.module(p,[i.moduleName,c.b,a.a,o.b,d.b,r.b,m.d]).config([c.c,r.c,m.e,(e,t,n)=>{e.peekState(h.EngagementRoutes.DISCUSSION,{abstract:!0,url:"/discussion",resolve:{translations:["$q",i.serviceName,(e,t)=>{const s=[];return s.push(t.loadBundle("features/course/engagement/course-engagement")),s.push(t.loadBundle("features/course/content/course-content")),s.push(t.loadBundle("features/course/goal-alignment/goal")),e.all(s)}],[r.d]:t.resolve,canCreateAllContent:[a.b,c.d,(e,t)=>e.canCreateAllContent(t.nextParams.courseId)],hasEditAvailabilityPermission:[a.b,c.d,(e,t)=>e.hasEditAvailabilityPermission(t.nextParams.courseId)]}}).peekState(h.EngagementRoutes.DISCUSSION_VIEW,{abstract:!0,url:"/{contentId:_[0-9]+_1|create}?courseId&parentId&position&positionBefore&positionAfter",panelClass:"full",pageTitle:"course.content.discussion",require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(14),s.e(0),s.e(1),s.e(2),s.e(4),s.e(542)]).then(s.bind(null,"uypo")),resolve:{translations:["$q",i.serviceName,(e,t)=>{const s=[];return s.push(t.loadBundle("components/directives/grade/grade-input")),s.push(t.loadBundle("components/directives/grade/display-grade")),e.all(s)}],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[d.c,"currentCourseMemberships",(e,t)=>e.init(t)]},onExit:[d.c,e=>{e.destroy()}]}).peekState(h.EngagementRoutes.DISCUSSION_VIEW_WITH_GRADING,{url:"?view&disGroupId",panelClass:"full",views:{"engagement-edit@":{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(547)]).then(s.bind(null,"m3My"))},"engagement-grade@":{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(116)]).then(s.bind(null,"4Rme"))}},onEnter:[c.d,u.e,(e,t)=>{e.isPeekPanelOpen()&&t.expandTopPanel()}],onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],peekStates:[h.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL,h.ContentMarketRoutes.CONTENT_MARKET,"course-group","discussion-details","discussion-participants","discussion-settings",o.a,h.LtiRoutes.LTI,h.CourseRoutes.COURSE_MESSAGE,"rubric","rubric-evaluation","rubric-view","submission-list","view-exceptions","discussion-feedback","discussions-settings"],peekViewName:"discussion-peek@",pageTitle:"course.content.discussion",resolve:{[m.f]:n.resolve,currentColumn:[c.d,r.d,(e,t)=>{const s=e.nextParams.columnId;if(s&&s!==l.C.CREATE_COLUMN_ID)return t.gradebook.columns.$find(s).$asPromise()}]}}).peekState(h.EngagementRoutes.SUBMISSION_LIST,{url:"/grading/:columnId/detail?participantId&contentId&disGroupId",panelClass:"full",require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(548)]).then(s.bind(null,"nbFo")),resolve:{translations:["$q",i.serviceName,(e,t)=>{const s=[];return s.push(t.loadBundle("features/course/engagement/course-engagement")),s.push(t.loadBundle("components/directives/grade/submission-list")),s.push(t.loadBundle("components/directives/grade/grade-input")),s.push(t.loadBundle("components/directives/grade/display-grade")),s.push(t.loadBundle("components/directives/discussion")),e.all(s)}],[r.d]:t.resolve,currentColumn:[c.d,r.d,(e,t)=>{const s=e.nextParams.columnId;if(s&&s!==l.C.CREATE_COLUMN_ID)return t.gradebook.columns.$find(s,{expand:"associatedRubrics"}).$asPromise()}],[m.f]:n.resolve,memberships:[r.d,e=>(e.memberships.$clear(),e.memberships.$fetch({expand:"user",roleBucket:"taking"}).$asPromise())]},pageTitle:"course.engagement.submissionTitle",peekStates:[h.CourseRoutes.COURSE_MESSAGE,"discussion-feedback","rubric-evaluation"],peekViewName:"engagement-submissions-peek@"}).peekState(h.EngagementRoutes.DISCUSSION_SETTINGS,{url:"/settings?contentId&focusEleId",require:()=>Promise.all([s.e(0),s.e(27),s.e(46),s.e(126),s.e(569)]).then(s.bind(null,"W67U")),resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/engagement/discussion-settings")])],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[d.c,"currentCourseMemberships",(e,t)=>e.init(t)]},onExit:[d.c,e=>{e.destroy()}],pageTitle:"course.engagement.discussionSettingsTitle",peekViewName:"discussion-group",allowChildPeekStates:!0,peekStates:["course-group","goal-picker-legacy","rubric","rubric-view"]}).peekState(h.EngagementRoutes.DISCUSSION_PARTICIPANTS,{url:"/participants",require:()=>s.e(669).then(s.bind(null,"IrK9")),pageTitle:"course.engagement.participantsTitle"}).peekState("discussion-details",{url:"/details",require:()=>Promise.all([s.e(0),s.e(590)]).then(s.bind(null,"DTfl")),pageTitle:"course.engagement.discussionDetailsTitle",peekStates:["discussion-feedback"]}).peekState("discussion-feedback",{url:"/feedback?forumId&isReadOnlyPanel&columnId",require:[()=>Promise.all([s.e(6),s.e(644)]).then(s.bind(null,"pq88")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(116)]).then(s.bind(null,"4Rme"))],resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")],offCanvasArgs:["offCanvasArgs",e=>(e.overlay=!1,e.disableFocusHandling=!0,e)],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[d.c,"currentCourseMemberships",(e,t)=>e.init(t)]},onExit:[d.c,e=>{e.destroy()}],pageTitle:"course.engagement.grade.feedback.viewFeedbackTitle"}).peekState("discussions-settings",{url:"/discussions-settings",require:()=>s.e(648).then(s.bind(null,"ouab"))})}])},g66W:function(e,t,s){"use strict";s.d(t,"f",(function(){return i})),s.d(t,"g",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"d",(function(){return a})),s.d(t,"j",(function(){return l})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return u})),s.d(t,"h",(function(){return h})),s.d(t,"i",(function(){return m})),s.d(t,"e",(function(){return g}));var n=s("ERsv");function i(e,t,s){return s=s||"...",(e=e.trim()).length>t&&(e=e.slice(0,t)+s),e}function r(e,t,s){e=e.trim(),s=s||"...";const n=new RegExp(`^(.{0,${t}})\\b.*$`),i=e.trim().replace(n,"$1");return e.length>t?i+s:i}function o(e,t,s){return s=s||"",e?e.replace(t,s):""}function a(e,t){return e&&t&&e.substring(e.length-t.length,e.length)===t||!1}function l(e,t){return 0===(e||"").indexOf(t)}const c=document.createElement("textarea");function d(e){return c.innerHTML=e,c.value}function u(e){return null==e?e:e.replace(/&gt;/g,">").replace(/&lt;/g,"<")}function h(e){return null!=e.match(/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf\uac00-\ud7af]/)}function m(e){return null!=e.match(/[\-\s]/)}const p=(e,t)=>{3===e.nodeType&&e.textContent.trim()?t.push(e.textContent.trim()):e.firstChild&&!e.hasAttribute("data-bbtype")&&p(e.firstChild,t),e.nextSibling&&p(e.nextSibling,t)};function g(e,t){const s=Object(n.replaceContentInHTML)((new DOMParser).parseFromString(e,"text/html"),t),i=[];return p(s.body,i),i.join(" ")}},g7Mf:function(e,t,s){"use strict";s.d(t,"b",(function(){return y})),s.d(t,"c",(function(){return C})),s.d(t,"a",(function(){return I}));var n=s("D57K"),i=s("nsO7"),r=s("Llzl"),o=s("Sa5G"),a=s("pjml"),l=s("0JpG"),c=s("oVrE"),d=s("nYZ0"),u=s("Fvsw"),h=s("Qbdf"),m=s("fYJU"),p=s("TnpK"),g=s("jhBu"),b=s("Cxi4"),f=s("g66W"),v=(s("SeO5"),s("aHpC")),S=s("d2bc");const y="ultra.service.discussion",C="discussionService",I="default";let $=class{constructor(e,t,s,n,i,r,o,a,l,c,d,u,h){this.bbLocalize=e,this.$rootScope=t,this.$q=s,this.$modal=n,this.courseModel=i,this.UserModel=r,this.context=o,this.contentService=a,this.ultraState=l,this.entitlementService=c,this.discussionPermission=d,this.contextUser=u,this.contextCourse=h,this.userCourseRoles={},this.userCourseAvailabilities={},this.canObserveGradebook=!1,this.canViewAssessments=!1,this.canViewGradebook=!1,this.canViewAttempts=!1,this.participantCount="-",this.hasEditPermission=!1,this.hasClassGroup=!1,this.initCount=0,this.$rootScope.$on("discussion-group-content-update",(e,t)=>{this.hardLinkContent&&(this.hardLinkContent.applyGroupSettings(t),this.softLinkContent&&this.softLinkContent.id&&this.softLinkContent.applyGroupSettings(this.hardLinkContent))})}init(e){const t=this.ultraState.nextParams.contentId;if(this.initCount++,this.initCount>1){if(t===this.currentContentId)return this.$q.when();this.initCount=1,this.destroy(),this.initCount=1}return this.currentContentId=t,this.currentCourseId=this.contextCourse.courseId?this.contextCourse.courseId:this.ultraState.nextParams.courseId,this.groupId=this.ultraState.nextParams.disGroupId||"",this.userCourseAvailabilities[c.e()]=!0,this.courseMembershipsFetcher=e||this.courseModel.$new(this.currentCourseId).memberships,this.courseMembershipsFetcher.$resolve({limit:1e4}).$asPromise().then(e=>{e.forEach(e=>{const t=e.role.toString();t in a.w.toBeLocalizedRoleLabels?this.userCourseRoles[e.userId]=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(null),key:a.w.toBeLocalizedRoleLabels[t]}):this.userCourseRoles[e.userId]=t,this.userCourseAvailabilities[e.userId]=e.isAvailable})}),this.resolveCourse().then(e=>{this.course=e,this.outlineRoot=this.contentService.findRootNode(this.course,a.p.ContentRootNode.ROOT),this.engagementRoot=this.contentService.findRootNode(this.course,a.p.ContentRootNode.INTERACTIVE);const t=this.ultraState.nextParams.columnId;let s;s=t&&t!==a.C.CREATE_COLUMN_ID?this.course.gradebook.columns.$find(t,{expand:"associatedRubrics"}).$asPromise():this.$q.when();const n=this.course.id;return this.$q.all([s,this.entitlementService.hasCourseEntitlement(o.i.ViewAssessment,n),this.discussionPermission.hasEditPermission(n),this.entitlementService.hasCourseEntitlement(S.a.Observe,n),this.entitlementService.hasCourseEntitlement(S.a.ViewGradebookMetaData,n),this.entitlementService.hasCourseEntitlement(S.a.ViewAttempts,n)])}).then(([e,t,s,n,i,r])=>{e&&(this.column=e),this.canViewAssessments=t,this.hasEditPermission=s,this.canObserveGradebook=n,this.canViewGradebook=i,this.canViewAttempts=r})}destroy(){this.initCount--,this.initCount>0||(this.course=void 0,this.userCourseRoles={},this.userCourseAvailabilities={},this.currentContentId=void 0,this.hardLinkContent=void 0,this.softLinkContent=void 0,this.engagementRoot=void 0,this.outlineRoot=void 0,this.canObserveGradebook=void 0,this.canViewAssessments=void 0,this.canViewGradebook=void 0,this.canViewAttempts=void 0,this.currentDiscussion=void 0,this.groupId=void 0,this.currentCourseId=void 0,this.column=void 0,this.assignedGroupsFiltersArray=void 0,this.selectedGroup=void 0,this.participantCount=void 0,this.loadDiscussionP=void 0,this.loadHardContentP=void 0,this.loadSoftContentP=void 0,this.hasEditPermission=void 0,this.hasClassGroup=void 0)}loadDiscussion(e,t){return this.loadDiscussionP?this.loadDiscussionP:this.loadDiscussionP=this.loadHardContent().then(()=>this.loadSoftContent()).then(()=>(e&&(i.merge(this.hardLinkContent,e),this.hasGroups()?this.hardLinkContent.assignedGroups.some(e=>this.groupId===e.groupId)||(this.groupId=this.hardLinkContent.assignedGroups[0].groupId):this.groupId=""),this.doLoadDiscussion(t)))}doLoadDiscussion(e=this.forumId){return this.course.forums.$new(e).messages.$fetch().$asPromise().then(e=>{this.currentDiscussion=e.find(e=>!e.groupId)})}createDiscussion(){const e=this.ultraState.params,t=this.ultraState.includes("**.course.outline.**")?void 0:e.parentId;return this.loadDiscussionP=this.$q.all([this.buildDiscussion(),this.contentService.makeContentInContentTree(this.engagementRoot,this.contextCourse.courseId,t,e.positionBefore,e.positionAfter)]).then(([e,t])=>{this.currentDiscussion=e,this.hardLinkContent=t.content,this.hardLinkContent.contentHandler=a.p.ContentHandler.Discussion,this.hardLinkContent.visibility=this.contentService.determineVisibility(this.hardLinkContent.isAvailable),this.hardLinkContent.isAvailable=this.currentDiscussion.isAvailable})}newDiscussionPersist(e){const t=[{tag:"table",replacementText:this.bbLocalize.translateSync({key:"course.content.tablePlaceholder",locale:this.bbLocalize.getLocale(this.$rootScope)})},{tag:"math",replacementText:this.bbLocalize.translateSync({key:"course.content.mathPlaceholder",locale:this.bbLocalize.getLocale(this.$rootScope)}),replacementTextPlural:this.bbLocalize.translateSync({key:"course.content.mathPlaceholder.plural",locale:this.bbLocalize.getLocale(this.$rootScope)})}],s=f.e(this.currentDiscussion.body.rawText,t),n=this.contentService.truncateDescription(s,d.c.MAX_LENGTH_IN_CONTENT_ITEM);return this.currentDiscussion.plaintextDescription=n,this.currentDiscussion.$patch(["body","plaintextDescription"]).$asPromise().then(()=>this.doLoadDiscussion(e)).then(()=>{this.hardLinkContent.description=n,this.softLinkContent&&(this.softLinkContent.description=n)})}loadHardContent(e=!1){if(this.loadHardContentP)return this.loadHardContentP;const t=`${e?"":"alignedGoals,"}assignedGroups.group,selfEnrollmentGroups.group`;return this.loadHardContentP=this.course.contents.$find(this.currentContentId,{expand:t}).$asPromise().then(e=>this.hardLinkContent=e)}loadSoftContent(){return this.hardLinkContent?this.loadSoftContentP?this.softLinkContent?this.$q.when(this.softLinkContent):this.loadSoftContentP:this.loadSoftContentP=this.hardLinkContent.getSoftLinks({label:"ROOT"}).$asPromise().then(e=>{if(e.length)return this.contentService.getOrMakeContentInContentTree(this.outlineRoot,this.course.id,e[0].courseContent).then(e=>this.softLinkContent=e.content)}):this.$q.when()}async persistNew(){this.updateHardLinkContent(this.currentDiscussion);const e=await this.hardLinkContent.$save().$asPromise();if(this.currentContentId=e.id,this.currentDiscussion=this.updateDiscussion(this.forumId),await this.currentDiscussion.$save().$asPromise(),!await this.discussionPermission.canCreateAllContent(this.currentCourseId))return void await this.ultraState.search("contentId",this.currentContentId);let{parentId:t,positionBefore:s,positionAfter:n}=this.ultraState.params;this.ultraState.includes("**.course.engagement.**")&&(t=this.outlineRoot.id,s=null,n=null);const i=await this.contentService.makeSoftLinkContentInContentTree(this.hardLinkContent,this.outlineRoot,this.contextCourse.courseId,t,s,n);i&&(this.softLinkContent=i,this.softLinkContent.title=this.hardLinkContent.title,await this.softLinkContent.$save().$asPromise()),await this.ultraState.search("contentId",this.currentContentId)}expandUsersInParticipants(e,t=!1){if(i.isEmpty(e))return this.$q.when(e);const s=e[0];if(null==s||null==s.userId)return this.$q.when(e);const n=e.map(e=>e.userId);let r;return(r=!t||this.contextCourse.usersCache.hit(n)?this.$q.when():this.courseMembershipsFetcher.$fetchIfNotExpanded({limit:1e4,expand:"user"}).$asPromise()).then(()=>this.contextCourse.usersCache.fetchUsers(n,this.UserModel,this.$q).then(t=>(e.forEach(e=>{e.data=t.get(e.userId)}),this.$q.when(e))))}getParticipantCount(e=null){return this.loadHardContent().then(()=>(e||(e=this.forumId),this.course.forums.$new(e).usercounts.$fetch({limit:1e4,offset:0,roleBucket:"TAKING",groupId:this.groupId}).$then(e=>this.expandUsersInParticipants(e)).$asPromise())).then(e=>{this.participantCount=e.filter(e=>e.topLevelReplyCount+e.secondLevelReplyCount>0).length})}queryParticipants(e,t,s="",n=!1){const i={limit:t,q:s,offset:0,groupId:this.hasGroups()&&this.groupId||""};return this.course.forums.$new(e).usercounts.$fetch(i).$asPromise().then(e=>this.expandUsersInParticipants(e,n))}async queryParticipant(e,t){const s={userIds:[t],offset:0},n=await this.course.forums.$new(e).usercounts.$fetch(s).$asPromise(),i=n.map(e=>e.userId),r=await this.contextCourse.usersCache.fetchUsers(i,this.UserModel,this.$q);return n.forEach(e=>{e.data=r.get(e.userId),e.data||(e.data=c.d(this.$rootScope,this.bbLocalize))}),this.$q.when(n[0])}isPostFirstSatisfied(e,t=this.forumId){return this.loadHardContent().then(()=>this.course.forums.$new(t).usercounts.$fetch({limit:1e4,offset:0,roleBucket:"TAKING"}).$then(e=>this.expandUsersInParticipants(e)).$asPromise()).then(t=>{const s=t.find(t=>t.data.id===e);return!(!s||!s.topLevelReplyCount)})}refreshParticipationGrade(){if(!this.hasNoGroups())return this.resolveColumn().then(e=>{e&&(this.column=e,this.column.summary&&this.column.summary.$fetch&&(this.getParticipantCount(),this.column.summary.$fetch({groupId:this.groupId})))});this.column=void 0}saveContent(){return this.hardLinkContent.$patch().$then(()=>{this.softLinkContent&&this.softLinkContent.id&&(this.softLinkContent.applyAvailabilitySettings(this.hardLinkContent),this.softLinkContent.$patch().$then(()=>{this.$rootScope.$broadcast("content-update",this.softLinkContent)})),this.$rootScope.$broadcast("content-update",this.hardLinkContent),this.$rootScope.$broadcast("attempt-base-content-update",this.hardLinkContent,this.course.id)}).$asPromise()}savePost(){this.currentDiscussion.plaintextDescription=this.contentService.truncateDescription(this.currentDiscussion.plaintextDescription,d.c.MAX_LENGTH_IN_CONTENT_ITEM),this.hardLinkContent&&(this.hardLinkContent.description=this.currentDiscussion.plaintextDescription,this.hardLinkContent.title=this.currentDiscussion.subject,this.$rootScope.$broadcast("content-update",this.hardLinkContent)),this.softLinkContent&&(this.softLinkContent.description=this.currentDiscussion.plaintextDescription,this.softLinkContent.title=this.currentDiscussion.subject,this.$rootScope.$broadcast("content-update",this.softLinkContent))}loadGroup(e){if(this.hasClassGroup=e,this.assignedGroupsFiltersArray=null,e){const e={name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(null),key:"components.directives.conversation.classConversation"}),index:0,groupId:I,extraClass:""};this.assignedGroupsFiltersArray=new Array(e),this.selectedGroup=e}if(this.hasGroups()){let t=!1,s=e?1:0;const n=this.hardLinkContent.assignedGroups.map(n=>{const i={name:!e||this.hasEditPermission?n.groupTitle:this.bbLocalize.translateSync({locale:"",key:"components.directives.conversation.myGroup"}),index:s++,groupId:n.groupId,isInGroupSet:!(!n.group||!n.group.groupSetId)};return this.groupId&&this.groupId===i.groupId&&(this.selectedGroup=i,t=!0),i});this.assignedGroupsFiltersArray=this.assignedGroupsFiltersArray?this.assignedGroupsFiltersArray.concat(n):n,!t&&this.assignedGroupsFiltersArray.length&&(this.selectedGroup=this.assignedGroupsFiltersArray[0],this.groupId=this.selectedGroup.groupId,e||this.refreshParticipationGrade())}else this.groupId=""}clearGroups(){this.hardLinkContent&&this.contentService.clearContentGroups(this.hardLinkContent,this.course).then(()=>{this.groupId="",this.$rootScope.$broadcast("discussion-group-content-update",this.hardLinkContent),this.$rootScope.$broadcast("load-participants")})}isGroupDiscussion(){return!!(this.hardLinkContent&&this.hardLinkContent.isGroupContent&&this.hardLinkContent.assignedGroups)}hasGroups(){return this.isGroupDiscussion()&&!!this.hardLinkContent.assignedGroups.length}hasNoGroups(){return this.isGroupDiscussion()&&!this.hardLinkContent.assignedGroups.length}isOpenFromConversation(){return!!this.ultraState.current.url&&this.ultraState.current.url.indexOf("conversations")>0}get forumId(){return this.contentService.parseForumId(this.hardLinkContent.contentDetailUrl)}get alignedGoalsCount(){return this.hardLinkContent&&this.hardLinkContent.alignedGoals?this.hardLinkContent.alignedGoals.length:0}updateHardLinkContent(e){this.hardLinkContent.title=e.subject,this.hardLinkContent.description=this.contentService.truncateDescription(e.plaintextDescription,d.c.MAX_LENGTH_IN_CONTENT_ITEM),this.hardLinkContent.visibility=this.contentService.determineVisibility(this.hardLinkContent.isAvailable),this.hardLinkContent.contentDetail={"resource/x-bb-forumlink":{title:e.subject}}}buildDiscussion(){return this.engagementRoot.$asPromise().then(()=>{let e=!1;this.contentService.canOnlyCreateDiscussion(this.engagementRoot)&&(e=!0);const t=this.contextUser.userModel;return this.course.forums.$new().messages.$build({courseId:this.contextCourse.courseId,userId:t.id,postedName:t.userName,subject:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(null),key:"course.content.discussionTitlePlaceholder"}),body:{rawText:"",displayText:""},isDeleted:!1,isAvailable:e})})}updateDiscussion(e){const t=this.context.getServerTime();return this.course.forums.$new(e).messages.$build({subject:this.currentDiscussion.subject,id:null,forumId:e,parentId:"{unset id}",courseId:this.currentDiscussion.courseId,userId:this.currentDiscussion.userId,postedName:this.currentDiscussion.postedName,body:this.currentDiscussion.body,isDeleted:!1,postDate:t,editDate:t,isAvailable:this.currentDiscussion.isAvailable})}resolveCourse(){return this.contextCourse.course?this.contextCourse.course.$asPromise():this.courseModel.$find(this.currentCourseId).$asPromise()}refetchColumn(){return this.column?this.column.$fetch({expand:"associatedRubrics"}).$asPromise():this.resolveColumn()}hasViewGradebookColumnPermission(){return this.canViewGradebook||this.canViewAttempts||this.canViewAssessments||this.canObserveGradebook}resolveColumn(){return this.column?this.column.$asPromise():this.loadDiscussion().then(()=>{if(this.currentDiscussion.gradedColumn)return this.hasViewGradebookColumnPermission()?this.course.gradebook.columns.$new(this.currentDiscussion.gradedColumn.id).$fetch({expand:"associatedRubrics"}).$asPromise():this.$q.when(this.currentDiscussion.gradedColumn)})}get isGradedDiscussion(){return this.currentDiscussion&&this.currentDiscussion.allowGrading}set groupId(e){const t=this._groupId;r.isArray(e)?this._groupId=e[0]:this._groupId=e,this._groupId&&this._groupId!==t&&(this.hasClassGroup?this.ultraState.search("groupId",this._groupId):this.ultraState.search("disGroupId",this._groupId))}get groupId(){return this._groupId===I?"":this._groupId}};$=Object(n.__decorate)([Object(n.__param)(0,Object(v.b)(l.serviceName)),Object(n.__param)(1,Object(v.b)("$rootScope")),Object(n.__param)(2,Object(v.b)("$q")),Object(n.__param)(3,Object(v.b)("$modal")),Object(n.__param)(4,Object(v.b)(a.m.serviceName)),Object(n.__param)(5,Object(v.b)(a.Jb.serviceName)),Object(n.__param)(6,Object(v.b)(u.b)),Object(n.__param)(7,Object(v.b)(d.f)),Object(n.__param)(8,Object(v.b)(p.d)),Object(n.__param)(9,Object(v.b)(g.b)),Object(n.__param)(10,Object(v.b)(b.b)),Object(n.__param)(11,Object(v.b)(m.b)),Object(n.__param)(12,Object(v.b)(h.e))],$);class w extends ${}r.module(y,[a.N,l.moduleName,u.a,d.d,p.b,g.a,b.a,a.N]).service(C,$)},gCXj:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return d}));var n=s("Llzl"),i=s("nsO7"),r=s("5Dl8"),o=s("TnpK"),a=s("w9Zy"),l=s("pjml");const c="ultra.course.coursemembershipmarkups",d="ultra.course.coursemembershipmarkups.service";n.module(c,[l.N,o.b,a.d]).run([a.e,o.d,l.t.serviceName,"$rootScope",function(e,t,s,n){n.$on(a.c,()=>{t.params.courseId&&e.getTopElement().then(e=>{e.getElement().addClass("cc"+t.params.courseId)})}),s.$mixHook("after-fetch-many",(function(){const e=(/courses\/(_\d+_\d+)/.exec(this.$url())||[])[1];e&&n.$broadcast(`course-${e}-memberships-after-fetch`,Array.prototype.slice.apply(this))}))}]).provider(d,class{constructor(){this.fn=[]}onStyleRefresh(e){this.fn.push(e)}$get(){return this}}).directive("bbCourseMembershipMarkups",[d,function(e){return{restrict:"A",scope:!1,link(t,s,o){const a=o.bbCourseMembershipMarkups,l=`css_course_${a}_membership`,c={},d=i.once(()=>{let e=n.element(document).find(`#${l}`);return 0===e.length&&(e=n.element(`<style id="${l}"></style>`).appendTo("head"),t.$on("$destroy",()=>{e.remove()})),e});t.$root.$on(`course-${a}-memberships-after-fetch`,(t,s)=>{t.preventDefault();const n=d();(s=i(s).filter(e=>null!=(e.userId||e.user.id)).map(e=>(e.userId=e.userId||e.user.id,e)).value()).forEach(t=>{const s=new r.a,n=s.selector(`.cc${a}`);e.fn.forEach(e=>{e(n,t)}),c[t.id]=s.build()});const o=i(c).sortBy().map((e,t)=>e).join("\n");o!==n.text()&&n.text(o)}),t.$on(`course-${a}-memberships-before-fetch`,(e,t)=>{e.preventDefault();const s=t.params||{};s.fields&&(s.fields+=",courseId,dueDateExceptionType,timeLimitExceptionType")})}}}])},gOJg:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));s("JzsJ");var n=s("Llzl"),i=s("0JpG"),r=s("Qbdf"),o=s("TnpK"),a=s("nmzr");const l="ultra.course.contentCreate.routes";n.module(l,[i.moduleName,r.b,o.b]).config([o.c,r.c,(e,t)=>{e.peekState("content-manage.create.document",{panelClass:"full",resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/content/course-content")],[r.d]:t.resolve},reloadOnSearch:!1,peekViewName:"document-peek@",url:"/document",require:()=>Promise.all([s.e(121),s.e(0),s.e(1),s.e(2),s.e(9),s.e(21),s.e(35),s.e(58),s.e(123)]).then(s.bind(null,"HjlN")),peekStates:[a.ContentRoutes.DOCUMENT,"document-settings","conversations","edit-file-settings",a.CourseRoutes.COURSE_MESSAGE,a.LtiRoutes.LTI,a.ContentMarketRoutes.CONTENT_MARKET,a.ContentCollectionRoutes.CONTENT_COLLECTION,a.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL],pageTitle:"course.content.document.title"}).peekState(a.ContentRoutes.DOCUMENT,{panelClass:"full",resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/content/course-content")],[r.d]:t.resolve},peekViewName:"document-peek@",url:"/document/:id?courseId&view",require:()=>Promise.all([s.e(121),s.e(0),s.e(1),s.e(2),s.e(9),s.e(21),s.e(35),s.e(58),s.e(123)]).then(s.bind(null,"HjlN")),peekStates:["document-settings","conversations","edit-file-settings",a.CourseRoutes.COURSE_MESSAGE,a.LtiRoutes.LTI,a.ContentMarketRoutes.CONTENT_MARKET,a.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL],pageTitle:"course.content.document.title"}).peekState("document-settings",{resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/document-settings/:id",params:{focusEleId:null},require:()=>Promise.all([s.e(0),s.e(1),s.e(2),s.e(8),s.e(9),s.e(583)]).then(s.bind(null,"Ynio")),peekViewName:"document-settings-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy"],pageTitle:"course.content.document.settings.header"}),e.peekState("content-manage",{abstract:!0,peekStates:["gradebook-item"]}).peekState(a.ContentRoutes.CREATE_CONTENT_PEEK_PANEL,{url:"/create?parentId&positionBefore&positionAfter&id",resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/content/course-content")]},peekStates:["discussion","gradebook-item",a.JournalRoutes.JOURNAL],require:[()=>Promise.all([s.e(9),s.e(674)]).then(s.bind(null,"a0Ud")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))],pageTitle:"course.content.createItem"}).peekState("content-manage.create.folder",{resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/folder",require:[()=>Promise.all([s.e(9),s.e(146)]).then(s.bind(null,"1wJd")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))],pageTitle:"course.content.createFolder"}).peekState("content-manage.create.cloud-document",{url:"/cloud-document",resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/content/course-content")]},require:[()=>s.e(702).then(s.bind(null,"zZot"))],pageTitle:"course.content.createCloudDocument"}).peekState(a.ContentRoutes.CREATE_LEARNING_MODULE_PEEK_PANEL,{resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/learning-modules",require:[()=>Promise.all([s.e(9),s.e(143)]).then(s.bind(null,"Yvtv")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))],pageTitle:"course.content.createLearningModule"}).peekState("content-manage.create.link",{panelClass:"full",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/link",require:[()=>Promise.all([s.e(9),s.e(67)]).then(s.bind(null,"KYun")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))],peekViewName:"link-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy"],pageTitle:"course.content.createLink"}).peekState("content-manage.create.link.legacyVersion",{panelClass:"peek",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/link",require:[()=>Promise.all([s.e(9),s.e(67)]).then(s.bind(null,"KYun")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))],peekViewName:"link-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy"],pageTitle:"course.content.createLink"}).peekState("content-manage.create.lti",{resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/lti",require:[()=>Promise.all([s.e(9),s.e(134)]).then(s.bind(null,"7OXB")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))],peekViewName:"lti-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy"],pageTitle:"course.content.createLti"}).peekState("content-manage.create.file",{resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/file",require:[()=>Promise.all([s.e(9),s.e(65)]).then(s.bind(null,"ebp7")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))],pageTitle:"course.content.fileTitlePlaceholder"}).peekState("content-manage.edit",{abstract:!0,resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/goal-alignment/goal")]},url:"/edit"}).peekState("content-manage.edit.folder",{resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/folder/:id?focusEleId",require:[()=>Promise.all([s.e(9),s.e(146)]).then(s.bind(null,"1wJd")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))],peekStates:[a.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL],allowChildPeekStates:!0,pageTitle:"course.content.editFolder"}).peekState(a.ContentRoutes.EDIT_LEARNING_MODULE_PEEK_PANEL,{resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/learning-modules/:id?focusEleId",require:[()=>Promise.all([s.e(9),s.e(143)]).then(s.bind(null,"Yvtv")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))],peekStates:[a.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL],allowChildPeekStates:!0,pageTitle:"course.content.editLearningModule"}).peekState("content-manage.edit.file",{resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/file/:id?focusEleId",require:[()=>Promise.all([s.e(9),s.e(65)]).then(s.bind(null,"ebp7")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))],peekViewName:"file-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy",a.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL],pageTitle:"course.content.file"}).peekState("content-manage.edit.link",{resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/link/:id?focusEleId",require:[()=>Promise.all([s.e(9),s.e(67)]).then(s.bind(null,"KYun")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))],peekViewName:"link-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy",a.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL],pageTitle:"course.content.editLink"}).peekState("content-manage.edit.lti",{resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/lti/:id?focusEleId",require:[()=>Promise.all([s.e(9),s.e(134)]).then(s.bind(null,"7OXB")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))],peekViewName:"lti-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy",a.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL],pageTitle:"course.content.editLti"}).peekState("content-manage.edit.placement",{resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/placement/:id",require:[()=>Promise.all([s.e(9),s.e(695)]).then(s.bind(null,"1xSQ")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))],peekStates:[a.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL],allowChildPeekStates:!0,pageTitle:"course.content.editPlacement"}).peekState("content-manage.import",{resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/import/content-import"),t.loadBundle("features/course/content/course-content")])]},url:"/import?parentId&targetCourseId&positionBefore&positionAfter",require:[()=>Promise.all([s.e(21),s.e(627)]).then(s.bind(null,"dTsQ")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))],pageTitle:"course.content.import.title"}).peekState("content-manage.copy",{resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/copy/content-copy"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/organization/content/copy/content-copy")])]},url:"/copy?parentId&targetCourseId&positionBefore&positionAfter",require:[()=>Promise.all([s.e(10),s.e(647)]).then(s.bind(null,"9fW2")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(10),s.e(0),s.e(1),s.e(2),s.e(4),s.e(11)]).then(s.bind(null,"5lIA"))],pageTitle:"course.content.copy.title"}).peekState(a.ContentRoutes.IMPORT_REPORT_PEEK_PANEL,{resolve:{translations:[i.serviceName,e=>e.loadBundle("components/directives/convert-and-import")]},url:"/importReport/:id",require:()=>Promise.all([s.e(45),s.e(705)]).then(s.bind(null,"O9bg")),pageTitle:"ultra.convert.analysis.importDetailsTitle"}).peekState(a.ContentRoutes.COPY_REPORT_PEEK_PANEL,{resolve:{translations:[i.serviceName,e=>e.loadBundle("components/directives/convert-and-import")]},url:"/copyReport/:id",require:()=>Promise.all([s.e(45),s.e(145)]).then(s.bind(null,"EdNC")),pageTitle:"ultra.convert.analysis.copyDetailsTitle"}).peekState(a.ContentRoutes.COPY_DETAILS_PEEK_PANEL,{resolve:{translations:[i.serviceName,e=>e.loadBundle("components/directives/convert-and-import")]},url:"/copyDetails",require:()=>Promise.all([s.e(45),s.e(145)]).then(s.bind(null,"EdNC")),pageTitle:"ultra.convert.analysis.copyDetailsTitle"}).peekState(a.ContentRoutes.GENERIC_STUDENT_PROGRES_PEEK_PANEL,{panelClass:"full",resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/progress/:id",require:()=>Promise.all([s.e(1),s.e(2),s.e(9),s.e(643)]).then(s.bind(null,"9u8j")),pageTitle:"course.content.progress.pageTitle",peekStates:[a.CourseRoutes.COURSE_MESSAGE],allowChildPeekStates:!0,peekViewName:"progress-peek@"})}])},gZo5:function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r}));var n=s("Llzl");const i="ultra.services.messaging",r="crossWindowMessaging",o="ultra.crossWindowMessagingService";class a{constructor(e){this.$rootScope=e,this.broadcastChannel=new BroadcastChannel(o),this.onMessage=this._onMessage.bind(this),this.broadcastChannel.addEventListener("message",this.onMessage),e.$on("$destroy",()=>{this.broadcastChannel.close(),this.broadcastChannel.removeEventListener("message",this.onMessage)})}_onMessage({data:e}){this.$rootScope.$broadcast(e.type,e.message)}postMessage(e,t){this.broadcastChannel.postMessage({type:e,message:t})}}a.$inject=["$rootScope"];class l extends a{}n.module(i,[]).service(r,a)},gkef:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return a}));var n=s("Llzl"),i=s("nsO7"),r=s("en1n");const o="ultra.services.windowSize",a="windowSizeService",l=100;class c{constructor(t){this.$rootScope=t,this.hasQueuedRefreshWindowSizeEm=!1,this.currentWindowSizeEm=e(window).width()/parseFloat(e("html").css("font-size"));const s=Object(i.throttle)(()=>{const t=window.innerWidth/parseFloat(e("html").css("font-size"));t!==this.currentWindowSizeEm&&this.$rootScope.$apply(()=>{this.currentWindowSizeEm=t,this.$rootScope.$broadcast("window-resize",this.currentWindowSizeEm)})},l);window.addEventListener("resize",s)}isSmallBreakpoint(){return this.currentWindowSizeEm<=r.d}isMediumBreakpoint(){return this.currentWindowSizeEm>r.d&&this.currentWindowSizeEm<=r.b}isLargeBreakpoint(){return this.currentWindowSizeEm>r.b}getBreakpointSize(){return this.currentWindowSizeEm<=r.d?"small":this.currentWindowSizeEm<=r.b?"medium":"large"}isWindowSizeAtLeast(e){return this.currentWindowSizeEm>=e}}c.$inject=["$rootScope"];class d extends c{}n.module(o,[]).service(a,c)}).call(this,s("5iHu"))},go4a:function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return o}));const n=(e,t,s)=>{return`static/images/default-banners/${t?"structure":"nature"}${((e=0)=>(void 0===e&&(e=0),e%20+1))(e)}${s?"_thumb":""}.jpg`},i=e=>e.course&&e.course.isClassic()?"course-color-classic":"course-color-"+(e=>(void 0===e&&(e=0),e%10+1))(e.courseCardColorIndex),r=(e,t)=>n(e,t,!1),o=(e,t)=>n(e,t,!0)},hWgD:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("Llzl"),i=s("0JpG"),r=s("TnpK");const o="ultra.course.partner-tool.router";n.module(o,[i.moduleName,r.b]).config([r.c,e=>{e.peekState("partner-tool",{abstract:!0,url:"/partners/:partnerId"}).peekState("partner-tool.tool",{url:"/tools/:toolType?partnerParentId&mode",resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/content-market/content-market")]},params:{partnerTitle:"",toolHref:"",returnState:null},panelClass:"full",require:()=>Promise.all([s.e(14),s.e(133),s.e(662)]).then(s.bind(null,"HgnN")),pageTitle:"course.partnerTool.partnerTool"})}])},hkqm:function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return u}));var n=s("Llzl"),i=s("H8CZ"),r=s("0JpG"),o=s("3FFP"),a=s("GbAM"),l=s("n1KZ"),c=s("lBPC");const d="ultra.services.toast",u="toast";class h{constructor(e,t,s,n,i){this.$compile=e,this.$q=t,this.$rootScope=s,this.$timeout=n,this.localize=i,this.toastQueue=[]}show(e){if(!e)throw new Error("args is required");if(!e.messageKey)throw new Error("messageKey is required");this.setUpToast({bundlePromise:e.bundle?this.localize.loadBundle(e.bundle):this.$q.when(),createScope:()=>{const t=this.$rootScope.$new(!0);return t.message=this.localize.translateSync({locale:e.locale||this.localize.getLocale(t),key:e.messageKey,params:e.translationParams,noWrap:!0,noEscape:!0}),t.shortMessage=e.shortMessageKey&&this.localize.translateSync({locale:e.locale||this.localize.getLocale(t),key:e.shortMessageKey,params:e.translationParams,noWrap:!0,noEscape:!0}),t.icon=e.icon||"icon-alert-triangle",t.toastClass=e.toastClass,t.toastStatus=e.toastStatus,t},triggerToastClose:(t,s,n,i)=>{s.$root.$broadcast(a.b,s.message);const r=()=>{if(s.isActive){let s=e.durationMS||h.DEFAULT_DISPLAY_MS;this.toastQueue.length>1&&(s=Math.min(h.RUSH_DISPLAY_MS,s)),(new Date).getTime()-t.startTime>=s?i():this.$timeout(r,1e3,!1)}};r(),this.$timeout(()=>{n.addClass("is-active")},0,!1)},onCloseToast:this.closeToast,template:l})}showLoading(e){if(!e)throw new Error("args is required");if(!e.trayId)throw new Error("messageKey is required");e.promise.then(()=>e.promise.done=!0);return this.setUpToast({bundlePromise:this.$q.when(),createScope:()=>{const t=this.$rootScope.$new(!0);return t.trayId=e.trayId,t.trayLocalizationKeysPrefix=e.trayLocalizationKeysPrefix,t},triggerToastClose:(t,s,n,i,r)=>{e.promise.then(()=>{i()},()=>{r()}),s.$root.$broadcast(o.a.LoadMoreResults.eventName,e.trayId,e.promise,null,!0,e.delayTime)},template:c,footerCss:e.footerCss,promise:e.promise})}setUpToast(e){const t=this.$q.defer(),s=this.toastQueue[this.toastQueue.length-1]||this.$q.when();let i;return this.toastQueue.push(t.promise),this.$q.all([s,e.bundlePromise]).then(()=>{if(t.startTime=(new Date).getTime(),e.promise&&e.promise.done)return void t.resolve();const s=e.createScope();let r;const o=()=>{e.onCloseToast&&e.onCloseToast(s,r),this.cleanUpToast(t,s,r)};return i=()=>{this.cancelToast(t,s,r)},s.isActive=!0,s.toastClicked=()=>{o()},r=this.$compile(e.template)(s),n.element(document.body).append(r),r.addClass(e.footerCss),e.triggerToastClose(t,s,r,o,i),t.promise}).then(()=>{this.toastQueue.shift()}),()=>i&&i()}closeToast(e,t){e.isActive&&t.removeClass("is-active")}cleanUpToast(e,t,s){t.isActive&&(t.isActive=!1,i.b(s,()=>{this.cancelToast(e,t,s)}))}cancelToast(e,t,s){e.resolve(),s.remove(),t.$destroy()}}h.DEFAULT_DISPLAY_MS=6e3,h.RUSH_DISPLAY_MS=3e3,h.$inject=["$compile","$q","$rootScope","$timeout",r.serviceName],n.module(d,[r.moduleName,o.b]).service(u,h)},hlSw:function(e,t,s){"use strict";var n=s("nsO7"),i=s("Llzl"),r=s("nYZ0"),o=s("Qbdf"),a=s("36CG"),l=s("oi1r"),c=s("P2dS"),d=s("0JpG"),u=s("pjml"),h=s("TnpK"),m=s("zGdY"),p=s("ZQFV"),g=s("nmzr");class b{}b.currentColumn=[h.d,o.d,"currentContent",(e,t,s)=>{if(s){const n=e.params.columnId||e.nextParams.columnId;return t.gradebook.columns.$buildRaw(s.getAssociatedGradingColumn(n)).$asPromise().then(e=>null==e.rubricAssociations?e.$fetch({expand:"associatedRubrics,externalGrade"}).$asPromise().then(e=>e.$asPromise()):e.$asPromise())}const n=e.nextParams.columnId;if(n&&n!==u.C.CREATE_COLUMN_ID)return t.gradebook.columns.$find(n,{expand:"associatedRubrics,externalGrade"}).$asPromise()}],b.assignmentContent=[o.d,h.d,a.g,(e,t,s)=>{const n=t.nextParams.contentId?t.nextParams.contentId:t.nextParams.id;if(n){const t="alignedGoals,assignedGroups,isGroupContent,permissions",i=e.contents.$find(n,{expand:t});return s.setCurrentContent(i),i.$asPromise()}}],b.assessmentContent=[o.d,"$q",d.serviceName,r.f,h.d,l.b,c.c,a.g,(e,t,s,r,o,a,l,c)=>{if(o.nextParams.contentId!==u.p.CREATE_CONTENT_ID)return r.getContentInContentTree(r.findRootNode(e,u.p.ContentRootNode.ROOT),e.id,o.nextParams.contentId).then(e=>(c.setCurrentContent(e.content),e.content.$asPromise()));const d=t.defer();return a.loadSchemas(e).then(t=>{r.getOrMakeContentInContentTree(r.findRootNode(e,u.p.ContentRootNode.ROOT),e.id,void 0,o.nextParams.parentId,o.nextParams.positionBefore,o.nextParams.positionAfter).then(r=>{const a=r.content;c.setCurrentContent(a);const h=n.find(t,e=>e.scaleType===m.SchemaScaleType.Score),g=o.nextParams.gradebookCategoryId;let b=null;l.getOrLoadCategoriesForCourse(e.id).then(e=>{b=n.find(e,e=>e.id===g)}).then(()=>{let t;a.courseId=e.id,a.contentHandler=u.p.ContentHandler.TestLink,a.body={};const n="course.grades.gradebook-item.title.default."+(t=b?b.isUserDefined?"custom":b.title:"test"),r=b&&b.isUserDefined?{today:new Date,title:b.title}:{today:new Date};a.title=s.translateSync({locale:e&&e.locale,key:n,params:r,noWrap:!0}),a.setupAssessmentContentDetail(h.id,b),a.setVisibility(m.ContentVisibility.Hidden),a.getAssociatedGradingColumn().visible=!1,a.getAssociatedGradingColumn().possible=p.Utils.GRADE_DEFAULT_POINTS,t!==m.KnownGradebookCategoryTitle.Test&&"true"!==o.nextParams.autoPostGrades||(a.getAssociatedGradingColumn().autoPostGrades=!0),a.ui.hasConversationAttached=!1,a.permissions={edit:!0},a.$save().$asPromise().then(()=>{d.reject(),o.go(o.next.name,i.extend(o.nextParams,{contentId:a.id,gradeitemView:"details",isCreateState:!0,parentId:void 0,positionBefore:void 0,positionAfter:void 0}))})})})}),d.promise}],b.currentContent=[o.d,"$injector",h.d,"translations",(e,t,s)=>-1===s.next.name.indexOf(g.GradeRoutes.GRADEBOOK_ITEM_ASSESSMENT)&&-1===s.next.name.indexOf("gradebook-item.scorm-submissions")?t.invoke(b.assignmentContent,null,{currentCourse:e}):t.invoke(b.assessmentContent,null,{currentCourse:e})],b.nullContent=[()=>null],t.a=b},hlUp:function(e,t){e.exports='<div id="aria-live-polite-region-1" class="sr-only" role="status" aria-live="polite"></div>\n<div id="aria-live-polite-region-2" class="sr-only" role="status" aria-live="polite"></div>\n<div id="aria-live-assertive-region-1" class="sr-only" role="alert" aria-live="assertive" aria-atomic="true"></div>\n<div id="aria-live-assertive-region-2" class="sr-only" role="alert" aria-live="assertive" aria-atomic="true"></div>'},hqh6:function(e,t,s){"use strict";s("t3ZG"),s("xjJw");var n=s("nsO7"),i=s("5iHu"),r=s("Llzl"),o=s("0JpG"),a=s("WShm"),l=s("oQrK"),c=s("XGja"),d=s("+4Px"),u=s("wgY5"),h=s("V6ed");s.d(t,"a",(function(){return m}));const m="ultra.components.directives.datepicker";class p{constructor(e,t,s,n,i,r,o,a){this.scope=e,this.element=t,this.attrs=s,this.model=n,this.$transclude=i,this.bbLocalize=r,this.bbValidateDate=o,this.$compile=a,this.attrs.firstDayOfWeek?this.scope.$watch(`${this.attrs.firstDayOfWeek}`,e=>{void 0!==e&&(this.weekStart=e,this.initialize())}):this.initialize()}initialize(){const e=this.bbLocalize.getLocale(this.scope);if(null==this.attrs.bbValidateDate){this.attrs.bbValidateDate="short",this.bbValidateDate[0].compile(this.element,this.attrs,void 0)(this.scope,this.element,this.attrs,this.model,this.$transclude)}if(!l.a.detect().desktop()&&window.Modernizr.inputtypes.date){if(this.setupNativeDatePicker(),this.attrs.$set("type","date"),this.element.removeAttr("placeholder"),this.attrs.bbTranslateAttrs){const e=this.scope.$eval(this.attrs.bbTranslateAttrs);e.placeholder&&(delete e.placeholder,this.attrs.bbTranslateAttrs=JSON.stringify(e))}}else{this.bbLocalize.loadBundle("components/directives/datepicker").then(()=>{if(null==this.attrs.placeholder&&this.attrs.$set("placeholder",this.bbLocalize.translateSync({locale:e,key:"components.directives.datepicker.dateFormatPlaceholder"})),this.model.$modelValue){const e=this.bbLocalize.formatDateSync(this.model.$modelValue,o.ILocaleDateFormat.Short,this.scope);this.element.val(e)}const t=this.bbLocalize.translateSync({locale:e,key:"components.directives.datepicker.ariaLabel.datepickerButton"});this.widgetButton=this.$compile(`<button class="open-datepicker super-clear js-datepicker-toggle-btn" aria-label="${t}" type="button"><bb-svg-icon size="small" icon="calendar"></bb-svg-icon></button>`)(this.scope),this.updateReadOnlyState(),this.widgetButton.on("focus",()=>{const e=document.querySelector('[name="due-date"]');(null==e?void 0:e.hasAttribute("disabled"))&&(null==e?void 0:e.getAttribute("disabled"))&&this.widgetButton.blur()}),this.attrs.$observe("disabled",e=>{this.updateReadOnlyState()}),this.attrs.$observe("readonly",e=>{this.updateReadOnlyState()})});let t=this.bbLocalize.preProcessFormatterLocale(e).replace(/_/g,"-");["zh-TW","zh-CN","rs-latin","pt-BR","nl-BE"].indexOf(t)<0&&(t="en-SC"===t?"ar":"ko-KR"===t?"kr":"nb-NO"===t||"nn-NO"===t?"no":t.substring(2,0)),this.attrs.$set("type","text");const n=this.bbLocalize.isRTL(this.scope);if(this.attrs.container){const e=i(this.attrs.container);e.length&&(this.container=e)}this.attrs.orientation&&(this.orientation=this.attrs.orientation);const r={todayHighlight:!0,beforeShowDay:e=>({content:this.bbLocalize.formatNumberSync(e.getDate(),this.scope)}),autoclose:!0,forceParse:!1,container:this.container,keyboardNavigation:!1,language:t,orientation:this.orientation,weekStart:this.weekStart,rtl:n,showOnFocus:!1,startDate:new Date("1900-01-01"),templates:{leftArrow:'<div class="icon-arrow-left"></div>',rightArrow:'<div class="icon-arrow-right"></div>'}};"en"===t?this.setupBootstrapDatePicker(r):(t="bootstrap-datepicker."+t,s.e(535).then((()=>{s("OfSV")("./"+t).then(()=>{this.setupBootstrapDatePicker(r)})}).bind(null,s)).catch(()=>{})),this.scope.$on("$destroy",()=>{this.element.datepicker("destroy")})}}setupNativeDatePicker(){this.scope.$watch(()=>this.model.$modelValue,e=>{e&&(this.element.val(u(e).format("YYYY-MM-DD")),this.element.triggerHandler("change"),this.model.$render())})}setupBootstrapDatePicker(e){this.element.datepicker(e).data("datepicker");this.scope.$watch(()=>this.model.$modelValue,()=>{this.updateDatepicker()}),this.element.on("changeDate",e=>{if(e.date){const t=this.bbLocalize.formatDateSync(e.date,o.ILocaleDateFormat.Short,this.scope);this.element.val(t),this.element.triggerHandler("change"),this.model.$render()}});const t=this.element.data("datepicker");t.isInput=!1,this.element.unbind("keyup",t._events[0][1].keyup),this.element.on("show changeMonth changeYear",e=>{this.datepickerDropdownElement=i(".datepicker-dropdown"),this.iconArrowLeft=this.datepickerDropdownElement.find(".icon-arrow-left"),this.iconArrowRight=this.datepickerDropdownElement.find(".icon-arrow-right"),this.openDatepickerButton=this.element.siblings("button.open-datepicker");const t=[];this.datepickerDropdownElement.find("td.day").not(".old").not(".new").each((function(){t.push(i(this))})),this.currentMonthDays=t,this.datepickerDropdownElement.on("keydown",e=>{e.keyCode===d.g&&(this.openDatepickerButton.focus(),this.element.datepicker("hide"))}),this.iconArrowLeft.add(this.iconArrowRight).on("blur",()=>{this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","true")}),this.iconArrowLeft.off("keydown").on("keydown",e=>{e.preventDefault(),e.keyCode!==d.g&&e.stopPropagation(),e.keyCode===d.t||e.keyCode===d.f?(this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","false"),this.goToPreviousMonth()):e.keyCode===d.u&&(e.shiftKey?(this.openDatepickerButton.focus(),this.element.datepicker("hide")):this.focusElement(this.iconArrowRight))}),this.iconArrowRight.off("keydown").on("keydown",e=>{e.preventDefault(),e.keyCode!==d.g&&e.stopPropagation(),e.keyCode===d.t||e.keyCode===d.f?(this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","false"),this.goToNextMonth()):e.keyCode===d.u&&(e.shiftKey?this.focusElement(this.iconArrowLeft):this.focusDefaultDay())}),this.updateAriaRolesAndStates(this.getViewDate(),e.date),this.setUpKeyboardNavigation(),"show"===e.type&&(this.datepickerDropdownElement.find("tfoot").remove(),this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","true"),this.datepickerDropdownElement.on("keyup",e=>{e.stopPropagation()}),this.focusDefaultDay())})}updateDatepicker(){const e=this.model.$modelValue,t=this.element.data("datepicker");if(r.isDate(e)&&t){const s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),n=t.getUTCDate();n&&n.getTime()===s.getTime()||(t.dates.replace([s]),t.viewDate=s,t.fill())}}updateReadOnlyState(){this.element.hasClass("show-calendar-icon")||!this.element.prop("disabled")&&!this.element.prop("readonly")?this.element.next()!==this.widgetButton&&(this.widgetButton.click(e=>{this.element.datepicker("show")}),this.element.after(this.widgetButton)):this.widgetButton.remove()}focusDefaultDay(){const e=n.find(this.currentMonthDays,e=>e.hasClass("active")),t=null!=e?e:this.currentMonthDays[0];this.focusElement(t)}focusPreviousDay(){const e=this.getActiveElementIndex();0===e?(this.goToPreviousMonth(),this.focusLastDayOfMonth()):this.focusElement(this.currentMonthDays[e-1])}focusNextDay(){const e=this.getActiveElementIndex();e<this.currentMonthDays.length-1?this.focusElement(this.currentMonthDays[e+1]):(this.goToNextMonth(),this.focusElement(this.currentMonthDays[0]))}focusSameWeekdayOfPreviousWeek(){const e=this.getActiveElementIndex();if(e-7>=0)this.focusElement(this.currentMonthDays[e-7]);else{const t=7-e;this.goToPreviousMonth(),this.focusElement(this.currentMonthDays[this.currentMonthDays.length-t])}}focusSameWeekdayOfNextWeek(){const e=this.getActiveElementIndex();if(e+7<this.currentMonthDays.length)this.focusElement(this.currentMonthDays[e+7]);else{const t=e+7-this.currentMonthDays.length;this.goToNextMonth(),this.focusElement(this.currentMonthDays[t])}}focusSameDayOfPreviousMonth(){this.focusSameDayOfAdjacentMonth(-1)}focusSameDayOfNextMonth(){this.focusSameDayOfAdjacentMonth(1)}focusSameDayOfAdjacentMonth(e){const t=this.getActiveElementIndex();e>0?this.goToNextMonth():this.goToPreviousMonth(),null!=this.currentMonthDays[t]?this.focusElement(this.currentMonthDays[t]):this.focusLastDayOfMonth()}focusSameDayOfPreviousYear(){this.focusSameDayOfAdjacentYear(-1)}focusSameDayOfNextYear(){this.focusSameDayOfAdjacentYear(1)}focusSameDayOfAdjacentYear(e){const t=this.getActiveElementIndex();e>0?this.goToNextYear():this.goToPreviousYear(),null!=this.currentMonthDays[t]?this.focusElement(this.currentMonthDays[t]):this.focusLastDayOfMonth()}focusFirstDayOfMonth(){this.focusElement(this.currentMonthDays[0])}focusLastDayOfMonth(){this.focusElement(this.currentMonthDays[this.currentMonthDays.length-1])}focusElement(e){e.attr("tabindex","-1").focus()}getViewDate(){return this.element.data("datepicker").viewDate}setViewDate(e){this.element.data("datepicker").viewDate=e}getActiveElementIndex(){return n.findIndex(this.currentMonthDays,e=>e.attr("id")===i(document.activeElement).attr("id"))}goToPreviousMonth(){this.moveMonth(-1)}goToNextMonth(){this.moveMonth(1)}goToPreviousYear(){this.moveYear(-1)}goToNextYear(){this.moveYear(1)}moveMonth(e){const t=this.getViewDate();this.setViewDate(this.element.datepicker("moveMonth",t,e)),this.element.datepicker("fill"),this.element.trigger("changeMonth")}moveYear(e){const t=this.getViewDate();this.setViewDate(this.element.datepicker("moveYear",t,e)),this.element.datepicker("fill"),this.element.trigger("changeYear")}getAdjustedDate(e){const t=new Date(parseInt(e,10));return new Date(t.getTime()+60*t.getTimezoneOffset()*1e3)}updateAriaRolesAndStates(e,t){const s=this.bbLocalize.getLocale(this.scope),n=this.bbLocalize.translateSync({locale:s,key:"components.directives.datepicker.ariaLabel.container"});this.datepickerDropdownElement.attr("role","application").attr("aria-label",n),this.datepickerDropdownElement.find("table").attr("role","grid").attr("aria-label",n);const r=this.bbLocalize.translateSync({locale:s,key:"components.directives.datepicker.ariaLabel.previousMonthButton"});this.datepickerDropdownElement.find(".icon-arrow-left").attr("aria-label",r).attr("role","button");const o=this.bbLocalize.translateSync({locale:s,key:"components.directives.datepicker.ariaLabel.nextMonthButton"});this.datepickerDropdownElement.find(".icon-arrow-right").attr("aria-label",o).attr("role","button"),this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-live","assertive").attr("aria-atomic","true"),this.datepickerDropdownElement.find("thead th").attr("role","gridcell"),this.datepickerDropdownElement.find("table").removeAttr("aria-activedescendant");const a=u(e),l=u(a).subtract({months:1}),c=u(a).add({months:1});this.datepickerDropdownElement.find("td").each((e,t)=>{const s=i(t);s.attr("role","gridcell");const n=t.getAttribute("data-date");let r,o;o=s.hasClass("old")?l.toDate():s.hasClass("new")?c.toDate():a.toDate(),r=n?this.getAdjustedDate(n):new Date(o.getFullYear(),o.getMonth(),+s.text());const d=u(r);if(Number.isNaN(d.date()))return;s.attr("aria-label",this.bbLocalize.formatDateSync(d.toDate()));const h="datepicker-td-"+d.unix();s.attr("id",h),s.hasClass("active")&&(s.attr("aria-selected","true"),this.datepickerDropdownElement.find("table").attr("aria-activedescendant",h))})}setUpKeyboardNavigation(){this.currentMonthDays.forEach(e=>{e.off("keydown").on("keydown",e=>{switch(e.preventDefault(),e.keyCode!==d.f&&e.keyCode!==d.g&&e.stopPropagation(),h.a.enableFocusOutline(),e.keyCode){case d.j:this.bbLocalize.isRTL()?this.focusNextDay():this.focusPreviousDay();break;case d.s:this.bbLocalize.isRTL()?this.focusPreviousDay():this.focusNextDay();break;case d.v:this.focusSameWeekdayOfPreviousWeek();break;case d.d:this.focusSameWeekdayOfNextWeek();break;case d.q:e.ctrlKey||e.altKey?this.focusSameDayOfPreviousYear():this.focusSameDayOfPreviousMonth();break;case d.p:e.ctrlKey||e.altKey?this.focusSameDayOfNextYear():this.focusSameDayOfNextMonth();break;case d.i:this.focusFirstDayOfMonth();break;case d.e:this.focusLastDayOfMonth();break;case d.u:e.shiftKey?this.focusElement(this.iconArrowRight):(c.b(null,this.openDatepickerButton),this.element.datepicker("hide"));break;case d.f:case d.t:this.currentMonthDays[this.getActiveElementIndex()].click(),this.openDatepickerButton.focus()}})})}}p.$inject=["scope","element","attrs","model","$transclude",o.serviceName,a.a+"Directive","$compile"];class g{constructor(e){this.$injector=e,this.priority=1,this.restrict="A",this.require="ngModel",this.link=(e,t,s,n,i)=>{e.datepicker=this.$injector.instantiate(p,{scope:e,element:t,attrs:s,model:n,$transclude:i})}}}g.$inject=["$injector"],r.module(m,[o.moduleName,a.b]).directive("bbDatePicker",["$injector",e=>e.instantiate(g)])},i8dz:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return r}));s("KCTV");var n=s("Llzl"),i=s("+4Px");const r="ultra.directives.bbFoundationDropdownClose",o="bbFoundationDropdownClose";class a{constructor(){this.restrict="A",this.link=(t,s,n)=>{const r="keyup."+o;s.on("click",t=>{const n=e(t.target);if(n.closest("[data-dropdown]").length<=0&&(n.closest(".f-dropdown").length<=0||n.closest(".f-dropdown a").length>0)){const t=s.find(".f-open-dropdown");if(t.length&&t.foundation("dropdown","close",t),window.top!==window){const t=e(window.parent.document).find(".f-open-dropdown");t.foundation("dropdown","close",t)}}}),s.on("scroll",t=>{const s=e(t.target);s.hasClass("f-dropdown")||0!==s.parents(".f-dropdown").length||e(".f-open-dropdown").each((function(){e(this).foundation("dropdown","close",e(this))}))}),e("body").on(r,t=>{if(t.keyCode===i.u){const t=s.find(".f-open-dropdown"),n=e(document.activeElement).is(".f-open-dropdown"),i=e(document.activeElement).parents(".f-open-dropdown").length>0;n||i||t.foundation("dropdown","close",t)}}),t.$on("$destroy",()=>{s.off(),e("body").off(r)})}}}n.module(r,[]).directive(o,["$injector",e=>e.instantiate(a)])}).call(this,s("5iHu"))},iAaI:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("Llzl"),i=s("Sa5G"),r=s("0JpG"),o=s("TnpK");const a="ultra.base.admin.theme.routes";n.module(a,[r.moduleName,o.b]).config([o.c,e=>{e.peekState("colorSelection",{systemEntitlement:i.s.ViewAdmin,url:"/theme/:themeId/colorSelection",require:()=>s.e(594).then(s.bind(null,"xCEN")),pageTitle:"base.admin.theme.colorSelection.title",panelClass:"full"})}])},iVgd:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return r}));var n=s("Llzl"),i=s("+4Px");const r="ultra.directives.accessibility.keyboardClick";class o{constructor(){this.restrict="A",this.link=(t,s,n)=>{s.on("keyup",t=>{const s=e(t.target),n=s.closest(".react-container").length>0,r="LI"===s.prop("tagName")&&"option"===s.attr("role")&&"listbox"===s.closest("UL").attr("role");(t.keyCode!==i.f||n||"file"===s.attr("type")||"INPUT"===s.prop("tagName")&&("INPUT"!==s.prop("tagName")||"checkbox"!==s.prop("type"))||"BUTTON"===s.prop("tagName")||"BODY"===s.prop("tagName")||"A"===s.prop("tagName")&&s.attr("href")||r)&&(t.keyCode!==i.t||n||"A"!==s.prop("tagName")&&("DIV"!==s.prop("tagName")||"button"!==s.attr("role")))||s.trigger("click")})}}}n.module(r,[]).directive("bbKeyboardClick",["$injector",e=>e.instantiate(o)])}).call(this,s("5iHu"))},imME:function(e,t,s){},"iwI+":function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s("Llzl"),i=s("0JpG"),r=s("w9Zy"),o=s("TnpK"),a=s("0wat");const l="ultra.base.tools.routes";n.module(l,[o.b]).config([o.c,e=>{e.state("base.tools.legacy",{url:"/:toolName",resolve:{translations:[i.serviceName,e=>e.loadBundle("features/base/tools/base-tools")],offCanvasArgs:[o.d,e=>({panelClass:"full",template:a,close:()=>{e.goCurrentBasePage()},stateName:"base.tools.legacy"})]},require:()=>Promise.resolve().then(s.bind(null,"yA26")),onExit:[r.e,e=>{e.close("base.tools.legacy")}],pageTitle:"base.tools.pageTitle"})}])},j2IR:function(e,t,s){"use strict";s.d(t,"a",(function(){return h}));var n=s("Llzl"),i=s("0JpG"),r=s("w9Zy"),o=s("go4a"),a=s("pjml"),l=s("TnpK"),c=s("Qbdf"),d=s("fYJU"),u=s("nmzr");const h="ultra.telemetry.routes";function m(e,t,s,n){const i=e.defer(),r=t.courseId;return r?s.$new(r).users.$find(n.userId).$then(e=>{i.resolve(o.a(e))}):i.resolve(null),i.promise}n.module(h,[i.moduleName,r.d,a.N,l.b,c.b]).config([l.c,c.c,(e,t)=>{e.peekState("telemetry-settings",{url:"/telemetry-settings",require:()=>Promise.all([s.e(0),s.e(40),s.e(621)]).then(s.bind(null,"W9KP")),resolve:{currentCourseColor:["$q","$stateParams",a.m.serviceName,d.b,(e,t,s,n)=>m(e,t,s,n)]}}).peekState(u.TelemetryRoutes.INSTRUCTOR_CLASS,{url:"/telemetry/activityVsGrade/:courseId?notificationId",require:()=>Promise.all([s.e(19),s.e(25),s.e(13),s.e(23),s.e(32),s.e(34),s.e(47),s.e(599)]).then(s.bind(null,"7FjY")),panelClass:"full",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[c.d]:t.resolve},peekStates:[u.CourseRoutes.COURSE_MESSAGE,"event-create","telemetry-settings",u.TelemetryRoutes.INSTRUCTOR_DETAILS],peekViewName:"telemetry-instructor-class-base@",pageTitle:"components.directives.telemetry.panel.titleInstructor"}).peekState(u.TelemetryRoutes.INSTRUCTOR_DETAILS,{url:"/telemetry/timeSeries/:courseId?userId",require:()=>Promise.all([s.e(19),s.e(25),s.e(13),s.e(23),s.e(32),s.e(34),s.e(640)]).then(s.bind(null,"AxRA")),panelClass:"full",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[c.d]:t.resolve},peekStates:[u.CourseRoutes.COURSE_MESSAGE,"event-create","telemetry-settings"],peekViewName:"telemetry-instructor-details-base@",pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(u.TelemetryRoutes.STUDENT_HIGH_PERFORMANCE,{url:"/telemetry/student/high-performance/:courseId",require:()=>Promise.all([s.e(19),s.e(25),s.e(13),s.e(23),s.e(32),s.e(34),s.e(47),s.e(610)]).then(s.bind(null,"5a0X")),panelClass:"peek",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[c.d]:t.resolve,currentCourseColor:["$q","$stateParams",a.m.serviceName,d.b,(e,t,s,n)=>m(e,t,s,n)]},pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(u.TelemetryRoutes.STUDENT_LOW_ACTIVITY,{url:"/telemetry/student/low-performance/activity/:courseId",require:()=>Promise.all([s.e(19),s.e(25),s.e(13),s.e(23),s.e(32),s.e(34),s.e(47),s.e(622)]).then(s.bind(null,"ADyW")),panelClass:"peek",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[c.d]:t.resolve,currentCourseColor:["$q","$stateParams",a.m.serviceName,d.b,(e,t,s,n)=>m(e,t,s,n)]},pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(u.TelemetryRoutes.STUDENT_LOW_GRADES,{url:"/telemetry/student/low-performance/grades/:courseId",require:()=>Promise.all([s.e(19),s.e(25),s.e(13),s.e(23),s.e(32),s.e(34),s.e(47),s.e(623)]).then(s.bind(null,"vOTS")),panelClass:"peek",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[c.d]:t.resolve,currentCourseColor:["$q","$stateParams",a.m.serviceName,d.b,(e,t,s,n)=>m(e,t,s,n)]},pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(u.TelemetryRoutes.STUDENT_PROGRESS,{url:"/telemetry/student/progress/:courseId",require:()=>Promise.all([s.e(19),s.e(25),s.e(13),s.e(23),s.e(32),s.e(34),s.e(624)]).then(s.bind(null,"09dT")),panelClass:"peek",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[c.d]:t.resolve,currentCourseColor:["$q","$stateParams",a.m.serviceName,d.b,(e,t,s,n)=>m(e,t,s,n)]},pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(u.TelemetryRoutes.STUDENT_FIND_A_STUDY_PARTNER,{url:"/telemetry/student/request-study-help/:courseId",require:()=>s.e(591).then(s.bind(null,"cU3T")),panelClass:"peek",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry")])],[c.d]:t.resolve,currentCourseColor:["$q","$stateParams",a.m.serviceName,d.b,(e,t,s,n)=>m(e,t,s,n)]},pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(u.TelemetryRoutes.CONTENT_ACTIVITY_IN_DETAIL,{url:"/telemetry/instructor/activity-in-detail/:contentId",require:()=>Promise.all([s.e(19),s.e(0),s.e(4),s.e(13),s.e(32),s.e(565)]).then(s.bind(null,"AeD7")),panelClass:"full",resolve:{translations:[i.serviceName,e=>e.loadBundle("components/directives/telemetry/telemetry")],currentContent:["$stateParams",c.d,(e,t)=>{const s=e.contentId;return t.contents.$find(s).$asPromise()}]},pageTitle:"components.directives.telemetry.panel.titleStudentActivityDetails",peekStates:[u.CourseRoutes.COURSE_MESSAGE,"event-create",u.TelemetryRoutes.INSTRUCTOR_DETAILS],peekViewName:"telemetry-content-activity-in-detail-base@"}).peekState(u.TelemetryRoutes.DISCUSSION_FORUM_INSIGHTS,{url:"/telemetry/instructor/discussion-insights/:contentId/:forumContentId",require:()=>s.e(570).then(s.bind(null,"zl9+")),panelClass:"full",params:{groupId:null},resolve:{translations:[i.serviceName,e=>e.loadBundle("components/directives/discussion")],currentContent:["$stateParams",c.d,(e,t)=>{const s=e.contentId;return t.contents.$find(s).$asPromise()}]},pageTitle:"components.directives.discussion.insights.pageTitle",peekStates:["content-manage","submission-list",u.CourseRoutes.COURSE_MESSAGE],peekViewName:"telemetry-discussion-forum-insights-base@"})}])},jT78:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("zYa8"),i=s("TE6g");const r="ultra.components.directives.bbUiIcon.large.Zip";Object(n.a)(i.Zip,r,"bbUiIconLargeZip")},jhBu:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return d}));var n=s("Llzl"),i=s("5MwF"),r=s("x+T+"),o=s("Qbdf"),a=s("VAMW"),l=s("6fZB");const c="ultra.service.entitlement",d="entitlement";class u{constructor(e){this.service=e,this.key=a.TransitService.Entitlement}hasSystemEntitlement(e){return Object(l.a)(this.service.hasSystemEntitlement(e))}}class h{constructor(e,t){this.entitlementCache=e,this.currentCourse=t,Object(a.registerService)(new u(this))}isEntitled(e,t=this.currentCourse.courseId){if(!t)return i.a.production||console.error(new Error("There is no course in context. Check the configuration.")),!1;if(!i.a.production&&!this.entitlementCache.hasCachedCourseEntitlements(t))throw new Error(`Cached entitlements should exist for course with ID, ${t}, but none were found.\n        Make sure the entitlement resolver is configured for this route,\n        or use async hasCourseEntitlement methods that guarantee the cache initializes.`);return this.entitlementCache.hasCachedCourseEntitlements(t)&&this.entitlementCache.getCachedCourseEntitlements(t).has(e.toString())}areAllEntitled(e,t=this.currentCourse.courseId){return e.every(e=>this.isEntitled(e,t))}areAnyEntitled(e,t=this.currentCourse.courseId){return e.some(e=>this.isEntitled(e,t))}hasCourseEntitlement(e,t=this.currentCourse.courseId){return this.entitlementCache.loadCourseEntitlements(t).then(()=>this.isEntitled(e,t))}hasAllCourseEntitlements(e,t=this.currentCourse.courseId){return this.entitlementCache.loadCourseEntitlements(t).then(()=>this.areAllEntitled(e,t))}hasAnyCourseEntitlement(e,t=this.currentCourse.courseId){return this.entitlementCache.loadCourseEntitlements(t).then(()=>this.areAnyEntitled(e,t))}hasSystemEntitlement(e){return this.entitlementCache.loadCourseEntitlements(r.a).then(()=>this.isEntitled(e,r.a))}hasAnySystemEntitlements(e){return this.entitlementCache.loadCourseEntitlements(r.a).then(()=>this.areAnyEntitled(e,r.a))}}h.$inject=[r.c,o.e];class m extends h{}n.module(c,[r.b,o.b]).service(d,h)},jj6p:function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));s("JzsJ");var n=s("5iHu"),i=s("Llzl"),r=s("5MwF"),o=s("Sa5G"),a=s("0JpG"),l=s("wQOJ"),c=s("pjml"),d=s("MOka"),u=s("TnpK"),h=s("Q/M7"),m=s("nmzr");const p="ultra.base.routes";i.module(p,[a.moduleName,c.N]).config([u.c,e=>{e.baseState("base.calendar",{url:"^/calendar",resolve:{translations:[a.serviceName,e=>e.loadBundle("features/base/calendar/base-calendar")],"?courseMembershipsLoader":i.noop},peekStates:[m.Routes.Calendar.CALENDAR_SETTINGS,m.Routes.Calendar.CREATE_EVENT,m.Routes.Calendar.EDIT_EVENT,m.Routes.Calendar.VIEW_EVENT,m.Routes.Calendar.COURSE_SCHEDULE,m.Routes.Calendar.OFFICE_HOURS,"content-manage","assignment","assessment","course",m.Routes.Lti.LTI,"scorm-launch-frame","scorm-settings","gradebook-item.scorm-submissions","scorm-overview"],require:()=>Promise.all([s.e(72),s.e(16),s.e(29),s.e(57),s.e(136)]).then(s.bind(null,"q2ny")),pageTitle:"base.nav.calendar"}).baseState("base.deadline",{url:"^/deadline",resolve:{translations:[a.serviceName,e=>e.loadBundle("features/base/calendar/base-calendar")],"?courseMembershipsLoader":i.noop},peekStates:[m.Routes.Calendar.CALENDAR_SETTINGS,m.Routes.Calendar.CREATE_EVENT,m.Routes.Calendar.EDIT_EVENT,m.Routes.Calendar.VIEW_EVENT,m.Routes.Calendar.COURSE_SCHEDULE,m.Routes.Calendar.OFFICE_HOURS,"content-manage","assignment","course","assessment","scorm-overview"],require:()=>Promise.all([s.e(72),s.e(16),s.e(29),s.e(57),s.e(136)]).then(s.bind(null,"q2ny")),pageTitle:"base.nav.calendar"}).baseState("base.courses",{url:"^/course?enrollmentMessage",resolve:{translations:[a.serviceName,e=>e.loadBundle("features/base/courses/base-courses")]},peekStates:["course","external",m.Routes.Calendar.COURSE_SCHEDULE,m.Routes.Course.EDIT_BANNER],peekViewName:"courses-base",require:()=>Promise.all([s.e(14),s.e(0),s.e(27),s.e(49),s.e(66),s.e(120)]).then(s.bind(null,"EQ9X")),pageTitle:"base.nav.courses"}).baseState("base.grades",{url:"^/grades",resolve:{translations:[a.serviceName,e=>e.loadBundle("features/base/grades/base-grades")],"?courseMembershipsLoader":[i.noop]},require:()=>Promise.all([s.e(14),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(16),s.e(21),s.e(39),s.e(562)]).then(s.bind(null,"Bfy5")),peekStates:["assessment","assignment",m.Routes.Grade.GRADE_AND_FEEDBACK,"gradebook-item","telemetry","course","discussion",m.Routes.Lti.LTI,"scorm-settings","gradebook-item.scorm-submissions","scorm-launch-frame","scorm-overview",m.Routes.Journal.JOURNAL,m.Routes.Telemetry.INSTRUCTOR_CLASS,m.Routes.Telemetry.INSTRUCTOR_DETAILS,m.Routes.Telemetry.STUDENT_PROGRESS,"overall-grade-student","attendance","attendance-student-view"],pageTitle:"base.nav.grades"}).baseState("base.messages",{url:"^/messages",resolve:{translations:[a.serviceName,e=>e.loadBundle("features/base/messages/base-messages")]},require:()=>Promise.all([s.e(14),s.e(0),s.e(15),s.e(31),s.e(129),s.e(637)]).then(s.bind(null,"ZQ8w")),peekStates:["create-message","edit-message",m.Routes.Course.COURSE_MESSAGE,"course"],pageTitle:"base.nav.messages"}).baseState("base.organizations",{url:"^/organization?enrollmentMessage",resolve:{translations:[a.serviceName,e=>e.loadBundle("features/base/courses/base-courses")]},peekStates:["course","external",m.Routes.Calendar.COURSE_SCHEDULE,m.Routes.Course.EDIT_BANNER],peekViewName:"courses-base",require:()=>Promise.all([s.e(14),s.e(0),s.e(27),s.e(49),s.e(66),s.e(120)]).then(s.bind(null,"EQ9X")),pageTitle:"base.nav.organizations"}).baseState(m.Routes.Profile.PROFILE_BASE,{url:"^/profile",resolve:{userConfiguration:[c.Jb.serviceName,e=>e.getUserConfiguration()],translations:[a.serviceName,e=>e.loadBundle("features/base/profile/base-profile")],isMobileDistributorActive:["$q",c.Q.serviceName,(e,t)=>t.$build().courseSettings.$new(o.q.Mobile).$fetch().$allow([400]).$then(e=>!!e.settings)],memberships:[d.b,e=>e.reloadStreamMemberships()]},require:()=>Promise.all([s.e(28),s.e(27),s.e(69),s.e(132),s.e(596)]).then(s.bind(null,"cFSu")),peekStates:["notification-settings",m.Routes.Profile.UPDATE_AVATAR_PEEK,m.Routes.Profile.UPDATE_PROFILE_PEEK,m.Routes.Profile.UPDATE_LANGUAGE_PEEK,m.Routes.Profile.UPDATE_PASSWORD_PEEK,"privacy"],pageTitle:"base.nav.profile",onEnter:["$location",e=>{e.search("noCache",null)}]}).baseState("base.recentActivity",{resolve:{translations:[a.serviceName,e=>e.loadBundle("features/base/stream/base-stream")],memberships:[d.b,e=>e.reloadStreamMemberships()],"?courseMembershipsLoader":i.noop},peekStates:["announcement",m.Routes.Announcement.ANNOUNCEMENT_DETAIL,"assignment","assessment","content-manage","content-group","course","discussions",m.Routes.Calendar.EDIT_EVENT,m.Routes.Calendar.VIEW_EVENT,"gradebook-item","stream-message","telemetry",m.Routes.Lti.LTI,"content-group-enroll","notification-create","notification-settings","scorm-overview","scorm-launch-frame","scorm",m.Routes.Telemetry.INSTRUCTOR_CLASS,m.Routes.Telemetry.INSTRUCTOR_DETAILS,m.Routes.Telemetry.STUDENT_HIGH_PERFORMANCE,m.Routes.Telemetry.STUDENT_LOW_ACTIVITY,m.Routes.Telemetry.STUDENT_LOW_GRADES,m.Routes.Telemetry.STUDENT_PROGRESS,m.Routes.Telemetry.STUDENT_FIND_A_STUDY_PARTNER],peekViewName:"base-recentActivity-base",url:"^/stream",require:()=>Promise.all([s.e(18),s.e(4),s.e(13),s.e(24),s.e(39),s.e(576)]).then(s.bind(null,"UFXJ")),pageTitle:"base.nav.recentActivity"}).baseState("base.tools",{url:"^/tools",resolve:{translations:[a.serviceName,e=>e.loadBundle("features/base/tools/base-tools")]},peekStates:[m.Routes.Lti.LTI],require:()=>s.e(597).then(s.bind(null,"2yHp")),pageTitle:"base.nav.tools"}).baseState("base.admin",{resolve:{translations:[a.serviceName,e=>e.loadBundle("features/base/admin/base-admin")]},systemEntitlement:o.s.ViewAdmin,onEnter:()=>{n("body").addClass("base-admin-open")},onExit:()=>{n("body").removeClass("base-admin-open")},url:"^/admin",require:()=>s.e(650).then(s.bind(null,"9D0M")),peekStates:["course","localization","brands","notification-admin",m.Routes.Admin.ULTRA_SETTINGS_PEEK,m.Routes.Admin.ULTRA_EDIT_APPROVED_PRONOUNS_PEEK],pageTitle:"base.nav.admin"}).peekState("localization",{url:"/localization?launchUrl",require:()=>s.e(676).then(s.bind(null,"Arco")),pageTitle:"base.nav.localization",panelClass:"full",resolve:{translations:[a.serviceName,e=>e.loadBundle("features/base/admin/localization")],enterCheck:[u.d,"$stateParams",(e,t)=>{if(!t.launchUrl)return e.goToRoute("base.admin")}]}}).peekState(m.Routes.Admin.ULTRA_SETTINGS_PEEK,{url:"/ultra-settings",require:()=>Promise.all([s.e(3),s.e(17),s.e(37),s.e(731)]).then(s.bind(null,"jjx5")),pageTitle:"base.nav.ultra-settings-admin",panelClass:"full"}).peekState("notification-admin",{url:"/notification",require:()=>s.e(730).then(s.bind(null,"Vf+W")),pageTitle:"base.nav.notification-admin",panelClass:"full"}).peekState(m.Routes.Admin.ULTRA_EDIT_APPROVED_PRONOUNS_PEEK,{url:"/edit-pronouns",require:()=>Promise.all([s.e(3),s.e(17),s.e(37),s.e(729)]).then(s.bind(null,"5l+L")),pageTitle:"base.nav.edit-pronouns-admin",panelClass:"peek"}).baseState("base.redirect",{url:"^/redirect?userId&contentId&courseId&eventType&sourceType&sourceId&redirectType&legacyUrl&parentId&screen",require:()=>s.e(744).then(s.bind(null,"kds7"))}).baseState("base.institution-page",{url:"^/institution-page",require:()=>Promise.all([s.e(3),s.e(17),s.e(148)]).then(s.bind(null,"dRT/")),peekStates:["allLinks",m.Routes.Lti.LTI],pageTitle:"base.nav.institutionPage",resolve:{ipVariantId:[l.b,u.d,(e,t)=>e.getEffectiveVariantIdWithPermissions().then(({variantId:e,canView:s})=>{if(s)return e;t.goToRoute("base.recentActivity")},()=>t.goToRoute("base.recentActivity"))]}}).baseState("base.institution-page-admin",{url:"^/institution-page/admin/:variantId",require:()=>Promise.all([s.e(3),s.e(17),s.e(148)]).then(s.bind(null,"dRT/")),peekStates:["allLinks","editModule","editPageImage","createModule",m.Routes.Lti.LTI,"brand-detail"],pageTitle:"base.nav.institutionPage",params:{variantId:"default"},resolve:{ipVariantId:[l.b,u.d,"$stateParams",(e,t,s)=>e.getUserCanEdit("default").then(e=>(e||t.goToRoute("base.recentActivity"),s.variantId),()=>t.goToRoute("base.recentActivity"))],testResolver:["ipVariantId",e=>e]}}).state("institution",{onEnter:()=>{window.location.href=h.c("/institution")}}).baseState("base.course-catalog",{url:"^/catalog",require:()=>s.e(139).then(s.bind(null,"Kz46")),pageTitle:"base.nav.catalog",peekStates:["course"],resolve:{translations:[a.serviceName,e=>e.loadBundle("features/course/course-catalog")]}}).baseState("base.organization-catalog",{url:"^/organization-catalog",require:()=>s.e(139).then(s.bind(null,"Kz46")),pageTitle:"base.nav.orgCatalog",peekStates:["course"],resolve:{translations:[a.serviceName,e=>e.loadBundle("features/course/course-catalog")]}}).baseState(m.Routes.Integration.INTEGRATION_BASE,{url:"^/integration/:routeName?params",require:()=>s.e(727).then(s.bind(null,"xYk/"))}),r.a.features.componentDemos&&e.baseState("base.demo",{url:"^/demo",require:()=>Promise.all([s.e(73),s.e(0),s.e(28),s.e(68),s.e(563)]).then(s.bind(null,"KTgJ")),peekStates:["demoComponent"],pageTitle:"base.nav.demo"})}])},jnoB:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("Llzl"),i=s("Sa5G"),r=s("Qbdf"),o=s("0JpG"),a=s("TnpK"),l=s("nmzr");const c="ultra.course.groups.router";n.module(c,[r.b,o.moduleName,a.b]).config([r.c,a.c,(e,t)=>{t.peekState("group-set-list",{url:"/group-set-list",courseEntitlement:i.o.ViewGroupsAsAdmin,require:()=>s.e(742).then(s.bind(null,"Mkxh")),pageTitle:"course.outline.groupWorkspace.title",peekStates:["group-set-detail",l.GroupRoutes.IMPORT_GROUP_SET,l.GroupRoutes.EXPORT_GROUP_SET],panelClass:"full"}).peekState(l.GroupRoutes.IMPORT_GROUP_SET,{url:"/import-group-set",courseEntitlement:i.o.ViewGroupsAsAdmin,require:()=>s.e(715).then(s.bind(null,"J9mj")),pageTitle:"course.content.courseGroup.importGroupSetTitle",panelClass:"peek"}).peekState(l.GroupRoutes.IMPORT_GROUP_MEMBERS,{url:"/import-groups-members",courseEntitlement:i.o.ViewGroupsAsAdmin,require:()=>s.e(714).then(s.bind(null,"MNjM")),pageTitle:"course.content.courseGroup.importGroups",panelClass:"peek"}).peekState(l.GroupRoutes.EXPORT_GROUP_SET,{url:"/export-group-set?groupSetId",courseEntitlement:i.o.ViewGroupsAsAdmin,require:()=>s.e(713).then(s.bind(null,"1YGW")),pageTitle:"course.content.courseGroup.exportGroupSetTitle",panelClass:"peek"}).peekState("group-set-detail",{panelClass:"full",url:"/groupSet?courseId&groupSetId&mode",courseEntitlement:i.o.ViewGroupsAsAdmin,resolve:{translations:[o.serviceName,e=>e.loadBundle("features/course/content/group/course-group")]},require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(550)]).then(s.bind(null,"ymtw")),pageTitle:"course.content.courseGroup.groupSetTitle",peekStates:[l.CourseRoutes.COURSE_MESSAGE,l.GroupRoutes.EXPORT_GROUP_SET,l.GroupRoutes.IMPORT_GROUP_MEMBERS],peekViewName:"group-message-peek"}).peekState("content-group-enroll",{url:"/group-enroll?courseId&contentId&fromView",panelClass:"full",resolve:{[r.d]:e.resolve,translations:[o.serviceName,e=>e.loadBundle("features/course/content/group/course-group")]},require:()=>s.e(737).then(s.bind(null,"sBQA")),pageTitle:"course.content.courseGroup.selfEnroll"}).peekState("course-group-enroll",{url:"/course-group-enroll?courseId&fromView",pageTitle:"course.content.courseGroup.selfEnroll",panelClass:"full",require:()=>s.e(743).then(s.bind(null,"B5Yh"))})}])},jx5I:function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return c}));var n=s("D57K"),i=s("Llzl"),r=s("IbyE"),o=s("aHpC"),a=s("9OUN");const l="ultra.service.upload.settings",c="uploadSettings";let d=class{constructor(e,t){this.$q=e,this.$ngRedux=t,this.subscribeToRedux()}fetchFileUploadSettings(){return this.$q.when(this.getFileUploadSettings())}subscribeToRedux(){this.$ngRedux.connect(e=>({fileUploadSettings:r.select.fileUploadSettings.getFileUploadSettings(e)}),e=>Object(a.bindActionCreators)({getFileUploadSettings:r.actions.fileUploadSettings.loadFileUploadSettings},e))(this)}getSettings(){return this.fileUploadSettings}};d=Object(n.__decorate)([Object(n.__param)(0,Object(o.b)("$q")),Object(n.__param)(1,Object(o.b)("$ngRedux"))],d);class u extends d{}i.module(l,[]).service(c,d)},k9iv:function(e,t,s){"use strict";var n=s("nsO7"),i=s("Llzl"),r=s("ERkP"),o=s("5MwF"),a=s("0JpG"),l=s("12mu"),c=s("zGdY"),d=s("0gcN"),u=s("1ZbL"),h=s("ReOc");const m="ultra.components.directives.sessionDebugModalButton",p={Class:e=>{const[t,s]=r.useState("");return r.useEffect(()=>{h.a.getDebugInfoFriendly().then(e=>s(e.join("\r\n")))},[]),r.createElement(d.SessionDebugModalButton,{sessionDebug:t})},renderLocalized:!0,withProvider:!0,withErrorModalBoundary:!1};i.module(m,[a.moduleName]).component("bbSessionDebugModalButton",Object(u.a)(p));var g=s("W/rt"),b=s("zlFc"),f=s("9ZjI"),v=s("TFjq"),S=s("PqsU"),y=s("sqUP"),C=s("nL6A"),I=s("cGmE"),$=s("q4pc"),w=s("krSA");s.d(t,"c",(function(){return T})),s.d(t,"d",(function(){return E})),s.d(t,"a",(function(){return k})),s.d(t,"b",(function(){return b}));const T="ultra.components.services.errorModal",E="errorModal";class k extends r.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(){this.props.errorModalService.showDefaultErrorModal()}render(){return this.state.hasError?r.createElement("div"):this.props.children}}class P{constructor(){this.isModalClosed=!0,this.handlers=[],this.$get=[l.b,"$rootScope","$q","$window","$injector",function(e,t,s,n,i){return this.$modal=e,this.$rootScope=t,this.$q=s,this.$injector=i,this.$window=n,window.addEventListener("show-debug-error-modal",()=>{this.showDefaultErrorModal()}),this}]}onErrorResponse(e){this.handlers.push(e)}handleApiError(e,t){var s,i,r,o;if(!e||null==e.status)return;if(this.$window.document.getElementsByClassName("ms-Panel").length)return;const a={response:e,errorHandler:t};if(e.status===c.HttpStatus.Forbidden)"Question could not be created with existing attempt(s)"===(null===(s=e.data)||void 0===s?void 0:s.message)?a.template=g:a.template=b;else if(e.status===c.HttpStatus.NotFound)n.includes(null===(i=e.data)||void 0===i?void 0:i.message,"No course content found for content id")?a.template=f:a.template=v;else if(e.status===c.HttpStatus.Conflict)a.template=S;else if(507===e.status)a.template=y;else if(e.status>=400&&e.status<=599)if(e.status===c.HttpStatus.BadRequest&&(null===(r=e.data)||void 0===r?void 0:r.code)===P.COURSE_IS_CLOSED_CODE)a.template=C;else if(e.status===c.HttpStatus.BadRequest&&n.includes(null===(o=e.data)||void 0===o?void 0:o.message,"The input was too large"))a.template=$;else{let t;this.handlers.some(s=>(t=this.$injector.invoke(s,void 0,{response:e}))&&void 0!==t.tpl),a.template=t&&t.tpl||I,a.scope=t&&t.scope}a.template&&this.openModal(a)}showDefaultErrorModal(){const e={template:v};this.openModal(e)}handleError(e,t){if(!e)return;const s={errorString:e,template:w,errorHandler:t};this.openModal(s)}getReactErrorBoundary(){return this.reactErrorBoundary}openModal(e){if(this.isModalClosed){if(!e||!e.template)throw new Error("Modal configuration template was not supplied");let t=e.scope||this.$rootScope;o.a.errorDetails&&((t=this.$rootScope.$new()).response=e.response),t.errorString=e.errorString;const s={template:e.template,scope:t,resolve:{translations:[a.serviceName,e=>e.loadBundle("components/services/error-modal")]}};this.isModalClosed=!1,this.modalInstance=this.$modal.open(s),this.modalInstance.result.then(()=>{},()=>{this.isModalClosed=!0,e.errorHandler&&e.errorHandler()})}}}P.COURSE_IS_CLOSED_CODE="bb-rest-course-is-closed";class A extends P{}i.module(T,[a.moduleName,l.a,m]).provider(E,P)},kH1j:function(e,t,s){var n=s("ziER"),i=s("5JeM"),r=new n({id:"icon-medium-programs",use:"icon-medium-programs-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-programs"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M17 3h6v20h-6zM9 7h8v16H9zM1 1h8v22H1zM1 19h8M1 5h8M12 11h2M12 19h2M17 19h6M20 7v3" /></symbol>'});i.add(r);e.exports=r},kirn:function(e,t){e.exports='<bb-modal class="notification"\n  modal-title-key="course.content.assessment.settings.dueDate.isLateAttemptCreationDisallowed.label"\n  analytics-id-tag-prefix="course.content.assessment.settings.dueDate.isLateAttemptCreationDisallowed">\n  <div name="modal-contents">\n    <p bb-translate>course.content.assessment.settings.dueDate.isLateAttemptCreationDisallowed.restriction.description\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" ng-click="$parent.$close(); assessmentOverview.navigateAttemptReview();"\n    class="button confirm-ok js-primary-button ng-scope" bb-translate\n    analytics-id="course.content.groupAttempt.edit.alreadySubmitted.dismiss">\n    course.content.groupAttempt.edit.alreadySubmitted.dismiss\n  </button>\n</bb-modal>\n'},klG7:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-translate-options="translateOpts"\n          analytics-id-tag-prefix="components.services.error-modal.error-external-questions">\n  <div name="modal-contents">\n    <p bb-translate>{{descriptionKey}}</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.services.error-modal.dismiss">components.services.error-modal.dismiss</button>\n</bb-modal>\n'},krSA:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p>{{ errorString }}</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},lAEu:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s("D57K"),i=s("n7/H"),r=s.n(i),o=s("DN+C"),a=s("tfZW");class l extends r.a{constructor(e,t={defaultLocale:"en",production:!1,urlRoot:""}){super(e,t),this.babelfishInstance=e,this.options=t,this.overrideLoader=a.a.getInstance()}_load(e){return l._loadPromises[e]?l._loadPromises[e]:(l._loadPromises[e]=new i.InstantPromise(t=>{s("RRs6")("./"+e+"/_combined.json").then(e=>t(e.default?e.default:e)).catch(()=>t(null))}),l._loadPromises[e])}getPreferredLocales(e){return[e].concat(super.getPreferredLocales(this.overrideLoader.getBaseLocale(e)||e))}}l._loadPromises={},Object(n.__decorate)([Object(o.LRUMemoize)(2)],l.prototype,"getPreferredLocales",null)},lBPC:function(e,t){e.exports='\n<footer class="panel-footer notification toast-container">\n  <bb-save-tray tray-type="LoadMoreResults"\n                tray-id="{{::trayId}}"\n                tray-localization-keys-prefix="{{::trayLocalizationKeysPrefix}}">\n  </bb-save-tray>\n</footer>'},lCpV:function(e,t,s){"use strict";var n=s("nbDY"),i=s.n(n);class r extends i.a{}r.Discussions=new r("discussions"),r.Participants=new r("participants"),t.a=r},lDJ8:function(e,t,s){"use strict";s("abLi"),s("6BRP");var n=s("nsO7"),i=s("5iHu"),r=s("Llzl"),o=s("0JpG"),a=s("nPfc"),l=s("lEL+"),c=s("GbAM");s.d(t,"a",(function(){return d}));const d="ultra.directives.validationMessages";class u{constructor(e,t,s,n,i,r){this.$rootScope=e,this.scope=t,this.element=s,this.attrs=n,this.form=i,this.timeout=r,this.error=!1,this.immediateUpdate=!1,this.elements=[],u._$rootScope=e,t.labels=[],u.onDirectiveAdded(),t.$on("$destroy",()=>{u.onDirectiveRemoved()});const o=n.for;if(!o)throw new Error("`for` attribute is required.");o.split(",").forEach(e=>{const t=i[e];null==t.$warning&&(t.$warning={}),null==t.$errorImmediate&&(t.$errorImmediate={}),this.elements.push(t)}),t.$watch(this.updateMessages.bind(this)),t.$watch(()=>document.activeElement,(e,t)=>{e!==t&&this.updateMessages()}),t.$watch(()=>t.showErrors),this.elements&&this.elements.length&&t.$watch(()=>this.elements[0].$invalid,(e,t)=>{e&&e!==t?(this.immediateUpdate=!0,this.updateMessages()):this.immediateUpdate=!1})}updateMessages(){this.scope.showOnsubmitErrors=!1,this.scope.showErrors=!1,this.scope.showImmediateErrors=!1,this.scope.showWarnings=!1,this.scope.labels.length=0;let e=[];if(this.form.$submitted){const t=n.filter(this.elements,e=>Object.keys(e.$error).length>0);e=n.map(t,"$label");const s=n.merge.apply(null,n.map(t,"$error"))||{},i=Object.keys(s);i.length>0&&(this.scope.showOnsubmitErrors=!0,this.scope.onsubmitErrors={},i.forEach(e=>{this.scope.onsubmitErrors[e+"Onsubmit"]=s[e]}),this.readAriaLiveMessage(this.element.find(".form-element-onsubmit-errors").text(),"alert"))}else{const t=document.activeElement,s=n.find(this.elements,{$name:t.name});if(s&&s.$errorImmediate&&Object.keys(s.$errorImmediate).length>0)return this.scope.showImmediateErrors=!0,this.scope.immediateErrors=s.$errorImmediate,this.readAriaLiveMessage(this.element.find(".form-element-immediate-errors").text(),"alert"),!0;if(!u.mouseIsDown||this.error||this.immediateUpdate){const s=this.immediateUpdate?this.elements:n.filter(this.elements,e=>(e.$touched||e.$dirty||this.scope.checkWhenInit&&this.scope.checkWhenInit())&&(!(t.name===e.$name)||this.scope.immediate&&this.scope.immediate())),i=n.filter(s,e=>Object.keys(e.$error).length>0),r=n.merge.apply(null,n.map(i,"$error"))||{};r&&Object.keys(r).length>0?(this.error=this.scope.showErrors=!0,this.scope.errors=r,e.push.apply(e,n.map(i,"$label")),this.readAriaLiveMessage(this.element.find(".form-element-errors").text(),"alert")):this.error=!1}if(!this.scope.showOnsubmitErrors&&!this.scope.showErrors){const e=n.filter(this.elements,e=>Object.keys(e.$warning).length>0),t=n.merge.apply(null,n.map(e,"$warning"))||{};t&&Object.keys(t).length>0&&(this.scope.showWarnings=!0,this.scope.warnings=t,this.readAriaLiveMessage(this.element.find(".form-element-warnings").text(),"status"))}}return this.scope.labels.push.apply(this.scope.labels,n.compact(e)),!0}readAriaLiveMessage(e,t){this.timeout(()=>{"alert"===t?this.scope.$root.$broadcast(c.a,e.trim()):this.scope.$root.$broadcast(c.b,e.trim())},this.scope,0,!1)}}u.mouseIsDown=!1,u._directiveCount=0,u.onDirectiveAdded=()=>{const e=0===u._directiveCount;u._directiveCount++,e&&(u.mouseDownHandler||(u.mouseDownHandler=e=>{const t=i(e.target);(t.parents("ng-form").length||t.parents("form").length)&&u._$rootScope.$apply(()=>{t.is("[type=submit]")||(u.mouseIsDown=!0)})}),u.mouseUpHandler||(u.mouseUpHandler=e=>{const t=i(e.target);(t.parents("ng-form").length||t.parents("form").length)&&u._$rootScope.$apply(()=>{u.mouseIsDown=!1})}),i(document).on("mousedown",u.mouseDownHandler),i(document).on("mouseup",u.mouseUpHandler))},u.onDirectiveRemoved=()=>{const e=u._directiveCount<=1;u._directiveCount--,e&&(i(document).off("mousedown",u.mouseDownHandler),i(document).off("mouseup",u.mouseUpHandler))};class h{constructor(e,t,s){this.bbLocalize=e,this.$rootScope=t,this.timeout=s,this.scope={immediate:"&?",checkWhenInit:"&?"},this.require="^form",this.restrict="A",this.transclude=!0,this.link=(e,t,s,n)=>(this.bbLocalize.loadBundle("components/directives/validation-messages"),new u(this.$rootScope,e,t,s,n,this.timeout)),this.template=a}}class m extends h{}r.module(d,["ngMessages",o.moduleName]).directive("bbValidationMessages",[o.serviceName,"$rootScope",l.b,(e,t,s)=>new h(e,t,s)]).directive("ngModel",()=>({restrict:"A",require:"ngModel",priority:-9999,link:(e,t,s,n)=>{const i=t[0],r=t.parents().last();if(i.hasAttribute("aria-label"))e.$watch(()=>i.getAttribute("aria-label"),e=>n.$label=e);else if(i.hasAttribute("aria-labelledby")){const t=i.getAttribute("aria-labelledby").split(" ")[0],s=r.find("#"+t)[0];s&&e.$watch(()=>s.textContent,e=>n.$label=e)}else{const t=r.find('label[for="'+i.id+'"]')[0];t&&e.$watch(()=>t.textContent,e=>n.$label=e)}}}))},"lEL+":function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r}));var n=s("Llzl");const i="ultra.services.timeout",r="timeout";n.module(i,[]).factory(r,["$timeout",e=>{const t=(t,s,n,i)=>{const r=e((function(...e){return r.__bb_unregister_scope_destroy__&&(r.__bb_unregister_scope_destroy__(),r.__bb_unregister_scope_destroy__=null),t.apply(this,e)}),n,i);return r.__bb_unregister_scope_destroy__=s.$on("$destroy",()=>{e.cancel(r)}),r};return t.cancel=t=>(t&&t.__bb_unregister_scope_destroy__&&(t.__bb_unregister_scope_destroy__(),t.__bb_unregister_scope_destroy__=null),e.cancel(t)),t}])},lTRw:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return d}));s("QLzv");var n=s("Bu0u"),i=s("nkTj"),r=s("yCC5"),o=s("Q/M7"),a=s("Rjd/");const l=r.Y;class c{static fromValue(e){return c[e]}}c.ALL={resetShowComments:()=>!0,getValue:()=>"ALL",validate:e=>!0},c.BYCOLUMNS={resetShowComments:()=>!1,getValue:()=>"BYCOLUMNS",validate:e=>e&&!!e.length},c.HISTORYLOG={resetShowComments:()=>!0,getValue:()=>"HISTORYLOG",validate:e=>!0};class d{static fromValue(e){return d[e]}}d.MYDEVICE={resetContentCollection:()=>!0,getValue:()=>"MYDEVICE",validate:e=>!0,openUrl:e=>{const t=o.j();window.location.href=t+e}},d.CONTENTCOLLECTION={resetContentCollection:()=>!1,getValue:()=>"CONTENTCOLLECTION",validate:e=>!!e,openUrl:e=>()=>{}},a.a.factory(l,["restmod",i.d,(e,t)=>e.model().mix({grades:{hasMany:r.gb},columns:{hasMany:r.fb},attempts:{hasMany:r.cb},categories:{hasMany:r.eb},performancecodes:{hasMany:r.ib},schemas:{hasMany:r.jb},bulkView:{hasOne:r.db,path:"grades/bulkView"},settings:{hasOne:r.Z},groupAttempts:{hasMany:r.hb},summaries:{hasMany:r.r},$extend:{Record:{getDownloadUrl(e){if(!e||!e.dataScopeType||!e.delimiterType)throw new n.a({message:"dataScoreType and delimiterType must be set"});return this.$send({method:"POST",url:this.$url()+"/prepareDownload",data:{...e,dataScopeType:e.dataScopeType.getValue(),downloadTo:e.downloadTo.getValue()}},(function(e){this.$unwrap(e.data)})).$asPromise()},validateCalculatedFormula(e){if(!e)throw new n.a({message:"formula data must be set"});return this.$send({method:"POST",url:this.$url()+"/validateCalculatedFormula",data:e}).$allow([400]).$asPromise().then(e=>200===e.$response.status)},parseUploadedGradebook(e){return this.$send({method:"GET",url:this.$url()+"/parseUploadedGradebook",params:e},(function(e){this.$unwrap(e.data)})).$allow([400,403,404]).$asPromise()},importGradebook(e){return this.$send({method:"POST",url:this.$url()+"/importGradebook",data:e},(function(e){this.$unwrap(e.data)})).$allow([400,403,404]).$asPromise()}}}})])},"lUN/":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("5iHu");function i(){return n.extend(n.expr[":"],{tabbable(e){const t=n.attr(e,"tabindex"),s=null!=t;return(!s||t>=0)&&function(e,t){let s,i,r,o,a;const l=e.nodeName.toLowerCase();if("area"===l)return s=e.parentNode,i=s.name,!(!e.href||!i||"map"!==s.nodeName.toLowerCase())&&((r=n("img[usemap='#"+i+"']")).length>0&&r.is(":visible"));/^(input|select|textarea|button|object)$/.test(l)?(o=!e.disabled)&&(a=n(e).closest("fieldset")[0])&&(o=!a.disabled):o="a"===l&&e.href||t;return o&&n(e).is(":visible")}(e,s)}})}},lVRt:function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"d",(function(){return o}));const n="currentCourse",i="membership",r="currentContent",o="studentPreviewStatus"},lmMM:function(e,t,s){"use strict";(function(e){s.d(t,"d",(function(){return m})),s.d(t,"a",(function(){return b})),s.d(t,"b",(function(){return S})),s.d(t,"c",(function(){return y}));var n=s("nsO7"),i=s("Llzl"),r=s("nbDY"),o=s.n(r),a=s("Fvsw"),l=s("0JpG"),c=s("12mu"),d=s("pjml"),u=s("abE0"),h=s("Y+9S");const m="ultra.directives.confirmationNeeded",p="components.directives.confirmation-needed.",g="dont-ask-again",b="show-confirmation",f="{{context}}.confirmation",v="-";class S extends o.a{}function y(e,t){return p+t+v+e}S.Always=new S("always"),S.Once=new S("once"),S.UserChoice=new S("userChoice");class C{constructor(e,t,s,n,i,r){this.scope=e,this.attrs=s,this.$q=n,this.bbContext=i,this.$modal=r,this.clickHandling=!1,this.scope.confirmationNeeded=this,this.scope.modalAriaType=this.attrs.modalAriaType,this.scope.nextSelector=this.attrs.nextSelector,e.$on(b,(e,t,s)=>{t===this.attrs.modalName&&this.handleButtonClick(s)}),t.on("click",e=>{this.handleButtonClick(e)}),e.$on("$destroy",()=>{t.off()}),e.$on("dismiss-confirmation",()=>{this.modalInstance&&this.modalInstance.dismiss()})}handleButtonClick(e){if(this.clickHandling)return;let t;if(this.clickHandling=!0,this.attrs.getConfirmationKeyAndShowType)t=this.$q.when(this.scope.$eval(this.attrs.getConfirmationKeyAndShowType));else{if(!this.attrs.bbConfirmationNeeded)return void(this.clickHandling=!1);t=this.$q.when({confirmationKey:this.attrs.bbConfirmationNeeded,showType:this.attrs.showType})}e&&(e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault()),t.then(t=>{if(t.confirmationKey)switch(this.resourceType=t.confirmationKey.replace("resource/",""),this.choices=[],S.parse(t.showType)){case S.Always:this.confirmAction(e);break;case S.Once:this.showConfirmationActionOnlyOnce(e);break;default:this.showConfirmationActionByUserChoice(e)}else this.invokeClickAction(e)})}showConfirmationActionOnlyOnce(e){this.bbContext.getPreference(this.createPreferenceKey(g),"false").then(t=>{"true"===t.value?this.invokeClickAction(e):this.confirmAction(e)})}createResourceKey(e){return p+e+v+this.resourceType}createPreferenceKey(e){return f.replace("{{context}}",this.resourceType+v+e).replace(/\-/g,".")}addToChoices(e,t,s){let n;n=this.attrs.modalContext&&"predict"===this.attrs.modalContext?{key:e,value:!!t,localizedKey:e,preferenceKey:this.createPreferenceKey(e),isDisable:!!s}:{key:e,value:!!t,localizedKey:this.createResourceKey(e),preferenceKey:this.createPreferenceKey(e),isDisable:!!s},this.choices.some(t=>t.key===e)||this.choices.push(n)}parseChoicesFromAttr(e){if(e&&e.length)for(let t=0;t<e.length;t++)this.addToChoices(e[t].key,e[t].value,e[t].isDisable)}showConfirmationActionByUserChoice(e){this.bbContext.getPreference(this.createPreferenceKey(g),"false").then(t=>{if("true"===t.value)if(this.attrs.choices){const t=JSON.parse(this.attrs.choices),s=[];t.forEach(e=>{s.push(this.bbContext.getPreference(this.createPreferenceKey(e.key),"false").then(t=>{const s="true"===t.value;this.scope.$emit(e.key,s)}))}),this.$q.all(s).then(()=>{this.invokeClickAction(e)})}else this.invokeClickAction(e);else this.addToChoices(g),this.confirmAction(e)},()=>{this.addToChoices(g),this.confirmAction(e)})}confirmAction(e){let t;this.scope.titleKey=this.createResourceKey("title"),this.scope.instructionsKey=this.createResourceKey("instructions"),this.scope.cancelKey=this.createResourceKey("cancel"),this.scope.okKey=this.createResourceKey("ok"),this.attrs.choices&&this.attrs.choices.length>0&&this.parseChoicesFromAttr(JSON.parse(this.attrs.choices)),t=this.attrs.customClass?u.replace(/class="notification"/,'class="notification '+this.attrs.customClass+'"'):u;const s=this;this.modalInstance=this.$modal.open({template:t,scope:s.scope,resolve:{translations:[l.serviceName,e=>e.loadBundle("components/directives/confirmation-needed")]},controller:["$scope",l.serviceName,function(e,t){e.okAction=()=>{e.$close(),s.okClicked=!0},e.cancelAction=()=>{s.attrs.otherChoiceAction?(e.$close(),s.okClicked=!1):e.$dismiss(),Object(h.notifyMobileApp)(h.MessageType.CancelClicked)};let i={};s.attrs.modalTranslateOptions&&(i=e.$eval(s.attrs.modalTranslateOptions)),e.modalTranslateOptions={},e.modalStrings={title:null,instructions:null,cancel:null,ok:null},Object.keys(e.modalStrings).forEach(s=>{e.modalTranslateOptions[s]=n.merge({key:e[s+"Key"]},i[s]),e.modalStrings[s]=t.translateSync(e.modalTranslateOptions[s])})}]}),this.modalInstance.result.then(()=>{this.okClicked?(this.persistResult(),this.invokeClickAction(e)):(this.scope.$eval(this.attrs.otherChoiceAction),this.clickHandling=!1)},()=>{this.attrs.dismissCallback&&this.scope.$eval(this.attrs.dismissCallback),this.clickHandling=!1})}persistResult(){switch(S.parse(this.attrs.showType)){case S.Always:this.choices.forEach(e=>{this.scope.$emit(e.key,e.value)});break;case S.Once:this.bbContext.setPreference(this.createPreferenceKey(g),"true");break;default:this.choices.forEach(e=>{e.value&&(this.scope.$emit(e.key,e.value),this.bbContext.setPreference(e.preferenceKey,e.value.toString()))})}}invokeClickAction(t){this.scope.$eval(this.attrs.fngClick||this.attrs.ngClick,{$event:t}),this.clickHandling=!1,this.scope.nextSelector&&e(this.scope.nextSelector).focus()}}class I{constructor(e,t,s){this.$q=e,this.bbContext=t,this.$modal=s,this.priority=100,this.restrict="A",this.scope=!0,this.compile=(e,t)=>({pre:(e,t,s)=>new C(e,t,s,this.$q,this.bbContext,this.$modal)})}}I.$inject=["$q",a.b,c.b,d.m.serviceName],i.module(m,["ngSanitize",a.a,c.a]).directive("bbConfirmationNeeded",["$injector",e=>e.instantiate(I)])}).call(this,s("5iHu"))},lr7J:function(e,t,s){"use strict";s("FNJT");var n=s("nsO7"),i=s("Llzl"),r=s("5MwF"),o=s("XGja"),a=s("hkqm"),l=s("lEL+"),c=s("PIPc");s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return u}));const d="ultra.components.directives.infiniteScroll",u="bbInfiniteScroll";class h{constructor(e,t,s,i,r,a,l){this.scope=e,this.element=t,this.attrs=s,this.$compile=i,this.$q=r,this.timeout=a,this.toast=l,this.isManualLoad=!1,this.promises=[];const d=s.$observe("infiniteScrollTrayId",e=>{this.trayId=e,d()});if(s.infiniteScrollLocalizationKeysPrefix){const e=s.$observe("infiniteScrollLocalizationKeysPrefix",t=>{this.localizationKeysPrefix=t,this.trayLocalizationKeysPrefix=t+".saveTray",e()})}else this.localizationKeysPrefix="components.directives.infinite-scroll",this.trayLocalizationKeysPrefix="";s.infiniteScrollLocalizationValues&&(this.localizationValues=e.$eval(s.infiniteScrollLocalizationValues)),e.$watchGroup([s.infiniteScrollTotalCount,s.infiniteScrollCurrentCount],e=>{if(null!=e[0]&&null!=e[1]){if(this.totalCount=e[0],this.currentCount=e[1],this.remainingCount=this.totalCount-this.currentCount,this.remainingCount<0)throw new Error(`The remainingCount of ${this.remainingCount} should never be a negative number!`);this.setLoadCount()}}),e.$watch(s.infiniteScrollDisabled,e=>{this.disabled=e});const h=e.$watch(s.infiniteScrollLoadLimit,e=>{null!=e&&(this.loadLimit=e,this.setLoadCount(),h())});let m;i(t)(e),this.timeout(()=>{m=i(c)(e).insertAfter(t)},this.scope,0,!1),this.scope.$on(u,(e,t,i)=>{if(this.trayId!==t)return;const r=this.$q.defer();if(i.then(()=>{r.resolve()}).catch(()=>r.resolve()),this.promises.push(r),r.promise.then(()=>n.remove(this.promises,e=>i===e)),this.cancelLoading=this.toast.showLoading({trayId:t,trayLocalizationKeysPrefix:this.trayLocalizationKeysPrefix,promise:r.promise}),this.attrs.infiniteScrollFocusableChildrenSelector&&this.isManualLoad){this.isManualLoad=!1;const e=this.loadCount;i.then(()=>{this.timeout(()=>{const t=this.element.find(this.attrs.infiniteScrollFocusableChildrenSelector);o.a(t.eq(t.length-e),null,s.infiniteScrollForceShowAncestorSelector)},this.scope,0,!1)})}}),this.scope.$on("$destroy",()=>{m&&m.remove(),this.breakPromises(),this.cancelLoading&&this.cancelLoading()})}breakPromises(){n.forEach(this.promises,e=>{e.resolve()})}loadMoreItems(){this.remainingCount>0&&(this.isManualLoad=!0,this.scope.$eval(this.attrs.bbInfiniteScroll))}get loadMoreLocalizationValues(){return i.extend({},this.localizationValues,{loadCount:this.loadCount})}setLoadCount(){null!=this.loadLimit&&null!=this.remainingCount&&(this.loadCount=Math.min(this.loadLimit,this.remainingCount))}}h.$inject=["scope","element","attrs","$compile","$q",l.b,a.b];class m{constructor(e){this.$injector=e,this.terminal=!0,this.compile=(e,t)=>(e,t,s)=>{const n=e.$eval(s.infiniteScrollCurrentCount),i=e.$eval(s.infiniteScrollTotalCount);null!=n&&null!=i&&n>=i||t.attr("infinite-scroll",s.bbInfiniteScroll),t.removeAttr("bb-infinite-scroll"),e.infiniteScroll=this.$injector.instantiate(h,{scope:e,element:t,attrs:s})}}}m.$inject=["$injector"],i.module(d,["infinite-scroll",l.a,a.a]).value("THROTTLE_MILLISECONDS",r.a.infiniteScrollThrottleMS).directive("bbInfiniteScroll",["$injector",e=>e.instantiate(m)])},m2oH:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>{if(!e||""===e)return!1;const t=e.toLowerCase().replace("_","-");return t.startsWith("ar")||t.startsWith("he")||"en-sc"===t||"en-sa"===t}},mhLG:function(e,t){e.exports='<bb-modal id="folder-drop-depth-limit-modal" class="notification js-folder-drop-limit"\n          modal-title-key="{{isChrome || hasFiles ? \'components.directives.fileUpload.folderDropDepthLimitTitle\' : \'components.directives.fileUpload.folderDropDepthLimitNotChromeTitle\'}}"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <ng-switch on="isChrome">\n      <div ng-switch-when="true">\n        <p>\n          <bb-translate>components.directives.fileUpload.folderDropDepthLimitFull</bb-translate>\n        </p>\n      </div>\n      <div ng-switch-default>\n        <ng-switch on="hasFiles">\n          <div ng-switch-when="true">\n            <p>\n              <bb-translate>components.directives.fileUpload.folderDropDepthLimitFullNotChromeAdditionalFiles</bb-translate>\n            </p>\n          </div>\n          <div ng-switch-default>\n            <p>\n              <bb-translate>components.directives.fileUpload.folderDropDepthLimitFulNotChromeNoMoreFiles</bb-translate>\n            </p>\n          </div>\n        </ng-switch>\n      </div>\n    </ng-switch>\n  </div>\n\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray" ng-switch on="isChrome || hasFiles">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.no">\n          <bb-translate>components.directives.fileUpload.no</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.yes">\n          <bb-translate>components.directives.fileUpload.yes</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="false">\n        <button class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},mkvA:function(e,t){e.exports='<div class="reveal-modal fade open" ng-class="{ in: $parent.animate }" role="{{::modal.ariaType}}" tabindex="-1" data-reveal\n     ng-multi-transclude-controller ng-attr-aria-label="{{::modal.titleString}}" ng-keydown="modal.handleKeyDown($event)">\n  <div class="reveal-modal__header">\n    <h1 class="reveal-modal__title" aria-describedby="modal-contents" bb-focus>\n      {{::modal.titleString}}\n    </h1>\n    <button class="close-reveal-modal standard-button light-background" \n            ng-click="modal.dismiss()" \n            bb-translate-attrs="{ \'aria-label\': \'global.close\' }"\n            analytics-id="{{modal.analyticsIdTagPrefix}}.modal.close.button">\n      <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n    </button>\n  </div>\n  <div id="modal-contents" class="reveal-modal__contents" ng-multi-transclude="modal-contents"></div>\n  <footer ng-multi-transclude="modal-footer" class="reveal-modal__footer">\n    <div class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n      <div ng-multi-transclude="modal-footer-help-link" class="reveal-modal__footer-help-link-container"></div>\n      <div class="reveal-modal__footer-buttons">\n        <span ng-multi-transclude="modal-footer-button-secondary" class="reveal-modal__footer-button-container"></span>\n        <span ng-multi-transclude="modal-footer-button-primary" class="reveal-modal__footer-button-container"></span>\n      </div>\n    </div>\n  </footer>\n  <div class="reveal-modal__dismiss" ng-class="{ \'hide\' : !modal.dismissString }">\n    <span class="reveal-modal__divider"></span>\n    <button class="button button--text dismiss-message expand" ng-click="modal.dismiss()" analytics-id="{{modal.analyticsIdTagPrefix}}..modal.dismiss.button">\n      <span>{{::modal.dismissString}}</span>\n    </button>\n  </div>\n</div>\n'},n1KZ:function(e,t){e.exports='<footer class="panel-footer notification row collapse" ng-click="toastClicked()"\n        analytics-id="components.services.toast.clicked">\n  <bb-save-tray toast-message="::message" toast-short-message="::shortMessage" toast-icon="::icon" toast-class="::toastClass" toast-status="::toastStatus"></bb-save-tray>\n</footer>\n'},nL6A:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.services.error-modal.error-course-is-closed.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-course-is-closed">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-course-is-closed.description</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button large reload-page-button js-primary-button"\n          analytics-id="components.services.error-modal.error-course-is-closed.alt"\n          bb-translate>components.services.error-modal.error-course-is-closed.alt</button>\n</bb-modal>\n'},nPfc:function(e,t){e.exports='\x3c!-- Onsubmit Errors first --\x3e\n<script type="text/ng-template" id="default-onsubmit-error-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.errors.invalid_bbml_markups</span></span>\n  <span ng-message="numberInvalidOnsubmit"><span bb-translate>components.directives.validation.messages.onsubmitErrors.number_invalid</span></span>\n  <span ng-message="numberLargeOnsubmit"><span bb-translate translate-values="{ value: onsubmitErrors.numberLargeOnsubmit.max }">components.directives.validation.messages.onsubmitErrors.number_large</span></span>\n  <span ng-message="numberSmallOnsubmit"><span bb-translate translate-values="{ value: onsubmitErrors.numberSmallOnsubmit.min }">components.directives.validation.messages.onsubmitErrors.number_small</span></span>\n  <span ng-message="maxlengthOnsubmit"><span bb-translate>components.directives.validation.messages.onsubmitErrors.maxlength</span></span>\n  <span ng-message="urlOnsubmit"><span bb-translate>components.directives.validation.messages.errors.url</span></span>\n  <span ng-message="requiredOnsubmit"><span bb-translate>components.directives.validation.messages.errors.required</span></span>\n  <span ng-message="emailOnsubmit"><span bb-translate>components.directives.validation.messages.errors.email</span></span>\n  <span ng-message="timeOnsubmit"><span bb-translate>components.directives.validation.messages.errors.time</span></span>\n  <span ng-message="dateOnsubmit"><span bb-translate>components.directives.validation.messages.errors.date</span></span>\n<\/script>\n\n\x3c!-- Errors --\x3e\n<script type="text/ng-template" id="default-error-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.errors.invalid_bbml_markups</span></span>\n  <span ng-message="rangeInvalid"><span bb-translate translate-values="{ value: errors.rangeInvalidArgs.min }">components.directives.validation.messages.errors.range_invalid</span></span>\n  <span ng-message="numberInvalid"><span bb-translate>components.directives.validation.messages.errors.number_invalid</span></span>\n  <span ng-message="numberLarge"><span bb-translate translate-values="{ value: errors.numberLarge.max }">components.directives.validation.messages.errors.number_large</span></span>\n  <span ng-message="numberSmall"><span bb-translate translate-values="{ value: errors.numberSmall.min }">components.directives.validation.messages.errors.number_small</span></span>\n  <span ng-message="maxlength"><span role="status" aria-live="polite" bb-translate translate-values="{ diff: errors.maxlength.diff }">components.directives.validation.messages.errors.maxlength.plural</span></span>\n  <span ng-message="url"><span bb-translate>components.directives.validation.messages.errors.url</span></span>\n  <span ng-message="required"><span bb-translate>components.directives.validation.messages.errors.required</span></span>\n  <span ng-message="email"><span bb-translate>components.directives.validation.messages.errors.email</span></span>\n  <span ng-message="phoneNumber"><span bb-translate>components.directives.validation.messages.errors.phone_number_noSymbolsOrSpaces</span></span>\n  <span ng-message="time"><span bb-translate>components.directives.validation.messages.errors.time</span></span>\n  <span ng-message="date"><span class="js-error-date" bb-translate>components.directives.validation.messages.errors.date</span></span>\n  <span ng-message="maxDate"><span bb-translate translate-values="{ value: errors.maxDate.dateMax }">components.directives.validation.messages.errors.max_date</span></span>\n  <span ng-message="minDate"><span bb-translate translate-values="{ value: errors.minDate.dateMin }">components.directives.validation.messages.errors.min_date</span></span>\n  <span ng-message="schemaSymbolString"><span bb-translate>components.directives.validation.messages.errors.schema_symbol_string</span></span>\n<\/script>\n\n\x3c!-- Immediate Errors --\x3e\n<script type="text/ng-template" id="default-immediate-error-messages">\n  <span ng-message="maxlengthImmediate"><span role="status" aria-live="polite" bb-translate translate-values="{ diff: immediateErrors.maxlengthImmediate.diff }">components.directives.validation.messages.errors.maxlength.plural</span></span>\n<\/script>\n\n\x3c!-- Warnings --\x3e\n<script type="text/ng-template" id="default-warning-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.warnings.invalid_bbml_markups_cleanup</span></span>\n  <span ng-message="maxlengthWarning"><span role="status" aria-live="polite" bb-translate translate-values="{ left: warnings.maxlengthWarning.left }">components.directives.validation.messages.warnings.maxlength.plural</span></span>\n<\/script>\n\n<div class="bb-validation-messages form-element-onsubmit-errors" ng-class="{\'sr-only\': !showOnsubmitErrors}">\n  <div ng-repeat="label in labels track by label" class="sr-only">\n    <div bb-translate translate-values="{ label: label }">components.directives.validation.messages.onsubmitFieldHasError</div>\n  </div>\n\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="onsubmitErrors">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-onsubmit-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-errors" ng-class="{\'sr-only\': !showErrors}">\n  <div ng-repeat="label in labels track by label" class="sr-only">\n    <div bb-translate translate-values="{ label: label }">components.directives.validation.messages.fieldHasError</div>\n  </div>\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="errors">\n    <ng-transclude class="js-error-message"></ng-transclude>\n    <div ng-messages-include="default-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-errors" ng-class="{\'sr-only\': !showImmediateErrors}">\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="immediateErrors">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-immediate-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-warnings" ng-class="{\'sr-only\': !showWarnings}">\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="warnings">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-warning-messages"></div>\n  </div>\n</div>\n'},nYZ0:function(e,t,s){"use strict";s.d(t,"b",(function(){return S})),s.d(t,"d",(function(){return y})),s.d(t,"f",(function(){return C})),s.d(t,"a",(function(){return I})),s.d(t,"e",(function(){return w})),s.d(t,"c",(function(){return k}));var n=s("Llzl"),i=s("nsO7"),r=s("+O05"),o=s("lmMM"),a=s("k9iv"),l=s("pjml"),c=s("e6jQ"),d=s("Q/M7"),u=s("adx1"),h=s("IbyE"),m=s("Sa5G"),p=s("yC9S"),g=s("zGdY"),b=s("AuQm"),f=s("VAMW"),v=s("6fZB");const S=9e5,y="ultra.services.content",C="contentService",I="content-update";class $ extends u.a{constructor(){if($._instance)throw new Error("Error: Instantiation failed: Use IndicatorCacheService.getInstance() instead of new.");super(),$._instance=this}static getInstance(){return $._instance}classConversationIndicatorRemoved(e,t,s,n){this.$emitEvent($.CLASS_CONVERSATION_INDICATOR_REMOVED,e,t,s,n)}groupConversationIndicatorRemoved(e,t,s,n){this.$emitEvent($.GROUP_CONVERSATION_INDICATOR_REMOVED,e,t,s,n)}$onClassConversationIndicatorRemoved(e){return super.$onEvent($.CLASS_CONVERSATION_INDICATOR_REMOVED,e)}$onGroupConversationIndicatorRemoved(e){return super.$onEvent($.GROUP_CONVERSATION_INDICATOR_REMOVED,e)}}function w(e,t){return e.$on("rootNodeElementFetched",t)}$._instance=new $,$.CLASS_CONVERSATION_INDICATOR_REMOVED="class-conversation-indicator-removed",$.GROUP_CONVERSATION_INDICATOR_REMOVED="group-conversation-indicator-removed";class T{constructor(e){this.service=e,this.key=f.TransitService.Content}generateDeleteConfirmationKey(e,t){const s=this.service.generateDeleteConfirmationKey(e,t);return Object(v.a)(s)}}class E{constructor(e,t,s,n,i,r,o,a){this.$q=e,this.DSCacheFactory=t,this.CourseModel=s,this.PartnerContentIdModel=n,this.errorModal=i,this.assessment=r,this.$rootScope=o,this.$ngRedux=a,this.rootNodeCache=t.createCache("rootNodes"),this.settingsCache=t.createCache("contentSettings"),this.indicatorsCache=t.createCache("indicators",{maxAge:S,deleteOnExpire:"aggressive"}),this.fetchIndicatorsPromiseCache={},this.indicatorCacheService=$.getInstance(),p.b.OnRootScope(o,"content-update",(e,t)=>this.refreshContentInCache(t)),this.subscribeToRedux(a),Object(f.registerService)(new T(this))}subscribeToRedux(e){e.connect(e=>({}),e=>({deleteContentInStore:t=>e(h.actions.content.deleteContentInStore(t))}))(this)}truncateDescription(e,t){if(t=t||E.MAX_LENGTH,!e||e.length<=t)return e;t-=" ...".length;let s=e.lastIndexOf(" ",t);return s<=0&&(s=t),e.substr(0,s)+" ..."}findRootNode(e,t){const s=this.getCacheKey(t,e.$pk);let n=this.rootNodeCache.get(s);var i,r,o;return n||(n=e.contents.$find(t.toString()),this.rootNodeCache.put(s,n),i=this.$rootScope,r=e.$pk,o=t,i.$broadcast("rootNodeElementFetched",r,o)),n}getCacheKey(e,t){return e.toString()+t}getSettings(e){return this.settingsCache.get(e)}putSettings(e,t){return this.settingsCache.put(e,t)}removeSettings(e){return this.settingsCache.remove(e)}getCourseIndicators(e){return this.indicatorsCache.get(`courseId_${e}`)}putCourseIndicators(e,t){return this.indicatorsCache.put(`courseId_${e}`,t)}removeCourseIndicators(e){return this.indicatorsCache.remove(`courseId_${e}`)}refreshContentInCache(e){if(!e)return;const t=e.courseId,s=m.g.getValues();for(let n=0;n<s.length;n++){const i=s[n],r=this.getCacheKey(i,t),o=this.rootNodeCache.get(r);if(o){if(this.updateCachedContent(o,e))return void this.rootNodeCache.put(r,o)}}}updateCachedContent(e,t){if(e.id===t.id)return null!=t.isAvailable&&(e.isAvailable=t.isAvailable),null!=t.visibility&&(e.visibility=t.visibility),null!=t.isPartiallyVisible&&(e.isPartiallyVisible=t.isPartiallyVisible),null!=t.isGroupContent&&(e.isGroupContent=t.isGroupContent),null!=t.assignedGroups&&(e.assignedGroups=t.assignedGroups),t.adaptiveReleaseRules&&(e.adaptiveReleaseRules=t.adaptiveReleaseRules),e.title=t.title,e.attachedForumLink=t.attachedForumLink,e.ui&&(void 0===e.ui.hasConversationAttached||e.isScorm())&&(e.ui.hasConversationAttached=!!t.attachedForumLink),e.updateProctoringSettings(t),!0;if(e.children)for(let s=0;s<e.children.length;s++){const n=e.children[s];if(this.updateCachedContent(n,t))return!0}return!1}getOrMakeContentInContentTree(e,t,s,n,i,r){return s?this.getContentInContentTree(e,t,s):this.makeContentInContentTree(e,t,n,i,r)}getContentInContentTree(e,t,s){let n,i;return e.$asPromise().then(e=>(e.children=e.children||e.getChildren({limit:0,recursive:!0}),e.children.$asPromise())).then(()=>{if(s){if(n=e.findInTreeById(s))n.isSafeAssignOn()||!n.isTest()&&!n.isAssignment()||n.$fetch({fields:"safeAssignOptions"});else{const e="alignedGoals,assignedGroups,selfEnrollmentGroups.group";n=this.CourseModel.$new(t).contents.$find(s,{expand:e}).$allow([403])}return n.$asPromise()}}).then(()=>{if(n&&n.parentId)return(i=e.findInTreeById(n.parentId))||(i=this.CourseModel.$new(t).contents.$find(n.parentId)),i.$asPromise()}).then(()=>({content:n,parentFolder:i}))}makeContentInContentTree(e,t,s,n,i,r){let o,a;return e.$asPromise().then(e=>(e.children=e.children||e.getChildren({limit:0}),e.children.$asPromise())).then(()=>(a=this.getParentFolder(s,t,e)).$asPromise()).then(()=>(a.children=a.children||a.getChildren({limit:0}),a.children.$asPromise())).then(()=>{let e=a.children.indexOfItemById(void 0);return!r&&e>=0&&a.children[e].positionBefore===n&&a.children[e].positionAfter===i?o=a.children[e]:(o=a.children.$build(),(e=a.children.getInsertionIndex(n,i,!0,a.hasMoreChildren))>=0&&o.addAndRevealAtIndex(e),a.children.paging&&a.children.paging.count++),null!=n&&(o.positionBefore=n),null!=i&&null==n&&(o.positionAfter=i),o.parentId=s||a&&a.id,o.depth=a&&null!=a.depth?a.depth+1:void 0,o.courseId=t,{content:o,parentFolder:a}})}getParentFolder(e,t,s){let n;return e?(n=s.findInTreeById(e))||(n=this.CourseModel.$new(t).contents.$find(e).$allow([g.HttpStatus.Forbidden])):n=s,n}makeSoftLinkContentInContentTree(e,t,s,n,i,r){return this.makeContentInContentTree(t,s,n,i,r).then(t=>{const s=t.content;return e&&e.$pk&&(s.contentHandler=l.p.ContentHandler.CourseLink,s.ui.linkSource=e),s.id=null,s.description=e.description,s.title=e.title,s.courseId=e.courseId,s.isAvailable=e.isAvailable,s.visibility=e.visibility,s.contentDetail={"resource/x-bb-courselink":{linkSourceId:e.id,linkSourceTable:"CONTENT"}},s})}isEmpty(e){return!e||0===e.trim().length}parseForumId(e){const t=e.split("/");return t[t.length-1]}determineVisibility(e,t){return e?g.ContentVisibility.Visible:g.ContentVisibility.Hidden}generateDeleteConfirmationKey(e,t){const s=this.$q.defer();return e.ui.modalShowType=o.b.UserChoice.toString(),!e.isFolder()&&!e.isLearningModule()||e.isRoot()?e.canHaveSharedGradingColumn()&&e.hasGradingColumn()&&m.f.PartnerCloud.isEqualTo(e.contentHandler)?this.PartnerContentIdModel.getContentIds(e.courseId,e.linkRef).then(t=>{t.contentIds.length>1?(e.ui.modalShowType=o.b.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-shared-grade-column",s.resolve(e)):this.checkForAttempts(e,s)}).catch(t=>{this.errorModal.handleApiError(t.$response),s.reject(e)}):this.checkForAttempts(e,s):e.isBbPage()?(e.ui.deleteConfirmationKey=m.f.Page.toString(),e.hasCourseLinks().then(t=>{t&&(e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+"-has-course-links",e.ui.modalShowType=o.b.Always.toString())}).catch(()=>{}).finally(()=>{s.resolve(e)})):e.getChildren().$then(n=>{if(n&&n.length>0){e.ui.modalShowType=o.b.Always.toString();const i=n.filter(e=>e&&e.isDiscussion()).length;e.hasGradedContentItems().then(r=>{r?e.ui.deleteConfirmationKey=e.contentHandler+"-contains-graded-items":i===n.length?e.ui.deleteConfirmationKey=e.contentHandler+"-all-discussions-"+t:e.ui.deleteConfirmationKey=i>0?e.contentHandler+"-contains-discussions":e.contentHandler+"-no-discussions",s.resolve(e)})}else e.ui.deleteConfirmationKey=e.contentHandler+"-empty",s.resolve(e)}),s.promise}checkForAttempts(e,t){e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey(),e.hasCourseLinks().then(t=>{t&&(e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+"-has-course-links",e.ui.modalShowType=o.b.Always.toString())}).catch(()=>{}).finally(()=>{var s;if(e.canHaveAttempts()&&e.hasGradingColumn())e.ui.modalShowType=o.b.Always.toString(),e.getAttemptCount().then(s=>{s>0&&(e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+"-data"),t.resolve(e)}).catch(s=>{403===s.$response.status?(e.ui.modalShowType=o.b.Always.toString(),e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+"-unknown",t.resolve(e)):(this.errorModal.handleApiError(s.$response),t.reject(e))});else if(m.f.Discussion.isEqualTo(e.contentHandler))e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey(),e.$fetch().$then(s=>{const n=s.contentDetail[m.f.Discussion.toString()];n&&n.properties.allowForumGrading&&(e.ui.modalShowType=o.b.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-graded"),t.resolve(e)});else if(e.isJournal())e.$fetch().$then(s=>{const n=s.contentDetail[m.f.Journal.toString()].blog;n&&n.gradingAllowed&&(e.ui.modalShowType=o.b.Always.toString(),e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+"-graded"),t.resolve(e)});else if(m.f.CourseLink.isEqualTo(e.contentHandler)){const n=e.getLinkContentSource();if(m.f.Discussion.isEqualTo(null==n?void 0:n.contentHandler)){e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey();const t=n.contentDetail[m.f.Discussion.toString()];t&&t.properties.allowForumGrading&&(e.ui.modalShowType=o.b.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-graded")}else{const t="-course-link",i=(null==n?void 0:n.isBbPage())?e.ui.deleteConfirmationKey=m.f.Page.toString():null===(s=null==n?void 0:n.getContentDisplay())||void 0===s?void 0:s.deleteKey();e.ui.deleteConfirmationKey=i?i+t:e.getContentDisplay().deleteKey()+t}e.ui.modalShowType=o.b.Always.toString(),t.resolve(e)}else t.resolve(e)})}deleteContent(e){if(e.id){e.ui.isDeleted=!0;const t={};return(e.isGroupContent||e.isFolder())&&(t.deleteGroups=!0),(e.canHaveAttempts()||e.isDiscussion()||e.isFolder())&&(t.deleteGrades=!0),e.withParams(t).$destroy().$suppressErrorDialog().$asPromise().then(t=>(this.deleteContentInStore&&this.deleteContentInStore(e.id),t)).catch(t=>{e.ui.isDeleted=!1;const s=t.$response;return this.assessment.isExternallyRefQuestionsAPIError(s.data)?this.assessment.openHasExternallyRefQuestionsModal(this.getExternallyRefQuestionsModalType(e.contentHandler)):this.errorModal.handleApiError(s),this.$q.reject(s)})}return this.$q.when()}getExternallyRefQuestionsModalType(e){return m.f.Folder.isEqualTo(e)?r.b.FOLDER:r.b.ASSESSMENT}canOnlyCreateDiscussion(e){return e&&e.children&&e.children.permissions&&!e.children.permissions.create&&e.children.permissions.contentHandlerPermissionMap&&e.children.permissions.contentHandlerPermissionMap.createDiscussion}canCreateAllContent(e){return e&&e.children&&e.children.permissions&&e.children.permissions.create}convertBbMLToAttemptFileContentBlocks(e){const t=[];return this.convertBbMLToContentBlocks(e).forEach(e=>{"attemptFileBlock"in e&&t.push(e.attemptFileBlock)}),t}convertAttemptFileContentBlocksToBbML(e){const t=[];e.forEach(e=>{t.push({attemptFileBlock:e})});return this.convertContentBlocksToBbML(t,"question1 ")}convertBbMLToContentBlocks(e){const t=[],s=document.createElement("div");s.innerHTML=e;for(let e=0;e<s.children.length;e++){const n=s.children[e];if("A"===n.tagName)t.push(this.convertBbMLToFileBlock(n));else if("DIV"===n.tagName){const e=this.getBlockIdFromBbML(n);t.push({textBlock:n.innerHTML.trim(),id:e})}}return t}convertBbMLToFileBlock(e){const t={file:{}};if(e.dataset&&e.dataset.bbfile)try{const s=JSON.parse(e.dataset.bbfile);t.alternativeText=s.alternativeText,t.ui={isRenderedInline:Object(b.isInlineRenderType)(s.render)},t.linkName=s.linkName,t.currentMimeType=s.mimeType}catch(e){}else if(e.dataset&&e.dataset.bbmedia)try{const s=JSON.parse(e.dataset.bbmedia);t.alternativeText=s.alternativeText,t.ui={isRenderedInline:Object(b.isInlineRenderType)(s.render)}}catch(e){}t.linkName||(t.linkName=e.innerHTML.substr(0,e.innerHTML.lastIndexOf("?"))),t.currentMimeType||(t.currentMimeType=e.innerHTML.substr(e.innerHTML.lastIndexOf("?")+1));let s=e.href;0===s.indexOf("http://localhost")&&(s=d.c(s.substr("http://localhost".length))),t.downloadUrl=s;const n=s.match(/xid-(\d+_\d+)/);return n&&(t.id=n[1]),{attemptFileBlock:t,id:this.getBlockIdFromBbML(e)}}convertContentBlocksToBbML(e,t){const s=document.createElement("div");return e.forEach(e=>{if("attemptFileBlock"in e){const t=document.createElement("a");if(t.href=e.attemptFileBlock.downloadUrl,e.attemptFileBlock.ui){const s={};e.attemptFileBlock.ui.isRenderedInline?s.render=h.FileRenderType.Inline:s.render=h.FileRenderType.Attachment,e.attemptFileBlock.alternativeText&&(s.alternativeText=e.attemptFileBlock.alternativeText),e.attemptFileBlock.linkName&&(s.linkName=e.attemptFileBlock.linkName),e.attemptFileBlock.currentMimeType&&(s.mimeType=e.attemptFileBlock.currentMimeType),t.dataset.bbfile=JSON.stringify(s)}e.id&&(t.id=e.id),t.innerHTML=e.attemptFileBlock.linkName+"?"+e.attemptFileBlock.currentMimeType,s.appendChild(t)}else if("textBlock"in e){const t=document.createElement("div");e.id&&(t.id=e.id),t.innerHTML=e.textBlock,s.appendChild(t)}e.isNewToBbML&&delete e.isNewToBbML}),(t||"")+s.innerHTML}getBlockIdFromBbML(e){let t=null;return t=e.id?e.id:this.generateBlockId()}generateBlockId(){return"bbml-editor-id_"+c.b()}fetchIndicatorsPerRequest(e){let t=this.fetchIndicatorsPromiseCache[e];return t||(t=this.CourseModel.$new(e).indicators.$fetch().$asPromise().then(t=>(this.putCourseIndicators(e,t),t),e=>{401!==e.$response.status&&(e.$response.status=null),console.error("Fetch indicators error!")}).finally(()=>{delete this.fetchIndicatorsPromiseCache[e]}),this.fetchIndicatorsPromiseCache[e]=t,t)}fetchIndicators(e,t){if(t)return this.fetchIndicatorsPerRequest(e);const s=this.getCourseIndicators(e);return s?this.$q.when(s):this.fetchIndicatorsPerRequest(e)}getCourseContentCache(e,t){const s=this.getCourseIndicators(e);return s?s.filter(e=>e.contentId===t)[0]:null}setClassConversationHasIndicatorToFalseInCache(e,t,s){let n=this.getCourseIndicators(e);if(n){const r=i.find(n,e=>e.contentId===t);r&&(r.classConversationHasIndicator=!1,r.groupIds||(n=i.filter(n,e=>e.contentId!==t)),this.putCourseIndicators(e,n),this.indicatorCacheService.classConversationIndicatorRemoved(e,t,!!r.groupIds,s))}}removeGroupIdFromIndicatorCache(e,t,s,n){if(!s)return null;let r=this.getCourseIndicators(e);if(r){const o=i.find(r,e=>e.contentId===t);if(o){if(o.groupIds=i.filter(o.groupIds,e=>s!==e),o.groupIds&&0===o.groupIds.length)return delete o.groupIds,o.classConversationHasIndicator||(r=i.filter(r,e=>e.contentId!==t)),this.putCourseIndicators(e,r),void this.indicatorCacheService.groupConversationIndicatorRemoved(e,t,o.classConversationHasIndicator,n);this.putCourseIndicators(e,r)}}}clearContentGroups(e,t){const s=this.$q.defer();if(e.assignedGroups&&e.assignedGroups.length){if(e.assignedGroups.some(e=>!e.group))throw new Error("Expected group to be expanded on content group assignments when clearing groups.");const n=e.assignedGroups.filter(e=>!e.group.groupSetId).map(e=>({method:"DELETE",relativeUrl:e.groupId}));n.length>0&&t.groups.batchUpdate(n),e.isGroupContent=!1,e.assignedGroups=[],e.saveAssignedGroups(!0).$asPromise().then(()=>{this.$rootScope.$broadcast(I,e),s.resolve(e)})}else s.resolve(e);return s.promise}canForcedSequenceBeEnabled(e){return e.canForcedSequenceBeEnabled()}}E.MAX_LENGTH=60,E.MAX_LENGTH_IN_CONTENT_ITEM=750,E.$inject=["$q","DSCacheFactory",l.m.serviceName,l.S.serviceName,a.d,r.h,"$rootScope","$ngRedux"];class k extends E{}n.module(y,["angular-data.DSCacheFactory",l.N,a.c,r.g]).service(C,E)},nawZ:function(e,t,s){"use strict";var n;!function(e){e.ModifyException="course.assessment.exceptions.MODIFY",e.ViewException="course.assessment.exceptions.VIEW"}(n||(n={})),t.a=n},neh4:function(e,t,s){"use strict";s.d(t,"a",(function(){return b}));s("JzsJ");var n=s("5MwF"),i=s("Llzl"),r=s("0JpG"),o=s("w9Zy"),a=s("Qbdf"),l=s("X455"),c=s("bF8R"),d=s("vdfi"),u=s("jhBu"),h=s("o5Lu"),m=s("TnpK"),p=s("pjml"),g=s("nmzr");const b="ultra.course.content.assignment.routes";i.module(b,[r.moduleName,c.a,u.a,h.h,m.b,a.b]).config([m.c,a.c,l.b,(e,t,i)=>{e.peekState("assignment",{abstract:!0,url:"/assignment/:assignmentId?courseId",resolve:{[a.d]:t.resolve,[l.c]:i.resolve,contentData:[a.d,c.b,m.d,(e,t,s)=>t.loadContentAndGrades({course:e,contentId:s.nextParams.assignmentId,contentHandler:p.p.ContentHandler.UltraAssignment})],currentContent:["contentData",e=>e.courseContent],currentColumn:["contentData",e=>null!=e.gradingColumn.rubricAssociations?e.gradingColumn.$asPromise():e.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise()]},peekStates:["conversations",g.CourseRoutes.COURSE_MESSAGE],peekViewName:"assignment-conversation@"}).peekState("assignment.router",{url:"/route",routingFunction:[p.m.serviceName,u.b,m.d,(e,t,s)=>{const n=s.nextParams.courseId?s.nextParams.courseId:s.prevParams.courseId;e.$new(n).contents.$find(s.nextParams.assignmentId).$then(e=>{e.canViewAsInstructor()?s.go(s.prev.name,s.prevParams).then(()=>{s.goPeekState("gradebook-item.assignment",{courseId:e.courseId,contentId:e.id,gradeitemView:"details"})}):s.go(s.prev.name,s.prevParams).then(()=>{s.goPeekState("assignment.view",{courseId:e.courseId,assignmentId:e.id})})})}]}).peekState("assignment.view",{url:"/view",resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assignment/assignment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])],prefetch:["$q",p.m.serviceName,m.d,(e,t,s)=>{const i=s.nextParams.courseId?s.nextParams.courseId:s.prevParams.courseId;n.a.features.httpEase&&t.$new(i).contents.$find(s.nextParams.assignmentId,{expand:"assignedGroups,associatedRubrics,alignedGoals"}).$then(e=>{t.$new(i).gradebook.columns.$find(e.getDeployedAssessment().gradingColumn.id,{expand:"associatedRubrics,rubricAssociations.rubricDefinition.alignedGoals,rubricAssociations.rubricDefinition.rows.alignedGoals"})})}]},require:[()=>Promise.all([s.e(12),s.e(0),s.e(1),s.e(2),s.e(4),s.e(59)]).then(s.bind(null,"pA7Z"))],pageTitle:"course.content.assignmentAttempt",peekStates:["conversations",g.CourseRoutes.COURSE_MESSAGE],peekViewName:"assignment-conversation@"}).peekState("assignment.view.attempt",{abstract:!0,url:"/attempt"}).peekState("assignment.view.attempt.edit",{url:"/{attemptId:_[0-9]+_1}",onEnter:[o.e,m.d,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],panelClass:"full",resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assignment/assignment"),t.loadBundle("features/course/goal-alignment/goal")])]},require:[()=>Promise.all([s.e(12),s.e(0),s.e(1),s.e(2),s.e(4),s.e(21),s.e(58),s.e(575)]).then(s.bind(null,"OXIQ"))],pageTitle:"course.content.assignmentAttempt",peekStates:["conversations",g.CourseRoutes.COURSE_MESSAGE,"rubric-evaluation","rubric-view",d.b],peekViewName:"assignment-conversation@"}).peekState("assignment.view.attempt.finished",{url:"/view",onEnter:[o.e,m.d,e=>{e.shrinkTopPanel()}],params:{gradeDetail:null},resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/assignment/assignment")]},require:()=>Promise.all([s.e(12),s.e(0),s.e(1),s.e(2),s.e(4),s.e(59)]).then(s.bind(null,"pA7Z")),pageTitle:"course.content.assignmentAttempt"}).peekState("assignment.grade",{url:"/grade",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/assignment/assignment")]},require:()=>Promise.all([s.e(12),s.e(0),s.e(1),s.e(2),s.e(4),s.e(59)]).then(s.bind(null,"pA7Z")),pageTitle:"course.content.assignmentGrading"})}])},"nh++":function(e,t,s){},nkTj:function(e,t,s){"use strict";s.d(t,"b",(function(){return p})),s.d(t,"f",(function(){return g})),s.d(t,"e",(function(){return b})),s.d(t,"d",(function(){return f})),s.d(t,"c",(function(){return v})),s.d(t,"g",(function(){return S})),s.d(t,"a",(function(){return y}));s("QLzv"),s("BnCD"),s("/fvP");var n=s("5iHu"),i=s("Llzl"),r=s("nsO7"),o=s("nbDY"),a=s.n(o),l=s("VdDF"),c=s("HDxW"),d=s("k9iv"),u=s("z6Q5"),h=s("Qbdf"),m=s("Q/M7");class p extends a.a{}p.GET=new p("GET"),p.POST=new p("POST"),p.PATCH=new p("PATCH"),p.DELETE=new p("DELETE");const g=e=>e,b="ultra.model.utilities",f="ultra.model.utilities.Utilities";function v(e,t){return null!=e?e:t}function S(e,t){if(e.$isCollection){return"PUT"===e.$response.config.method&&Array.isArray(t)?t.map(e=>e.statusCode>=200&&e.statusCode<300?i.fromJson(e.body):e.body):(e.paging=t&&t.paging,e.permissions=t&&t.permissions,t&&t.results)}return t}class y{static isValid(e){return!r.isEmpty(e)&&/^_\d+_\d+$/.test(e)}}let C;i.module(b,["restmod",d.c,u.a,c.a]).factory(f,["$http","$q",(e,t)=>{return{getDataMixin:(e,s,n)=>(i,r)=>{const o=(r=r||{}).path||"",a=r.overrideIdKey,l=r.params;return t.when(i).then(i=>{const c=t.defer();if(null==i||0===i.length)return c.resolve(i),c.promise;const d={};i.forEach(e=>{const t=function(e,t){return t.split(".").reduce((e,t)=>t?e&&e[t]:e,e)}(e,o+"."+(a||s));if(t){(d[t]=d[t]||[]).push(e)}});const u=Object.keys(d);return e(u,l).$asPromise().then(e=>{e.forEach((e,t)=>{d[u[t]].forEach(t=>{!function(e,t,s){const n=t.split(".");for(let t=0;t<n.length-1;t++)n[t]&&(e=e&&e[n[t]]);e&&(e[n[n.length-1]]=s)}(t,o+"."+(r.overrideResultKey||n),e)})}),c.resolve(i)}),c.promise})},createHooksToFetchParent:function(){function s(s,n){s.cache={get:()=>t.all([e(r.omit(s,"cache")),n.$resolve().$asPromise()]).then(([e])=>e)}}const n={"before-fetch-many":function(e){s(e,this.$scope.$scope)},"before-fetch":function(e){s(e,this.$scope.$scope.$scope)}};return function(e){return{"after-fetch-many":function(){this.forEach(t=>t[e]=this.$scope.$scope)},"after-fetch":function(){this[e]=this.$scope.$scope.$scope},...n}}}()}}]).factory("DateSerializer",()=>({encode:e=>l.a.parseDateToISOString(e),decode:e=>l.a.parseStringToDate(e)})).filter("localDate",()=>e=>l.a.convertToLocalDate(e)).factory("BbRestmodFindMany",["restmod","$q",u.b,"restmod.Preload",(e,t,s)=>e.mixin({$extend:{"Scope.canCreate":function(){return this.permissions&&this.permissions.create},"Scope.canEdit":function(){return this.permissions&&this.permissions.edit},"Scope.canDelete":function(){return this.permissions&&this.permissions.delete},Scope:{findMany(e,n,r){const o=this.$collection();return o.$always(()=>s.performBatch(s=>t.all(e.map(e=>{const t=this.$new(e).$fetch(i.extend({[u.c]:s},n));return(r||[]).length>0?t.$allow(r).$asPromise():t.$asPromise()}))).then(e=>{e.forEach(e=>o.push(e))}))}}},$hooks:{"before-find-many":function(e){e.method="PUT",e.data=(e.params&&e.params.ids||[]).map(t=>{const s=i.copy(e.params);return delete s.ids,{method:"GET",relativeUrl:t+(s&&"?"+n.param(s)||"")}}),e.params&&delete e.params.ids}}})]).factory("BbApiStyle",["restmod",e=>e.mixin((function(){this.setProperty("style","BB").setProperty("primaryKey","id")}))]).factory("BbEncodeUrl",["restmod","inflector",(e,t)=>e.mixin({$extend:{Model:{encodeUrlName:e=>t.camelize(e)}}})]).factory("BbUi",["restmod",e=>e.mixin({ui:{mask:!0,init:()=>({})}})]).factory("BbWithParams",["restmod",e=>e.mixin({$extend:{Record:{withParams(e,t){const s=function(n){n.params||(n.params={}),Object.keys(e).forEach(s=>{n.params[s]=t?t(n.params[s],e[s],s):e[s]}),this.$off("before-request",s)};return this.$on("before-request",s),this}}}})]).factory("BbApiErrorHandlerInjector",["restmod","$injector","$window","$rootScope",d.d,c.b,(e,t,s,n,i,r)=>e.mixin({$hooks:{"after-request-error":function(){this.__bb_suppressErrorDialog||setTimeout(()=>{this.$then(()=>{},r.handle)})}}})]).factory("BbCheckStatusCode",["restmod",e=>e.mixin({$extend:{Resource:{isStatusCode(e){return this.$response&&this.$response.status&&this.$response.status===e}}}})]).factory("BbPermissions",["restmod","restmod.Preload",e=>e.mixin({$extend:{Record:{canCreate(){return this.permissions&&this.permissions.create},canEdit(){return this.permissions&&this.permissions.edit},canDelete(){return this.permissions&&this.permissions.delete}}}})]).factory("BbPermissionsMask",["restmod",e=>e.mixin({permissions:{mask:"CU"}})]).factory("$ExtendRecord",["RMUtils",function(e){const t=Symbol("$extendRecord");return{$extend:{"Model.$extendRecord":function(e){return this[t]=this[t]||[],this[t].push(e),this},"Record.$decode":function(s,n){const i=this.$super.apply(this,arguments);if(void 0===this.$type)throw new Error("NOT_FOUND_$MODEL");return(this.$type[t]||[]).some(t=>{const n=t(i,s);return!!n&&(e.extendOverriden(i,n),!0)}),i}}}}]).factory("BbExpandParams",["restmod",e=>{const t=function(e){return!!r.isString(e)&&""!==e.trim()},s=function(e){let s;return s=Array.isArray(e)?e.filter(t):r.isString(e)?e.split(",").filter(t):[]},n=Symbol("$expand_params"),i=function(e){return function(e,t=new Set){const n=s(e);return n.length<=0||n.every(e=>t.has(e))}(e&&e.expand||"",this[n])?this.$resolve():this.$fetch(e)};return e.mixin({$hooks:{"after-request":function(e){this[n]=function(e){const t=e.config&&e.config.params&&e.config.params.expand,n=s(t);return new Set(n)}(e)}},$extend:{"Record.$fetchIfNotExpanded":i,"Collection.$fetchIfNotExpanded":i}})}]).factory("BbExcludeCourseActivity",["restmod","$injector",(e,t)=>e.mixin({$hooks:{"before-request":function(e){const s=t.get(h.e),n=e.url,i="GET"===e.method,r=!!s.courseId,o=/\/courses\/_\d+_1(\/gradebook\/(schemas|grades|columns|categories|summaries|attempts)|\/memberships|\/messageFolders|\/attendanceRecords|\/conversations|\/contents\/_\d)/.test(n);!r&&i&&o&&(e.url=Object(m.a)(n,"isExcludedFromCourseUserActivity","true"))}}})]).config(["restmodProvider",e=>{function t(e){e=e||[];const t=this.$promise=this.$promise||C.when(this),s=C.defer();return this.$promise=s.promise,t.then(e=>{s.resolve(e)},t=>{e.some(e=>{const s=[0];if("number"==typeof e)s[0]=e;else if("string"==typeof e){const t=e.split("-");s[0]=parseInt(t[0],10),s[1]=parseInt(t[1]||t[0],10)}return s[1]=s[1]||s[0],t&&t.$response.status>=s[0]&&t.$response.status<=s[1]})?s.resolve(t):s.reject(t)}),this}function s(){if(this.__bb_suppressErrorDialog=!0,!this.$promise)throw new Error("suppressErrorDialog must be called after performing an action, such as $fetch or $resolve");return this.$finally(()=>{this.__bb_suppressErrorDialog=!1})}function n(e,t){const s=Object.create(null);return Object.keys(e).forEach(n=>{if("$"===n[0])return;const r=e[n];i.equals(r,t[n])||(s[n]=t[n])}),Object.keys(t).forEach(n=>{if("$"===n[0])return;if(s[n])return;const r=t[n];i.equals(r,e[n])||(s[n]=r)}),function e(t,s){const n=Object.keys(t);let r=[];let o;for(let a=0;a<n.length;a++)o=s?s+"."+n[a]:n[a],r.push(o),"$"!==n[a].charAt(0)&&t[n[a]]&&"object"==typeof t[n[a]]&&!i.isArray(t[n[a]])&&(r=r.concat(e(t[n[a]],o)));return r}(s,"")}e.rebase("BbRestmodFindMany"),e.rebase("BbPermissions"),e.rebase("BbPermissionsMask"),e.rebase("BbApiStyle"),e.rebase("BbApiErrorHandlerInjector"),e.rebase("BbEncodeUrl"),e.rebase("BbWithParams"),e.rebase("BbCheckStatusCode"),e.rebase("BbUi"),e.rebase("restmod.Preload"),e.rebase("restmod.FindMany"),e.rebase("$ExtendRecord"),e.rebase("BbExpandParams"),e.rebase("BbExcludeCourseActivity"),e.rebase({$extend:{"Model.$mixHook":function(e,t,s){const n=this,i="$mixHook_"+e,o=i+"_hook";n[i]=n[i]||[],n[i].push(t),n[o]=n[o]||Object(r.once)((function(){n.mix({$hooks:{[e](...e){(n[i]||[]).forEach(t=>t&&t.apply(this,e))}}})})),n[o]();const a=Object(r.once)(()=>{Object(r.remove)(n[i],e=>e===t)});return s&&s.$on("$destroy",a),a}}}),e.rebase({"Model.unpack":S,"Record.$allow":t,"Collection.$allow":t,"Record.$suppressErrorDialog":s,"Collection.$suppressErrorDialog":s,"Record.$revert":function(e){const t=e||this.$_ultra_previous_version,s=n(t,this.$encode("U")),i=this.constructor.$buildRaw(t);return s.forEach(e=>{this[e]=i[e]}),this},"Record.$snapshot":function(){return this.$_ultra_previous_version=this.$encode("U"),this.$_ultra_previous_version},"Record.$getChangedKeys":function(){return n(this.$_ultra_previous_version||{},this.$encode("U"))},"Record.$getPreviousVersion":function(){return this.$_ultra_previous_version},"Record.$patch":function(e){const t=n(this.$_ultra_previous_version||{},this.$encode("U"));if(e&&e.length>0&&e.forEach(e=>{-1===t.indexOf(e)&&t.push(e)}),t.length>0){this.$_ultra_patchHolder={data:this.$wrap("U"),changedKeys:t};const e=function(t){const s=this.$_ultra_patchHolder.changedKeys,n=this.$_ultra_patchHolder.data;s.forEach(e=>{t.data[e]=n[e]}),this.$off("before-update",e)};this.$on("before-update",e),this.$save(t)}else{const e={method:"PATCH",url:this.$url("update"),data:{}};this.$dispatch("before-request",[e])}return this},$hooks:{"after-feed":function(){this.$snapshot()}}}),e.rebase({$extend:{Collection:["slice","filter","concat"].reduce((e,t)=>(e["$"+t]=function(...e){const s=this.$collection();return s.push.apply(s,this[t].apply(this,e)),s},e),{})}})}]).run(["$q",e=>{C=e}])},nsX6:function(e,t,s){"use strict";var n=s("Llzl"),i=s("5MwF"),r=s("5iHu"),o=s("ohO4");s.d(t,"a",(function(){return a}));const a="ultra.components.directives.featureToggle";class l{constructor(e,t){this.$parse=e,this.flagService=t,this.restrict="A",this.priority=1e3,this.transclude="element",this.terminal=!0,this.link=(e,t,s,n,o)=>{let a=!1;const l=s.bbFeatureToggle.startsWith("!"),c=l?s.bbFeatureToggle.substring(1):s.bbFeatureToggle,d=r(document.createComment(`end bbFeatureToggle: ${s.bbFeatureToggle}`)).insertAfter(t),u="false"!==s.delayInitialLoad;let h=!1;const m=()=>{var e,n;h=!0;const r=l?!a:a,c="true"===(null===(e=null==s?void 0:s.prototypeContent)||void 0===e?void 0:e.toLowerCase());if(i.a.showFeaturePrototypes||!c){"true"===(null===(n=null==s?void 0:s.removeFromDom)||void 0===n?void 0:n.toLowerCase())?(g(t.parent(),t,d),r&&o(e=>{p(e,t.parent(),t)})):o(e=>{r||e.addClass("bb-feature-toggle-hide"),g(t.parent(),t,d),p(e,t.parent(),t)})}},p=(e,t,s)=>{0!==s.parent().length?s.after(e):t.prepend(e)},g=(e,t,s)=>{const n=e.contents(),i=n.index(t)+1,r=n.index(s);i<r&&n.slice(i,r).remove()};e.$on("feature-flag-values-updated",(e,t)=>{const s=null==t?void 0:t[c],n=this.flagService.isFlagValueTrueStrict(s);s&&void 0!==n&&(u&&!h||n!==a)&&(a=i.a.features[c]||n,m())});const b=i.a.features[c]||this.flagService.isFeatureEnabledStrict(c);void 0===b&&u||(a=null!=b&&b,m())}}}l.$inject=["$parse",o.b],n.module(a,[o.a]).directive("bbFeatureToggle",["$injector",e=>e.instantiate(l)])},o2qC:function(e,t){e.exports='<table class="fs-table bb-table">\n  <caption role="alert" class="sr-only">{{ ::config().title }}</caption>\n  <thead>\n    <tr class="table-headings">\n      <th class="table-heading"\n          scope="col"\n          ng-style="{ \'width\': column.widthPercentage, \'min-width\': column.widthPercentage }"\n          ng-repeat="column in config().columns"\n          ng-if="column.visible"\n          data-heading-index="{{ ::$index }}"\n          ng-class="{\n            \'sortable-header\': column.sort,\n            \'ascending\': $index === config().currentSortColumnIndex && config().currentSortDirection === \'asc\',\n            \'descending\': $index === config().currentSortColumnIndex && config().currentSortDirection === \'desc\'}"\n          ng-attr-aria-sort="{{ $index === config().currentSortColumnIndex && config().currentSortDirection === \'asc\' ? \'ascending\' :\n          $index === config().currentSortColumnIndex && config().currentSortDirection === \'desc\' ? \'descending\' : undefined }}">\n        <button class="button-anchor" ng-if="column.sort" analytics-id="components.directives.table.sort.button">\n          <span class="table-heading-contents" ng-class="{ \'sr-only\': column.srHeading }">{{ column.heading }}</span>\n          <i class="sort-control">\n            <i class="arrow up" ></i>\n            <i class="arrow down"></i>\n          </i>\n        </button>\n        <span ng-if="!column.sort" class="table-heading-contents" ng-class="{ \'sr-only\': column.srHeading }">{{ column.heading }}</span>\n      </th>\n    </tr>\n  </thead>\n  <tbody ng-if="table.initialDataLoaded || config().showRowsDuringRefresh">\n    <tr ng-repeat="item in tableData()"\n        class="table-row"\n        ng-class="{\'clickable\': config().rowClickFn }"\n        ng-click="config().rowClickFn ? config().rowClickFn(item): null"\n        ng-transclude\n        analytics-id="components.directives.table.rowClick"></tr>\n  </tbody>\n</table>\n<div ng-if="config().pageSize && table.initialDataLoaded">\n  <div bb-infinite-scroll="table.showMore()"\n       infinite-scroll-immediate-check="false"\n       infinite-scroll-total-count="config().totalCount"\n       infinite-scroll-current-count="tableData().length"\n       infinite-scroll-load-limit="config().pageSize"\n       infinite-scroll-container="config().infiniteScrollContainerSelector()"\n       infinite-scroll-tray-id="{{::config().instanceId}}-scroll-tray"></div>\n</div>\n<div class="spinner bb-secondary-color-2" ng-show="!table.initialDataLoaded"></div>'},o5Lu:function(e,t,s){"use strict";(function(e){s.d(t,"h",(function(){return R})),s.d(t,"i",(function(){return O})),s.d(t,"b",(function(){return D})),s.d(t,"c",(function(){return _})),s.d(t,"a",(function(){return N})),s.d(t,"e",(function(){return L})),s.d(t,"f",(function(){return M})),s.d(t,"d",(function(){return G})),s.d(t,"g",(function(){return B}));var n=s("D57K"),i=s("nbDY"),r=s.n(i),o=s("nsO7"),a=s("Llzl"),l=s("rEZX"),c=s("IbyE"),d=s("z6Q5"),u=s("0JpG"),h=s("d8yC"),m=s("Fvsw"),p=s("Qbdf"),g=s("fYJU"),b=s("jhBu"),f=s("Bu0u"),v=s("oi1r"),S=s("X/qj"),y=s("pjml"),C=s("wgY5"),I=s("Mc6f"),$=s("5uPl"),w=s("e6jQ"),T=s("TnpK"),E=s("aHpC"),k=s("ZQFV"),P=s("zGdY"),A=s("Htol");const R="ultra.services.grade",O="grade",D="course.grades.gradebook-item.submission.grade-status-change",_="bb-update-column",N="bb-update-attendance-column",L="bb-update-attendance-as-grade",M="placeholder";var x;!function(e){e.Delete="delete",e.ResetToNG="resetToNG"}(x||(x={}));class j extends r.a{}j.Possible=new j("possible"),j.Text=new j("text");let G=class t{constructor(e,t,s,n,i,r,o,a,l,c,d,u,h,m,p,g,b,f,v,S,y,C,I,$){this.$q=e,this.$rootScope=t,this.$injector=s,this.cacheFactory=n,this.$ngRedux=i,this.CourseModel=r,this.GradeAttemptModel=o,this.GradebookSettingsModel=a,this.GradeGroupAttemptModel=l,this.GradeModel=c,this.ColumnModel=d,this.UserModel=u,this.GradeBulkViewModel=h,this.context=m,this.bbLocalize=p,this.ultraState=g,this.batchService=b,this.entitlement=f,this.notation=v,this.schemaService=S,this.gradebookPermissionService=y,this.originalityReportService=C,this.contextUser=I,this.contextCourse=$,this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE="resource/x-bb-grade",this.loadColorPreference=()=>{},this.colorSettings={isColorEnabled:!0,colorPreference:""},this.gbSettingsCache=n.createCache("gbSettings"),this.subscribeToRedux(),this.loadColorPreference()}subscribeToRedux(){const e=this.$ngRedux.connect(e=>{const t=c.select.systemPreference.getSystemPreferenceByKey(e,"gradepill.color.preference.settings");return t&&t.value&&t.value!==this.colorSettings.colorPreference?{colorSettings:{colorPreference:t.value,...JSON.parse(t.value)}}:{}},e=>({loadColorPreference:()=>e(c.actions.systemPreference.loadSystemPreference({key:"gradepill.color.preference.settings"}))}))(this);this.$rootScope.$on("$destroy",e)}loadColumnsAndGrades(e){const t=this.CourseModel.$new(e.courseId),s=`associatedRubrics,collectExternalSubmissions${e.includeIsLateAttemptCreationDisallowed?",isLateAttemptCreationDisallowed":""}`,n=this.loadColumns(t,e.includeExternal,{expand:s,includeInvisible:!!e.includeInvisible}).then(t=>e&&e.attachContentsByScoreProviderHandle?t.attachRelatedContentsByScoreProviderHandle(e.attachContentsByScoreProviderHandle):t),i=this.loadGrades(t,e.userId,e.gradeQueryParams);return this.$q.all([n,i]).then(s=>{const n=s[0]||[],i=s[1]||[],r=[],a=o.keyBy(i,e=>e.columnId);return n.forEach(e=>{let t=a[e.id];t?t.column=e:t=this.GradeModel.$build({column:e}),r.push(t)}),this._loadAttempts(r,t,e.attemptQueryParams).then(e=>e)})}loadGrade(e,t){const s=this.CourseModel.$new(e.courseId);let n,i;if(e.column)i=e.column&&e.column.$asPromise&&e.column.$asPromise()||this.$q.when(e.column);else{if(!e.columnId)throw new f.a({message:"Column or columnId must be provided."});i=s.gradebook.columns.$find(e.columnId).$asPromise()}return i.then(i=>(o.merge(e.gradeQueryParams,{userId:e.userId}),i.grades.$search(e.gradeQueryParams).$allow([404]).$asPromise().then(r=>(n=r[0])?(n.column=i,t?this.loadAttempt(n,s,e.attemptQueryParams,e.content):this.$q.when(n)):this.$q.when(null))))}loadCurrentColumnsAndGrades(e,t,s,n,i){const r=e||this.contextCourse.courseId,o=i||this.contextUser.userId;return this.loadColumnsAndGrades({courseId:r,userId:o,includeExternal:!0,includeInvisible:!!t,includeIsLateAttemptCreationDisallowed:!!s,gradeQueryParams:{expand:"attemptsLeft"},attemptQueryParams:{overrideAggregationModel:y.C.AttemptAggregationModel.Last},attachContentsByScoreProviderHandle:n})}loadColumns(e,t,s){e instanceof this.CourseModel||(e=this.CourseModel.$new(e));const n=e=>t?e:e.filter(e=>!e.externalGrade),i=e.gradebook.columns;return(i?i.length:0)>(s&&"offset"in s?s.offset:0)?i.$refresh(s).$asPromise().then(n):i.$fetch(s).$asPromise().then(n)}loadGrades(e,t,s){e instanceof this.CourseModel||(e=this.CourseModel.$new(e));const n=o.merge({userId:t},s);return n.limit=100,e.gradebook.grades.$fetch(n).$asPromise().then(s=>s.paging.nextPage?(n.offset=s.paging.offset+s.paging.limit,this.loadGrades(e,t,n)):e.gradebook.grades)}loadColumnGrades(e,t){return e instanceof this.ColumnModel||(e=t.gradebook.columns.$new(e)),e.grades.$refresh().$asPromise()}loadColumn(e,t,s){return t instanceof this.CourseModel||(t=this.CourseModel.$new(t)),t.gradebook.columns.$find(e,{expand:"associatedRubrics"}).$allow(s?[P.HttpStatus.NotFound]:[]).$asPromise().then(e=>{var t;return(null===(t=null==e?void 0:e.$response)||void 0===t?void 0:t.status)===P.HttpStatus.NotFound&&s?null:e})}loadOverallGradeColumn(e){return this.loadColumn("finalGrade",e,!0)}loadRubricAssociation(e,t){return this.loadColumn(e,t).then(e=>e&&e.hasRubricAssociation()?t.rubrics.$find(e.getAssociatedRubricId()).$asPromise():null)}loadBulkViewRows(e,t,s,n,i){const r=[],a=[];e.forEach(e=>{a.push(e.id);const s=this.$injector.instantiate(F,{column:t});s.user=e.user,s.membership=e,s.dueDate=t.dueDate,s.hasDueDateException=e.isDueDateExcepted(),r.push(s)});const l=o.keyBy(r,e=>e.user.id);let c={courseId:t.courseId,membershipIds:a,columnIds:[t.id]};return n&&(c=o.merge(c,n)),this.CourseModel.$new(t.courseId).gradebook.bulkView.$fetch(c).$asPromise().then(e=>this.processBulkViewRows(e,l,t,s,i))}loadAnonymousBulkViewRows(e,t,s,n,i){const r=[],a=[];e.forEach(e=>{a.push(e.id);const s=this.$injector.instantiate(F,{column:t});s.user=this.UserModel.getAnonymousStudent(e.id),s.grade=e,s.dueDate=t.dueDate,r.push(s)});const l=o.keyBy(r,e=>e.grade.id);let c={courseId:t.courseId,gradeIds:a,columnIds:[t.id]};return n&&(c=o.merge(c,n)),this.CourseModel.$new(t.courseId).gradebook.bulkView.$fetch(c).$asPromise().then(e=>this.processBulkViewRows(e,l,t,s,i))}processBulkViewRows(e,t,s,n,i){e.bulkViewUsers.forEach(e=>{const r=s.anonymousGrading?e.gradeId:e.studentId,o=t[r];e.peerReviewsCountsPerColumn&&(o.peerReviewCounts=e.peerReviewsCountsPerColumn[o.Column.id]),o.originalityProcessed=e.grades[0].originalityProcessed,o.originalityScore=e.grades[0].originalityScore,e.grades.forEach(e=>{o.grade=e.grade,o.grade.user=o.user,n&&n.lookup[e.grade.id]&&(o.grade.attempts=n.lookup[e.grade.id]),o.attemptCount=e.attemptCount,o.lastAttemptDate=e.lastAttemptDate,o.attemptsReadyToPost=e.attemptsReadyToPost,i&&!i(o)&&delete t[r]})});const r=o.values(t);return this.originalityReportService.setOriginalityAverageScore(r,s.id),r}loadCustomizedBulkViewRows(e,t,s,n,i,r){if(c.ScoreProviderHandle.Discussion.isEqualTo(t.scoreProviderHandle)){const i=this.$q.defer();return this.loadBulkViewRows(e,t,null,{expand:"grade.instructorFeedback,attempts"}).then(r=>{const a=o.merge(o.clone(n),{limit:e.length}),l=o.merge(o.clone(a),{dateBefore:t.dueDate}),c=(e,t)=>{if(e&&e.length){const s={};e.forEach(e=>{const n=e.data.id;s[n]=t?{totalComment:e.topLevelReplyCount,totalReply:e.secondLevelReplyCount}:{comment:e.topLevelReplyCount,reply:e.secondLevelReplyCount}}),r.forEach(e=>{if(s&&s[e.user.id]){e.participation||(e.participation={comment:0,reply:0,totalComment:0,totalReply:0});const n=s[e.user.id];t?(e.participation.totalComment=n.totalComment,e.participation.totalReply=n.totalReply):(e.participation.comment=n.comment,e.participation.reply=n.reply)}})}};this.$q.all([this.CourseModel.$find(t.courseId).forums.$new(s).usercounts.$fetch(l).$allow([400]).$then(e=>{c(e)}).$asPromise(),this.CourseModel.$find(t.courseId).forums.$new(s).usercounts.$fetch(a).$allow([400]).$then(e=>{c(e,!0)}).$asPromise()]).then(()=>i.resolve(r)).catch(i.reject)}).catch(i.reject),i.promise}let a="attempts";i&&(a+=",submissionResults");const l=!!r;return this.loadBulkViewRows(e,t,null,{expand:a,includeInProgress:l})}loadAnonymousStudentRows(e){return this.retrieveAnonymousStudentRows(e,null)}loadAnonymousStudentRowsNeedsGrading(e){return this.retrieveAnonymousStudentRows(e,{status:"NEEDS_GRADING",readyToPost:!1})}retrieveAnonymousStudentRows(e,t){const s={expand:"toolAttemptDetail,viewUrl",...t};return e.getGradeIdToAttempt(s).then(e=>e.lookup).then(t=>{const s=[];return Object.keys(t).forEach(n=>{const i=t[n];if(o.remove(i,e=>e.isInProgress()),i.length>0){const t=this.createAnonymousStudentRow(e,i,n);s.push(t)}}),s})}createBlankSubmissionListRow(e){const t=this.$injector.instantiate(F,{column:e});return t.user=this.UserModel.getAnonymousStudent(""),t.id=M,t}generatePeerRow(e,t,s){const n=this.createAnonymousStudentRowWithoutId(t,e,s);return e.length>0&&(n.delegatedGraderOrder=e[0].delegatedGraderOrder),n}createAnonymousStudentRow(e,t,s){return this.createAnonymousStudentRowImpl(e,t,s,s)}createAnonymousStudentRowWithoutId(e,t,s){return this.createAnonymousStudentRowImpl(e,t,s,"")}createAnonymousStudentRowImpl(e,t,s,n){const i=this.$injector.instantiate(F,{column:e}),r=t[t.length-1],o=t.reverse().find(e=>e.displayGrade&&null!=e.displayGrade.score);return i.user=this.UserModel.getAnonymousStudent(n),i.dueDate=e.dueDate,i.attemptCount=t.length,i.lastAttemptDate=r.attemptDate,i.grade=this.GradeModel.$build({id:s,user:i.user,attempts:t,displayGrade:o&&o.displayGrade||{},manualStatus:o&&o.status||P.ManualGradeStatus.NoOverride}),i}loadAnonymousStudentGrade(e,t){const s=e.grades.$new(t).attempts,n=this.UserModel.getAnonymousStudent(t);return s.$fetch().$asPromise().then(s=>this.GradeModel.$build({pointsPossible:e.possible,id:t,user:n,attempts:s}))}loadGroupRows(e,t,s,n,i,r){const a={};let l=[];const c=o.keyBy(s,e=>e.user.id);let d;return(d=n.ui&&n.ui.content&&n.ui.content.assignedGroups&&n.ui.content.assignedGroups.some(e=>!!e.groupAssociationId)?this.$q.when(n.ui.content):e.contents.$find(n.contentId,{expand:"assignedGroups"}).$asPromise()).then(s=>{const d={};return s&&s.assignedGroups&&s.assignedGroups.forEach(e=>{d[e.groupId]=e.groupAssociationId,!t&&r&&r===e.groupId&&(t=[e])}),l=t.map(t=>(a[t.groupId]={},e.groups.$find(t.groupId,{expand:"memberships"}).$then(e=>{const t=this.$injector.instantiate(F,{column:n});t.group=e,t.groupDetailsShown=!1,t.dueDate=n.dueDate,t.group.ui||(t.group.ui={}),t.group.ui.groupAssociationId=d[e.id],t.group.memberships&&(t.group.memberships=t.group.memberships.filter(e=>!!c[e.userId]&&(e.ui||(e.ui={}),e.ui.user=c[e.userId].user,e.ui.hasDueDateException=c[e.userId].isDueDateExcepted(),e.ui.courseRole=c[e.userId].courseRole,!0))),t.hasDueDateException=t.group.memberships.some(e=>c[e.userId].isDueDateExcepted()),a[e.id]=t}).$asPromise())),this.$q.all(l).then(()=>{let e="attempts,toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor";return i&&(e+=",submissionResults"),n.getContentGroupIdToGroupAttempt({expand:e}).then(e=>{const t={};o.values(e.lookup).forEach(e=>{t[e[0].groupId]=e});let s,i=[];return this.batchService.performBatch(()=>{s=o.values(a),i=s.map(e=>{var s;const i=(null===(s=t[e.group.id])||void 0===s?void 0:s.length)>0?t[e.group.id].length-1:0;return this.updateOneGroupRow(e,n,{expand:!0,groupAttempts:t[e.group.id],currentAttemptIndex:i})})}),this.$q.all(i).then(()=>this.originalityReportService.setOriginalityAverageScore(s,n.id)),this.$q.all(i).then(()=>this.sortGroupMembers(s))})})})}getOverallGradeJson(t){const s=e(e.parseHTML(t));let n={};if("math"===s.prop("nodeName")){const t=s.children();if(t&&t.length>0){const s=e(t[0]);if("mi"===s.prop("nodeName")){let e=s.text();const t=(e=(e=e.replace("@X@BBCalColElem(","")).replace(")@X@","")).indexOf(":")+1,i=e.substring(t);n=JSON.parse(i)}}}return n}sortGroupMembers(e){const t=[];return e.forEach(e=>{const s=[];e.group.memberships&&(e.group.memberships.forEach(e=>{s.push(this.bbLocalize.formatUsername(e.ui.user,u.ILocaleUsernameFormat.Short,this.$rootScope).then(t=>{e.ui.formatUserName=t}))}),t.push(this.$q.all(s).then(()=>{e.group.memberships.sort((e,t)=>e.ui.formatUserName.localeCompare(t.ui.formatUserName)),e.group.ui.users=[],e.group.memberships.forEach(t=>{e.group.ui.users.push(t.ui.user)})})))}),this.$q.all(t).then(()=>e)}updateOneGroupRow(e,t,s={expand:!0}){return t.getGroupGrade(e.group.ui.groupAssociationId,s.expand).then(t=>{var n,i;const r=s.currentAttemptIndex||0,o=s.groupAttempts&&s.groupAttempts[r]||(null===(n=e.grade)||void 0===n?void 0:n.ui.groupAttempt);if(e.grade=t,(null===(i=null==s?void 0:s.groupAttempts)||void 0===i?void 0:i.length)>0){let t=0,n=0;s.groupAttempts.forEach(e=>{var s,i,r;(null===(r=null===(i=null===(s=e.originality)||void 0===s?void 0:s.results)||void 0===i?void 0:i[P.safeAssignUniqueHandle])||void 0===r?void 0:r.originalityProcessed)&&(t+=e.originality.results[P.safeAssignUniqueHandle].originalityScore,n+=1)}),n>0&&(e.originalityScore=t/n,e.originalityProcessed=!0)}else o&&(e.originalityScore=o.originalityScore,e.originalityProcessed=o.originalityProcessed);return this.setGroupAttemptsOnRow(e,s.groupAttempts||[o],s.grade,s.grades||t.groupMembersGrades,s.attempt,r),e})}setGroupAttemptsOnRow(e,t,s,n,i,r){let a={rawText:"",displayText:""};s&&s.instructorFeedback?a=s.instructorFeedback:n&&n.length&&n[0].instructorFeedback&&(a=n[0].instructorFeedback);let l,c=0;(null==t?void 0:t[r])?(t.forEach(t=>{e.grade.groupAttempts.push(t),P.AttemptStatus.NeedsGrading!==t.status&&P.AttemptStatus.NeedsMoreGrading!==t.status&&P.AttemptStatus.Completed!==t.status||(c+=1)}),l=t[r]):(l=this.GradeGroupAttemptModel.$buildRaw({}),e.grade.groupAttempts.push(l)),e.attemptCount=c,e.lastAttemptDate=l.attemptDate,e.grade.instructorFeedback=a,e.grade.ui={groupAttempt:l,currentAttemptIndex:r},e.isGroupGradeInProgress=e.grade.isInProgress(),e.grade.ui.isGroupGradeMultiple=e.grade.isMultipleGradesInGroup;const d=o.keyBy(e.group.memberships,e=>e.userId);if(n)n.forEach(e=>{const t=d[e.user.$pk];t&&(t.ui.gradeDetail=e)});else if(i){const t=l.attempts.map((e,t)=>{let s;return e.id===i.id?((s=i).userId=e.userId,d[s.userId].ui.gradeDetail.displayGrade=s.displayGrade,d[s.userId].ui.gradeDetail.ui.attempt=s):s=e,s});e.grade.isInProgress()&&(e.grade.ui.groupAttempt.status=P.AttemptStatus.NeedsGrading),e.grade.ui.groupAttempt.attempts=t}else s?e.group.memberships=e.group.memberships.map(e=>{const t=e.userId===s.user.$pk?s:e.ui.gradeDetail;return e.ui.gradeDetail=t,e}):l.attempts&&l.attempts.forEach(t=>{d[t.userId].ui.gradeDetail.displayGrade=t.displayGrade,d[t.userId].ui.gradeDetail.ui.attempt=t,d[t.userId].ui.gradeDetail.manualStatus=e.grade.manualStatus});e.group.memberships=o.values(d)}_loadAttempts(e,t,s){const n=[];return e.forEach(e=>{n.push(this.loadAttempt(e,t,s))}),this.$q.all(n)}loadAttempt(e,s,n={},i){let r;const a=o.clone(n);if(a&&a.attemptId)r=a.attemptId,delete a.attemptId;else{let s=y.C.AttemptAggregationModel.parseModel(e.column&&e.column.aggregationModel);a&&a.overrideAggregationModel&&(s=a.overrideAggregationModel,delete a.overrideAggregationModel),r=t.getDefaultAttemptIdToLoad(s,e)}if(e.column&&P.CalculationType.NonCalculated===e.column.calculationType){let t;const n=s.gradebook.attempts,o=i&&i.isGroupContent,l=i&&i.assignedGroups&&i.assignedGroups.length&&i.assignedGroups[0].groupAssociationId;if(o&&!i.isDiscussion()){if(!l)return this.$q.when(e);t=e.column.getGroupAttemptByGroupAssociationId(l,!1,r)}else{if(!r)return this.$q.when(e);t=n.$find(r,a).$asPromise()}return t.then(t=>{if(o){if(t&&t.id){const s=t;e.ui.groupAttempt=s,e.ui.attempt=s&&s.attempts&&s.attempts.length&&s.attempts[0]}}else e.ui.attempt=t;return e})}return this.$q.when(e)}loadColumnAttempts(e,t={},s){return e.getGradeIdToAttempt(t,s)}loadUsersFinalGradeForCourse(e,t){return e.gradebook.grades.$search({userId:t,expand:"column",externalGrade:!0}).$asPromise().then(e=>e[0])}loadColumnSummary(e,t){return e.gradebook.columns.$find(t).summary.$fetch().$asPromise()}loadGradebookSettings(e){const t=this.gbSettingsCache.get(e);if(!t){const t=this.CourseModel.$new(e).gradebook.settings.$fetch().$asPromise();return this.gbSettingsCache.put(e,{promise:t}),t}return this.$q.when(t.promise)}loadDefaultGradebookSettings(){return this.GradebookSettingsModel.$build({afterDecimal:t.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL,beforeDecimal:t.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL})}formatPoints(e,t,s,n){null==s&&(s=j.Text);const i=s.toString();return this.bbLocalize.loadBundle("components/services/grade").then(()=>this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(t),key:"components.services.grade.points_"+i,params:{points:n,possible:e},noWrap:!0}))}parseGrade(e,t,s){if(!e)return"";if((null==t?void 0:t.scaleType)===P.SchemaScaleType.Text)return e;const n=this.bbLocalize.parseNumberSync(e,s);return Number.isNaN(n)?e:n.toString()}getGradeToDisplay(e,s,n){if(!e)return null;if(e.grade)return e.grade;if(e.perfCode)return e.perfCode.code;if(null!=e.score){let i=this.bbLocalize.formatNumberSync(e.score,s,{maximumFractionDigits:t.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL});return n&&n===P.SchemaScaleType.Percent&&(i=this.bbLocalize.formatPercentageSync(e.score/100,s,t.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL)),i}}getHighestPossibleScore(e,t,s){const n=this.$q.defer();switch(e.scaleType){case P.SchemaScaleType.Tabular:return n.resolve(e.symbols[0].symbol),n.promise;case P.SchemaScaleType.Percent:return this.bbLocalize.formatPercentage(1,s);case P.SchemaScaleType.Score:{const e=t.possible;return this.formatPoints(e,s,j.Text)}default:return n.resolve("N/A"),n.promise}}validateGrade(e,t,s){const n=this.loadDefaultGradebookSettings(),i=this.bbLocalize.loadBundle("components/services/grade"),r=this.notation.getGradeNotationsMap(e.courseId,!0);return this.$q.all([i,r]).then(i=>{const r=e.gradeValue.getGrade();let o=!1;const a=i[1];return r?!(o=this.isValidNumericGrade(r,n,t))&&e.column&&e.column.externalGrade&&(o=this.notation.isValidPerformanceCodeGrade(a,r)):o=!(s&&s.notAllowEmptyString),o})}clearGroupGrade(e,s,n){const i=this.CourseModel.$new(e.id).gradebook.columns.$new(s.id);return this.batchService.performBatch(()=>this.$q.all(n.map(e=>{const s=i.grades.$new(e.ui.gradeDetail.id);return s.manualGrade=t.CLEAR_GRADE_CHARACTER,s.$patch(["manualGrade"]).$asPromise()}))).then(()=>i.grades)}saveGrade(e,t,s,n){if(!e.courseId||!e.column||!e.gradeValue)throw new Error("A valid courseId, column, and grade value are required.");if(e.column.seemsAttemptBased()){const i=[],r=[];n&&n.group&&n.group.memberships&&n.group.memberships.forEach(t=>{t.ui&&t.ui.gradeDetail&&(i.push(t.ui.gradeDetail.id),(t.ui.gradeDetail.displayGrade&&t.ui.gradeDetail.displayGrade.isOverride||e.setGradeToEmpty)&&r.push(t.ui.gradeDetail.id))}),(null==s||null==s.id)&&t||s&&s.isInProgress()?(n.group?e.gradeIds=i:e.gradeId=t.id,!e.userId&&n.userId&&(e.userId=n.userId),e.clearGrade&&(e.setGradeToEmpty=!0)):s&&s.id&&t?(e.clearGrade&&(n.group||(e.gradeId=t.id),e.setAttemptToEmpty=!0,e.setGradeToEmpty=!0),s instanceof this.GradeAttemptModel?(e.attemptId=s.id,s.groupAttemptId&&(e.override=!0),(t.displayGrade&&t.displayGrade.isOverride||e.setGradeToEmpty)&&(e.gradeId=t.id,e.setGradeToEmpty=!0)):(e.groupAttemptId=s.id,r.length&&(e.gradeIdsNeedClear=r))):n&&n.userId?e.userId=n.userId:n&&n.group&&n.group.id&&!(null==e?void 0:e.groupAttemptId)&&(e.gradeIds=i)}else e.column.externalGrade?t&&t.id?e.gradeId=t.id:e.userId=n.userId:null==t?e.userId=n.userId:(e.userId||(e.userId=n.userId),e.gradeId=t.id);return this._save(e)}save(e){return this._save(e)}_save(e){if(e.column.externalGrade)return e.gradeId?this.updateGrade(e):this.createGradeForUserAndSave(e);if(!this.canSaveGradeDetail(e))return this.updateAttempt(e);if(e.gradeId)return e.attemptId?(e.setGradeToEmpty=!0,this.updateGrade(e).then(()=>this.updateAttempt(e))):this.updateGrade(e);if(e.gradeIds)return this.createAndUpdateGradesForGroupMembers(e);if(e.gradeIdsNeedClear)return this.createAndUpdateGradesForGroupMembers(e).then(()=>this.updateGroupAttempt(e));if(e.attemptId)return this.updateAttempt(e);if(e.groupAttemptId)return this.updateGroupAttempt(e);if(e.userId)return this.createGradeForUserAndSave(e);throw new Error("A valid userId must be specified when creating a new grade.")}canSaveGradeDetail(e){return!e.column.anonymousGrading&&(!e.column.delegatedGrading||this.isDelegatedAndEntitledReconciler(e))}createAndUpdateGradesForGroupMembers(e){const t=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades;return e.gradeIdsNeedClear||e.gradeIds?this.batchService.performBatch(()=>this.$q.all((e.gradeIdsNeedClear||e.gradeIds).map(s=>{const n=t.$buildRaw({id:s});return t.$add(n),this.setGradeValueOnGrade(e,n,!!e.gradeIdsNeedClear||e.setGradeToEmpty),n.withParams({clearCommentsIfRevertOverrides:!1}).$patch().$asPromise()}))).then(()=>t.$asPromise()):t.$asPromise()}createGradeSubmission(e,t,s){return new l.a(e,t,s)}wasGradeCleared(e,t){const s=e&&e.length,n=t&&t.length;return s>0&&!n}updateAttempt(e){if(!e.attemptId)throw new Error("Attempt id is not set");const t=this.CourseModel.$new(e.courseId).gradebook.attempts.$new(e.attemptId);return this.setGradeOnAttempt(e,t),t.$patch().$asPromise()}updateGroupAttempt(e){if(!e.groupAttemptId)throw new Error("Group attempt id is not set");const t=this.CourseModel.$new(e.courseId).gradebook.groupAttempts.$new(e.groupAttemptId);return this.setGradeOnAttempt(e,t),t.withParams({expand:"attempts"}).$patch().$asPromise()}isReadyToPost(e){return!e.delegatedGrading||e.isUserReconciler(this.contextUser.userId)}setGradeOnAttempt(e,s){e.setAttemptToEmpty?(s.score=null,s.status=P.AttemptStatus.NeedsGrading,s.grade=t.CLEAR_GRADE_CHARACTER,s.rubricEvaluation=null):(e.gradeValue.isNumeric?s.score=parseFloat(e.gradeValue.getGrade()):s.grade=e.gradeValue.getGrade(),e.rubricEvaluation&&(s.rubricEvaluation=e.rubricEvaluation),s.readyToPost=this.isReadyToPost(e.column),s.readyToPost||(s.status=P.AttemptStatus.Completed)),e.override&&(s.override=!0),this.isDelegatedAndEntitledReconciler(e)&&!e.setAttemptToEmpty&&(s.reconciliationMode=P.ReconciliationMode.Custom)}isDelegatedAndEntitledReconciler(e){return e.column.delegatedGrading&&e.column.isUserReconciler(this.contextUser.userId)}createGradeForUserAndSave(e){const t=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades.$new();return this.setGradeValueOnGrade(e,t,e.setGradeToEmpty),t.user=this.UserModel.$new(e.userId),t.withParams({userId:e.userId,clearCommentsIfRevertOverrides:!1}).$save().$asPromise()}updateGrade(e){const t=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades.$new(e.gradeId);return this.setGradeValueOnGrade(e,t,e.setGradeToEmpty),e.setGradeToEmpty?t.withParams({clearCommentsIfRevertOverrides:!1,includeUnpostedGrade:!0,cascadeAttempts:x.ResetToNG}).$patch().$asPromise():t.withParams({clearCommentsIfRevertOverrides:!1,includeUnpostedGrade:!0}).$patch().$asPromise()}setGradeValueOnGrade(e,s,n){if(n)s.manualGrade=t.CLEAR_GRADE_CHARACTER;else if(e.column.externalGrade&&e.perfCodeId)s.perfCodeId=e.perfCodeId;else{const t=e.gradeValue;t.isNumeric?(s.pointsPossible=e.pointsPossible,s.manualScore=parseFloat(t.getGrade())):s.manualGrade=t.getGrade()}}isValidNumericGrade(e,t,s){const n=this.bbLocalize.parseNumberSync(e,s);let i;if(Number.isNaN(n))return!1;if(t&&null!=t.beforeDecimal&&(i=Math.floor(n).toString()).length>t.beforeDecimal)return!1;if(t&&null!=t.afterDecimal&&null!=i){if(n.toString().substring(i.length+1).length>t.afterDecimal)return!1}return!0}static isValidFormat(e,t){const s=e.indexOf(".");let n=0,i=e.length;return s>-1&&(n=i-s-1,i=0),i<=t.beforeDecimal&&s<=t.beforeDecimal&&n<=t.afterDecimal}static mapSchemaSymbols(e){if(e.scaleType===P.SchemaScaleType.Tabular)return e.symbols.map(e=>e.symbol.toLocaleLowerCase())}static getDefaultAttemptIdToLoad(e,t){switch(e){case y.C.AttemptAggregationModel.Average:return t.lastAttemptId;case y.C.AttemptAggregationModel.First:return t.firstAttemptId;case y.C.AttemptAggregationModel.Highest:return t.highestAttemptId;case y.C.AttemptAggregationModel.Last:return t.lastAttemptId;case y.C.AttemptAggregationModel.Lowest:return t.lowestAttemptId;default:return t.lastAttemptId}}findOverallGrade(e){return o.find(e,e=>e.externalGrade)}needsToSetupOverall(e,t){const s=this.findOverallGrade(e);return this.$q.when(!s)}fetchNeedsToSetupOverallGrade(e){const t=e instanceof this.CourseModel?e.id:e;return this.loadOverallGradeColumn(e).then(e=>this.needsToSetupOverall(e?[e]:[],t))}setDeleteConfirmationHandle(e){e.isOffline()?e.ui.deleteConfirmationHandle=this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE+"-column":e.isCalculated()&&(e.ui.deleteConfirmationHandle=this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE+"-calculation")}calculateRankingsMap(e,t){const s={},n=e.length;let i,r,o;for(let a=0;a<n;a++)r=a/n,i=t?10*Math.floor(10*r):Math.floor(100*r),s[o=e[a].displayGrade.score]=i;return s}getPercentileColor(e){return k.Utils.getPercentileColor(e,this.colorSettings.isColorEnabled)}isRubricGradeOverridden(e,t,s,n){let i=e&&e.displayGrade&&e.displayGrade.isOverride;n&&n.memberships&&n.memberships.forEach(e=>{e.ui&&e.ui.gradeDetail&&e.ui.gradeDetail.displayGrade&&e.ui.gradeDetail.displayGrade.isOverride&&(i=!0)});const r=null!=s.rubricAssociations&&s.rubricAssociations.length>0&&s.rubricAssociations[0],o=t&&t.rubricEvaluation,a=!(!t||!t.groupAttemptId);return!(!t||a||null==t.score||!t.readyToPost||!r||o&&o.rubricAssociationId===r.id&&t.score===o.totalScore)||i&&(r||!c.ScoreProviderHandle.UltraAssignment.isEqualTo(s.scoreProviderHandle)&&!c.ScoreProviderHandle.Discussion.isEqualTo(s.scoreProviderHandle))}canGrade(e){return this.gradebookPermissionService.canEnterGrades()&&this.gradebookPermissionService.canOverrideGrades()}canUserReconcile(e,t){return!e.isClosed&&t.isUserReconciler(this.contextUser.userId)}hasItemsToReconcile(e){return e.summary.numSubmissionsNeedsReconciling>0}canPostGrades(e,t){if(!this.gradebookPermissionService.canPostGrades(e.id,t))return!1;const s=!e.isComplete()&&t.summary.hasGradesToPost();return t.anonymousGrading?s&&this.gradebookPermissionService.canDeanonymizeGrades(e.id):s}getPostAllGradeConfirmationNeededStringsKey(e){if(e.anonymousGrading){if(e.summary.numNeedsGrading)return"x-bb-grade-anonymous-submissions-not-graded";if(!e.isLate()){if(e.getNumMissing()>0)return"x-bb-grade-anonymous-missing-submissions";if(e.isMultipleAttempts())return"x-bb-grade-anonymous-multiple-attempts"}return"x-bb-grade-anonymous-generic"}return"x-bb-grade-column-post-grades"}pointToPercentage(e,t){return 100*e/t}percentageToPoint(e,t){return e*t/100}gradeDetailToPercentage(e){if(!e)return e;const t=o.assignInWith({},e);if(e.displayGrade&&void 0!==e.manualScore){const s=this.pointToPercentage(e.manualScore,e.pointsPossible);t.manualScore=h.b(s,2),t.displayGrade.score=t.manualScore}return t.pointsPossible=100,t}percentageToGradeDetail(e,t){if(!e)return e;let s=e.manualScore;e.manualScore&&(s=this.percentageToPoint(e.manualScore,t));const n=o.assignInWith({},e);return n.manualScore=s,n.displayGrade.score=s,n.pointsPossible=t,n}truncateGradeDetail(e){const t=o.assignInWith({},e);return e.displayGrade&&void 0!==e.manualScore&&(t.manualScore=h.b(e.manualScore,2),t.displayGrade.score=t.manualScore),t}toFixedGradeDetail(e){const t=o.assignInWith({},e);return e.displayGrade&&void 0!==e.manualScore&&(t.manualScore=parseFloat(e.manualScore.toFixed(2)),t.displayGrade.score=t.manualScore),t}refreshCourseContents(e){this.loadGrade({courseId:e.courseId,columnId:e.getAssociatedGradingColumn().id,userId:this.contextUser.userId,includeExternal:!0},!0).then(e=>{e.isGraded()&&this.$rootScope.$broadcast(A.a)})}};var U;G.TEXT_SCHEMA_CHARACTER_LENGTH=32,G.CLEAR_GRADE_CHARACTER="-",G.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL=5,G.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL=2,G=Object(n.__decorate)([Object(n.__param)(0,Object(E.b)("$q")),Object(n.__param)(1,Object(E.b)("$rootScope")),Object(n.__param)(2,Object(E.b)("$injector")),Object(n.__param)(3,Object(E.b)("DSCacheFactory")),Object(n.__param)(4,Object(E.b)("$ngRedux")),Object(n.__param)(5,Object(E.b)(y.m.serviceName)),Object(n.__param)(6,Object(E.b)(y.A.serviceName)),Object(n.__param)(7,Object(E.b)(y.G.serviceName)),Object(n.__param)(8,Object(E.b)(y.E.serviceName)),Object(n.__param)(9,Object(E.b)(y.D.serviceName)),Object(n.__param)(10,Object(E.b)(y.C.serviceName)),Object(n.__param)(11,Object(E.b)(y.Jb.serviceName)),Object(n.__param)(12,Object(E.b)(y.B.serviceName)),Object(n.__param)(13,Object(E.b)(m.b)),Object(n.__param)(14,Object(E.b)(u.serviceName)),Object(n.__param)(15,Object(E.b)(T.d)),Object(n.__param)(16,Object(E.b)(d.b)),Object(n.__param)(17,Object(E.b)(b.b)),Object(n.__param)(18,Object(E.b)(I.b)),Object(n.__param)(19,Object(E.b)(v.b)),Object(n.__param)(20,Object(E.b)(S.b)),Object(n.__param)(21,Object(E.b)($.b)),Object(n.__param)(22,Object(E.b)(g.b)),Object(n.__param)(23,Object(E.b)(p.e))],G),function(e){e[e.Graded=1]="Graded",e[e.MultiStatus=2]="MultiStatus",e[e.NeedGrade=3]="NeedGrade",e[e.Opened=4]="Opened",e[e.Unopend=5]="Unopend",e[e.Posted=6]="Posted",e[e.Completed=7]="Completed"}(U||(U={}));let F=class{constructor(e,t,s){this.column=e,this.context=t,this.contextUser=s,this.isCommentBoxShown=!1,this.hasBeenViewed=!1,this.id=w.a(),this.hasDueDateException=!1}get numOfPeerReviewsCompleted(){var e,t;return null!==(t=null===(e=this.peerReviewCounts)||void 0===e?void 0:e.completed)&&void 0!==t?t:0}get numOfPeerReviewsCompletedLate(){var e,t;return null!==(t=null===(e=this.peerReviewCounts)||void 0===e?void 0:e.completedLate)&&void 0!==t?t:0}get numOfPeerReviewsStarted(){var e,t;return null!==(t=null===(e=this.peerReviewCounts)||void 0===e?void 0:e.started)&&void 0!==t?t:0}get Column(){return this.column}isCurrentUserReconciler(){return this.column&&this.column.isUserReconciler(this.contextUser.userId)}isDiscussion(){return this.column.isDiscussion()}isOverdue(){return this.column&&this.column.dueDate&&this.column.dueDate.getTime()-this.context.getServerTime().getTime()<0}getLateSubmissionCount(){var e,t;return a.isDefined(this.lateSubmissionCount)?this.lateSubmissionCount:(this.group?this.lateSubmissionCount=null===(e=this.grade)||void 0===e?void 0:e.groupAttempts.getNumAttemptsSubmittedLate(this.dueDate):this.lateSubmissionCount=null===(t=this.grade)||void 0===t?void 0:t.attempts.getNumAttemptsSubmittedLate(this.dueDate),this.lateSubmissionCount)}isStatusComplete(){return this.isDiscussion()||this.grade&&!this.grade.attempts?this.isCompleted():this.grade&&(this.grade.attempts.isAllGradedAndPosted()||this.grade.isPosted())&&this.grade.attempts.getNumOfGradedAttempts()===this.column.multipleAttempts&&!this.column.anonymousGrading}isGroupStatusComplete(e){return e?this.isCompleted():this.grade&&(this.grade.groupAttempts.isAllGradedAndPosted()||this.grade.isPosted())&&this.grade.groupAttempts.getNumOfGradedAttempts()===this.column.multipleAttempts&&!this.column.anonymousGrading}isStatusNothingToGrade(){return this.isDiscussion()?this.hasNoTotalParticipation():this.grade&&!this.grade.attempts.getNumAttemptsToGrade()}isGroupStatusNothingToGrade(){return this.grade&&!this.grade.groupAttempts.getNumAttemptsToGrade()}isStatusAttemptsToReconcile(){if(!this.isDiscussion()&&this.isCurrentUserReconciler())return this.grade&&this.grade.attempts.getNumAttemptsToReconcile()>0}isStatusAttemptsToGrade(e){return this.isDiscussion()?(!this.hasNoParticipation()||this.hasLateParticipation())&&(!this.grade||this.grade&&!this.grade.isGraded()):e?!this.grade||this.grade.attempts.getNumAttemptsToGrade()>=0:this.isCurrentUserReconciler()?void 0:this.grade&&this.grade.attempts.getNumAttemptsToGrade()>0}isGroupStatusAttemptsToGrade(e){return e?this.grade&&this.grade.groupAttempts.getNumAttemptsToGrade()>=0:this.grade&&this.grade.groupAttempts.getNumAttemptsToGrade()>0}isStatusToPost(){return this.isDiscussion()?this.needsPosting():!this.column.anonymousGrading&&this.grade&&this.grade.isReadyToPost()&&!this.grade.isOverrideGrade()}isGroupStatusToPost(){return this.grade&&this.grade.isReadyToPost()&&!this.grade.isOverrideGrade()}overrideToPost(){return this.grade&&(this.grade.isOverrideGrade()||this.grade.displayGrade&&"MULTIPLE"===this.grade.displayGrade.grade)&&this.grade.isReadyToPost()}isMultipleStatus(){return this.group?this.isGroupStatusAttemptsToGrade()&&(this.isGroupStatusToPost()||this.overrideToPost()&&!this.isGroupStatusComplete()):(this.isStatusAttemptsToGrade()||this.isStatusAttemptsToReconcile())&&(this.isStatusToPost()||this.overrideToPost()&&!this.isStatusComplete())}hasGroupAttempts(){return this.grade&&this.grade.groupAttempts.length&&o.every(this.grade.groupAttempts,e=>!!e.id)}get RowStatus(){if(this.grade&&this.group){if(this.needsPosting())return 1;if(this.isGroupStatusAttemptsToGrade())return 3;if(this.inProgress()&&!this.grade.hasGradeBeenPosted)return 4;if(!this.grade.groupAttempts[0].status&&!this.grade.hasGradeBeenPosted)return 5;if(this.grade.isPosted()&&!this.isGroupStatusComplete())return 6;if(this.isGroupStatusComplete())return 7}else{if(this.membership&&this.membership.isPreviewStudent)return 0;if(this.grade&&0===this.grade.attempts.getNumAttemptsToGrade()&&this.grade.isReadyToPost())return 1;if(this.grade&&this.grade.isGraded()&&this.grade.attempts.getNumAttemptsToGrade()>0&&this.grade.isReadyToPost())return 2;if(this.grade&&this.grade.attempts.getNumAttemptsToGrade()>0&&0===this.grade.attempts.getNumAttemptsToPost()&&!this.grade.isPosted())return 3;if(this.hasNoSubmissions()&&this.inProgress()&&!this.grade.hasGradeBeenPosted)return 4;if(!this.grade||!this.grade.hasGradeBeenPosted)return 5;if(this.grade&&this.grade.hasGradeBeenPosted&&!this.isStatusComplete())return 6;if(this.isStatusComplete())return 7}return 8}hasNoSubmissions(){return!this.attemptCount||0===this.attemptCount}hasNoParticipation(){return!this.participation||0===this.participation.comment&&0===this.participation.reply}hasNoTotalParticipation(){return!this.participation||0===this.participation.comment&&0===this.participation.reply&&0===this.participation.totalComment&&0===this.participation.totalReply}hasLateParticipation(){return this.participation&&0===this.participation.comment&&0===this.participation.reply&&this.participation.totalComment+this.participation.totalReply!==0}inProgress(){return this.group?this.grade&&this.grade.ui&&this.grade.ui.groupAttempt&&P.AttemptStatus.InProgress===this.grade.ui.groupAttempt.status:this.grade&&this.grade.ui&&this.grade.ui.attempt&&P.AttemptStatus.InProgress===this.grade.ui.attempt.status}isLate(e){if(!this.hasDueDateException){const t=C(this.context.getServerTime()),s=null!=e?e:this.dueDate;return this.hasNoSubmissions()&&t.isAfter(s)||C(this.lastAttemptDate).isAfter(s)}return!1}isSubmittedLate(e){if(!this.hasDueDateException){const t=null!=e?e:this.dueDate;return!this.hasNoSubmissions()&&C(this.lastAttemptDate).isAfter(t)&&!this.inProgress()}return!1}isCompleted(){return!(this.group||!this.grade||!this.grade.isGraded()||!this.grade.isPosted())||!!(this.group&&this.group.memberships&&this.group.memberships.length>0)&&this.group.memberships.every(e=>e.ui&&e.ui.gradeDetail&&e.ui.gradeDetail.isPosted())}needsPosting(){if(!this.group)return!this.isCompleted()&&this.grade&&this.grade.isReadyToPost();if(this.group&&this.group.memberships){let e=0,t=0;if(this.group.memberships.forEach(s=>{s.ui&&s.ui.gradeDetail&&(s.ui.gradeDetail.isReadyToPost()?t++:s.ui.gradeDetail.isPosted()&&e++)}),t>0&&e+t===this.group.memberships.length)return!0}return!1}needsGrading(){return this.grade.groupAttempts&&this.grade.groupAttempts.length?this.grade.groupAttempts[0].isNeedsGrading()&&!this.grade.groupAttempts[0].isPostable():this.attemptCount>0&&this.grade.isSubmitted()}deleteAllAttempts(){this.grade.attempts.$fetch().$then(e=>{e.forEach(e=>{e.$destroy()}),this.attemptCount=0,this.lastAttemptDate=null})}getLastAttempt(){var e,t;if(null===(t=null===(e=this.grade)||void 0===e?void 0:e.attempts)||void 0===t?void 0:t.length)return this.grade.attempts[this.grade.attempts.length-1]}};F=Object(n.__decorate)([Object(n.__param)(0,Object(E.b)("column")),Object(n.__param)(1,Object(E.b)(m.b)),Object(n.__param)(2,Object(E.b)(g.b))],F);class B extends G{}a.module(R,["angular-data.DSCacheFactory",y.N,m.a,T.b,I.a,v.a,S.a,$.a]).service(O,G)}).call(this,s("5iHu"))},oB9e:function(e,t,s){"use strict";s.d(t,"a",(function(){return p})),s.d(t,"b",(function(){return g}));s("SeO5");var n=s("Llzl"),i=s("IbyE"),r=s("0JpG"),o=s("nYZ0"),a=s("Fvsw"),l=s("jhBu"),c=s("Y3OE"),d=s("X/qj"),u=s("pjml"),h=s("TnpK"),m=s("g66W");const p="ultra.service.blog",g="blogService";class b{constructor(e,t,s,n,i,r,o,a,l,c,d,u){this.bbLocalize=e,this.$rootScope=t,this.$q=s,this.$ngRedux=n,this.$modal=i,this.courseModel=r,this.UserModel=o,this.context=a,this.contentService=l,this.ultraState=c,this.gradebookPermissionService=d,this.entitlementService=u,this.subscribeToRedux()}subscribeToRedux(){this.$ngRedux.connect(null,e=>({loadBlog:t=>e(i.actions.blog.blogs.loadBlog(t)),persistContent:(t,s)=>e(i.actions.content.persistContent(t,s)),loadGradebookColumn:(t,s)=>e(i.actions.gradebookColumn.loadGradebookColumn({courseId:t,columnId:s.gradeColumnId})),persistGradebookColumn:(t,s)=>e(i.actions.gradebookColumn.persistGradebookColumn(t,s)),loadGradebookGrade:(t,s,n,r={})=>e(i.actions.gradebookGrade.loadBulkView(t,[s],[n],r))}))(this)}createContent(e){const{courseId:t,parentId:s,positionBefore:n,positionAfter:i,root:r}=e;return this.contentService.makeContentInContentTree(r,t,s,n,i)}updateContent(e,t,s){return e.$patch(s).$then(()=>{this.$rootScope.$broadcast("content-update",e),this.$rootScope.$broadcast("attempt-base-content-update",e,t)}).$asPromise()}fetchContent(e,t){return t.contents.$find(e,{expand:"alignedGoals,assignedGroups"}).$asPromise()}fetchBlog(e,t,s=!1){const n={courseId:e,blogId:t,expandHasEntries:s};return this.$q.resolve(this.loadBlog(n)).then(e=>e.blog)}patchBlogContent(e,t,s,n){const i={id:t,courseId:e,contentDetail:{[c.a.Journal.toString()]:{blog:s}}},r={id:t,courseId:e,contentDetail:{[c.a.Journal.toString()]:{blog:n}}};return this.$q.resolve(this.persistContent(i,r)).then(e=>e.contents)}patchGradebookColumn(e,t){return this.$q.resolve(this.persistGradebookColumn(e,t)).then(e=>e.gradebookColumn)}patchBlogGrading(e,t,s,n,i,r){const o=!s.gradingAllowed&&!n.gradingAllowed,a=s.gradingAllowed&&!n.gradingAllowed,l=!s.gradingAllowed&&n.gradingAllowed,d=s.entryModificationAllowed!==n.entryModificationAllowed,u=s.commentModificationAllowed!==n.commentModificationAllowed;return!o||d||u?a||d||u?this.patchBlogContent(e,t,s,n).then(e=>null):l?this.patchBlogContent(e,t,s,n).then(s=>{const n=s[t].contentDetail[c.a.Journal.toString()];return r.id=n.blog.gradeColumnId,r.courseId=e,this.patchGradebookColumn({},r)}):this.patchGradebookColumn(i,r):this.$q.resolve(null)}loadBlogGradebookColumn(e,t){return t&&t.gradeColumnId?this.$q.resolve(this.loadGradebookColumn(e,t).then(e=>e.gradebookColumn)):this.$q.resolve(null)}savePrompt(e,t){const s=e.description,n=[{tag:"table",replacementText:this.bbLocalize.translateSync({key:"course.content.tablePlaceholder",locale:this.bbLocalize.getLocale(this.$rootScope)})},{tag:"math",replacementText:this.bbLocalize.translateSync({key:"course.content.mathPlaceholder",locale:this.bbLocalize.getLocale(this.$rootScope)}),replacementTextPlural:this.bbLocalize.translateSync({key:"course.content.mathPlaceholder.plural",locale:this.bbLocalize.getLocale(this.$rootScope)})}],i=m.e(t,n);return e.description=this.contentService.truncateDescription(i,o.c.MAX_LENGTH_IN_CONTENT_ITEM),e.$patch(["contentDetail"]).$asPromise().then(()=>{this.$rootScope.$broadcast("content-update",e)}).catch(()=>{e.description=s})}loadBlogGradebookGrade(e,t,s,n={}){return this.$q.resolve(this.loadGradebookGrade(e,t,s,n))}}b.$inject=[r.serviceName,"$rootScope","$q","$ngRedux","$modal",u.m.serviceName,u.Jb.serviceName,a.b,o.f,h.d,d.b,l.b];class f extends b{}n.module(p,[u.N,r.moduleName,a.a,o.d,h.b,d.a,l.a,u.N]).service(g,b)},oNH7:function(e,t){e.exports='<div ng-if="conversionStatusBarController.showStatusBar && !conversionStatusBarController.inPreview"\n     class="conversion-status-bar import-learn-bar" ng-class="{\'below\': conversionStatusBarController.hideStatusBar()}"\n     bb-load-bundle="components/directives/conversion-status-bar" role="banner">\n  <div class="conversion-prompt-container">\n    <div class="conversion-prompt-title" bb-translate="course.conversion.statusBar.useUltraPromptTitle" course-org-token-resolver>\n    </div>\n    <div class="conversion-prompt-details" bb-translate="course.conversion.statusBar.useUltraPromptDetails" course-org-token-resolver>\n    </div>\n    <a class="hide-for-medium-only hide-for-small-only"\n        bb-translate="course.conversion.statusBar.moreInfoLink" bb-translate-attrs="{ \'href\': \'course.conversion.statusBar.moreInfoLinkUrl\' }"\n        target="_blank" rel="noopener noreferrer"\n        analytics-id="course.conversion.statusBar.moreInfoLink"></a>\n  </div>\n  <div class="conversion-button-container">\n    <a href="javascript:void(0);" class="js-back-to-classic conversion-button conversion-return-classic show-for-large-up"\n        ng-click="conversionStatusBarController.backToClassic()" component-key="conversionBackToClassic"\n        analytics-id="course.conversion.statusBar.backToClassic">\n      <bb-translate course-org-token-resolver>course.conversion.statusBar.backToClassic</bb-translate>\n    </a>\n    <button class="js-back-to-classic conversion-button conversion-return-button button button--secondary"\n        ng-click="conversionStatusBarController.backToClassic()" component-key="conversionBackToClassic"\n        analytics-id="course.conversion.statusBar.backToClassic.button">\n      <span bb-translate="course.conversion.statusBar.backToClassic" course-org-token-resolver></span>\n    </button>\n    <button class="js-use-new-ux conversion-button button default" ng-click="conversionStatusBarController.useTheNewExperience()"\n            bb-confirmation-needed="resource/x-bb-course-conversion" show-type="always"  confirmation-course-org-token-resolver\n            analytics-id="course.conversion.statusBar.useUltra.button">\n      <span bb-translate="course.conversion.statusBar.useUltra" course-org-token-resolver></span>\n    </button>\n  </div>\n</div>\n'},oQrK:function(e,t,s){"use strict";t.a=class{static detect(){const e={},t=window.navigator.userAgent.toLowerCase(),s=function(e){return-1!==t.indexOf(e)};return e.ios=function(){return e.iphone()||e.ipod()||e.ipad()},e.iphone=function(){return!e.windows()&&s("iphone")},e.ipod=function(){return s("ipod")},e.ipad=function(){return s("ipad")},e.android=function(){return!e.windows()&&s("android")},e.androidPhone=function(){return e.android()&&s("mobile")},e.androidTablet=function(){return e.android()&&!s("mobile")},e.blackberry=function(){return s("blackberry")||s("bb10")||s("rim")},e.blackberryPhone=function(){return e.blackberry()&&!s("tablet")},e.blackberryTablet=function(){return e.blackberry()&&s("tablet")},e.windows=function(){return s("windows")},e.windowsPhone=function(){return e.windows()&&s("phone")},e.windowsTablet=function(){return e.windows()&&s("touch")&&!e.windowsPhone()},e.fxos=function(){return(s("(mobile;")||s("(tablet;"))&&s("; rv:")},e.fxosPhone=function(){return e.fxos()&&s("mobile")},e.fxosTablet=function(){return e.fxos()&&s("tablet")},e.meego=function(){return s("meego")},e.mobile=function(){return e.androidPhone()||e.iphone()||e.ipod()||e.windowsPhone()||e.blackberryPhone()||e.fxosPhone()||e.meego()},e.tablet=function(){return e.ipad()||e.androidTablet()||e.blackberryTablet()||e.windowsTablet()||e.fxosTablet()},e.desktop=function(){return!e.tablet()&&!e.mobile()},e.portrait=function(){return window.innerHeight/window.innerWidth>1},e.landscape=function(){return window.innerHeight/window.innerWidth<1},e}}},oVrE:function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"e",(function(){return a})),s.d(t,"d",(function(){return l})),s.d(t,"f",(function(){return c})),s.d(t,"g",(function(){return d})),s.d(t,"a",(function(){return u}));const n="allMembersId",i="anonymousId";function r(){return n}function o(){return{id:r(),givenName:"allMembers",familyName:void 0,userName:void 0}}function a(){return i}function l(e,t){const s=t.translateSync({locale:t.getLocale(e),key:"components.directives.avatar.anonymous",noWrap:!0,noEscape:!0});return{id:a(),givenName:s,familyName:"",userName:void 0}}function c(e){return(null==e?void 0:e.id)===n}function d(e){return(null==e?void 0:e.id)===i}function u(e){var t;const s=null==e?void 0:e.givenName,n=null==e?void 0:e.familyName;return e&&(n||s)?{avatarUrl:null===(t=e.avatar)||void 0===t?void 0:t.permanentUrl,givenName:s,familyName:n,otherName:e.otherName,preferredDisplayName:e.preferredDisplayName,pronouns:e.pronouns,pronunciation:e.pronunciation,pronunciationAudio:e.pronunciationAudio}:null}},ofgY:function(e,t){e.exports='<div class="file-upload-container">\n  <div ngf-drop\n       id="{{fileUploadDivId}}"\n       ng-model="files" class="file-upload"\n       ngf-multiple="fileUpload.allowMultiple"\n       ngf-drop-disabled="disableDrag && disableDrag()"\n       ngf-change="fileUpload.onFileSelect($files, $file, $newFiles, $duplicateFiles, $invalidFiles, $event)"\n       ngf-stop-propagation="!(disableDrag && disableDrag())"\n       ngf-drag-over-class="dragClass"\n       tabindex="-1">\n    <div class="fileUploadTransclude" ng-transclude ng-show="fileUpload.transcludeVisible"></div>\n    <div class="js-file-upload-complete" ng-attr-ready="{{!fileUpload.uploadInProgress}}"></div>\n    <div ng-show="fileUpload.fileReviewVisible" class="file-upload-review">\n      <section class="file-upload-panel" ng-if="fileUpload.progressVisible">\n        <bb-progress primary-key="primaryKey && primaryKey()" display-results="fileUpload.useDefaultSuccessMethod"></bb-progress>\n      </section>\n    </div>\n  </div>\n  <input ngf-select\n         ng-if="fileUpload.allowMultiple"\n         type="file"\n         ngf-change="fileUpload.onFileSelect($files)"\n         multiple class="hide fileUploadInput"\n         analytics-id="components.directives.fileUpload.multipleFiles.input.file"/>\n  <input ngf-select\n         ng-if="!fileUpload.allowMultiple"\n         type="file"\n         ngf-change="fileUpload.onFileSelect($files)"\n         class="hide fileUploadInput"\n         analytics-id="components.directives.fileUpload.input.file"/>\n</div>'},ohO4:function(e,t,s){"use strict";var n=s("D57K"),i=s("aHpC"),r=s("IbyE");class o{constructor(e,t,s,n){this.flagKey=e,this.scope=n,this.$q=s,this.service=t}wait(){if(!this.defered){const e=this.service.isFeatureEnabledStrict(this.flagKey);if(void 0!==e)return this.$q.resolve(e);this.deregister=this.scope.$on("feature-flag-values-updated",this.featureFlagsUpdated.bind(this)),this.service.loadFeatureFlagValue(this.flagKey),this.defered=this.$q.defer()}return this.defered.promise}featureFlagsUpdated(){var e,t;const s=this.service.isFeatureEnabledStrict(this.flagKey);void 0!==s&&(null===(e=this.deregister)||void 0===e||e.call(this),this.deregister=void 0,null===(t=this.defered)||void 0===t||t.resolve(s))}}s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return l}));const a="ultra.service.feature.flags",l="featureFlags";let c=class{constructor(e,t,s){this.$rootScope=e,this.$q=t,this.$ngRedux=s,this.subscribeToRedux();const n=e.$watch(()=>this.flagValues,e=>this.$rootScope.$broadcast("feature-flag-values-updated",e));this.$rootScope.$on("$destroy",()=>n())}subscribeToRedux(){const e=this.$ngRedux.connect(e=>{return{flagValues:r.select.featureFlags.getFeatureFlagValues(e)}},e=>({loadFeatureFlagValueByKey:t=>e(r.actions.featureFlags.loadFeatureFlagValueByKey({flagKey:t}))}))(this);this.$rootScope.$on("$destroy",e)}loadFeatureFlagValue(e){return this.loadFeatureFlagValueByKey(e)}isFeatureEnabled(e){var t;return(null===(t=this.flagValues)||void 0===t?void 0:t[e])?this.isFlagValueTrue(this.flagValues[e].flagValue):(this.loadFeatureFlagValue(e),!1)}isFeatureEnabledStrict(e){var t;if(null===(t=this.flagValues)||void 0===t?void 0:t[e])return this.isFlagValueTrueStrict(this.flagValues[e]);this.loadFeatureFlagValue(e)}isFlagValueTrue(e){return"true"===e}isFlagValueTrueStrict(e){if(e&&(void 0!==e.flagValue||!e.isLoading))return this.isFlagValueTrue(e.flagValue)}createWaiter(e){return new o(e,this,this.$q,this.$rootScope).wait()}};c=Object(n.__decorate)([Object(n.__param)(0,Object(i.b)("$rootScope")),Object(n.__param)(1,Object(i.b)("$q")),Object(n.__param)(2,Object(i.b)("$ngRedux"))],c);class d extends c{}angular.module(a,[]).service(l,c)},oi1r:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return d}));var n=s("nsO7"),i=s("Llzl"),r=s("0JpG"),o=s("Bu0u"),a=s("pjml"),l=s("zGdY");const c="ultra.components.services.grade.gradeSchema.Service",d="gradeSchemaService";class u{constructor(e,t,s,n){this.$q=e,this.CourseModel=s,this.bbLocalize=n,this.gbSchemasCache=t.createCache("gbSchemas")}loadSchemas(e,t,s){e instanceof this.CourseModel||(e=this.CourseModel.$new(e));const i=e.$pk||e.id;if(!i)throw new o.a({message:"A primary key or id must be set on the course model"});let r=null;const a=this.gbSchemasCache.get(i);if(a)r=this.$q.when(a.promise);else{const t=e.gradebook.schemas.$fetch().$asPromise(),o=this.bbLocalize.loadBundle("components/services/grade"),a=this.$q.defer();this.$q.all({gradeSchemas:t,bundle:o}).then(e=>{const t=n.filter(e.gradeSchemas,e=>{return!(e.scaleType===l.SchemaScaleType.Text)||s});t.forEach(e=>{if(e.localizableTitle){const t=e.localizableTitle.languageKey.replace(/[\W_]+/g,"_").toLowerCase();e.ui.displayTitleKey="components.services.grade.schema."+t}else e.ui.displayTitle=e.title}),a.resolve(t)}),this.gbSchemasCache.put(i,{promise:a.promise}),r=a.promise}return r.then(e=>t&&t.length?e.filter(e=>t.some(t=>t===e.scaleType)):e)}loadSchemaForColumn(e){return this.loadSchemas(e.courseId).then(t=>{return n.find(t,t=>t.id===e.gradingSchemaId)})}loadGradeSchema(e){const t=e.courseId;if(t){let s;const i=this.gbSchemasCache.get(t);return s=i?this.$q.when(i.promise):this.loadSchemas(t,[],!0),this.$q.when(s).then(t=>n.find(t,t=>t.id===e.gradingSchemaId))}throw new o.a({message:"Valid grade column object not provided."})}}u.$inject=["$q","DSCacheFactory",a.m.serviceName,r.serviceName];class h extends u{}i.module(c,["angular-data.DSCacheFactory"]).service(d,u)},okL3:function(e,t){e.exports='<div>\n  <div class="upload-list">\n    <div ng-repeat="file in inProgressFiles" ng-attr-id="{{::progress.getProgressIdAttr(file)}}" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.document\'}" class="file-container file-container-progress">\n      <div class="file-meta-container">\n        <div class="file-meta">\n          <ng-switch on="file.currentMimeType">\n            <bb-ui-icon-large-zip ng-switch-when="application/zip" color="primary" class-name="element-image"></bb-ui-icon-large-zip>\n          </ng-switch>\n          <div ng-hide="file.isProcessing" class="progress-circle">\n            <svg class="progress-circle-svg" viewBox="-10 -10 220 220">\n              <path class="back" ng-attr-d="{{\'M0,100 a100,100 0 1 0 200,0 a100,100 0 1 0 -200,0\'}}" fill="transparent" />\n              <path class="bar" ng-attr-d="{{\'m100,0a100,100 0 0 1 0,200a100,100 0 0 1 0,-200\'}}" fill="transparent" stroke-dasharray="629" stroke-dashoffset="629"/>\n            </svg>\n            <i class="progress-icon file-error-icon icon-exclamation" ng-if="state === \'error\'"></i>\n            <span class="progress-value" bb-translate translate-values="{percentage: file.currentProgress}">global.percent</span>\n          </div>\n          <span ng-show="file.isProcessing" class="processing-spinner">\n            <div class="canvas success-state"></div>\n          </span>\n          <p class="progress-status">\n            <span class="ellipse" bb-translate="components.directives.fileUpload.uploadingFile" translate-values="{fileName: file.fileName}"></span>\n          </p>\n        </div>\n        <div class="content-item-controls file-container-controls">\n          <button ng-hide="file.isProcessing"\n                  class="button super-clear js-cancel-upload"\n                  bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.cancelUploadText\'}"\n                  ng-click="progress.cancelUpload($event, file.id, file.identifier)"\n                  analytics-id="components.directives.fileUpload.cancelUploadText.button">\n            <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},p7NW:function(e,t,s){"use strict";s.d(t,"f",(function(){return $})),s.d(t,"g",(function(){return w})),s.d(t,"e",(function(){return T})),s.d(t,"c",(function(){return E})),s.d(t,"b",(function(){return k})),s.d(t,"d",(function(){return P})),s.d(t,"a",(function(){return A}));var n=s("D57K"),i=s("nsO7"),r=s("Llzl"),o=s("0JpG"),a=s("Fvsw"),l=s("Qbdf"),c=s("X455"),d=s("fYJU"),u=s("bMxM"),h=s("o5Lu"),m=s("pjml"),p=s("TnpK"),g=s("jhBu"),b=s("rEZX"),f=s("+O05"),v=s("Sa5G"),S=s("aHpC"),y=s("e6jQ"),C=s("zGdY"),I=s("nkTj");const $="ultra.services.rubric",w="rubric",T="rubric-eval-save",E="remove-peek-override",k="remove-inline-override",P="rubric-grade-update",A=255,R=[{max:100,min:85},{max:84,min:75},{max:74,min:60},{max:60,min:0}];let O=class e{constructor(e,t,s,n,i,r,o,a,l,c,d,u,h){this.$rootScope=e,this.$q=t,this.context=s,this.bbLocalize=n,this.CourseModel=i,this.RubricModel=r,this.grade=o,this.currentCourse=a,this.membership=l,this.ultraState=c,this.contextUser=d,this.entitlement=u,this.contentIcon=h,this.getPercentileColor=e=>this.grade.getPercentileColor(e),this.bbLocalize.loadBundle("components/services/rubric"),this.updateIsStudentView()}loadRubricEvaluationData(){this.updateIsStudentView();const e=this.getParamsFromUrl();if(!e)return this.$q.resolve(void 0);const t=this.currentCourse.course.contents.$find(e.contentId,{expand:"assignedGroups"}).$asPromise(),s=this.currentCourse.course.gradebook.columns.$find(e.columnId,{expand:"associatedRubrics"}).$asPromise();return this.$q.all([t,s]).then(([t,s])=>{if(this.isGroupContent=!!e.groupIdParam,this.content=t,this.isExternalSubmission=f.a.isExternalSubmissionsAssessment(t),this.gradingColumn=s,this.currentUserId=this.isStudentView?this.contextUser.userId:e.userId,this.rubricAssociation=this.gradingColumn.getRubricAssociation(),this.gradebookSettings=this.grade.loadDefaultGradebookSettings(),this.course=this.currentCourse.course,this.gradingColumn.hasRubricAssociation())return this.loadRubricData()})}loadRubricViewData(){this.updateIsStudentView();const e=this.getParamsFromUrl();if(!e)return this.$q.resolve(void 0);const t=this.currentCourse.course.contents.$find(e.contentId).$asPromise(),s=this.currentCourse.course.gradebook.columns.$find(e.columnId,{expand:"associatedRubrics"}).$asPromise();return this.$q.all([t,s]).then(([e,t])=>{this.content=e,this.gradingColumn=t})}getParamsFromUrl(){const{userId:e,columnId:t,assignmentId:s,groupId:n,disGroupId:i}=this.ultraState.params,r=!n&&(e||this.isStudentView);let{contentId:o}=this.ultraState.params;if(o=o||s,r&&t&&o)return{userId:e,columnId:t,contentId:o};if(!r&&(n||i)&&o){return{groupIdParam:n||i,contentId:o,columnId:t}}return null}shouldRenderRubricEvaluation(){if(!this.isStudentView)return!0;if(this.gradingColumn&&this.gradingColumn.hasRubricAssociation()){return this.gradingColumn.getRubricAssociation().isWithEvaluations&&(this.attempt&&this.attempt.isCompleted()||this.gradingColumn.isDiscussion()||this.gradingColumn.isJournal())}return!1}loadRubricData(){if(this.currentUserId&&(!this.isGroupContent||this.isStudentView)){if(this.group=null,this.gradingColumn.anonymousGrading){if(!this.shouldRenderRubricEvaluation())return;return this.grade.loadAnonymousStudentGrade(this.gradingColumn,this.currentUserId).then(e=>this.loadGradeData([e]))}return this.gradingColumn.grades.$refresh({userId:this.currentUserId}).$asPromise().then(e=>this.loadGradeData(e))}if(this.isGroupContent)return this.course.contents.$find(this.gradingColumn.contentId,{expand:"assignedGroups"}).$asPromise().then(e=>this.course.memberships.$fetch({expand:"user",roleBucket:"taking"}).$asPromise().then(t=>this.grade.loadGroupRows(this.course,e.assignedGroups,t,this.gradingColumn,e.isSafeAssignEnabled()).then(e=>{var t;if(this.groupSubmission=i.find(e,e=>"grade"in e&&e.attemptCount>0&&(e.group.id===this.ultraState.params.groupId||e.group.id===this.ultraState.params.disGroupId)),this.groupSubmission){this.group=this.groupSubmission.group,this.gradeDetail=this.groupSubmission.grade,this.isGradingInProgress=C.ManualGradeStatus.GradingInProgress===this.gradeDetail.manualStatus;const e=this.gradeDetail.groupAttempts.getAttemptById(null===(t=this.ultraState.params)||void 0===t?void 0:t.attemptId);if(e)return this.loadAttemptData(e)}})))}loadGradeData(e){if(e.length<=0&&(null!=this.ultraState.params.gradeId||e[0].id!==this.ultraState.params.gradeId))return;this.gradeDetail=e[0],this.isGradingInProgress=C.ManualGradeStatus.GradingInProgress===this.gradeDetail.manualStatus,this.gradeDetail.column=this.gradingColumn;const t=this.ultraState.params.attemptId&&!this.isGroupContent?{attemptId:this.ultraState.params.attemptId}:{expand:"attempts"};return this.grade.loadAttempt(this.gradeDetail,this.course,t,this.content).then(e=>{const t=e.ui.groupAttempt||e.ui.attempt;if(t)return this.loadAttemptData(t)})}loadAttemptData(e){this.attempt=e,this.attempt.rubricEvaluation&&this.attempt.rubricEvaluation.rubricAssociationId===this.rubricAssociation.id||(this.attempt.rubricEvaluation=this.createRubricEvaluation(this.rubricAssociation.id,this.gradeDetail.userId,this.gradingColumn.possible)),this.rubricEvaluation={...this.attempt.rubricEvaluation,maxScore:this.gradeDetail.pointsPossible}}getBaseRubricEvaluationPayload(){return{maxScore:this.rubricEvaluation.maxScore,isEditable:this.isEditable(),isStudent:this.isStudentView,isOverrideAvailable:this.isOverrideAvailable(),grade:this.getGrade(),shouldUpdateCriterionFeedback:!1,isMultipleAttempts:this.isMultipleAttempts(),isGroupGradeMultiple:this.gradeDetail.ui.isGroupGradeMultiple,isGradingInProgress:this.isGradingInProgress,isExternalSubmission:this.isExternalSubmission,isGradeOverridden:this.isGradeOverridden(),isAnonymousGrading:this.gradingColumn.anonymousGrading,criteria:this.getCriteriaPayload(this.gradingColumn,this.rubricEvaluation),getGradingPillColor:this.getPercentileColor,contentIconName:this.getIconName(),smallTitle:this.content.title,shouldUndoOverride:!1,shouldEmptyRubric:!1,okConfirmationClicked:!1,isSavingRubric:!1,decimalsLength:h.d.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL,rubricType:this.gradingColumn.getAssociatedRubric().rubricType}}getBaseRubricViewPayload(){return{maxScore:this.gradingColumn.possible,criteria:this.getCriteriaPayload(this.gradingColumn),contentIconName:this.getIconName(),smallTitle:this.content.title,decimalsLength:h.d.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL,rubricType:this.gradingColumn.getAssociatedRubric().rubricType}}getIconName(){const e=this.contentIcon.getColumnIconClassAsString(this.gradingColumn);return this.contentIcon.getIconName(e)}isEditable(){return!(this.gradingColumn.delegatedGrading&&this.attempt.isReconciled()&&!this.isDelegatedAndEntitledReconciler(this.gradingColumn))&&(!this.isStudentView&&this.entitlement.isEntitled(v.n.AllGrading,this.course.id)&&!this.course.isComplete())}isOverrideAvailable(){return!(this.gradingColumn.delegatedGrading&&!this.isDelegatedAndEntitledReconciler(this.gradingColumn))&&(this.isEditable()&&this.entitlement.isEntitled(v.n.OverrideGrade,this.course.id))}getGrade(){var e,t;if(this.isMultipleAttempts()||this.gradingColumn.anonymousGrading){return(null===(e=this.attempt.displayGrade.score)||void 0===e?void 0:e.toString())||""}return!this.isGradeOverridden()||this.gradeDetail.ui.isGroupGradeMultiple||this.isGradingInProgress?(null===(t=this.rubricEvaluation.cells)||void 0===t?void 0:t.length)>0?this.rubricEvaluation.totalScore.toString():"":this.gradeDetail.displayGrade.score.toString()}isMultipleAttempts(){return this.gradingColumn.isMultipleAttempts()&&!this.gradingColumn.isDiscussion()&&!this.gradingColumn.isJournal()}isGradeOverridden(){return this.grade.isRubricGradeOverridden(this.gradeDetail,this.attempt,this.gradingColumn)}createRubricCopy(e){const t=this.CourseModel.$new(e.courseId),s={courseId:e.courseId,title:this.incrementTitle(e.title,t.locale),columnHeaders:this.cloneHeaders(e.columnHeaders),rows:this.cloneRows(e.rows),permissions:i.clone(e.permissions),rubricType:e.rubricType};return t.rubrics.$build(s)}cloneRows(e){return i.map(e,e=>({cells:this.cloneCells(e.cells),header:e.header,percentage:e.percentage,position:e.position,rowPoints:e.rowPoints}))}cloneCells(e){return i.map(e,e=>({position:e.position,description:e.description,percentage:e.percentage,percentageMin:e.percentageMin,percentageMax:e.percentageMax,startPointRange:e.startPointRange,endPointRange:e.endPointRange,numericPoints:e.numericPoints}))}cloneHeaders(e){return i.map(e,e=>({position:e.position,header:e.header}))}incrementTitle(e,t){return this.bbLocalize.translateSync({locale:t,key:"components.services.rubric.newCopyTitle",params:{rubricTitle:e,date:this.bbLocalize.formatDateSync(new Date,o.ILocaleDateFormat.Short)},noWrap:!0,noEscape:!0}).substring(0,A)}processColumnHeader(t,s){for(let n=0;n<e.templateColumnCount;n++)t.push({position:n,header:this.bbLocalize.translateSync({locale:s,key:"components.services.rubric.template.column"+(n+1)})})}processRow(t,s,n){for(let i=0;i<e.templateRowCount;i++){const r=new Array;this.processCell(n,r),t.push({position:i,header:this.bbLocalize.translateSync({locale:null!=s?s:this.bbLocalize.getAppLocale(),key:"components.services.rubric.template.criteria",params:{idx:i+1},noWrap:!0}),percentage:Math.floor(100/e.templateRowCount),cells:r})}}updateRubricRows(e,t){const s=this.cloneRows(e);for(let e=0;e<s.length;e++)switch(t){case C.RubricType.PERCENTAGE:s[e].percentage=this.generateCriterionPercentage(s.length,e),s[e].cells=this.processPercentageCells(s[e].cells);break;case C.RubricType.PERCENTAGE_RANGE:s[e].percentage=this.generateCriterionPercentage(s.length,e),s[e].cells=this.processPercentageRangeCells(s[e].cells);break;case C.RubricType.POINTS:s[e].rowPoints=0,s[e].cells=this.processPointsCells(s[e].cells);break;case C.RubricType.POINTS_RANGE:s[e].rowPoints=0,s[e].cells=this.processPointsRangeCells(s[e].cells);break;default:this.unrecognizedRubric()}return s}processPercentage(e,t){return Math.floor(100-100/e*t)}generateCriterionPercentage(e,t){return t+1===e?Math.floor(100/e)+100%e:Math.floor(100-100/e*(e-1))}processPercentageRangeCells(e){const t=this.cloneCells(e),s=e.length;for(let e=0;e<s;e++)t[e]={position:e,description:t[e].description,percentageMin:this.processPercentage(s,e+1),percentageMax:this.processPercentage(s,e)};return t}processPercentageCells(e){const t=this.cloneCells(e),s=e.length;for(let e=0;e<s;e++)t[e]={position:e,description:t[e].description,percentage:this.processPercentage(s,e)};return t}processPointsCells(e){const t=this.cloneCells(e),s=e.length;for(let e=0;e<s;e++)t[e]={position:e,description:t[e].description,numericPoints:0};return t}processPointsRangeCells(e){const t=this.cloneCells(e),s=e.length;for(let e=0;e<s;e++)t[e]={position:e,description:t[e].description,startPointRange:0,endPointRange:0};return t}processCell(t,s){switch(t){case C.RubricType.PERCENTAGE:for(let t=0;t<e.templateColumnCount;t++)s.push({position:t,description:"",percentage:this.processPercentage(e.templateColumnCount,t)});break;case C.RubricType.PERCENTAGE_RANGE:R.forEach((e,t)=>{s.push({position:t,description:"",percentageMin:e.min,percentageMax:e.max})});break;default:this.unrecognizedRubric()}}generateDefaultRubric(e){if(null!=this.rubricTemplate&&this.rubricTemplate.courseId===e.id){const t=i.cloneDeep(this.rubricTemplate);return e.rubrics.$build(t).$asPromise()}return this.bbLocalize.loadBundle("components/services/rubric").then(()=>{this.rubricTemplate={courseId:e.id,title:"",rows:new Array,columnHeaders:new Array,permissions:{edit:!0,delete:!0},rubricType:C.RubricType.PERCENTAGE},this.processColumnHeader(this.rubricTemplate.columnHeaders,e.locale),this.processRow(this.rubricTemplate.rows,e.locale,this.rubricTemplate.rubricType);const t=i.cloneDeep(this.rubricTemplate);return e.rubrics.$build(t).$asPromise()})}getCriteriaPayload(e,t){const s=e.getAssociatedRubric(),n=this.isPointsOrPointsRangeRubric(s)?s.rows.filter(e=>i.isFinite(e.rowPoints)).reduce((e,t)=>e+t.rowPoints,0):100;return s.rows.map(i=>{var r;let o,a=0;a=this.isPointsOrPointsRangeRubric(s)?0===n?0:e.possible*i.rowPoints/n:e.possible*i.percentage/n,(null==t?void 0:t.cells)&&(o=t.cells.find(e=>e.rubricRowId===i.id));const l=this.getAchievementsPayload(i.cells,s,a,n,o,e),c=this.isPointsOrPointsRangeRubric(s)?a:i.percentage;return{id:i.id,title:i.header,value:c,feedback:null===(r=null==o?void 0:o.feedback)||void 0===r?void 0:r.rawText,achievements:l}})}getAchievementsPayload(e,t,s,n,i,r){return e.map((e,o)=>{const a=(null==i?void 0:i.rubricCellId)===e.id,l={id:e.id,title:t.columnHeaders[o].header,description:e.description,isSelected:a};switch(t.rubricType){case C.RubricType.PERCENTAGE:l.value=e.percentage,l.score=s*e.percentage/n;break;case C.RubricType.POINTS:l.value=e.numericPoints,l.score=0===n?0:r.possible*e.numericPoints/n;break;case C.RubricType.PERCENTAGE_RANGE:l.rangeScore={minValue:e.percentageMin,maxValue:e.percentageMax},l.rangeScoreValue=a?i.selectedPercent:null;break;case C.RubricType.POINTS_RANGE:l.rangeScore={minValue:0===n?0:r.possible*e.startPointRange/n,maxValue:0===n?0:r.possible*e.endPointRange/n},l.rangeScoreValue=a?s*i.selectedPercent:null;break;default:this.unrecognizedRubric()}return l})}isPointsOrPointsRangeRubric(e){return e.rubricType===C.RubricType.POINTS||e.rubricType===C.RubricType.POINTS_RANGE}isPercentageOrPercentageRangeRubric(e){return e.rubricType===C.RubricType.PERCENTAGE||e.rubricType===C.RubricType.PERCENTAGE_RANGE}changeRubricType(e,t){e.rows=this.updateRubricRows(e.rows,e.rubricType)}insertNewCriteriaAt(e,t){if(e.rows.length>=15)throw new Error("Cannot add more than 15 criteria rows");const s=this.generateNewRow(e.rubricType,e.rows[0].cells);return e.rows.splice(t,0,s),e.rows.forEach((e,t)=>{e.position=t}),e}deleteCriteriaAt(e,t){if(1===e.rows.length)throw new Error("Cannot delete last criteria row");return e.rows.splice(t,1),e.rows.forEach((e,t)=>{e.position=t}),e}balanceCriteriaPercentages(e){e.rows.forEach(t=>{t.percentage=Math.floor(100/e.rows.length)}),i.last(e.rows).percentage+=100-e.rows.reduce((e,t)=>e+t.percentage,0)}insertNewColumnAt(e,t){if(e.columnHeaders.length>=15)throw new Error("Cannot add more than 15 columns");return e.columnHeaders.splice(t,0,{position:t,header:""}),e.rows.forEach(s=>{switch(e.rubricType){case C.RubricType.PERCENTAGE:this.insertNewPercentRubricColumn(s,t);break;case C.RubricType.PERCENTAGE_RANGE:this.insertNewPercentRangeRubricColumn(s,t);break;case C.RubricType.POINTS:this.insertNewPointsRubricColumn(s,t);break;case C.RubricType.POINTS_RANGE:this.insertNewPointsRangeRubricColumn(s,t);break;default:this.unrecognizedRubric()}}),e}deleteColumnAt(e,t){if(1===e.columnHeaders.length)throw new Error("Cannot remove last column");return e.columnHeaders.splice(t,1),e.rows.forEach(s=>{if(s.cells.splice(t,1),e.rubricType!==C.RubricType.PERCENTAGE)return e;0===t&&(s.cells[0].percentage=100)}),e}createRubricEvaluation(e,t,s){return{rubricAssociationId:e,userId:t,maxScore:s,totalScore:0,cells:[]}}initiateUiState(e,t){e.ui.editingCells=!1,e.ui.canEdit=t,e.ui.editingCriteria=!1,e.ui.invalidCriteriaPercentageSum=!1,e.ui.criteriaLimit=15,e.ui.columnLimit=15}mapRubricToGrid(e){return null==e.ui.columnHeaders&&(e.ui.columnHeaders=new Array),e.columnHeaders.forEach((t,s)=>{e.ui.columnHeaders[s]?e.ui.columnHeaders[s].uuid||(e.ui.columnHeaders[s].uuid=Object(y.b)()):e.ui.columnHeaders[s]={uuid:Object(y.b)()}}),null==e.ui.rows&&(e.ui.rows=new Array),e.rows.forEach((t,s)=>{e.ui.rows[s]?e.ui.rows[s].uuid||(e.ui.rows[s].uuid=Object(y.b)()):e.ui.rows[s]={uuid:Object(y.b)()}}),{rows:e.rows.map((t,s)=>({id:e.ui.rows[s].uuid,data:t})),columns:e.columnHeaders.map((t,s)=>({id:e.ui.columnHeaders[s].uuid,data:t}))}}insertNewPercentRubricColumn(e,t){const s=t<e.cells.length?e.cells[t].percentage:e.cells[t-1].percentage;if(e.cells.splice(t,0,{position:0,description:"",percentage:s}),e.cells.forEach((e,t)=>{e.position=t}),0===t)return;const n=e.cells[t+1]?e.cells[t+1].percentage:0,i=Math.floor((e.cells[t-1].percentage-n)/2);e.cells[t].percentage=e.cells[t-1].percentage-i}insertNewPercentRangeRubricColumn(e,t){const s=t<e.cells.length?e.cells[t].percentageMin:e.cells[t-1].percentageMin,n=t<e.cells.length?e.cells[t].percentageMax:e.cells[t-1].percentageMax;if(e.cells.splice(t,0,{position:t,description:"",percentageMin:s,percentageMax:n}),e.cells.forEach((e,t)=>{e.position=t}),0===t)return;const i=e.cells[t+1]?e.cells[t+1].percentageMin:0,r=e.cells[t+1]?e.cells[t+1].percentageMax:0;e.cells[t].percentageMin=e.cells[t-1].percentageMin-Math.floor((e.cells[t-1].percentageMin-i)/2),e.cells[t].percentageMax=e.cells[t-1].percentageMax-Math.floor((e.cells[t-1].percentageMax-r)/2)}insertNewPointsRubricColumn(e,t){const s=t<e.cells.length?e.cells[t].numericPoints:e.cells[t-1].numericPoints;if(e.cells.splice(t,0,{position:0,description:"",numericPoints:s}),e.cells.forEach((e,t)=>{e.position=t}),0===t)return;const n=e.cells[t+1]?e.cells[t+1].numericPoints:0;e.cells[t].numericPoints=Math.round(50*(e.cells[t-1].numericPoints+n))/100}insertNewPointsRangeRubricColumn(e,t){e.cells.splice(t,0,{position:t,description:"",startPointRange:0,endPointRange:0}),e.cells.forEach((e,t)=>{e.position=t})}generateNewRow(e,t){switch(e){case C.RubricType.PERCENTAGE:return this.generateNewPercentageRow(t);case C.RubricType.PERCENTAGE_RANGE:return this.generateNewPercentageRangeRow(t);case C.RubricType.POINTS:case C.RubricType.POINTS_RANGE:return this.generateNewPointsTypeRow(t);default:this.unrecognizedRubric()}}generateNewPercentageRangeRow(e){const t={header:"",percentage:0,cells:new Array};return e.forEach((e,s)=>{t.cells.push({position:s,description:"",percentageMin:e.percentageMin,percentageMax:e.percentageMax})}),t}generateNewPercentageRow(e){const t={header:"",percentage:0,cells:new Array};return e.forEach((e,s)=>{t.cells.push({position:s,description:"",percentage:e.percentage})}),t}generateNewPointsTypeRow(e){const t={header:"",rowPoints:0,cells:new Array};return e.forEach((e,s)=>{t.cells.push({position:s,description:"",numericPoints:e.numericPoints,startPointRange:e.startPointRange,endPointRange:e.endPointRange})}),t}unrecognizedRubric(){throw new Error("Invalid rubric type, please go check RubricType for more detail")}persistRubricEvaluation(e){return this.$q(t=>this.performPersistRubricEvaluation(e).then(e=>{const s={gradingColumn:this.gradingColumn,attemptInfo:e};t(s)}))}rubricFeedbackIsInvalidForSave(e){return e.some(e=>"number"!=typeof e.scoreValue&&e.hasUnsavedFeedback&&""!==e.feedback&&null!=e.feedback)}rubricHasUnsavedFeedback(e){return e.some(e=>"number"==typeof e.scoreValue&&e.hasUnsavedFeedback)}performPersistRubricEvaluation(e){if("grade"in e&&""===e.grade)return this.attempt.score=null,this.persistCleared(e);const t="isGradeOverridden"in e;if(t&&e.isGradeOverridden&&!this.gradingColumn.anonymousGrading)return this.persistOverriden(e);const s="grade"in e&&"criteria"in e,n="criterionFeedbackWasUpdated"in e&&s;return t&&!e.isGradeOverridden&&s||s||n||this.gradingColumn.anonymousGrading?(this.attempt.score=e.grade,this.persistRubricEvaluationData(e)):this.$q.resolve(void 0)}persistCleared(e){const t=this.rubricEvaluation;t.cells=this.getCells(e);const s=new b.a(this.gradingColumn,null);return s.clearGrade=!0,s.setGradeToEmpty=!0,s.rubricEvaluation=t,this.grade.saveGrade(s,this.gradeDetail,this.attempt,{userId:this.currentUserId,group:this.group})}persistOverriden(e){const t=!this.gradingColumn.anonymousGrading&&this.gradeDetail.displayGrade.isOverride,s=this.group?this.CourseModel.$new(this.course.id).gradebook.groupAttempts.$new(this.attempt.id):this.CourseModel.$new(this.course.id).gradebook.attempts.$new(this.attempt.id),n=Object(I.f)(s);n.rubricEvaluation=this.rubricEvaluation;const i=new b.a(this.gradingColumn,String(e.grade));return this.isDelegatedAndEntitledReconciler(i.column)?this.saveOverridenGrade(i):this.gradingColumn.isDiscussion&&t?n.$asPromise().then(()=>this.saveOverridenGrade(i)):n.$patch().$asPromise().then(()=>this.saveOverridenGrade(i))}isDelegatedAndEntitledReconciler(e){return e.delegatedGrading&&e.isUserReconciler(this.contextUser.userId)}persistRubricEvaluationData(e){const t=this.rubricEvaluation;t.totalScore=e.rubricGrade,t.cells=this.getCells(e),t.overrideScore=-1;const s=new b.a(this.gradingColumn,String(this.attempt.score));return s.rubricEvaluation=t,this.isSingleAttempt()?s.setGradeToEmpty=!0:(s.setGradeToEmpty=!1,this.isGroupContent||(s.attemptId=this.attempt.id)),null==this.attempt.score&&(s.clearGrade=!0),this.isSingleAttempt()?this.grade.saveGrade(s,this.gradeDetail,this.attempt,{userId:this.currentUserId,group:this.group}):this.grade.saveGrade(s,this.gradeDetail,this.attempt)}getCells(e){const t=[];return e.criteria.forEach(s=>{s.achievements.forEach(n=>{var i;if(n.isSelected){let r=null!==(i=n.rangeScoreValue)&&void 0!==i?i:n.value;e.rubricType===C.RubricType.POINTS_RANGE&&(r=0===s.value?0:n.rangeScoreValue/s.value),t.push({rubricCellId:n.id,rubricRowId:s.id,selectedPercent:r,feedback:{rawText:s.feedback}})}})}),t}updateIsStudentView(){var e;this.isStudentView=null!==(e=this.isStudentView)&&void 0!==e?e:this.membership.isStudentMembership()}isSingleAttempt(){return this.gradingColumn&&(this.gradingColumn.isSingleAttempt()||this.gradingColumn.isDiscussion()||this.gradingColumn.isJournal())}saveOverridenGrade(e){return this.gradingColumn.anonymousGrading?this.$q.resolve(void 0):this.grade.saveGrade(e,this.gradeDetail,void 0,{userId:this.currentUserId,group:this.group}).then(()=>{if((this.gradingColumn.isAssignment()||this.gradingColumn.isDiscussion())&&this.gradeDetail.isPosted&&this.gradeDetail.isPosted()&&this.attempt.readyToPost)return this.group?this.gradingColumn.postReadyGroupAttempts({groupAssociationId:this.attempt.groupAssociationId}):this.gradeDetail.postReadyGrades()})}};O.templateRowCount=4,O.templateColumnCount=4,O=Object(n.__decorate)([Object(n.__param)(0,Object(S.b)("$rootScope")),Object(n.__param)(1,Object(S.b)("$q")),Object(n.__param)(2,Object(S.b)(a.b)),Object(n.__param)(3,Object(S.b)(o.serviceName)),Object(n.__param)(4,Object(S.b)(m.m.serviceName)),Object(n.__param)(5,Object(S.b)(m.mb.serviceName)),Object(n.__param)(6,Object(S.b)(h.i)),Object(n.__param)(7,Object(S.b)(l.e)),Object(n.__param)(8,Object(S.b)(c.d)),Object(n.__param)(9,Object(S.b)(p.d)),Object(n.__param)(10,Object(S.b)(d.b)),Object(n.__param)(11,Object(S.b)(g.b)),Object(n.__param)(12,Object(S.b)(u.b))],O);class D extends O{}r.module($,[a.a,o.moduleName,m.N,h.h,u.a]).service(w,O)},pGZF:function(e,t,s){},pIXs:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("Llzl"),i=s("0JpG"),r=s("6jv3"),o=s("AuQm");const a="ultra.directives.saveButtons";class l{constructor(e,t){this.scope=e,this.bbLocalize=t,this.isSaving=!1,this.isSavedOnceOrMore=!1,this.savedToBrowserCount=0,this.bbLocalize.loadBundle("components/directives/save-buttons").then(()=>{this.notSavedStr=e.saveType||this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.notSaved"}),this.savedStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.saved"}),this.savingStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.saving"}),this.cancelStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.cancel"}),this.deleteStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.delete"}),this.savedSuccessfullyStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.notification.savedSuccessfully"}),this.canceledSuccessfullyStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.notification.canceledSuccessfully"}),this.deleteButtonStatus=this.deleteStr,e.displaySavedAfterSaving&&e.displaySavedAfterSaving()&&this.isSavedOnceOrMore?this.saveButtonStatus=this.savedStr:this.saveButtonStatus=this.notSavedStr,e.displayDeleteAfterSaving&&e.displayDeleteAfterSaving()&&this.isSavedOnceOrMore?this.cancelButtonStatus=this.deleteStr:this.cancelButtonStatus=this.cancelStr}),e.$on("bb-save-button",(t,s,n)=>{let i=!1;switch(s){case o.AutoSaveMessage.Change:this.isSaving=!1,this.saveButtonStatus=this.notSavedStr;break;case o.AutoSaveMessage.Saving:this.isSaving=!0,this.saveButtonStatus=this.savingStr,i=!0;break;case o.AutoSaveMessage.Saved:i=!0,this.isSavedOnceOrMore=!0,this.isSaving=!1,this.informScreenReaderToRead(this.savedSuccessfullyStr),e.displaySavedAfterSaving&&e.displaySavedAfterSaving()?this.saveButtonStatus=this.savedStr:this.saveButtonStatus=this.notSavedStr,e.displayDeleteAfterSaving&&e.displayDeleteAfterSaving()?this.cancelButtonStatus=this.deleteStr:this.cancelButtonStatus=this.cancelStr;break;case o.AutoSaveMessage.SaveFailure:case o.AutoSaveMessage.ValidationFailure:i=!0}this.form.$bbSaveAttempt=i}),e.$parent.$on("bb-autosave-form-to-browser",(e,t,s)=>{o.AutoSaveMessage.Saved===t&&this.element.attr("saved-to-browser",this.savedToBrowserCount+=1)})}isValid(){return this.scope.ignoreFormValidation&&this.scope.ignoreFormValidation()?this.scope.validateSave():this.form.$valid&&this.scope.validateSave()}isCancelNowADelete(){return this.scope.displayDeleteAfterSaving&&this.scope.displayDeleteAfterSaving()&&this.isSavedOnceOrMore}isCancelDisabled(){return this.isSaving||this.isCancelNowADelete()&&!this.scope.canDelete()}isDeleteDisabled(){return this.isSaving||!this.scope.canDelete()}isSaveDisabled(){return this.isSaving||!this.isValid()}cancelAction(){return this.form.$setPristine(),this.informScreenReaderToRead(this.canceledSuccessfullyStr),this.isCancelNowADelete()?this.scope.deleteAction():this.scope.cancelAction()}deleteAction(){return this.form.$setPristine(),this.scope.deleteAction()}saveAction(){return this.form.$setSubmitted(),this.informScreenReaderToRead(this.savedSuccessfullyStr),this.scope.saveAction()}mousedownAction(){if(this.scope.mousedownAction)return this.scope.mousedownAction()}informScreenReaderToRead(e){this.scope.disableScreenreaderAnnouncements&&this.scope.disableScreenreaderAnnouncements()||this.scope.$emit("read-info-directive",e)}}l.$inject=["scope",i.serviceName];class c{constructor(e,t){this.$injector=e,this.bbLocalize=t,this.require="^form",this.replace=!0,this.restrict="E",this.scope={canDelete:"&",cancelAction:"&",choices:"=?",deleteAction:"&",deleteConfirmationResourceType:"@?",disableScreenreaderAnnouncements:"&?",displayDeleteAfterSaving:"&?",displaySavedAfterSaving:"&?",hideSave:"&?",hideCancel:"&?",hideDelete:"&?",isInline:"&?",mousedownAction:"&?",mustShowDeleteConfirmation:"&?",mustShowSaveConfirmation:"&?",saveAction:"&",saveConfirmationResourceType:"@?",validateSave:"&",ignoreFormValidation:"&",saveType:"@?",analyticsIdTagPrefix:"@"},this.link=(e,t,s,n)=>{e.saveButtons=this.$injector.instantiate(l,{scope:e}),e.saveButtons.form=n,e.saveButtons.element=t},this.compile=(e,t)=>{return"true"===t.isInline&&(e.prepend(e.find("footer").children()),e.find("footer").remove()),{pre:this.link}},this.template=r}}c.$inject=["$injector",i.serviceName],n.module(a,[i.moduleName]).directive("bbSaveButtons",["$injector",e=>e.instantiate(c)])},"pUR+":function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var n=s("Llzl"),i=s("0JpG"),r=s("Qbdf"),o=s("36CG"),a=s("X455"),l=s("UD9g"),c=s("pjml"),d=s("TnpK"),u=s("oB9e"),h=s("nmzr");const m="ultra.course.journal.router";n.module(m,[i.moduleName,d.b,l.b,u.a,r.b,a.a,o.d]).config([d.c,r.c,a.b,o.e,(e,t,n,u)=>{e.peekState(h.JournalRoutes.JOURNAL,{abstract:!0,url:"/journal",resolve:{[r.d]:t.resolve,translations:["$q",i.serviceName,(e,t)=>{const s=[];return s.push(t.loadBundle("features/course/content/journal/journal")),s.push(t.loadBundle("features/course/content/course-content")),s.push(t.loadBundle("features/course/goal-alignment/goal")),e.all(s)}]}}).peekState(h.JournalRoutes.JOURNAL_VIEW,{abstract:!0,url:"/{contentId:_[0-9]+_1|create}?courseId&parentId&position&positionBefore&positionAfter?journalId",panelClass:"full",pageTitle:"course.content.journalItem",require:()=>Promise.all([s.e(14),s.e(0),s.e(1),s.e(2),s.e(15),s.e(35),s.e(46),s.e(582)]).then(s.bind(null,"hucp")),resolve:{translations:["$q",i.serviceName,(e,t)=>{const s=[];return s.push(t.loadBundle("components/directives/grade/grade-input")),s.push(t.loadBundle("components/directives/grade/display-grade")),e.all(s)}]}}).peekState(h.JournalRoutes.JOURNAL_VIEW_WITH_PARTICIPATION,{url:"?view&limit&page&name&submissionStatus&entryLimit&entryPage",panelClass:"full",reloadOnSearch:!1,views:{"journal-content@":{require:()=>Promise.all([s.e(6),s.e(44),s.e(0),s.e(46),s.e(585)]).then(s.bind(null,"6omJ"))},"journal-participation@":{require:()=>Promise.all([s.e(6),s.e(44),s.e(738)]).then(s.bind(null,"uPz6"))}},onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],peekStates:[h.ContentRoutes.CONDITIONAL_RELEASE_PEEK_PANEL,h.ContentMarketRoutes.CONTENT_MARKET,"course-group",h.JournalRoutes.JOURNAL_DETAILS,h.JournalRoutes.JOURNAL_PARTICIPATION_DETAIL,h.JournalRoutes.JOURNAL_SETTINGS,l.a,h.JournalRoutes.JOURNAL_SUBMISSION_FEEDBACK,h.LtiRoutes.LTI,h.CourseRoutes.COURSE_MESSAGE,"rubric","rubric-evaluation","rubric-view","view-exceptions"],peekViewName:"journal-peek@",pageTitle:"course.content.journalItem",allowChildPeekStates:!0,resolve:{[r.d]:t.resolve,[a.c]:n.resolve,currentCourseId:["$state",e=>e.nextParams.courseId],[o.f]:u.resolve,currentColumn:[d.d,r.d,(e,t)=>{const s=e.nextParams.columnId;if(s&&s!==c.C.CREATE_COLUMN_ID)return t.gradebook.columns.$find(s).$asPromise()}]}}).peekState(h.JournalRoutes.JOURNAL_PARTICIPATION_DETAIL,{url:"/journal-participation-detail?offset&columnId&contentId&singleUserId&singleMembershipId&participantId&entryLimit&entryPage",panelClass:"full",require:()=>Promise.all([s.e(6),s.e(44),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(15),s.e(21),s.e(560)]).then(s.bind(null,"Zo+2")),pageTitle:"course.content.journalItem",peekViewName:"journal-submissions-peek",allowChildPeekStates:!0,resolve:{translations:["$q",i.serviceName,(e,t)=>t.loadBundle("features/course/content/journal/journal")]},peekStates:[h.JournalRoutes.JOURNAL_SUBMISSION_FEEDBACK,h.ContentMarketRoutes.CONTENT_MARKET,h.LtiRoutes.LTI,"rubric-evaluation"]}).peekState(h.JournalRoutes.JOURNAL_DETAILS,{panelClass:"peek",url:"/details",require:()=>s.e(694).then(s.bind(null,"sC0C")),pageTitle:"course.content.journalDetails",peekViewName:"journal-details-peek"}).peekState(h.JournalRoutes.JOURNAL_SETTINGS,{panelClass:"peek",url:"/settings?focusEleId",require:()=>Promise.all([s.e(0),s.e(1),s.e(2),s.e(46),s.e(593)]).then(s.bind(null,"SxKk")),pageTitle:"course.content.journalSettings",peekViewName:"journal-settings-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy","rubric"]}).peekState(h.JournalRoutes.JOURNAL_SUBMISSION_FEEDBACK,{panelClass:"peek",url:"/feedback?userId?columnId",require:()=>Promise.all([s.e(6),s.e(44),s.e(706)]).then(s.bind(null,"p01W")),pageTitle:"course.content.journalFeedback",peekViewName:"journal-feedback-peek"})}])},pjml:function(e,t,s){"use strict";var n={};s.r(n),s.d(n,"serviceName",(function(){return ke}));var i={};s.r(i),s.d(i,"serviceName",(function(){return Re}));var r={};s.r(r),s.d(r,"serviceName",(function(){return De}));var o={};s.r(o),s.d(o,"serviceName",(function(){return Be}));var a={};s.r(a),s.d(a,"serviceName",(function(){return ze}));var l={};s.r(l),s.d(l,"serviceName",(function(){return Ye}));var c={};s.r(c),s.d(c,"serviceName",(function(){return Xe})),s.d(c,"CollabSessionType",(function(){return et})),s.d(c,"CollabAccessType",(function(){return tt}));var d={};s.r(d),s.d(d,"serviceName",(function(){return rt}));var u={};s.r(u),s.d(u,"serviceName",(function(){return ot}));var h={};s.r(h),s.d(h,"serviceName",(function(){return bt}));var m={};s.r(m),s.d(m,"CourseMessageType",(function(){return ft})),s.d(m,"serviceName",(function(){return vt}));var p={};s.r(p),s.d(p,"sortInstructorsMembership",(function(){return $t})),s.d(p,"serviceName",(function(){return Tt}));var g={};s.r(g),s.d(g,"serviceName",(function(){return Et}));var b={};s.r(b),s.d(b,"serviceName",(function(){return jt}));var f={};s.r(f),s.d(f,"serviceName",(function(){return qt}));var v={};s.r(v),s.d(v,"serviceName",(function(){return Ht}));var S={};s.r(S),s.d(S,"serviceName",(function(){return zt}));var y={};s.r(y),s.d(y,"serviceName",(function(){return Vt}));var C={};s.r(C),s.d(C,"moduleName",(function(){return Qt})),s.d(C,"serviceName",(function(){return Zt})),s.d(C,"START_ATTEMPT_ID",(function(){return Xt}));var I={};s.r(I),s.d(I,"ColumnSummaryStatus",(function(){return ns.a})),s.d(I,"serviceName",(function(){return is})),s.d(I,"SummaryAction",(function(){return rs}));var $={};s.r($),s.d($,"moduleName",(function(){return as})),s.d($,"serviceName",(function(){return ls}));var w={};s.r(w),s.d(w,"serviceName",(function(){return ds}));var T={};s.r(T),s.d(T,"serviceName",(function(){return us}));var E={};s.r(E),s.d(E,"serviceName",(function(){return gs}));var k={};s.r(k),s.d(k,"serviceName",(function(){return bs}));var P={};s.r(P),s.d(P,"serviceName",(function(){return fs}));var A={};s.r(A),s.d(A,"serviceName",(function(){return vs})),s.d(A,"LTIStatusType",(function(){return Ss})),s.d(A,"LTISendUserDataType",(function(){return ys}));var R={};s.r(R),s.d(R,"serviceName",(function(){return Cs}));var O={};s.r(O),s.d(O,"serviceName",(function(){return Is}));var D={};s.r(D),s.d(D,"serviceName",(function(){return $s}));var _={};s.r(_),s.d(_,"serviceName",(function(){return ks}));var N={};s.r(N),s.d(N,"serviceName",(function(){return Rs}));var L={};s.r(L),s.d(L,"serviceName",(function(){return Os}));var M={};s.r(M),s.d(M,"serviceName",(function(){return Ds}));var x={};s.r(x),s.d(x,"serviceName",(function(){return Ns}));var j={};s.r(j),s.d(j,"serviceName",(function(){return Ls}));var G={};s.r(G),s.d(G,"serviceName",(function(){return Gs})),s.d(G,"adjustEngagement",(function(){return Us}));var U={};s.r(U),s.d(U,"serviceName",(function(){return Bs}));var F={};s.r(F),s.d(F,"serviceName",(function(){return qs}));var B={};s.r(B),s.d(B,"serviceName",(function(){return Hs}));var q={};s.r(q),s.d(q,"serviceName",(function(){return zs}));var H={};s.r(H),s.d(H,"serviceName",(function(){return Vs}));var z={};s.r(z),s.d(z,"serviceName",(function(){return Ks})),s.d(z,"adjustProbabilities",(function(){return Ws})),s.d(z,"learnUser",(function(){return Js}));var V={};s.r(V),s.d(V,"serviceName",(function(){return Ys}));var K={};s.r(K),s.d(K,"serviceName",(function(){return Qs}));var W={};s.r(W),s.d(W,"serviceName",(function(){return Zs}));var J={};s.r(J),s.d(J,"serviceName",(function(){return Xs}));var Y={};s.r(Y),s.d(Y,"serviceName",(function(){return en}));var Q={};s.r(Q),s.d(Q,"serviceName",(function(){return tn}));var Z={};s.r(Z),s.d(Z,"serviceName",(function(){return sn}));var X={};s.r(X),s.d(X,"serviceName",(function(){return nn})),s.d(X,"VENDOR_RESPONDUS",(function(){return rn}));var ee={};s.r(ee),s.d(ee,"serviceName",(function(){return on}));var te={};s.r(te),s.d(te,"serviceName",(function(){return ln}));var se={};s.r(se),s.d(se,"NotificationRecipientType",(function(){return cn})),s.d(se,"GradeIconType",(function(){return dn})),s.d(se,"serviceName",(function(){return un}));var ne={};s.r(ne),s.d(ne,"serviceName",(function(){return hn}));var ie={};s.r(ie),s.d(ie,"serviceName",(function(){return mn}));var re={};s.r(re),s.d(re,"serviceName",(function(){return pn})),s.d(re,"transformActivityTime",(function(){return gn}));var oe={};s.r(oe),s.d(oe,"serviceName",(function(){return bn}));var ae={};s.r(ae),s.d(ae,"serviceName",(function(){return vn}));var le={};s.r(le),s.d(le,"serviceName",(function(){return Sn}));var ce={};s.r(ce),s.d(ce,"serviceName",(function(){return yn}));var de={};s.r(de),s.d(de,"serviceName",(function(){return Cn}));var ue={};s.r(ue),s.d(ue,"serviceName",(function(){return In}));var he={};s.r(he),s.d(he,"serviceName",(function(){return $n}));var me={};s.r(me),s.d(me,"serviceName",(function(){return wn}));var pe={};s.r(pe),s.d(pe,"serviceName",(function(){return Tn}));var ge={};s.r(ge),s.d(ge,"serviceName",(function(){return En}));var be={};s.r(be),s.d(be,"serviceName",(function(){return kn}));var fe={};s.r(fe),s.d(fe,"serviceName",(function(){return Pn}));var ve={};s.r(ve),s.d(ve,"serviceName",(function(){return An}));var Se={};s.r(Se),s.d(Se,"TermDuration",(function(){return Rn.a})),s.d(Se,"ConstantTermId",(function(){return On})),s.d(Se,"serviceName",(function(){return Dn}));var ye={};s.r(ye),s.d(ye,"serviceName",(function(){return Nn})),s.d(ye,"ultraSettingsPrefix",(function(){return Ln}));var Ce={};s.r(Ce),s.d(Ce,"serviceName",(function(){return jn}));var Ie={};s.r(Ie),s.d(Ie,"serviceName",(function(){return Un}));var $e=s("Rjd/"),we=(s("QLzv"),s("5MwF")),Te=s("yCC5"),Ee=s("nkTj");const ke=Te.a,Pe=we.a.apiBasePath+"/v1";$e.a.factory(ke,["restmod",Ee.d,(e,t)=>e.model(Pe).mix({$extend:{Model:{getAllyConfig(){return this.single(Pe+"/ally/config").$fetch().$allow(["400-599"]).$asPromise().then(e=>e.isStatusCode(200)?e:{serviceAvailable:!1})},getAllyToken(e,t){const s=Pe+`/courses/${e}`+(t?`/ally/content/${t}/token`:"/ally/token");return this.single(s).$fetch().$asPromise()}}}})]);var Ae=s("Llzl");const Re=Te.b;$e.a.factory(Re,()=>{const e=we.a.telemetryApiBasePath+"/v1/browser/interactions";return{$create(t){Ae.element.ajax({type:"POST",url:e,data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",timeout:we.a.telemetryApiTimeoutMS})}}});const Oe=Te.c;$e.a.factory(Oe,["restmod",e=>e.model().mix({lastRun:{serialize:"date"},getRedirectUrl(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/redirectUrl"},(function(e){this.$unwrap(e.data)})).$asPromise()}})]);const De=Te.d;$e.a.factory(De,["restmod",e=>{const t=we.a.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{downloadWithAnnotations(e,t,s){return this.$build().$send({method:"GET",url:this.$url()+`/courses/${s}/assignments/attempts/files/${e}/downloadInfo?is_group=${t}`},(function(e){return this.$unwrap(e.data)}))}}}})}]);const _e=Te.e;$e.a.factory(_e,["restmod",Ee.d,(e,t)=>e.model()]);const Ne=Te.f;$e.a.factory(Ne,["restmod",Ee.d,(e,t)=>e.model().mix({lastModifiedDate:{serialize:"date"},answers:{hasMany:Te.Vb},gradedQuestionAttempts:{hasMany:Te.bb,path:"answers/grades"},questions:{hasMany:Te.Ub},ui:{mask:!0,init:()=>({})},exceptions:{hasMany:Te.g,hooks:{"before-request":function(e){e.url=e.url.replace(we.a.apiBasePath,we.a.apiBasePath+"/public")}}},userExceptions:{hasMany:Te.g,path:"exceptions/users"},groupExceptions:{hasMany:Te.g,path:"exceptions/groups"}})]);const Le=Te.g;$e.a.factory(Le,["restmod","$q",Ee.d,(e,t,s)=>e.model().mix({$url(e){if(this.$scope.$url(e))return this.$scope.$url(e).replace(we.a.apiBasePath,we.a.apiBasePath+"/public")+"/"+encodeURIComponent(this.$pk)},$extend:{Record:{saveException(e){return this.$send({method:"POST",url:this.$url(),data:e}).$allow([404]).$asPromise()},deleteException(){return this.$send({method:"DELETE",url:this.$url()}).$allow([404]).$asPromise()}}}})]);s("+IM5");var Me=s("nbDY"),xe=s.n(Me);class je extends xe.a{}je.Student=new je("STUDENT"),je.InstructorComments=new je("INSTRUCTOR_COMMENTS"),je.InstructorNotes=new je("INSTRUCTOR_NOTES");const Ge=Te.Vb;$e.a.factory(Ge,["restmod",Ee.d,e=>e.model().mix({grade:{hasOne:Te.bb,path:"grades"}})]);var Ue=s("FHk9");const Fe=Te.h;$e.a.factory(Fe,["restmod",Ee.d,(e,t)=>e.model().mix({$hooks:{"after-request":function(e){null===e.data.results&&(e.data.results=[])}}})]);const Be=Te.i;$e.a.factory(Be,["restmod",e=>{const t=we.a.apiBasePath+"/v1/brands";return e.model(t).mix({$extend:{Model:{getCurrent(){return this.single(t+"/current").$fetch()}}}})}]);var qe=s("Q/M7"),He=s("zGdY");const ze=Te.j;$e.a.factory(ze,["restmod","$q",(e,t)=>{const s=we.a.apiBasePath+"/v1/calendars";return e.model(s).mix({ui:{mask:!0,init:()=>({})},$extend:{Collection:{sortCalendars(){return this.$action((function(){this.sort((function(e,t){return e.labelLocalizable.languageKey&&t.labelLocalizable.languageKey?e.id===He.KnownCalendarIdentifier.Institution?1:-1:e.labelLocalizable.languageKey&&!t.labelLocalizable.languageKey?e.id===He.KnownCalendarIdentifier.Institution?1:-1:t.labelLocalizable.languageKey&&!e.labelLocalizable.languageKey?t.id===He.KnownCalendarIdentifier.Institution?-1:1:e.labelLocalizable.rawValue<t.labelLocalizable.rawValue?-1:1}))}))}},Model:{getOrRegenerateExportCalendarFeed(e){const s=t.defer();return this.$build().$send({method:e?"POST":"GET",url:qe.c("/webapps/calendar/calendarFeed/url"),transformResponse:e=>e},(function(e){s.resolve(e&&e.data)})),s.promise}}}})}]);var Ve=s("V0gA"),Ke=s("zoPb");const We=Te.u;$e.a.factory(We,["restmod",e=>e.model().mix({calendarItems:{hasMany:Te.v},dueDateCalendarItems:{hasMany:Te.D}})]);const Je=Te.v;$e.a.factory(Je,["restmod",e=>e.model().mix(Ve.serviceName,{})]);const Ye=Te.U;$e.a.factory(Ye,["restmod",e=>{const t=we.a.apiBasePath+"/v1/calendars/dueDateCalendarItems";return e.model(t).mix(Ve.serviceName)}]);const Qe=Te.D;$e.a.factory(Qe,["restmod",e=>e.model().mix(Ye,{})]);var Ze=s("vYaK");const Xe=Te.x;class et extends xe.a{}et.CourseRoom=new et("COURSE_ROOM"),et.UserRoom=new et("USER_ROOM");class tt extends xe.a{}tt.APOLLO=new tt("APOLLO"),tt.GEMINI=new tt("GEMINI"),$e.a.factory(Xe,["restmod",Ee.d,(e,t)=>e.model().mix({$extend:{Record:{getLaunchUrl(){return this.$send({method:"POST",url:this.$url()+"/launch",data:{}}).$asPromise().then(e=>we.a.features.collab?e.$response.data.url:e.$response.data.launchUrl)}}}})]);const st=Te.w;$e.a.factory(st,["restmod",Ee.d,(e,t)=>e.model().mix({sessions:{hasMany:Te.x},$extend:{Record:{getVirtualClassroomSession(){return this.sessions.$search({sessionType:et.CourseRoom.toString()}).$asPromise().then(e=>e[0]||null)}}}})]);const nt=Te.y;$e.a.factory(nt,["restmod",Ee.d,(e,t)=>e.model().mix({sessions:{hasMany:Te.x},$extend:{Record:{getAllCollabSessions(){return this.sessions.$search({expand:"sessionInstances",startTime:(new Date).toISOString()}).$asPromise()},getCourseCollabInfo(){return this.sessions.$search({sessionCategory:"course",expand:"sessionInstances",startTime:(new Date).toISOString()}).$asPromise()},enableCourseRoom(e){return this.$send({method:"POST",url:this.sessions.$new(e).$url(),data:{courseRoomEnabled:!0}},e=>this.$unwrap(e.data)).$asPromise()},disableCourseRoom(e){return this.$send({method:"POST",url:this.sessions.$new(e).$url(),data:{courseRoomEnabled:!1}},e=>this.$unwrap(e.data)).$asPromise()},launchDiscussionSession(e,t){return this.$send({method:"POST",url:this.$url()+"/sessions/forums/"+e+"/launch"+(t?"?groupId="+t:"")},e=>this.$unwrap(e.data)).$asPromise()}}}})]);var it=s("fm95");const rt=Te.z;$e.a.factory(rt,["restmod",Ee.d,(e,t)=>e.model().mix({})]);const ot=Te.E;$e.a.factory(ot,["restmod",Ee.d,(e,t)=>{return e.model().mix({data:{belongsTo:Te.zc},ui:{mask:!0,init:()=>({})},$hooks:{"before-fetch-many":function(e){e.params=e.params||{},e.params.fields?e.params.fields+=",-data":e.params.fields="-data"},"after-request":function({data:e}){e.results.forEach(e=>{const t={id:e.userId,isPlaceHolder:!0};e.data=t})}}})}]);const at=Te.I;$e.a.factory(at,["restmod",Ee.d,(e,t)=>{return e.model().mix({counts:{hasOne:Te.J},messages:{hasMany:Te.P},usercounts:{hasMany:Te.E},$extend:{Record:{save(){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url(),data:{"resource/x-bb-forumlink":{title:this.title}}},(function(e){this.$unwrap(e.data["resource/x-bb-forumlink"])}))}}}})}]);const lt=Te.J;$e.a.factory(lt,["restmod",Ee.d,(e,t)=>e.model()]);const ct=Te.H;$e.a.factory(ct,["restmod",Ee.d,(e,t)=>{return e.model().mix({$config:{primaryKey:"cxFileId"},createDate:{serialize:"date"},expiryDate:{serialize:"date"}})}]);var dt=s("PSJS");const ut=Te.Q;$e.a.factory(ut,["restmod",Ee.d,(e,t)=>{return e.model().mix({contents:{hasMany:Te.P}})}]);const ht=Te.F;$e.a.factory(ht,["restmod",Ee.d,(e,t)=>e.model()]);var mt=s("nsO7"),pt=s("oVrE"),gt=s("qhd3");const bt=Te.B;$e.a.factory(bt,["restmod",gt.serviceName,"$http","$q",(e,t,s,n)=>{const i=e.model().mix({courseId:{mask:"CU"},latestMessages:{mask:"U",map:"messages"},messages:{mask:"U",hasMany:Te.C},participants:{mask:!0,hasMany:Te.zc},totalCount:{mask:"CU"},unreadCount:{mask:"CU"},createdDate:{mask:"CU",serialize:"date"},updatedDate:{mask:"CU",serialize:"date"},canBeRepliedTo:{mask:"U"},newParticipantIds:{mask:"R"},participantsWithoutSender:{mask:!0},participantsWithoutLatestSender:{mask:!0},creatorId:{mask:"CUD"},ui:{mask:!0,init:()=>({})},createConversation(e){return this.$decorate({"before-request":t=>{t.params={sendEmailToParticipants:e}}},(function(){return this.$save()}))},$hooks:{"before-request":function(e){if("GET"===e.method&&/conversations\/_\d+_\d+$/.exec(e.url)){e.params=e.params||{},e.params.fields=(e.params.fields||"")+",-participantIds";const t=n.all([s(mt.pick(e,"method","params","url")),this.participants.$fetch().$asPromise()]).then(e=>{const t=e[0];e[1];return delete t.data.participantIds,t});e.cache={get:()=>t},Object.defineProperty(this,"participantIds",{get(){return this.participants.map(e=>e.$pk)},set:mt.noop})}}}});return i.$extendRecord((function(e,s){if(!Object.prototype.hasOwnProperty.call(e,"latestSender")){let s=null;Object.defineProperty(e,"latestSender",{get(){const e=this.latestMessages[0].senderId;if(null!==s&&s.$pk===e)return s;const n=[()=>this.latestMessages[0].sender,()=>{if(this.participants.$resolved)return this.participants.find(e=>e.id===this.latestMessages[0].senderId)},()=>{if(Ee.a.isValid(this.latestMessages[0].senderId)){const e=t.$new(this.latestMessages[0].senderId);return e.$resolve(),e}const e=pt.e();return this.latestMessages[0].senderId=e,t.$buildRaw({id:e})}];for(let e=0;e<n.length;e++){const t=n[e]();if(void 0!==t)return s=t,t}}})}return{}})),i}]);class ft extends xe.a{}ft.Normal=new ft("NORMAL"),ft.System=new ft("SYSTEM");const vt=Te.C;$e.a.factory(vt,["restmod",Ee.d,(e,t)=>{return e.model().mix({conversationId:{mask:"CU"},courseId:{mask:"CU"},senderId:{mask:"CU"},isRead:{mask:"C",init:!1},postDate:{mask:"CU",serialize:"date"},type:{mask:"CU"},participants:{hasMany:Te.zc},ui:{mask:!0,init:()=>({})},isSystemMessage(){return ft.System.isEqualTo(this.type)},createReply(e){return this.$decorate({"before-request":t=>{t.params={sendEmailToParticipants:e}}},(function(){return this.$save()}))}})}]);var St=s("go4a"),yt=s("IbyE"),Ct=s("6vR2"),It=s("f8ya");function $t(e){e.sort((e,t)=>e.displayOrder&&t.displayOrder?e.displayOrder-t.displayOrder:e.displayOrder&&!t.displayOrder?-1:!e.displayOrder&&t.displayOrder?1:e.displayOrder||t.displayOrder?0:gt.sortCompareUsers(e.user,t.user))}const wt=/courses\/(_\d+_\d+)/,Tt=Te.N;$e.a.factory(Tt,["restmod","$q",Ee.d,"$rootScope","$injector",(e,t,s,n,i)=>{let r;function o(){return r||(r=i.get("$ngRedux")),r}return e.model().mix({course:{belongsTo:Te.t,key:"courseId"},user:{belongsTo:Te.zc,key:"userId"},officeHours:{hasMany:Te.vb},enrollmentDate:{serialize:"date"},isAvailable:{init:!0},lastAccessDate:{serialize:"date"},permissions:{init:{}},availabilityHasBeenBypassed(){return!!this.bypassCourseAvailabilityUntil},courseIsOpen(){return!this.courseIsPrivate()&&!1===this.course.isClosed},courseIsPrivate(){return"effectiveAvailability"in this.course?!this.course.effectiveAvailability:!this.course.isAvailable},courseIsComplete(){return!this.courseIsPrivate()&&!0===this.course.isClosed},isGuestMembership(){return this.role===He.KnownCourseRoleIdentifier.Guest},isStudentMembership(){const e=this.role===He.KnownCourseRoleIdentifier.Student;return!(!this.isInStudentPreview||!this.isInStudentPreview())||e},isStudentOrGuestMembership(){return this.isStudentMembership()||this.isGuestMembership()},isActAsInstructorMembership(){const e=this.courseRole&&this.courseRole.isActAsInstructor||this.role===He.KnownCourseRoleIdentifier.Instructor;return(!this.isInStudentPreview||!this.isInStudentPreview())&&e},isTeachingAssistantMembership(){return this.role===He.KnownCourseRoleIdentifier.TeachingAssistant},isInRoleBucket(e){return this.courseRole&&this.courseRole.roleBucket===e},isDueDateExcepted(){return this.accommodation().dueDate.hasAccommodation},accommodation(){return It.a.fromTypes(this.dueDateExceptionType,this.timeLimitExceptionType)},setAccommodation(e){e.dueDate.equals(this.dueDateExceptionType)||(this.dueDateExceptionType=e.dueDate.type),e.timeLimit.equals(this.timeLimitExceptionType)||(this.timeLimitExceptionType=this.toLearnTimeAccommodationType(e.timeLimit))},toLearnTimeAccommodationType(e){var t;return e.type===He.TimeLimitException.Custom?null!==(t=e.value)&&void 0!==t?t:He.TimeLimitException.NoAccommodation:e.type},getCourseColorClass(){return St.a(this)},$extend:{Collection:{getMembershipCount(e){return this.getCounts(e).then(e=>e.count)},getCounts(e,s="/count"){const n=t.defer();return this.$collection().$send({method:"GET",url:this.$url()+s,params:e},e=>{n.resolve(e.data)},e=>{n.reject(e)}),n.promise},getDetailsCount(){return this.getCounts({membershipAvailable:"true"})},getRoleBucketCount(){return this.getCounts({groupBy:"roleBucket"},"/counts")},getAccommodatedMemberCount(){return this.getCounts({membershipAvailable:"true"}).then(e=>e.withAccommodationCount)},batchGetCollections(e){const s=t.defer();return this.$collection().$send({method:"PUT",url:this.$url(),data:e},e=>{s.resolve(e.data)},e=>{s.reject(e)}),s.promise}}},$hooks:{"before-fetch-many":function(e){const t=(wt.exec(this.$url())||[])[1];t&&n.$broadcast(`course-${t}-memberships-before-fetch`,e)},"after-fetch-many":function(){var e;this.forEach(e=>{1===e.displayOrder&&(e.ui||(e.ui={}),e.ui.isLeader=!0),e.user&&null==e.user.isAvailable&&(e.user.isAvailable=!0),e.course&&e.course.instructorsMembership&&e.course.instructorsMembership.length&&$t(e.course.instructorsMembership)});const t=o(),s=Object(Ct.a)(this.$response.data),n=null!==(e=this.$response.config.params)&&void 0!==e?e:{},i=Object.keys(n).filter(e=>void 0!==n[e]&&null!==n[e]).map(e=>`${e}=${n[e]}`).join("&"),r=`${this.$url()}?${i}`,a=Object(yt.parseCourseMembershipQueryFromURL)(r);if(a)return void t.dispatch(yt.actions.courseMembership.setCourseMembershipsInStore(a,s));const l=Object(yt.parseUserMembershipQueryFromUrl)(r);l&&t.dispatch(yt.actions.courseMembership.setUserMembershipsInStore(l,s))},"after-fetch":function(){1===this.displayOrder&&(this.ui||(this.ui={}),this.ui.isLeader=!0)},"after-feed":function(){var e;if(this.userId=this.userId||(this.user||{$pk:void 0}).$pk,null===(e=this.$response)||void 0===e?void 0:e.data){const e=o(),t=Object(Ct.a)(this.$response.data);e.dispatch(yt.actions.courseMembership.setMembershipInStore(t))}}}})}]);const Et=Te.O;$e.a.factory(Et,["restmod",Ee.d,(e,t)=>e.model().mix({$extend:{Record:{getEmailPreviewContent(){return this.$send({method:"GET",url:this.$scope.$url()+"/preview"},e=>this.$unwrap({emailBody:e.data.emailBody})).$asPromise()},getCourseInviteUrl(){return this.$send({method:"GET",url:this.$scope.$url()+"/inviteUrl"},e=>this.$unwrap({inviteUrl:e.data.inviteUrl})).$asPromise()}}}})]);const kt=Te.R,Pt=247,At=255;$e.a.factory(kt,["restmod","DSCacheFactory",Ee.d,(e,t,s)=>e.model().mix({$config:{primaryKey:"key"},$extend:{Collection:{getPreference(e){return new Rt(t,this).getPreference(e)},setPreference(e){return new Rt(t,this).setPreference(e)},deletePreference(e){return new Rt(t,this).deletePreference(e)}}}})]);class Rt{constructor(e,t){this.DSCacheFactory=e,this.preferences=t,this.courseId=t.$scope.$scope.id||t.$scope.$scope.$pk}setPreference(e){return this._setCachePreference({key:e.key,value:e.value.toString(),visibleToStudents:e.visibleToStudents}).$asPromise().then(t=>{const s={key:t.key,value:t.value,visibleToStudents:t.visibleToStudents};switch(typeof e.value){case"boolean":s.value="true"===t.value;break;case"number":s.value=Number(t.value)}return s})}_setCachePreference(e){const t=this._getPreferenceCacheForCourse(),s=this._setPreferenceOnBackend(e);return t.put(e.key,s),s}_setPreferenceOnBackend(e){if(e.key.length>Pt)throw new Error("Preference key is too long!");if(e.value.length>At)throw new Error("Preference value is too long!");const t=this.preferences.$new(e.key);return t.key=e.key,t.value=e.value,t.visibleToStudents=e.visibleToStudents,t.$save()}getPreference(e){let t;return"defaultValue"in e&&(t={value:e.defaultValue.toString(),visibleToStudents:!0}),this._getPreferenceWithDefaultAndCache({key:e.key,defaultPreference:t}).$asPromise().then(t=>{const s={key:t.key,value:t.value,visibleToStudents:t.visibleToStudents};switch(typeof e.defaultValue){case"boolean":s.value="true"===t.value;break;case"number":s.value=Number(t.value)}return s})}_getPreferenceWithDefaultAndCache(e){let t=this._getPreferenceCacheForCourse().get(e.key);return null==t&&(t=this._getPreferenceFromBackend(e),this._getPreferenceCacheForCourse().put(e.key,t)),t}_getPreferenceFromBackend(e){if(e.key.length>Pt)throw new Error("Preference key is too long!");if(e.defaultPreference&&e.defaultPreference.value.length>At)throw new Error("Default preference value is too long!");return this.preferences.$find(e.key).$allow([404]).$then(t=>{t.$response&&404===t.$response.status&&e.defaultPreference&&null!=e.defaultPreference.value&&null!=e.defaultPreference.visibleToStudents&&(t.value=e.defaultPreference.value,t.visibleToStudents=e.defaultPreference.visibleToStudents)})}_getPreferenceCacheForCourse(){if(!this.courseId)throw new Error("No courseId has been provided");let e=this.DSCacheFactory.get("course.preference."+this.courseId);return null==e&&(e=this.DSCacheFactory.createCache("course.preference."+this.courseId,{capacity:100})),e}deletePreference(e){return this._deleteCachePreference(e).$asPromise().then(e=>{return{key:e.key,value:e.value,visibleToStudents:e.visibleToStudents}})}_deleteCachePreference(e){const t=this._getPreferenceCacheForCourse();if(t.get(e)){return t.remove(e),this.preferences.$new(e).$destroy().$allow([404])}return this.preferences.$new(e)}}var Ot=s("tPPx");const Dt=Te.T;$e.a.factory(Dt,["restmod",Ee.d,(e,t)=>e.model().mix(Ve.serviceName,{})]);const _t=(e,t)=>{let s="/learn/api/v1/courses/"+e+"/groupsets";return t&&(s+="/"+t),s},Nt=Te.K;$e.a.factory(Nt,["restmod","$q",Ee.d,(e,t,s)=>{return e.model().mix({course:{belongsTo:Te.t,key:"courseId"},modifiedDate:{serialize:"date"},isAvailable:{init:!1},batchUid:{mask:!0},collabSession:{hasMany:Te.x,path:"collabultra/sessions"},$extend:{Record:{canDelete(){return!this.permissions||this.permissions.delete},canEdit(){return!this.permissions||this.permissions.modify}},Collection:{batchGetCollection(e,t){return this.findMany(e,t).$asPromise()},batchUpdate(e){return this.$collection().$send({method:"PUT",url:this.$url()+"/batchUpdate",data:e},(function(e){const t=e.data.map(e=>e.statusCode>=200&&e.statusCode<300?Ae.fromJson(e.body):e.body);return this.$unwrap({results:t})})).$asPromise()},getGroupsInGroupSet(e,t,s){const{expand:n,limit:i=1e3}=s;return this.$collection().$send({method:"GET",url:_t(e,t)+"/groups",params:{expand:n,limit:i}},(function(e){let t=[];return e.data&&e.data.results&&(t=e.data.results),this.$unwrap({results:t})})).$asPromise()}}}})}]);const Lt=Te.L;$e.a.factory(Lt,["restmod",Ze.serviceName,(e,t)=>e.model().mix({groupAttempts:{hasMany:Te.hb,hooks:{"after-fetch-many":function(){const e=(/courses\/(_\d+_\d+)/.exec(this.$url())||[])[1];for(let s=0;s<this.length;s++)this[s]=t.$new(e).gradebook.groupAttempts.$buildRaw(this[s]),this[s].attempts&&this[s].attempts.length&&(this[s].attempts=t.$new(e).gradebook.attempts.$decode(this[s].attempts))}}}})]);const Mt=Te.M;$e.a.factory(Mt,["restmod",e=>e.model().mix({$hooks:{"before-request":e=>{e.headers={"Suppress-Session-Timestamp-Update":!0}}}})]);const xt=Te.G;$e.a.factory(xt,["restmod",Ee.d,(e,t)=>e.model().mix({$config:{primaryKey:"uid"},$extend:{Record:{hasEntitlement(){return!!this.uid}}}})]);const jt=Te.l;$e.a.factory(jt,["restmod",Ee.d,(e,t)=>{return e.model(we.a.apiBasePath+"/v1/cloudstorages").mix({contents:{hasMany:Te.m},me:{hasOne:Te.o},$config:{primaryKey:"name"}})}]);const Gt=Te.o;$e.a.factory(Gt,["restmod",Ee.d,(e,t)=>e.model()]);const Ut=Te.m;$e.a.factory(Ut,["restmod",Ee.d,(e,t)=>{return e.model().mix({download:{hasOne:Te.n,mask:!0},createdTime:{serialize:"date"},updatedTime:{serialize:"date"},ui:{mask:!0,init:()=>({})},$url(e){return this.$scope.$url(e)+"/"+encodeURIComponent(this.$pk)},$extend:{Record:{getChildren(e){return null==e&&(e={}),this.$scope.$collection().$send({method:"GET",url:this.$url()+"/children",params:e},(function(e){this.$unwrap(e.data)}),(function(e){}))}}}})}]);const Ft=Te.n,Bt={};$e.a.factory(Ft,["restmod",Ee.d,(e,t)=>{return e.model().mix(Bt)}]);const qt=Te.p;$e.a.factory(qt,["restmod",Ee.d,(e,t)=>{return e.model(we.a.apiBasePath+"/v1/cloudstorages/tasks").mix(Bt)}]);const Ht=Te.q;$e.a.factory(Ht,["restmod",Ee.d,(e,t)=>e.model(we.a.apiBasePath+"/v1/collabultra/ping").mix({$extend:{Record:{getCollabUltraInfo(){return this.$send({method:"GET",url:this.$scope.$url()},(function(e){this.$unwrap(e.data)})).$allow([403,404]).$asPromise()}}}})]);const zt=Te.V;$e.a.factory(zt,["restmod",Ee.d,(e,t)=>{const s=we.a.apiBasePath+"/v1/utilities/entitlements";return e.model(s).mix({$config:{primaryKey:"uid"},$extend:{Record:{hasEntitlement(){return!!this.uid}}}})}]);const Vt=Te.W;$e.a.factory(Vt,["restmod",e=>e.model(we.a.apiBasePath+"/v1/externalCourses").mix({schedule:{hasMany:Te.T},startDate:{serialize:"date"},endDate:{serialize:"date"},$extend:{Collection:{}},$hooks:{"before-request":function(e){we.a.features.externalCourse||"GET"===e.method&&e.url===`${we.a.apiBasePath}/v1/externalCourses`&&(e.cache={get:()=>({paging:{nextPage:"",previousPage:"",count:0,limit:1e5,offset:0},permissions:null,results:[]})})}}})]);const Kt=Te.X;$e.a.factory(Kt,["restmod",Ee.d,(e,t)=>e.model().mix({ui:{mask:!0,init:()=>({})}})]);var Wt=s("t6LE"),Jt=s("JrDC"),Yt=s("wgY5");const Qt="ultra.components.services.models.grade.gradeGroupAttempt",Zt=Te.hb,Xt="start";$e.a.factory(Zt,["restmod",Ze.serviceName,Ee.d,(e,t,s)=>e.model().mix(Wt.serviceName,{attempts:{ignore:"CU"},members:{ignore:"CU"},$extend:{Scope:{$destroyUrlFor:e=>we.a.apiBasePath+"/v1/courses/"+Jt.a(t,e.$scope)+"/gradebook/groupAttempts/"+e.id},Record:{getFeedbackToUser(){return this.feedbackToUser},getLastFeedbackAuthor(){return this.lastFeedbackAuthor||this.attempts[0]&&this.attempts[0].lastFeedbackAuthor},getGradeAttempt(){return this.attempts&&this.attempts.length?1===this.attempts.length?this.attempts[0]:this.submittedBy?mt.find(this.attempts,e=>e.userId===this.submittedBy):mt.sortBy(this.attempts,["creationDate"])[0]:null},isPrePostGrade(){return!this.isCompleted()||!this.readyToPost},isDisplayablePostedGrade(){return this.isCompleted()&&this.readyToPost}},Collection:{getNumAttemptsSubmittedLate(e){return this.filter(t=>t.isSubmitted()&&Yt(t.attemptDate).isAfter(e)).length},getNumAttemptsToGrade(){return this.filter(e=>e.isNeedsGrading()&&!e.isPostable()).length},getNumAttemptsToPost(){return this.filter(e=>e.isPostable()).length},getNumOfGradedAttempts(){return this.filter(e=>e.isGraded()).length},isAllGradedAndPosted(){return this.length>0&&this.every(e=>e.isCompleted())},getAttemptIndexById(e){return this.findIndex(t=>t.id===e)},getAttemptById(e){return mt.find(this,t=>t.id===e)}}},$hooks:{"after-update":function(e){this.attempts&&this.attempts.length&&e.config.params&&(this.attempts=t.$new(e.config.params.courseId).gradebook.attempts.$decode(this.attempts))},"after-fetch":function(e){this.attempts&&this.attempts.length&&e.config.params&&(this.attempts=t.$new(e.config.params.courseId).gradebook.attempts.$decode(this.attempts))},"after-feed":function(e){this.permissions&&(this.permissions.deleteAttempt=this.permissions.delete,this.permissions.editAttempt=this.permissions.editGrade);!function(e){const t=e.toolAttemptDetail,s=e.attempts;if(!t||!s)return;const n=Object.keys(t)[0];n&&s.forEach(e=>{if(e.toolAttemptDetail)return;const s=e.id,i=mt.cloneDeep(t);if(!i[n])return;e.toolAttemptDetail=i;const r=e.toolAttemptDetail[n].questionAttempts;r&&r.forEach(e=>{e.attemptId=s})})}(this)}}})]);const es=Te.eb;$e.a.factory(es,["restmod",Ee.d,(e,t)=>e.model().mix({ui:{mask:!0,init:()=>({})},$hooks:{"after-feed":function(e){this.localizableTitle||(this.localizableTitle={bundle:"gradebook_type",languageKey:this.title,serviceLevel:null})}}})]);var ts=s("Kpdw"),ss=s("e6jQ"),ns=s("7CA4");const is=Te.r;class rs extends xe.a{}rs.NewOverrideGrade=new rs("New Override Grade"),rs.NewOverrideGradeWithPostedAttempt=new rs("New Override Grade With Posted Attempt"),rs.NewGradeWithNotPostedAttempt=new rs("New Grade With Not Posted Attempt"),rs.CleanOverride=new rs("Clean Override"),rs.CleanOverrideForAttempt=new rs("Clean Override For Attempt"),rs.CleanPostedOverride=new rs("Clean Posted Override Without Attempt"),rs.CleanOverrideWithPostedAttempt=new rs("Clean Override Grade With Posted Attempt"),rs.CleanGradeWithPostedAttempt=new rs("Clean Grade With Posted Attempt"),rs.CleanGradeWithNotPostedAttempt=new rs("Clean Grade With Not Posted Attempt"),rs.PostGrade=new rs("Post Grade"),rs.PostOverrideGrade=new rs("Post Override Grade"),$e.a.factory(is,["restmod",Ee.d,Ze.serviceName,(e,t,s)=>e.model().mix({$hooks:{ui:{mask:!0,init:()=>({updateTimestamp:0})},"after-feed":function(){this.calculateDerivedSummaries()}},$extend:{Record:{calculateDerivedSummaries(){this.numNeedsGrading=Ee.c(this.numGroupsNeedsGrading,this.numStudentsNeedsGrading),this.numPosted=Ee.c(this.numGroupsPosted,this.numStudentsPosted),this.numEligibleToBeGraded=null!=this.numGroupsPosted?this.numGroupsEligibleToBeGraded:this.numStudentsEligibleToBeGraded,this.numSubmissionGradedNeedsPosting=Ee.c(this.numGroupsSubmissionGradedNeedsPosting,this.numStudentsSubmissionGradedNeedsPosting),this.numStudentsEligibleToBeGradedExternalSubmission=this.numStudentsEligibleToBeGraded-this.numStudentsGradedNeedsPosting-this.numStudentsPosted-this.numberOfOverriddenGradesToPost,this.numGroupsEligibleToBeGradedExternalSubmission=this.numGroupsEligibleToBeGraded-this.numGroupsGradedNeedsPosting-this.numGroupsPosted,null!=this.numGroupsGradedNeedsPosting?(this.numGradedNeedsPosting=this.numGroupsGradedNeedsPosting,this.numberOfStudentsOverriddenGradesToPost=this.numberOfOverriddenGradesToPost,this.numberOfOverriddenGradesToPost=0):this.numGradedNeedsPosting=this.numStudentsGradedNeedsPosting},isRestricted(){return this.restricted},getStatus(){return this.isRestricted()?ns.a.Restricted:this.numNeedsGrading>0?ns.a.NeedsGrading:this.totalNumberOfGradesToPost()>0?ns.a.NeedsPosting:this.numPosted===this.numEligibleToBeGraded&&this.numPosted>0?ns.a.AllPosted:0===this.numSubmissionsTotal?ns.a.NothingToGrade:0===this.numNeedsGrading?ns.a.AllGraded:void 0},isAllGradedAndPosted(){return this.numPosted===this.numEligibleToBeGraded&&this.numPosted>0},numStudentsGraded(){return this.numGradedNeedsPosting+this.numPosted+this.numberOfOverriddenGradesToPost},numStudentSubmissions(){return this.participantIds?this.participantIds.length:this.numGroupsSubmitted||this.numStudentsSubmitted},hasGradesToPost(){return null!=this.numGroupsGradedNeedsPosting?this.numGroupsGradedNeedsPosting>0:this.numGradedNeedsPosting>0||this.numberOfOverriddenGradesToPost>0},totalNumberOfGradesToPost(){return this.numGradedNeedsPosting+this.numberOfOverriddenGradesToPost}},Model:{inferKey:()=>ss.a(),unpack:(e,t)=>(mt.forOwn(e,(e,t,s)=>{mt.startsWith(t,"$")||"ui"===t||(s[t]=null)}),Ee.g(e,t))},Collection:{expandingColumns(e,t){let s={};return this.$collection().$on("after-fetch-many",n=>{const i=n.data.results;s=i.reduce((e,t)=>(e[t.columnId]=t,e),s),e.forEach(e=>{e.id in s?e.summary.$unwrap(s[e.id]):t&&e.summary.$unwrap(t)})})}}}})]);var os=s("KrjC");const as="ultra.components.models.grade.gradeSchema",ls=Te.jb;$e.a.factory(ls,["restmod",Ee.d,(e,t)=>e.model().mix({ui:{mask:!0,init:()=>({})},$extend:{Record:{getPossiblePoints(){if(this.scaleType===He.SchemaScaleType.Score)throw new Error("Possible points must be entered by the user for schemas with a scale type of Score");return 100}}}})]);var cs=s("3PCF");const ds=Te.db;$e.a.factory(ds,["restmod",Ee.d,"$injector","$ngRedux",(e,t,s,n)=>e.model().mix({$hooks:{"before-fetch":function(e){e.method="POST",mt.isString(e.params.membershipIds)&&(e.params.membershipIds=e.params.membershipIds.split(",")),mt.isString(e.params.gradeIds)&&(e.params.gradeIds=e.params.gradeIds.split(",")),mt.isString(e.params.columnIds)&&(e.params.columnIds=e.params.columnIds.split(",")),e.data={membershipIds:e.params.membershipIds,gradeIds:e.params.gradeIds,columnIds:e.params.columnIds},delete e.params.membershipIds,delete e.params.gradeIds,delete e.params.columnIds},"after-fetch":function(e){const t=s.get(Ze.serviceName),i=e.config.params.courseId;this.bulkViewUsers.forEach(e=>{const s=e.grades.map(e=>{var t;const s=null===(t=e.attempts)||void 0===t?void 0:t.find(t=>new Date(t.attemptDate).getTime()===new Date(e.lastAttemptDate).getTime());return{...e.grade,lastAttemptId:null==s?void 0:s.id}});n.dispatch(yt.actions.gradebookGrade.setGradesInStore(s)),e.grades.forEach(e=>{const s=e.grade;e.grade=t.$new(i).gradebook.columns.$new(e.columnId).grades.$buildRaw(s),e.lastAttemptDate&&(e.lastAttemptDate=new Date(e.lastAttemptDate)),e.attempts&&e.attempts.length>0&&(e.attempts.forEach(n=>{const r=t.$new(i).gradebook.columns.$new(e.columnId).grades.$new(s.id).attempts.$buildRaw(n);e.grade.attempts.$add(r)}),e.grade.ui.attempt=e.grade.attempts[0]),e.grade.permissions=this.permissions,e.submissionResults&&e.submissionResults.results[cs.b]&&(e.originalityProcessed=e.submissionResults.results[cs.b].originalityProcessed,e.originalityScore=e.submissionResults.results[cs.b].originalityScore)})})}}})]);s("lTRw");const us=Te.Z;$e.a.factory(us,["restmod",Ee.d,(e,t)=>e.model()]);const hs=Te.bb;$e.a.factory(hs,["restmod",e=>e.model().mix({$hooks:{"after-save":function(e){this.points=null,this.$unwrap(e.data),this.questionAttempt.visibleQuestionNumber=this.questionNumber},"before-save":function(e){e.url=e.url.substr(0,e.url.indexOf("/answers"))+"/answers/"+this.questionAttempt.id+"/grades",mt.merge(e.data,{questionType:this.questionAttempt.questionType}),this.questionNumber=this.questionAttempt.visibleQuestionNumber},"after-fetch-many":function(){this.forEach(e=>{e.permissions=this.permissions})}},$extend:{Collection:{setPostStatusAndGroupAttemptId(e){this.forEach(t=>{t.ui.isPosted=e.isCompleted(),e.groupAttemptId&&(t.ui.groupAttemptId=e.groupAttemptId)})}}},questionAttempt:{ignore:"CU"},ui:{init:()=>({}),mask:!0}})]);const ms=Te.ib;$e.a.factory(ms,["restmod","$q",Ee.d,(e,t,s)=>{return e.model().mix({})}]);const ps=Te.ab;$e.a.factory(ps,["restmod",Ee.d,e=>e.model().mix({$extend:{hasAttachments(){return!mt.isUndefined(this.overallOriginalityProcessed)&&(this.attemptOriginality&&this.attemptOriginality.attachments.length||this.answerOriginalities.length&&this.answerOriginalities.some(e=>e.attachments.length))},canShowReportPanel(){return this.overallOriginalityProcessed&&this.hasAttachments()}},$hooks:{"after-request":function(e){e.data.results&&(e.data=e.data.results[cs.b])}}})]);const gs=Te.kb;$e.a.factory(gs,["restmod",e=>{const t=we.a.apiBasePath+"/v1/calendars/institution/calendarItems";return e.model(t).mix(Ve.serviceName)}]);const bs=Te.lb;$e.a.factory(bs,["restmod",Ee.d,(e,t)=>{const s=we.a.apiBasePath+"/v1/roles/institutionRoles";return e.model(s)}]);const fs=Te.mb;$e.a.factory(fs,["restmod",Ee.d,(e,t)=>{const s=we.a.apiBasePath+"/v1/languages";return e.model(s).mix({})}]);const vs=Te.nb;class Ss extends xe.a{}Ss.Approved=new Ss("Approved"),Ss.Excluded=new Ss("Excluded"),Ss.NeedsApproval=new Ss("NeedsApproval");class ys extends xe.a{}ys.Never=new ys("Never"),ys.SSLOnly=new ys("SSLOnly"),ys.Always=new ys("Always"),$e.a.factory(vs,["restmod",e=>{const t=we.a.apiBasePath+"/v1/lti/domainConfigs";return e.model(t).mix({$extend:{Model:{findByDomain(e){return this.$build().$send({method:"GET",url:this.$url()+"?domain="+e},(function(e){return this.$unwrap(e.data)})).$allow([404]).$asPromise()}}}})}]);const Cs=Te.pb;$e.a.factory(Cs,["restmod",Ee.d,e=>{const t=we.a.apiBasePath+"/v1/lti/settings";return e.model(t).mix({$extend:{Model:{getSettings(){return this.$build().$send({method:"GET",url:this.$url()},(function(e){return this.$unwrap(e.data)})).$asPromise()}}}})}]);const Is=Te.ob;$e.a.factory(Is,["restmod",e=>{const t=we.a.apiBasePath+"/public/v1/lti/placements";return e.model(t).mix({isAvailable(){return He.PublicAvailability.Yes===this.availability.available},$hooks:{"after-feed":function(e){this.iconUrl=qe.c(this.iconUrl)}}})}]);const $s=Te.qb;$e.a.factory($s,["restmod",Ee.d,(e,t)=>{const s=we.a.apiBasePath+"/v1/users/me/preferences";return e.model(s).mix({$config:{primaryKey:"key"}})}]);const ws=Te.rb;$e.a.factory(ws,["restmod",Ee.d,e=>e.model()]);var Ts=s("1/43");const Es=Te.tb;$e.a.factory(Es,["restmod",Ee.d,e=>e.model()]);const ks=Te.ub;$e.a.factory(ks,["restmod",Ee.d,e=>e.model().mix({courseSettings:{hasMany:Te.tb},organizationSettings:{hasMany:Te.tb},$url:()=>we.a.apiBasePath+"/v1/notification/settings"})]);const Ps=Te.vb;$e.a.factory(Ps,["restmod",e=>e.model().mix(Ve.serviceName,{})]);var As=s("FBBZ");const Rs=Te.wb;$e.a.factory(Rs,["restmod",e=>{const t=we.a.partnerCloudBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getPartnersByType(e){return this.$build().$send({method:"GET",url:this.$url()+"/providerContent?course_id="+e},(function(e){return this.$unwrap(e.data)})).$allow(["400-599"]).$asPromise()}}},$hooks:{"after-feed":function(e){const t=e=>{Ae.isDefined(e.internalPovider)&&Ae.isUndefined(e.internalProvider)&&(e.internalProvider=e.internalPovider)};mt.forEach(this.premierList,t),mt.forEach(this.signatureList,t),mt.forEach(this.otherList,t);const s=e=>!e.internalProvider||As.o(e);this.premierList=mt.filter(this.premierList,s),this.signatureList=mt.filter(this.signatureList,s),this.otherList=mt.filter(this.otherList,s)}}})}]);const Os=Te.Cb;$e.a.factory(Os,["restmod",e=>{const t=we.a.partnerCloudBasePath+"/v1/status";return e.model(t).mix({$extend:{Model:{getStatus(e){return this.$build().$send({method:"GET",url:this.$url()+"?course_id="+e},(function(e){return this.$unwrap(e.data)}),(function(){return this.$unwrap({enabled:!1,userCloudProvisioned:!1})})).$allow(["400-599"]).$asPromise()}}}})}]);const Ds=Te.yb;$e.a.factory(Ds,["restmod",Ee.d,(e,t)=>{const s=we.a.partnerCloudBasePath+"/v1/courses";return e.model(s).mix({partnerLinkedCourses:{hasMany:Te.Ab,path:"providerBindings"},$extend:{Record:{updateProvisioning(e){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.$pk+"/updateProvisioning/"+e},(function(e){this.$unwrap(e.data)})).$allow(["400-599"]).$asPromise()}}}})}]);const _s=Te.Ab;$e.a.factory(_s,["restmod",Ee.d,e=>e.model().mix({tools:{hasOne:Te.Db,path:"tools"},id:{map:"@id"},$extend:{Model:{unpack:(e,t)=>t&&t.bindings}}})]);const Ns=Te.xb;$e.a.factory(Ns,["restmod",e=>{const t=we.a.partnerCloudBasePath+"/v1/courses";return e.model(t).mix({$extend:{Model:{getContentIds(e,t){return this.$build().$send({method:"GET",url:this.$url()+"/"+e+"/linkRefId/"+t+"/content/ids"},(function(e){return this.$unwrap(e.data)})).$asPromise()}}}})}]);s("3uIF");const Ls=Te.Bb;$e.a.factory(Ls,["restmod",e=>{const t=we.a.partnerCloudBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getSettingsById(e){return this.$build().$send({method:"GET",url:this.$url()+"/providers/"+e+"/settings"},(function(e){return this.$unwrap(e.data)})).$allow(["400-599"]).$asPromise()}}}})}]);const Ms=Te.Db;$e.a.factory(Ms,["restmod",Ee.d,(e,t)=>e.model().mix({})]);const xs=Te.Eb;$e.a.factory(xs,["restmod",e=>e.model().mix(Ve.serviceName,{})]);var js=s("0JpG");const Gs=Te.Fb;function Us(e,t){e.activityDaily&&e.activityDaily.forEach(e=>{e.inCourseDuration=Fs(e.inCourseDuration),e.ui={display:t.formatComposedDurationSync(e.inCourseDuration,js.ILocaleComposedDurationFormat.HoursMinutes)}}),e.activityWeekly&&e.activityWeekly.forEach(e=>{e.inCourseDuration=Fs(e.inCourseDuration),e.ui={display:t.formatComposedDurationSync(e.inCourseDuration,js.ILocaleComposedDurationFormat.HoursMinutes)}})}function Fs(e){return 15*Math.round(e/15)*60}$e.a.factory(Gs,["restmod",js.serviceName,(e,t)=>{const s=we.a.telemetryApiBasePath+"/v1/predict/courses";return e.model(s).mix({"activityDaily[].activityDate":{decode:"localDate"},"activityWeekly[].activityWeek":{decode:"localDate"},"assignments[].dueDate":{serialize:"date"},"assignmentGrades[].gradedDate":{serialize:"date"},"assignmentGrades[].submissionDate":{serialize:"date"},startDate:{serialize:"date"},endDate:{serialize:"date"},lastActivityDate:{serialize:"date"},"weeks[].weekOf":{decode:"localDate"},$hooks:{"after-fetch":function(){Us(this,t),this.instructors&&this.instructors.forEach(e=>{e.learnUser=z.learnUser})}}})}]);const Bs=Te.Gb;$e.a.factory(Bs,["restmod",e=>e.model().mix({$extend:{Model:{$for(e,t){return this.$collection(t,{$urlFor:()=>we.a.telemetryApiBasePath+"/v1/predict/"+e})}},Collection:{$decode(e){return this.push(...e),this}}}})]);const qs=Te.Jb;$e.a.factory(qs,["restmod",e=>{const t=we.a.telemetryApiBasePath+"/v1/predict/favorites";return e.model(t).mix({$extend:{Model:{marketSnapshot(e,t){return this.$build().$send({method:"GET",params:t,url:this.$url()+"/"+e+"/marketSnapshot"},(function(e){return this.$unwrap(e.data)})).$asPromise()}}}})}]);const Hs=Te.Pb;$e.a.factory(Hs,["restmod",Ee.d,(e,t)=>{const s=we.a.telemetryApiBasePath+"/v1/predict/settings";return e.model(s).mix({$extend:{Model:{get(){return this.single(s).$fetch().$allow([403]).$asPromise()}}},$hooks:{"after-fetch":function(){Ae.isUndefined(this.advisorEmailEnabled)&&(this.advisorEmailEnabled=!0),Ae.isUndefined(this.instructorEmailEnabled)&&(this.instructorEmailEnabled=!0);const e=mt.indexOf(this.fields,"probability");-1!==e&&(this.fields[e]="goodProbability")}}})}]);const zs=Te.Rb;$e.a.factory(zs,["restmod",Ee.d,e=>{const t=we.a.apiBasePath+"/v1/telemetry/predict/systemSettings";return e.model(t).mix({$extend:{Model:{get(){return this.single(t).$fetch().$allow([404]).$asPromise()}}}})}]);const Vs=Te.Ib;$e.a.factory(Vs,["restmod",e=>e.model().mix({$extend:{Model:{$for(e,t){return this.$collection(t,{$urlFor:()=>we.a.telemetryApiBasePath+"/v1/predict/"+e})}},Collection:{$unwrap(e){return e.results||e.data?(e.data&&this.push(...e.data),e.results&&this.push(...e.results)):this.push(...e),this}}}})]);const Ks=Te.Qb;function Ws(e){Ae.isDefined(e.goodProbability)&&(e.goodProbability=Math.round(100*e.goodProbability)),Ae.forEach(e.courses,e=>{e.prediction&&(e.prediction.goodProbability=Math.round(100*e.prediction.goodProbability)),e.previousPrediction&&(e.previousPrediction.goodProbability=Math.round(100*e.previousPrediction.goodProbability)),Ae.forEach(e.weeks,e=>{e.goodProbability=Math.round(100*e.goodProbability)})})}function Js(){return Ae.isUndefined(this.ui)&&(this.ui={}),Ae.isUndefined(this.ui.learnUser)&&(this.ui.learnUser={givenName:this.firstName,familyName:this.lastName}),this.ui.learnUser}$e.a.factory(Ks,["restmod","$q",js.serviceName,(e,t,s)=>{const n=we.a.telemetryApiBasePath+"/v1/predict/students",i=we.a.telemetryApiBasePath+"/v1/predict/courses/",r=we.a.telemetryApiBasePath+"/v1/predict/studentSearch",o=we.a.telemetryApiBasePath+"/v1/predict/message";we.a.telemetryApiBasePath;return e.model(n).mix({academicHoldDate:{serialize:"date"},birthDate:{serialize:"date"},financialHoldDate:{serialize:"date"},lastActivityDate:{serialize:"date"},"plannerInterests[].chosenDate":{serialize:"date"},plannerLocationChosenDate:{serialize:"date"},"courses[].activityDaily[].activityDate":{decode:"localDate"},"courses[].activityWeekly[].activityWeek":{decode:"localDate"},"courses[].assignments[].dueDate":{serialize:"date"},"courses[].assignmentGrades[].gradedDate":{serialize:"date"},"courses[].assignmentGrades[].submissionDate":{serialize:"date"},"courses[].startDate":{serialize:"date"},"courses[].endDate":{serialize:"date"},"courses[].lastActivityDate":{serialize:"date"},"courses[].weeks[].weekOf":{decode:"localDate"},$extend:{Model:{getCourseStudent(e,t,s){return this.single(i+t+"/students/"+e).$fetch(s).$allow([403]).$asPromise()},getCourseStudents(e,t){return this.$collection(t,{$urlFor:()=>i+e+"/students"}).$fetch(t).$allow([403]).$asPromise()},getStudent(e,s){const i=t.defer();return this.$collection({studentId:e},{$urlFor:()=>n}).$fetch(s).$asPromise().then(e=>{i.resolve(e[0])}).catch(()=>{i.reject()}),i.promise},postInstructorMessage(e,t,s){return this.$build().$send({method:"POST",url:i+s+"/students/"+t+"/message/advisor",data:e}).$asPromise()},postAdvisorMessage(e,t){return this.$build().$send({method:"POST",url:n+"/"+t+"/message/student",data:e}).$asPromise()},postMessage(e){return this.$build().$send({method:"POST",url:`${o}`,data:e}).$asPromise()},postMessageToStudents(e){return this.$build().$send({method:"POST",url:`${n}/message`,data:e}).$asPromise()},postMessageToStudentsByFilter(e,t){return this.$build().$send({method:"POST",url:`${n}/messageByFilter`,data:e,params:t}).$asPromise()},typeaheadSearch(e,s="",n=6,o=!1){const a=t.defer();let l=r+"?query="+encodeURIComponent(e);return s&&(l=`${i}${s}/studentSearch?query=${encodeURIComponent(e)}`),this.$build().$send({method:"GET",url:l,params:{emailRequired:!0===o?"true":"false",limit:n}},(function(e){e&&e.data&&e.data.results?a.resolve(e.data.results.map(e=>({firstName:e.firstName,lastName:e.lastName,studentDisplayId:e.studentDisplayId,lmsId:e.lmsId,avatar:{permanentUrl:e.avatarUrl},learnUser:Js,email:e.email,advisors:e.advisors}))):a.resolve([])})).$allow([403]),a.promise}},Record:{learnUser:Js}},$hooks:{"after-fetch":function(){Ws(this),this.courses.forEach(e=>{G.adjustEngagement(e,s)}),this.advisors&&this.advisors.forEach(e=>{e.learnUser=Js})},"after-fetch-many":function(){this.forEach(e=>{Ws(e),e.courses.forEach(e=>{G.adjustEngagement(e,s)}),e.advisors&&e.advisors.forEach(e=>{e.learnUser=Js})})}}})}]);const Ys=Te.Nb;$e.a.factory(Ys,["restmod",Ee.d,(e,t)=>{const s=we.a.telemetryApiBasePath+"/v1/predict/permissions";return e.model(s).mix({$extend:{Model:{get(){return this.single(s).$fetch().$allow([403]).$asPromise()}}}})}]);const Qs=Te.Kb;$e.a.factory(Qs,["restmod","$q",(e,t)=>{const s=we.a.telemetryApiBasePath+"/v1/predict/ftue",n=we.a.telemetryApiBasePath+"/v1/predict/ftues";return e.model(s).mix({$extend:{Model:{setFtue(e){return this.$build().$send({method:"POST",url:this.$url()+"/"+e}).$asPromise()},delFtue(e){return this.$build().$send({method:"DELETE",url:this.$url()+"/"+e}).$asPromise()},delFtues(){return this.$build().$send({method:"DELETE",url:this.$url()}).$asPromise()},getFtue(e){const s=t.defer();return this.$build().$send({method:"GET",url:n,params:{timestamp:(new Date).getTime()}},(function(t){if(t&&t.data&&t.data.length){const n=t.data.filter(t=>t.componentKey===e);n&&n.length?s.resolve({key:n[0].componentKey,value:""}):s.resolve(null)}else s.resolve(null)})),s.promise},getFtues(){const e=t.defer();return this.$build().$send({method:"GET",url:n,params:{timestamp:(new Date).getTime()}},(function(t){if(t&&t.data&&t.data.length){const s=[];t.data.forEach(e=>{s.push({key:e.componentKey,value:""})}),s&&s.length?e.resolve(s):e.resolve(null)}else e.resolve(null)})),e.promise}}}})}]);const Zs=Te.Mb;$e.a.factory(Zs,["restmod","$q",Ee.d,(e,t,s)=>{const n=we.a.telemetryApiBasePath+"/v1/predict/notes";return e.model(n).mix({dateCreated:{serialize:"date"},dateModified:{serialize:"date"},isEdited:{mask:!0},isUndoing:{mask:!0},isAdding:{mask:!0},$extend:{Model:{getNotes(e,t){return(t=t||{}).timestamp=(new Date).getTime(),this.$collection(t,{$urlFor:()=>n+"/students/"+e}).$fetch(t).$allow([403]).$asPromise()},postNote(e,t){return this.$build().$send({method:"POST",url:n,data:{note:e,recipient:{recipientId:t.recipientId,email:t.email}}},(function(e){this.$unwrap(e.data)})).$asPromise()},updateNote(e,t){return this.$build().$send({method:"PUT",url:n,data:{noteId:e,note:t}},(function(e){return this.$unwrap(e.data)})).$asPromise()},deleteNote(e){return this.$build().$send({method:"DELETE",url:n+"/"+e},(function(e){this.$unwrap(e.data)})).$asPromise()},undoDeleteNote(e){return this.$build().$send({method:"PUT",url:`${n}/${e}`},(function(e){return e})).$asPromise()}}},$hooks:{"after-fetch-many":function(){this.forEach(e=>{Ae.isDefined(e.dateModified)?e.isEdited=e.dateCreated.getTime()<e.dateModified.getTime():e.isEdited=!1;const t=Object(mt.cloneDeep)(e.dateCreated);e.ui.dateCreated=t})}}})}]);const Xs=Te.Ob;$e.a.factory(Xs,["restmod","$q",(e,t)=>{const s=we.a.telemetryApiBasePath+"/v1/predict/preferences";return e.model(s).mix({$extend:{Model:{setPreference(e,t){const s={componentKey:e,preference:t};return this.$build().$send({method:"POST",url:this.$url(),data:s}).$allow([403]).$asPromise()},delPreference(e){return this.$build().$send({method:"DELETE",url:this.$url()+"/"+e}).$asPromise()},delPreferences(){return this.$build().$send({method:"DELETE",url:this.$url()}).$asPromise()},getPreference(e){const n=t.defer();return this.$build().$send({method:"GET",url:`${s}/${e}`,params:{timestamp:(new Date).getTime()}},(function(t){if(t&&t.data&&t.data.length){const s=t.data.filter(t=>t.componentKey===e);s&&s.length?n.resolve({componentKey:s[0].componentKey,value:s[0].value}):n.resolve(null)}else n.resolve(null)})).$allow([403]),n.promise},getPreferences(){const e=t.defer();return this.$build().$send({method:"GET",url:s,params:{timestamp:(new Date).getTime()}},(function(t){if(t&&t.data&&t.data.length){const s=[];t.data.forEach(e=>{s.push({componentKey:e.componentKey,preference:e.preference})}),s&&s.length?e.resolve(s):e.resolve([])}else e.resolve([])})).$allow([403]),e.promise}}}})}]);const en=Te.Lb;$e.a.factory(en,["restmod","$q",(e,t)=>{const s=we.a.telemetryApiBasePath+"/v1/predict/preferences/config";return e.model(s).mix({$extend:{Model:{getInstitutionPreference(e){const n=t.defer();return this.$build().$send({method:"GET",url:`${s}/${e}`},(function(t){if(t&&t.data){const s=t.data;s.name===e?n.resolve(s):n.resolve(null)}else n.resolve(null)})).$allow([403]),n.promise}}}})}]);const tn=Te.Hb;$e.a.factory(tn,["restmod","$q",(e,t)=>{const s=we.a.telemetryApiBasePath+"/v1/predict/customFieldSettings";return e.model(s).mix({$extend:{Model:{getCustomFieldSettings(){const e=t.defer();return this.$build().$send({method:"GET",url:s},(function(t){t&&t.data?e.resolve(t.data):e.resolve([])})),e.promise}}}})}]);const sn=Te.Sb;$e.a.factory(sn,["restmod",Ee.d,e=>{const t=we.a.apiBasePath+"/public/v1/system/policies/privacy";return e.model(t).mix({$extend:{Model:{getPrivacyPolicy(){return this.$build().$send({method:"GET",url:this.$url()},(function(e){return this.$unwrap(e.data)})).$asPromise()}}}})}]);const nn=Te.Tb,rn="Respondus";$e.a.factory(nn,["restmod","$ngRedux",(e,t)=>{const s=we.a.apiBasePath+"/public/v1/proctoring/services";return e.model(s).mix({$hooks:{"after-fetch-many":function(e){const s=e.data.results;t.dispatch(yt.actions.proctoringServices.setProctoringServicesInStore(s))}}})}]);const on=Te.Wb;$e.a.factory(on,["restmod","$q",(e,t)=>{const s=we.a.telemetryApiBasePath+"/v1/predict/courses/";return e.model(s).mix({$extend:{Model:{getRiskBucketDistribution(e){const n=t.defer();return this.$build().$send({method:"GET",url:`${s}${e}/riskBuckets`},(function(e){if(e&&e.data){const t=e.data;n.resolve(t)}else n.resolve(null)})).$allow([403]),n.promise}}}})}]);var an=s("XfOu");const ln=Te.Yb;$e.a.factory(ln,["restmod",Ee.d,(e,t)=>{return e.model(we.a.apiBasePath+"/v1/scheduledTasks").mix({$config:{primaryKey:"taskId"},startDate:{serialize:"date"},endDate:{serialize:"date"},isWaiting(){return He.QueueTaskStatus.Waiting===this.taskStatus}})}]);class cn extends xe.a{}cn.Sender=new cn("SENDER"),cn.Receiver=new cn("RECEIVER");class dn extends xe.a{}dn.Completed=new dn("completed"),dn.InProgress=new dn("in_progress"),dn.Exempt=new dn("exempt"),dn.NeedsGrading=new dn("needs_grading");const un=Te.ac;$e.a.factory(un,["restmod",Ee.d,(e,t)=>{const s=we.a.apiBasePath+"/v1/streams";return e.model(s).mix({$extend:{Collection:{$fetch:()=>{throw new Error("fetch StreamContent collection not supported")},$refresh:()=>{throw new Error("refresh StreamContent collection not supported")},$create:()=>{throw new Error("create StreamContent collection not supported")}},Record:{$fetch(e){return this.$decorate({"before-request":function(t){t.method="POST",t.data=e}},(function(){return this.$super()}))},$resolve:()=>{throw new Error("resolve StreamContent not supported")},$save:()=>{throw new Error("save StreamContent not supported")},$destroy:()=>{throw new Error("destroy StreamContent not supported")}}},$hooks:{"before-request":e=>{e.timeout=3e4,e.headers={"Suppress-Session-Timestamp-Update":!0}}}})}]);const hn=Te.cc;$e.a.factory(hn,["restmod",Ee.d,(e,t)=>e.model().mix({now:{serialize:"date"},$url:()=>we.a.apiBasePath+"/v1/utilities/systemInfo",$extend:{Record:{getLegacyToolUrl(e){if(e in this.classicUrls)return qe.c(this.classicUrls[e]);throw new Error("Key "+e+" is not found in systemInfo.classicUrls")}}}})]);const mn=Te.dc;$e.a.factory(mn,["restmod",Ee.d,(e,t)=>{const s=we.a.apiBasePath+"/v1/systemPreferences";return e.model(s).mix({$config:{primaryKey:"key"}})}]);s("DH9M");const pn=Te.fc;function gn(e){return e/60}$e.a.factory(pn,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},$url(){return we.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/activityVsGrade"},$hooks:{"after-fetch":function(){this.data.forEach(e=>e.activity=gn(e.activity))}}})]);const bn=Te.gc;$e.a.factory(bn,["restmod",e=>{const t=we.a.apiBasePath+"/v1";return e.model(t).mix({$config:{primaryKey:"contentId"},available:{serialize:"date"},firstOpened:{serialize:"date"},firstSave:{serialize:"date"},lastSave:{serialize:"date"},startedTime:{serialize:"date"},"submissions[].date":{serialize:"date"},$extend:{Collection:{getContentActivityInDetail(e,t){return this.$collection().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentContentActivityInDetail"},(function(e){this.$unwrap(e.data)}))}},Record:{containsInvalidData(){return this.ui&&this.ui.containsInvalidData||!1}}}})}]);const fn=e=>{const t=new Date(e);return new Date(t.getTime()+60*t.getTimezoneOffset()*1e3)},vn=Te.hc;$e.a.factory(vn,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},$url(){return we.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/courseActivity"},$hooks:{"after-fetch":function(){this.courseActivity.forEach(e=>{e.date=fn(e.date),e.activity=gn(e.activity),e.minScore=gn(e.minScore),e.maxScore=gn(e.maxScore),e.stdDev=gn(e.stdDev)})}}})]);const Sn=Te.jc;$e.a.factory(Sn,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},"currentStudent[].created":{serialize:"date"},"currentStudent[].dismissed":{serialize:"date"},$url(){return we.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/notifications"}})]);const yn=Te.ic;$e.a.factory(yn,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},$url(){return we.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/courseGrades"},$hooks:{"after-fetch":function(){this.courseGrades.forEach(e=>{e.date=fn(e.date)})}}})]);const Cn=Te.kc;$e.a.factory(Cn,["restmod",e=>{const t=we.a.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getDiscussionActivityReport(e,t,s){const n=s?this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivity?groupId="+s:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivity";return this.$build().$send({method:"GET",url:n},(function(e){this.$unwrap(e.data)}))}}}})}]);const In=Te.lc;$e.a.factory(In,["restmod",e=>{const t=we.a.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getDiscussionXrayReport(e,t,s){return this.$build().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivityScore/"+s},(function(e){this.$unwrap(e.data)}))}}},modifyDate:{serialize:"date"}})}]);const $n=Te.mc;$e.a.factory($n,["restmod",e=>{const t=we.a.apiBasePath+"/v1";return e.model(t).mix({lastOpened:{serialize:"date"},$extend:{Collection:{getMultimediaActivityInDetail(e,t){return this.$collection().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentMultimediaActivityInDetail"},(function(e){this.$unwrap(e.data)}))}}}})}]);const wn=Te.nc;$e.a.factory(wn,["restmod",e=>{const t=we.a.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getMultimediaStatistics(e,t){return this.$build().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentMultimediaStatistics"},(function(e){this.$unwrap(e.data)}))}}}})}]);const Tn=Te.oc;$e.a.factory(Tn,["restmod",Ee.d,e=>e.model(we.a.apiBasePath+"/v1/telemetry/notifications")]);const En=Te.pc;$e.a.factory(En,["restmod",Ee.d,e=>e.model().mix({$config:{primaryKey:"notificationId"},$url(){return we.a.apiBasePath+"/v1/telemetry/notifications/"+this.$pk+"/users"}})]);const kn=Te.qc;$e.a.factory(kn,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},$url(){return we.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/studentActivity"},$hooks:{"after-fetch":function(){this.studentActivity.forEach(e=>{e.date=fn(e.date),e.activity=gn(e.activity)})}}})]);const Pn=Te.rc;$e.a.factory(Pn,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},$url(){return we.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/studentGrades"},$hooks:{"after-fetch":function(){this.studentGrades.forEach(e=>{e.date=fn(e.date)})}}})]);const An=Te.sc;$e.a.factory(An,["restmod",Ee.d,e=>e.model().mix({$url:()=>we.a.apiBasePath+"/v1/telemetry/courses?filter=sufficientData"})]);var Rn=s("KiLF");class On extends xe.a{}On.CurrentTerm=new On("current"),On.UpcomingTerm=new On("upcoming");const Dn=Te.tc;$e.a.factory(Dn,["restmod",Ee.d,(e,t)=>{return e.model(we.a.apiBasePath+"/v1/terms").mix({startDate:{serialize:"date"},endDate:{serialize:"date"}})}]);var _n=s("/J7e");const Nn=Te.uc,Ln="UltraUI.";$e.a.factory(Nn,["restmod",Ee.d,(e,t)=>{const s=we.a.apiBasePath+"/v1/themes";return e.model(s).mix({ui:{mask:!0},getUsePrimaryColorOnAllBaseNav(){return _n.a(this.ui.usePrimaryColorOnAllBaseNav)},setUsePrimaryColorOnAllBaseNav(e){this.ui.usePrimaryColorOnAllBaseNav=_n.a(e)?"true":"false"},getUsePrimaryColorOnLogoBackground(){return _n.a(this.ui.usePrimaryColorOnLogoBackground)},setUsePrimaryColorOnLogoBackground(e){this.ui.usePrimaryColorOnLogoBackground=_n.a(e)?"true":"false"},$config:{primaryKey:"themeId"},$extend:{Record:{$fetch(){return this.$decorate({"before-request":function(e){e.url=s+`/${this.$pk.themeId}/settings`}},(function(){return this.$super()}))},$save(){return this.$decorate({"before-request":function(e){this.settings=[],Object.keys(this.ui).forEach(e=>{this.settings.push({key:Ln+e,value:this.ui[e]})}),e.url=s+`/${this.$pk.themeId}/settings`,e.data.settings=this.settings}},(function(){return this.$super()}))}},Model:{getDefault(){return this.$new({themeId:"default"}).$fetch()}}},$hooks:{"after-feed":function(){this.settings.forEach(e=>{if(e&&e.key){const t=e.key.replace(Ln,"");this.ui[t]=e.value}})}}})}]);const Mn=Te.wc;$e.a.factory(Mn,["restmod",e=>e.model().mix({$extend:{Collection:{getToolById(e){return mt.find(this,["identifier",e])},isToolAvailable(e){return this.$build().$send({method:"GET",url:`${this.$url()}/${e}`}).$allow([403]).$asPromise().then(e=>{var t;return!!(e.$response.data&&(null===(t=e.$response.data.toolEnabledSetting)||void 0===t?void 0:t.isAvailable))})}}}})]);const xn=Te.Zb;$e.a.factory(xn,["restmod",e=>e.model().mix({isTinCan(){return!(!this.learningStandard||!it.ScormLearningStandard.TINCAN.isEqualTo(this.learningStandard))}})]);const jn=Te.vc;$e.a.factory(jn,["restmod",Ee.d,(e,t)=>e.model(we.a.apiBasePath+"/v1/tools")]);const Gn=Te.bc;$e.a.factory(Gn,["restmod",Ee.d,(e,t)=>e.model().mix({$hooks:{"after-destroy":function(){this.previewing=!1,this.user=null}}})]);const Un=Te.xc;$e.a.factory(Un,["restmod",Ee.d,(e,t)=>{const s=we.a.apiBasePath+"/v1/trial/supportTickets";return e.model(s)}]);const Fn=Te.yc;$e.a.factory(Fn,["restmod",Ee.d,(e,t)=>e.model().mix({})]),s.d(t,"N",(function(){return Bn})),s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return Ue})),s.d(t,"e",(function(){return o})),s.d(t,"f",(function(){return a})),s.d(t,"g",(function(){return Ve})),s.d(t,"l",(function(){return Ke})),s.d(t,"x",(function(){return l})),s.d(t,"m",(function(){return Ze})),s.d(t,"n",(function(){return c})),s.d(t,"p",(function(){return it})),s.d(t,"o",(function(){return d})),s.d(t,"s",(function(){return u})),s.d(t,"v",(function(){return dt})),s.d(t,"q",(function(){return h})),s.d(t,"r",(function(){return m})),s.d(t,"t",(function(){return p})),s.d(t,"u",(function(){return g})),s.d(t,"w",(function(){return Ot})),s.d(t,"h",(function(){return b})),s.d(t,"i",(function(){return f})),s.d(t,"j",(function(){return v})),s.d(t,"y",(function(){return S})),s.d(t,"z",(function(){return y})),s.d(t,"A",(function(){return Wt})),s.d(t,"E",(function(){return C})),s.d(t,"C",(function(){return ts})),s.d(t,"k",(function(){return I})),s.d(t,"D",(function(){return os})),s.d(t,"F",(function(){return $})),s.d(t,"B",(function(){return w})),s.d(t,"G",(function(){return T})),s.d(t,"H",(function(){return E})),s.d(t,"I",(function(){return k})),s.d(t,"J",(function(){return P})),s.d(t,"K",(function(){return A})),s.d(t,"M",(function(){return R})),s.d(t,"L",(function(){return O})),s.d(t,"O",(function(){return D})),s.d(t,"P",(function(){return Ts})),s.d(t,"Q",(function(){return _})),s.d(t,"R",(function(){return N})),s.d(t,"V",(function(){return L})),s.d(t,"T",(function(){return M})),s.d(t,"S",(function(){return x})),s.d(t,"U",(function(){return j})),s.d(t,"W",(function(){return G})),s.d(t,"X",(function(){return U})),s.d(t,"ab",(function(){return F})),s.d(t,"gb",(function(){return B})),s.d(t,"ib",(function(){return q})),s.d(t,"Z",(function(){return H})),s.d(t,"hb",(function(){return z})),s.d(t,"eb",(function(){return V})),s.d(t,"bb",(function(){return K})),s.d(t,"db",(function(){return W})),s.d(t,"fb",(function(){return J})),s.d(t,"cb",(function(){return Y})),s.d(t,"Y",(function(){return Q})),s.d(t,"jb",(function(){return Z})),s.d(t,"kb",(function(){return X})),s.d(t,"lb",(function(){return ee})),s.d(t,"mb",(function(){return an})),s.d(t,"nb",(function(){return te})),s.d(t,"ob",(function(){return se})),s.d(t,"pb",(function(){return ne})),s.d(t,"qb",(function(){return ie})),s.d(t,"sb",(function(){return re})),s.d(t,"tb",(function(){return oe})),s.d(t,"ub",(function(){return ae})),s.d(t,"wb",(function(){return le})),s.d(t,"vb",(function(){return ce})),s.d(t,"xb",(function(){return de})),s.d(t,"yb",(function(){return ue})),s.d(t,"zb",(function(){return he})),s.d(t,"Ab",(function(){return me})),s.d(t,"Bb",(function(){return pe})),s.d(t,"Cb",(function(){return ge})),s.d(t,"Db",(function(){return be})),s.d(t,"Eb",(function(){return fe})),s.d(t,"Fb",(function(){return ve})),s.d(t,"Gb",(function(){return Se})),s.d(t,"Hb",(function(){return ye})),s.d(t,"rb",(function(){return Ce})),s.d(t,"Ib",(function(){return Ie})),s.d(t,"Jb",(function(){return gt}));const Bn=$e.a.name},pqmn:function(e,t,s){"use strict";var n=s("nbDY"),i=s.n(n);class r extends i.a{}r.ROOT=new r("ROOT"),r.INTERACTIVE=new r("INTERACTIVE"),r.INDIRECT=new r("INDIRECT"),t.a=r},"q/wk":function(e,t,s){"use strict";var n=s("td+C"),i=s("adx1"),r=s("oPIA"),o=s("v6Sp"),a=s("x9Ok"),l=s("TWlR");class c extends i.a{constructor(e,t,s){super(),this.integrationService=e,this.routeListenerService=t,this.createMessenger=s,this.updateRoute=e=>{this.currentRoute=e},this.registerAsHelpProvider=(e,t)=>{const s=o.c.getHelpProvider(e.id);if(!e.id||s)return s?console.warn(`Cannot register provider: Provider already exists with an id of ${e.id}`):console.warn("Cannot register provider: no id was specified"),void this.integrationService.sendMessage({type:r.l,id:e.id,status:r.p.Failure},t);const n={iconUrl:e.iconUrl,providerId:e.id,providerType:e.providerType,integrationId:t.id,displayName:e.displayName};o.c.addHelpProvider(n),this.integrationService.sendMessage({type:r.l,id:e.id,status:r.p.Success,iconUrl:e.iconUrl},t);const i=o.c.getProviderByType(r.n.Auxiliary),a=o.c.getProviderByType(r.n.Primary);this.$emitEvent(this.helpChangedEvent,{auxiliaryProviders:i,primaryProviders:a})},this.helpChangedEvent="helpChanged",this.routeListenerService.subscribe(this.updateRoute)}init(){this.integrationService.addIntegrationMessageType(r.l,this.registerAsHelpProvider),this.helpRequestMessenger=this.createMessenger(r.m,{includeProcessingEvent:!1})}async sendHelp(e,t){await this.helpRequestMessenger.sendMessage({type:r.i,eventType:r.m,helpUrl:t,currentRouteName:this.currentRoute},e)}}t.a=new c(n.a,a.b,l.a)},q4pc:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-too-long.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-too-long">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-too-long.description</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},qOsI:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s("PCGa");var n=s("Llzl"),i=s("0JpG"),r=s("TnpK"),o=s("nmzr");const a="ultra.base.calendar.routes";n.module(a,[i.moduleName,r.b]).config([r.c,e=>{e.peekState(o.CalendarRoutes.CALENDAR_SETTINGS,{url:"/settings",resolve:{translations:[i.serviceName,e=>e.loadBundle("features/base/calendar/base-calendar")]},require:()=>s.e(677).then(s.bind(null,"OHPy")),pageTitle:"base.calendar.settings.title"}).peekState(o.CalendarRoutes.CREATE_EVENT,{url:"/event/create?selectedDate?calendarId",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])]},onExit:["$rootScope",e=>{e.$broadcast("calendar-refresh")}],require:()=>Promise.all([s.e(18),s.e(1),s.e(2),s.e(13),s.e(16),s.e(24),s.e(29),s.e(61)]).then(s.bind(null,"V4Gf")),pageTitle:"base.calendar.create.addEvent"}).peekState(o.CalendarRoutes.EDIT_EVENT,{url:"/event/edit/:calendarId/:itemSourceType/:itemSourceId?updateSeries&repeatRuleType&repeatRuleCourseId&repeatRuleUserId",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])]},onExit:["$rootScope",e=>{e.$broadcast("calendar-refresh")}],require:()=>Promise.all([s.e(18),s.e(1),s.e(2),s.e(13),s.e(16),s.e(24),s.e(29),s.e(61)]).then(s.bind(null,"V4Gf")),pageTitle:"base.calendar.create.editEvent"}).peekState(o.CalendarRoutes.VIEW_EVENT,{url:"/event/view/:calendarId/:itemSourceType/:itemSourceId?repeatRuleType&repeatRuleCourseId&repeatRuleUserId",resolve:{translations:[i.serviceName,e=>e.loadBundle("features/base/calendar/base-calendar")]},require:()=>Promise.all([s.e(1),s.e(2),s.e(16),s.e(633)]).then(s.bind(null,"dWqS")),pageTitle:"base.calendar.create.viewEvent"}).peekState(o.CalendarRoutes.COURSE_SCHEDULE,{url:"/class-schedule?selectedDate&courseId",resolve:{translations:[i.serviceName,e=>e.loadBundle("features/base/calendar/base-calendar")]},onExit:["$rootScope",e=>{e.$broadcast("calendar-refresh")}],require:()=>Promise.all([s.e(0),s.e(16),s.e(29),s.e(641)]).then(s.bind(null,"TayV")),pageTitle:"base.calendar.schedule.classSchedule"}).peekState(o.CalendarRoutes.OFFICE_HOURS,{url:"/office-hours?selectedDate?calendarId",resolve:{translations:["$q",i.serviceName,(e,t)=>e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])]},onExit:["$rootScope",e=>{e.$broadcast("calendar-refresh")}],require:()=>Promise.all([s.e(18),s.e(1),s.e(2),s.e(13),s.e(16),s.e(24),s.e(29),s.e(61)]).then(s.bind(null,"V4Gf")),pageTitle:"base.calendar.addOfficeHours"})}])},qZC8:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="course.placements.inlineGradableModalTitle"\n          analytics-id-tag-prefix="course.placements.basePlacement">\n  <div name="modal-contents">\n    <p bb-translate>course.placements.inlineGradableSupport</p>\n  </div>\n  \x3c!-- htmlhint:analytics-id:disable --\x3e\n  <button name="modal-footer-button-primary"\n          ng-click="dismissCallback()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="course.placements.basePlacement.ok.button">\n    global.ok\n  </button>\n  \x3c!-- htmlhint:analytics-id:enable --\x3e\n</bb-modal>'},qhd3:function(e,t,s){"use strict";s.r(t),s.d(t,"sortCompareUsers",(function(){return h})),s.d(t,"serviceName",(function(){return m})),s.d(t,"USER_API_PATH",(function(){return p}));s("QLzv");var n=s("nsO7"),i=s("Llzl"),r=s("5MwF"),o=s("Rjd/"),a=s("yCC5"),l=s("nkTj"),c=s("g66W"),d=s("cYWG"),u=s("zGdY");function h(e,t){if(!e&&!t)return 0;if(e&&!t)return-1;if(!e&&t)return 1;if(e&&t){if(e.familyName&&!t.familyName)return-1;if(!e.familyName&&t.familyName)return 1;if((e.familyName||t.familyName)&&e.familyName!==t.familyName)return e.familyName&&t.familyName?e.familyName.localeCompare(t.familyName):0;if(!e.givenName&&!t.givenName)return 0;if(e.givenName&&!t.givenName)return-1;if(!e.givenName&&t.givenName)return 1;if(!e.givenName&&!t.givenName||e.givenName===t.givenName){if(e.userName&&!t.userName)return-1;if(!e.userName&&t.userName)return 1;if(!e.userName&&!t.userName)return 0;if(e.userName&&t.userName)return e.userName.localeCompare(t.userName)}else if(e.givenName&&t.givenName)return e.givenName.localeCompare(t.givenName)}return 0}const m=a.zc,p=r.a.apiBasePath+"/v1/users";o.a.factory(m,["$http","restmod","$q",l.d,(e,t,s,r)=>{const o=t.model(p).mix({calendarItems:{hasMany:a.Eb},memberships:{hasMany:a.N,hooks:{"before-fetch-many":function(t){t.params=t.params||{},n.isUndefined(t.params.includeCount)&&(t.params.includeCount=!0);const s=t.params.limit,r=t.params.offset,o=(t,n,a)=>e.get(t,{params:n}).then(e=>{if(!(e&&200===e.status&&e.data&&e.data.results&&e.data.paging))return e;a=a||[];const n=e.data.results,l=e.data.paging;if(!((a=a.concat(n)).length>=s||n.length<l.limit)){const n=i.extend(i.copy(e.config.params),{offset:(r||0)+a.length});return a.length<s&&(n.limit=s-a.length),delete n.includeCount,o(t,n,a)}return e.data.results=a,e.data.paging.limit=s,e.data.paging.offset=r,e});t.cache={get:()=>o(t.url,t.params)}}}},blocks:{hasMany:a.h},birthDate:{encode:e=>new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)),decode:e=>{const t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),0,0,0,0)}},isGuest(){return Array.isArray(this.systemRoles)&&this.systemRoles[0]===u.KnownSystemRoleInternalName.Guest},isAnonymousStudent(){return this.ui&&this.ui.anonymousStudent},isInstructor(){return this.memberships.some(e=>e.isActAsInstructorMembership())},isStudent(){return this.memberships.some(e=>e.isStudentMembership())},getInitials(){if(this.givenName&&this.familyName&&!c.h(this.givenName)&&!c.h(this.familyName)&&!c.i(this.givenName)&&!c.i(this.familyName))return(""+this.givenName.charAt(0)+this.familyName.charAt(0)).toLowerCase()},$extend:{Collection:{batchGetCollection(e){const t=s.defer();return this.$collection().$send({method:"PUT",url:this.$url(),data:e},e=>{t.resolve(e.data)},e=>{t.reject(e)}),t.promise}}}});return o.getUserConfiguration=function(){const e=s.defer();return this.$collection().$send({method:"GET",url:this.$url()+"/fieldsConfiguration",params:{visibleOnly:!0,[d.a]:Number.MAX_VALUE}},t=>{e.resolve(t.data)},t=>{e.reject(t)}),e.promise},o.mixinUsers=r.getDataMixin((e,t)=>o.findMany(e,t,[404]),"userId","user"),o.getAnonymousStudent=e=>o.$build({id:e,familyName:"",givenName:"",ui:{anonymousStudent:!0,anonymousStudentId:e}}),o}])},qtHE:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("Llzl"),i=s("Sa5G"),r=s("wQOJ"),o=s("TnpK");const a="ultra.base.institution-page.routes";n.module(a,[o.b]).config([o.c,e=>{e.peekState("allLinks",{url:"/all?moduleId",require:()=>Promise.all([s.e(3),s.e(17),s.e(732)]).then(s.bind(null,"Dovs")),pageTitle:"base.nav.institutionPage",resolve:{IP:[r.b,o.d,(e,t)=>{const s=t.nextParams;return e.getModuleIsVisible(s.moduleId).then(e=>{if(!e)return t.goToRoute("base.institution-page")})}]}}).peekState("editPageImage",{systemEntitlement:i.t.ModifyPortalOptionsModuleManagement,url:"/editPage?type",require:()=>Promise.all([s.e(3),s.e(17),s.e(651)]).then(s.bind(null,"JKPj")),pageTitle:"base.nav.institutionPage",peekStates:["contentCollection","browserSettings"],allowChildPeekStates:!0,peekViewName:"edit-page-image-peek"}).peekState("editModule",{systemEntitlement:i.t.ModifyPortalOptionsModuleManagement,url:"/edit?moduleId&expandRoles",panelClass:"full",require:()=>Promise.all([s.e(3),s.e(17),s.e(726)]).then(s.bind(null,"axDv")),peekStates:["linkImage","system-content-market"],pageTitle:"base.nav.institutionPage"}).peekState("createModule",{systemEntitlement:i.t.CreatePortalOptionsModuleManagement,url:"/create?type&sequence",panelClass:"full",require:()=>Promise.all([s.e(3),s.e(17),s.e(725)]).then(s.bind(null,"57Mq")),peekStates:["linkImage","system-content-market"],pageTitle:"base.nav.institutionPage"}).peekState("linkImage",{systemEntitlement:i.t.ModifyPortalOptionsModuleManagement,url:"/linkImage?linkId",require:()=>Promise.all([s.e(3),s.e(17),s.e(652)]).then(s.bind(null,"kHrt")),pageTitle:"base.nav.institutionPage",peekStates:["contentCollection","browserSettings"],allowChildPeekStates:!0,peekViewName:"edit-link-image-peek"}).peekState("contentCollection",{systemEntitlement:i.t.ModifyPortalOptionsModuleManagement,url:"/contentCollection",require:()=>s.e(642).then(s.bind(null,"HgOS")),pageTitle:"base.nav.institutionPage",panelClass:"full",peekViewName:"ip-content-collection-peek"}).peekState("browserSettings",{systemEntitlement:i.t.ModifyPortalOptionsModuleManagement,url:"/browserSettings",require:()=>s.e(690).then(s.bind(null,"usdo")),pageTitle:"base.nav.institutionPage",panelClass:"peek"})}])},rEGj:function(e,t,s){"use strict";s.r(t)},rEZX:function(e,t,s){"use strict";var n=s("zGdY");var i=class{constructor(e,t){(null==t?void 0:t.scaleType)===n.SchemaScaleType.Text?this.isNumeric=!1:this.isNumeric=!Number.isNaN(parseFloat(e)),this.grade=e}getGrade(){return this.grade}};t.a=class{constructor(e,t,s){this.column=e,this.courseId=e.courseId,this.gradeValue=new i(t,s)}}},rmtn:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("Llzl"),i=s("Sa5G"),r=s("0JpG"),o=s("TnpK");const a="ultra.base.admin.brand.routes";n.module(a,[r.moduleName,o.b]).config([o.c,e=>{e.peekState("brands",{panelClass:"full",allowChildPeekStates:!0,url:"/brands",systemEntitlement:i.s.ViewBrands,require:()=>Promise.all([s.e(3),s.e(17),s.e(37),s.e(728)]).then(s.bind(null,"olMq")),pageTitle:"base.admin.branding.brandList.title",peekStates:["create-brand","brand-detail","modify-custom-css"]}).peekState("modify-custom-css",{panelClass:"full",allowChildPeekStates:!0,url:"/custom-css/modify",systemEntitlement:i.s.ModifyCustomCss,require:()=>s.e(675).then(s.bind(null,"uGYO")),pageTitle:"base.admin.branding.addCustomCSS.title"}).peekState("create-brand",{panelClass:"full",allowChildPeekStates:!0,url:"/create",systemEntitlement:i.s.CreateBrand,require:()=>Promise.all([s.e(3),s.e(17),s.e(37),s.e(150)]).then(s.bind(null,"3ay5")),pageTitle:"base.admin.branding.createBrand.title",peekStates:["colorSelection"]}).peekState("brand-detail",{panelClass:"full",allowChildPeekStates:!0,url:"/brand/:brandId",systemEntitlement:i.s.ViewBrands,require:()=>Promise.all([s.e(3),s.e(17),s.e(37),s.e(150)]).then(s.bind(null,"3ay5")),pageTitle:"base.admin.branding.brandDetails.title",peekStates:["colorSelection"]})}])},rxY8:function(e,t,s){"use strict";var n=s("5iHu"),i=s("nsO7");const r=20;class o{constructor(e,t){this.element=e,this.settings=t,this.nextFrame=i.throttle(()=>{window.requestAnimationFrame(()=>{e.setAttribute("keyframe",this.state+"-"+("00"+(this.frame=Math.min(this.frame+1,r))).substr(-2)),this.frame<r?this.nextFrame():(this[this.state+"Callback"]||this.settings[this.state+"Callback"]||n.noop)()})},50),this.settings=n.extend({successCallback:n.noop,errorCallback:n.noop,canvasSize:54},t),n(e).width(this.settings.canvasSize).height(this.settings.canvasSize)}start(){this.state="start",this.frame=1,this.startCallback=n.noop,this.nextFrame()}loadComplete(){this.afterWaiting(()=>{this.state="success",this.frame=1,this.nextFrame()})}loadError(){this.afterWaiting(()=>{this.state="error",this.frame=1,this.nextFrame()})}reset(){this.state="reset",this.frame=r,this.nextFrame()}afterWaiting(e){"start"===this.state&&this.frame===r||"reset"===this.state?e():this.startCallback=()=>{e(),this.startCallback=null}}}n.fn.inlineLoader=function(e){return this.addClass("xloader2").each((function(){this.InlineLoader=new o(this,e)})),this};var a=s("Llzl");s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return c}));const l="ultra.components.services.spinner",c="spinner";class d{constructor(e){this.$rootScope=e}initInlineLoader(e,t){return e.inlineLoader(t),new u(e,this.$rootScope)}}d.$inject=["$rootScope"];class u{constructor(e,t){this.element=e,this.$rootScope=t}start(){this.element[0].InlineLoader.start()}complete(){this.element[0].InlineLoader.loadComplete()}error(){this.element[0].InlineLoader.loadError()}reset(){this.element[0].InlineLoader.reset()}animate(e){this.start(),e.then(()=>{this.complete()},()=>{this.error()})}}class h extends d{}a.module(l,[]).service(c,d)},sNuB:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));s("JzsJ");var n=s("Llzl"),i=s("0JpG"),r=s("TnpK");const o="ultra.course.goal-alignment.router";n.module(o,[r.b]).config([r.c,e=>{e.peekState("goal-picker-legacy",{panelClass:"full",url:"/goalPickerLegacy",resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/goal-alignment/goal")]},require:()=>s.e(645).then(s.bind(null,"8MxD")),pageTitle:"course.goal-alignment.goal.header",params:{goalAlignableContent:null}})}])},"sb+l":function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s("Llzl"),i=s("Sa5G"),r=s("0JpG"),o=s("w9Zy"),a=s("jhBu"),l=s("pjml"),c=s("TnpK");const d="ultra.base.stream.routes";n.module(d,[r.moduleName,o.d,a.a,l.N,c.b]).config([c.c,e=>{e.peekState("announcement",{url:"/announcement/:streamEntryId",require:()=>Promise.all([s.e(18),s.e(13),s.e(24),s.e(612)]).then(s.bind(null,"/Lzo")),pageTitle:"base.stream.entryTitle.announcement"}).peekState("stream-message",{url:"/message/:courseId/:conversationId",require:()=>Promise.all([s.e(31),s.e(33),s.e(653)]).then(s.bind(null,"yVjE")),pageTitle:"base.stream.entryTitle.message"}).peekState("content-group",{url:"/content/:streamEntryId",require:()=>Promise.all([s.e(18),s.e(13),s.e(24),s.e(39),s.e(678)]).then(s.bind(null,"G506")),resolve:{translations:[r.serviceName,e=>e.loadBundle("features/base/stream/content/content")]},pageTitle:"base.stream.content.pageTitle"}).peekState("notification-create",{abstract:!0,url:"/notification",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/base/stream/notification")],isAdmin:[a.b,e=>e.hasSystemEntitlement(i.s.ViewAdminTop).then(e=>e)]},panelClass:"full",require:()=>s.e(611).then(s.bind(null,"s7sT")),pageTitle:"base.stream.notification.create.pageTitle"}).peekState("notification-create.steps",{url:"/create",panelClass:"full",pageTitle:"base.stream.notification.create.pageTitle",views:{"notification-step1@":{require:()=>s.e(130).then(s.bind(null,"At0Z"))},"notification-step2@":{require:()=>s.e(140).then(s.bind(null,"SPbX"))}}}).peekState("notification-edit",{abstract:!0,url:"/notification",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/base/stream/notification")]},panelClass:"full",require:()=>s.e(613).then(s.bind(null,"OhPa")),pageTitle:"base.stream.notification.edit.pageTitle"}).peekState("notification-edit.steps",{url:"/edit",panelClass:"full",pageTitle:"base.stream.notification.edit.pageTitle",views:{"notification-step1@":{require:()=>s.e(130).then(s.bind(null,"At0Z"))},"notification-step2@":{require:()=>s.e(140).then(s.bind(null,"SPbX"))}}})}])},sgjL:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return l}));var n=s("nsO7"),i=s("Llzl"),r=s("e6jQ"),o=s("Q/M7");const a="ultraUi.components.services.postMessageDispatcher",l="postMessageDispatcher";class c{constructor(e){this.$window=e,this.eventHandlers={},this.eventListenerBound=!1,this.superEventHandler=e=>{e.origin===o.j()&&e.data&&e.data.messageId&&n.forOwn(this.eventHandlers,t=>{t.messageId===e.data.messageId&&t.eventHandler(e.data,e.source)})}}callEventHandler(e,t){n.forOwn(this.eventHandlers,s=>{s.messageId===e&&s.eventHandler(t,window)})}registerEventHandler(e,t,s,i=!1){if(i){const t=[];n.forOwn(this.eventHandlers,(s,n)=>{s.messageId===e&&t.push(n)}),t.forEach(e=>{this.removeEventHandler(e)})}const o=r.a();this.eventHandlers[o]={eventHandler:t,messageId:e},this.handleEventListener(),s.$on("$destroy",()=>{this.removeEventHandler(o),this.handleEventListener()})}removeEventHandler(e){this.eventHandlers[e]&&delete this.eventHandlers[e]}getDispatcherStatus(){return{count:Object.keys(this.eventHandlers).length,bound:this.eventListenerBound}}testDispatcherEventHandler(e){this.superEventHandler(e)}handleEventListener(){Object.keys(this.eventHandlers).length>0?this.eventListenerBound||this.addEventListener():this.removeEventListener()}addEventListener(){this.$window.addEventListener("message",this.superEventHandler,!1),this.eventListenerBound=!0}removeEventListener(){this.$window.removeEventListener("message",this.superEventHandler),this.eventListenerBound=!1}}c.$inject=["$window"];class d extends c{}i.module(a,[]).service(l,c)},spHl:function(e,t,s){var n={"./ar-sa/_combined":["805C",74],"./ar-sa/_combined.json":["805C",74],"./az-az/_combined":["8E7/",75],"./az-az/_combined.json":["8E7/",75],"./cs-cz/_combined":["p7mG",76],"./cs-cz/_combined.json":["p7mG",76],"./cy-gb/_combined":["jeLm",77],"./cy-gb/_combined.json":["jeLm",77],"./da-dk/_combined":["2iiI",78],"./da-dk/_combined.json":["2iiI",78],"./de-de/_combined":["bR5d",79],"./de-de/_combined.json":["bR5d",79],"./en-au/_combined":["FPgK",81],"./en-au/_combined.json":["FPgK",81],"./en-cd/_combined":["D2Gb",82],"./en-cd/_combined.json":["D2Gb",82],"./en-gb/_combined":["fX7R",83],"./en-gb/_combined.json":["fX7R",83],"./en-sa/_combined":["x0Fz",84],"./en-sa/_combined.json":["x0Fz",84],"./en-sb/_combined":["WerP",85],"./en-sb/_combined.json":["WerP",85],"./en-sc/_combined":["bwBR",86],"./en-sc/_combined.json":["bwBR",86],"./en-sm/_combined":["8Rqa",87],"./en-sm/_combined.json":["8Rqa",87],"./en-us-k12/_combined":["TfEl",88],"./en-us-k12/_combined.json":["TfEl",88],"./en-us-pro/_combined":["SQ9M",89],"./en-us-pro/_combined.json":["SQ9M",89],"./en-us/_combined":["pVoq",149],"./en-us/_combined.json":["pVoq",149],"./en-za/_combined":["7bwu",90],"./en-za/_combined.json":["7bwu",90],"./en/_combined":["JOlw",80],"./en/_combined.json":["JOlw",80],"./es-es/_combined":["qCZ9",91],"./es-es/_combined.json":["qCZ9",91],"./fr-ca/_combined":["pVU6",92],"./fr-ca/_combined.json":["pVU6",92],"./fr-fr/_combined":["SMTA",93],"./fr-fr/_combined.json":["SMTA",93],"./he-il/_combined":["Olqa",94],"./he-il/_combined.json":["Olqa",94],"./it-it/_combined":["mwd4",95],"./it-it/_combined.json":["mwd4",95],"./ja-jp/_combined":["BVZK",96],"./ja-jp/_combined.json":["BVZK",96],"./ko-kr/_combined":["/x4r",97],"./ko-kr/_combined.json":["/x4r",97],"./ms-my/_combined":["YOK3",98],"./ms-my/_combined.json":["YOK3",98],"./nb-no/_combined":["oNI2",99],"./nb-no/_combined.json":["oNI2",99],"./nl-nl/_combined":["7Mff",100],"./nl-nl/_combined.json":["7Mff",100],"./nn-no/_combined":["pU4P",101],"./nn-no/_combined.json":["pU4P",101],"./pl-pl/_combined":["395X",102],"./pl-pl/_combined.json":["395X",102],"./pt-br/_combined":["LehD",103],"./pt-br/_combined.json":["LehD",103],"./pt-pt/_combined":["3Ybv",104],"./pt-pt/_combined.json":["3Ybv",104],"./ru-ru/_combined":["lC96",105],"./ru-ru/_combined.json":["lC96",105],"./sv-se/_combined":["JSyn",106],"./sv-se/_combined.json":["JSyn",106],"./th-th/_combined":["S6Bf",107],"./th-th/_combined.json":["S6Bf",107],"./tr-tr/_combined":["3Rba",108],"./tr-tr/_combined.json":["3Rba",108],"./uk-ua/_combined":["Mk0I",109],"./uk-ua/_combined.json":["Mk0I",109],"./zh-cn/_combined":["qOHB",110],"./zh-cn/_combined.json":["qOHB",110],"./zh-tw/_combined":["G1jo",111],"./zh-tw/_combined.json":["G1jo",111]};function i(e){if(!s.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],i=t[0];return s.e(t[1]).then((function(){return s.t(i,3)}))}i.keys=function(){return Object.keys(n)},i.id="spHl",e.exports=i},sqUP:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-insufficient-storage.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-insufficient-storage">\n  <div name="modal-contents">\n    <div>\n      <p bb-translate>components.services.error-modal.error-insufficient-storage.information</p>\n    </div>\n    <div>\n      <p bb-translate>components.services.error-modal.error-insufficient-storage.description</p>\n    </div>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},"t04/":function(e,t,s){var n=s("ziER"),i=s("5JeM"),r=new n({id:"icon-small-course_catalog_default",use:"icon-small-course_catalog_default-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-course_catalog_default"><path d="M5 14.5c-2 1.0446-4 0-4 0v-13c2-1 4 0 4 0v13zM15 14.5c-2 1.125-4 0-4 0v-13s2-1 4 0v13zM8 11v1m0-7v1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M11 14.5357c-3 1.0447-6 0-6 0V1.5s3-1 6 0v13.0357z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(r);e.exports=r},t3AZ:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("Llzl"),i=s("0JpG");const r="ultra.components.directives.translateAttrsDirective",o="bbTranslateAttrs",a="translateAttrsValues";class l{constructor(e,t,s,n,i,r){this.$q=e,this.bbLocalize=t,this.scope=s,this.element=n,this.attrs=i,this.origAttrs=r,this.currentAttrs={},this.currentValues={},this.getOrigAttrsString=()=>this.origAttrs[o],this.getOrigValuesString=()=>this.origAttrs[a],this.getAttrsString=()=>this.attrs[o],this.getValuesString=()=>this.attrs[a],this.updateValues=()=>Object.assign(this.currentValues,this.scope.$eval(this.getValuesString()));let l=!0;this.isOnetimeBind(this.getOrigAttrsString())?this.updateAttrs():(this.scope.$watch(this.updateAttrs.bind(this),this.translate.bind(this),!0),l=!1),this.isValuesStringDefined()&&!this.isOnetimeBind(this.getOrigValuesString())&&(this.scope.$watch(this.updateValues.bind(this),this.translate.bind(this),!0),l=!1);const c=s.$root.$on("$translateChangeSuccess",this.translate.bind(this));s.$on("$destroy",c),l&&this.translate()}updateAttrs(){return Object.assign(this.currentAttrs,this.scope.$eval(this.getAttrsString()))}isValuesStringDefined(){return null!=this.getOrigValuesString()}isOnetimeBind(e){return 0===e.indexOf("::")}translate(){const e={},t=this.bbLocalize.getLocale(this.scope);n.forEach(this.currentAttrs,(s,n)=>{e[n]=this.bbLocalize.translate({locale:t,key:s,params:this.currentValues,noWrap:!0,noEscape:!0})}),this.$q.all(e).then(e=>{Object.keys(e).forEach(t=>{this.attrs.$set(t,e[t],!0,t)})})}}class c{constructor(e,t){this.$q=e,this.bbLocalize=t,this.restrict="A",this.scope=!1,this.compile=(e,t)=>{t[o];return(e,s,n)=>new l(this.$q,this.bbLocalize,e,s,n,t)}}}c.$inject=["$q",i.serviceName],n.module(r,[i.moduleName]).directive(o,["$injector",e=>e.instantiate(c)])},t6LE:function(e,t,s){"use strict";s.r(t);s("QLzv");var n=s("nsO7"),i=s("5MwF"),r=s("vYaK"),o=s("yCC5"),a=s("Rjd/"),l=s("JrDC"),c=s("wgY5"),d=s("IbyE"),u=s("nkTj"),h=s("94iD"),m=s("6vR2"),p=s("zGdY"),g=s("nbDY"),b=s.n(g);class f extends b.a{}f.Completed=new f("COMPLETED"),f.NeedsPosting=new f("NEEDS_POSTING"),f.NothingToPost=new f("NOTHING_TO_POST");var v=f;s.d(t,"moduleName",(function(){return S})),s.d(t,"serviceName",(function(){return y})),s.d(t,"ToolAttemptDetailItemEx",(function(){return C})),s.d(t,"isGroupAttempt",(function(){return w})),s.d(t,"AttemptsPostingStatus",(function(){return v}));const S="ultra.components.services.models.grade.gradeAttempt",y=o.cb;class C{constructor(e,t){this.gradeAttempt=e,this.toolAttemptDetailItem=t,this._softTimeLimitDate=c(this.gradeAttempt.creationDate).add(this.softTimeLimitSecond,"seconds").toDate(),this._graceTimeLimitSecond=this.softTimeLimitSecond+C.GRACE_PERIOD_SECOND,this._graceDate=c(this.gradeAttempt.creationDate).add(this._graceTimeLimitSecond,"seconds").toDate(),this._isSubmittedInGracePeriod=c(this.gradeAttempt.attemptDate).isBetween(c(this.gradeAttempt.creationDate),c(this._graceDate)),this._hasAnswerIsModifiedInGracePeriod=n.filter(this.toolAttemptDetailItem.questionAttempts,e=>!n.isEmpty(e.saveTimes)&&c(this.getLastModifyTime(e)).isBetween(this._softTimeLimitDate,this._graceDate)).length>0}get elapsedDuration(){return c.duration(c(this.gradeAttempt.attemptDate).diff(c(this.gradeAttempt.creationDate)))}get elapsedSec(){return Math.ceil(this.elapsedDuration.asSeconds())}get softTimeLimitSecond(){return this.isTimerCompletionH()?this.toolAttemptDetailItem.softTimeLimitSeconds:this.toolAttemptDetailItem.timeLimitSeconds}needAttention(){return!n.isUndefined(this.toolAttemptDetailItem.timeLimitSeconds)&&(this.elapsedSec>this._graceTimeLimitSecond||this._isSubmittedInGracePeriod&&this._hasAnswerIsModifiedInGracePeriod)}getExceedTime(){return Math.floor(c.duration(this.elapsedSec-this.softTimeLimitSecond,"seconds").asMinutes())}isCompleted(){return this.gradeAttempt.isCompleted()}isTimerCompletionH(){return this.toolAttemptDetailItem.timerCompletion===p.TimerCompletion.HardStop}isTimerCompletionC(){return this.toolAttemptDetailItem.timerCompletion===p.TimerCompletion.Continual}getLastModifyTime(e){return n.maxBy(e.saveTimes,e=>e.date).date}isAnsweredAfterSoftTimeLimit(e){return!n.isEmpty(e.saveTimes)&&c(this.getLastModifyTime(e)).isAfter(this._softTimeLimitDate)}getQuestionsAnsweredAfterSoftTimeLimit(){return n.filter(this.toolAttemptDetailItem.questionAttempts,e=>this.isAnsweredAfterSoftTimeLimit(e))}}C.GRACE_PERIOD_SECOND=60;const I=function(e){n.forEach(e,(e,t)=>{e.timeLimitSec=e.timeLimitSec||e.timeLimitSeconds})},$=(e,t)=>{t.length>0&&e.dispatch(d.actions.questionAttempt.setQuestionAttemptsInStore(t))};function w(e){return void 0!==e.attempts}const T=e=>{var t,s,n;const i=null!==(t=(e.toolAttemptDetail?Object.keys(e.toolAttemptDetail):[])[0])&&void 0!==t?t:d.ScoreProviderHandle.Test.toString(),r=null===(s=e.toolAttemptDetail)||void 0===s?void 0:s[i];let o=null!==(n=null==r?void 0:r.questionAttempts)&&void 0!==n?n:[];return w(e)&&e.attempts.forEach(e=>{o=o.map(t=>({...t,groupAttemptId:t.attemptId,attemptId:e.id}))}),o};a.a.factory(y,["restmod",u.d,r.serviceName,"$ngRedux",(e,t,s,r)=>{return e.model().mix({creationDate:{serialize:"date"},modifiedDate:{serialize:"date"},attemptDate:{serialize:"date"},attemptFirstGradedDate:{serialize:"date"},attemptLastGradedDate:{serialize:"date"},"attemptReceipt.submissionDate":{serialize:"date"},originality:{hasOne:o.ab,path:"submissionResults"},assessment:{hasOne:o.f,path:"assessment"},stagedAttemptGrades:{init:()=>[]},$hooks:{"after-fetch":function(){$(r,T(this)),I(this.toolAttemptDetail)},"after-fetch-many":function(){let e=[];n.forEach(this,t=>{e=e.concat(T(t)),I(t.toolAttemptDetail)}),$(r,e)},"after-save":e=>{const t=Object(m.a)(e.data);r.dispatch(d.actions.gradebookAttempt.setGradeAttemptInStore(t))}},$extend:{Scope:{$destroyUrlFor:e=>i.a.apiBasePath+"/v1/courses/"+l.a(s,e.$scope)+"/gradebook/attempts/"+e.id},Record:{isPostable(){return this.readyToPost&&(p.AttemptStatus.NeedsGrading===this.status||p.AttemptStatus.NeedsMoreGrading===this.status)},isCompleted(){return p.AttemptStatus.Completed===this.status},isGraded(){return this.displayGrade&&(null!=this.displayGrade.score||null!=this.displayGrade.grade)||this.readyToPost},isGradable(e){const t=this.getToolAttemptDetailItem(e);return t&&t.assessment&&!t.assessment.hasAnswerableQuestions},isInProgress(){return p.AttemptStatus.InProgress===this.status||p.AttemptStatus.InMoreProgress===this.status},isSubmitted(){return!this.isInProgress()},isNeedsGrading(){return p.AttemptStatus.NeedsGrading===this.status||p.AttemptStatus.NeedsMoreGrading===this.status},isReconciled(){return null!=this.reconciliationMode},getToolAttemptDetailItem(e){return this.toolAttemptDetail?this.toolAttemptDetail[e.toString()]:null},getToolAttemptDetailItemEx(e){const t=this.getToolAttemptDetailItem(e);return null!=t?new C(this,t):null},getTimedTestAttemptDetail(){const e=this.getTimedTestApiData();return e?new h.a(e):null},getTimedTestAttemptDetailWithDueDate(e){return new h.a({...this.getTimedTestApiData(),dueDate:e})},getTimedTestApiData(){const e=this.getToolAttemptDetailItem(d.ScoreProviderHandle.Test);return null==e?null:{elapsedSec:e.elapsedSeconds,timeLimitSec:e.timeLimitSeconds,softLimitSec:e.softTimeLimitSeconds,timerCompletion:e.timerCompletion}},getFeedbackToUser(){return this.feedbackToUser},getGroupIndividualFeedbackToUser(){return this.groupAttemptId&&this.overrideStatus===p.AttemptOverrideStatus.FeedbackOverride?this.feedbackToUser:null},getLastFeedbackAuthor(){return this.lastFeedbackAuthor},isPrePostGrade(){return!this.isCompleted()||!this.readyToPost||!this.userId},isDisplayablePostedGrade(){return this.isCompleted()&&this.readyToPost&&null!=this.userId}},Collection:{getNumAttemptsToGrade(){return this.filter(e=>e.isNeedsGrading()&&!e.isPostable()).length},getNumAttemptsToReconcile(){return this.getNumAttemptsToGrade()},getNumAttemptsToPost(){return this.filter(e=>e.isPostable()).length},getNumAttemptsSubmittedLate(e){return this.filter(t=>t.isSubmitted()&&c(t.attemptDate).isAfter(e)).length},getNumAttemptsSubmitted(){return this.filter(e=>e.isSubmitted()).length},getNumOfGradedAttempts(){return this.filter(e=>e.isGraded()).length},isAllGradedAndPosted(){return this.length>0&&this.every(e=>e.isCompleted())},isAtLeastOneGradedAndPosted(){return this.length>0&&this.some(e=>e.isCompleted())},getAttemptIndexById(e){return n.findIndex(this,t=>{var s;return(null!==(s=t.groupAttemptId)&&void 0!==s?s:t.id)===e})}}}})}])},t6zR:function(e,t,s){"use strict";var n=s("wDWF");let i,r;class o{static getBasePageStorageKey(){return i||(i="ultra.ui.basepage."+n.a(o.userId)),i}static getPeekPageStorageKey(){return r||(r="ultra.ui.peekpage."+n.a(o.userId)),r}}t.a=o},tBL6:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("VAMW"),i=s("6fZB");class r{constructor(e){this.$q=e}isParentInLearningModule(e,t){return t.children.some(t=>e.parentId===t.id)}isInLearningModule(e,t){return e.parentId===t.id||this.isParentInLearningModule(e,t)}getParentFolderInLearningModule(e,t){return t.children.find(t=>e.parentId===t.id)}refreshChildren(e,t,s){const n=this.getParentFolderInLearningModule(e,t);if(e&&t.isForcedSequenceModule()&&s&&this.isInLearningModule(e,t)){const e=[t.$fetch().$asPromise(),t.getChildren({limit:t.children.length+1}).$asPromise()];return(null==n?void 0:n.children)&&e.push(n.getChildren({limit:n.children.length+1}).$asPromise()),this.$q.all(e).then(([,e,s])=>{e.forEach((s,n)=>{const i=t.children.findIndex(e=>e.id===s.id);-1!==i&&(e[n].ui=t.children[i].ui,e[n]=Object.assign(t.children[i],e[n]))}),n&&s&&s.forEach((e,t)=>{const i=n.children.findIndex(t=>t.id===e.id);-1!==i&&(n.children[i]=Object.assign(n.children[i],s[t]))})})}return this.$q.resolve()}}class o{constructor(e){this.$q=e,this.key=n.TransitService.LearningModuleRefreshChildrenOperations,this.angularRefresher=new r(this.$q)}refreshChildren(e,t,s){const n=this.angularRefresher.refreshChildren(e,t,s);return Object(i.a)(n)}}},tPPx:function(e,t,s){"use strict";s.r(t),s.d(t,"COURSE_ROLES_LIMIT",(function(){return o})),s.d(t,"toBeLocalizedRoleLabels",(function(){return l})),s.d(t,"toBeLocalizedOrgRoleLabels",(function(){return c})),s.d(t,"serviceName",(function(){return d})),s.d(t,"USER_API_PATH",(function(){return u}));s("QLzv");var n=s("5MwF"),i=s("Rjd/"),r=s("yCC5");const o=1e3,a={S:0,T:1,B:2,G:3,BB_FACILITATOR:4,P:5,U:6},l={S:"global.course.role.S",P:"global.course.role.P",BB_FACILITATOR:"global.course.role.BB_FACILITATOR",T:"global.course.role.T",B:"global.course.role.B",G:"global.course.role.G",U:"global.course.role.U"},c={S:"global.organization.role.S",P:"global.organization.role.P",BB_FACILITATOR:"global.organization.role.BB_FACILITATOR",T:"global.organization.role.T",B:"global.organization.role.B",G:"global.organization.role.G",U:"global.organization.role.U"},d=r.S,u=n.a.apiBasePath+"/v1/roles/courseRoles";i.a.factory(d,["restmod",e=>e.model(u).mix({localizedCourseName:{mask:!0},$extend:{Collection:{loadLocalizedNames(e){return this.forEach(t=>{t.isRemovable?t.localizedRoleName=e?t.orgName.rawValue:t.courseName.rawValue:t.localizedRoleName=e?"global.organization.role."+t.identifier:"global.course.role."+t.identifier}),this},sortByStudentFirst(e){return this.$action((function(){this.sort((function(t,s){const n=t.identifier,i=s.identifier;if(n in a&&i in a)return a[n]-a[i];if(n in a&&!(i in a))return-1;if(!(n in a)&&i in a)return 1;let r,o;return"organization"===e?(r=t.orgName.languageKey,o=s.orgName.languageKey):(r=t.courseName.languageKey,o=s.courseName.languageKey),r>o?1:r<o?-1:0}))}))}}}})])},"tQ/B":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return d}));var n=s("D57K"),i=s("aHpC"),r=s("Qbdf"),o=s("TnpK"),a=s("0JpG");const l="ultra.service.course-context.title-handle",c="coursePageTitleHandling",d=c+"Provider",u={},h={};function m(e,t){h[e]={handlerClass:t}}function p(e){const t=h[e];if(!t)throw new Error(`Handler '${e}' not registered`);return t}function g(e,t,s,n){e&&(s=s||[],Object.keys(e).forEach(i=>{if(n&&i in t||s.some(e=>i===e))return;const r=e[i];t[i]=r}))}let b=class e{constructor(t){this.injector=t,this.providerName=c,this.$args={},this.$get=["$injector",t=>t.instantiate(e)]}get provides(){return this.$args.provides||"BasePageTitleHandler"}get instance(){return this.$instance?this.$instance:this.getHandler()}get args(){return this.$args}config(e){return new f(this,e||{})}clean(){return this.instance.clean(),Object.keys(this.args).forEach(e=>{delete this.args[e]}),this.$instance=null,this}setDefaultHandler(e){return this.$args.provides=e,this.isInitialized()&&(this.$instance=this.getHandler(this.provides)),this}isInitialized(e){if(this.injector)return!0;if(e)throw new Error("Provider not initialized")}registerHandler(e,t){m(e,t)}getHandlerRegistry(e){return p(e||this.provides)}getHandlerClass(e){return function(e){var t;return null===(t=p(e))||void 0===t?void 0:t.handlerClass}(e||this.provides)}getHandler(e,t){if(this.isInitialized(!0)){const s=e||this.provides;if(s===this.$args.provides&&this.$instance)return this.$instance;const n=this.getHandlerRegistry(s);return n.handler||(n.handler=this.injector.instantiate(n.handlerClass),n.handler.getProviderConfig=()=>this.args,n.handler.args={...this.args}),t&&(this.$args.provides=s,this.$instance=n.handler),n.handler}}};b=Object(n.__decorate)([Object(n.__param)(0,Object(i.b)("$injector"))],b);class f{constructor(e,t){this.provider=e,this.args=t}build(e){var t;const s=e.injector||this.provider.injector;if(delete e.injector,!s)throw new Error("No injector to build Handler");const n=s.get(this.provider.providerName);return this.args.provides&&this.args.provides!==n.provides&&(n.instance.stopListeningOnAll(),n.setDefaultHandler(this.args.provides)),(null===(t=this.args.clean)||void 0===t||t)&&n.clean(),g(this.args,n.args,["clean"]),this.instance=n.instance.build(e),this}process(...e){return this.isBuilt(!0),this.instance.process(...e)}isBuilt(e){if(this.instance)return!0;if(e)throw new Error("Handler not initialized")}}let v=class{constructor(e,t,s,n){this.$injector=e,this.$rootScope=t,this.ultraState=s,this.bbLocalize=n}get pageTitle(){return this.args.pageTitle}set pageTitle(e){this.args.pageTitle=e}get name(){return this.args.name}set name(e){this.args.name=e}build(e){return g(e,this.args),g(this.getProviderConfig(),this.args),this.args.listenOn&&(Array.isArray(this.args.listenOn)?this.args.listenOn.forEach(e=>{this.listenOn(e)}):this.listenOn(this.args.listenOn)),this}clean(){return this.stopListeningOnAll(),Object.keys(this.args).forEach(e=>{delete this.args[e]}),this}_process(){const e=this.pageTitle||"base.ultra";return this.bbLocalize.translate({locale:this.$rootScope.index.locale,key:e})}process(e,t,s,n){return this._process().then(e=>{this.$rootScope.index.title=`${e}`})}listenOn(e,t=!0){this.stopListeningOn(e);let s=null;s=Array.isArray(t)?(...e)=>{if(t.some(e=>this.ultraState.current.name===e))return this.process(...e)}:t?(...e)=>{if(this.name===this.ultraState.current.name)return this.process(...e)}:(...e)=>this.process(...e);const n=this.$rootScope.$on(e,s);return u[e]=n,n}stopListeningOn(e){if(Object.keys(u).includes(e))return u[e](),delete u[e],!0}stopListeningOnAll(){Object.keys(u).forEach(e=>{u[e](),delete u[e]})}};v=Object(n.__decorate)([Object(n.__param)(0,Object(i.b)("$injector")),Object(n.__param)(1,Object(i.b)("$rootScope")),Object(n.__param)(2,Object(i.b)(o.d)),Object(n.__param)(3,Object(i.b)(a.serviceName))],v);let S=class extends v{constructor(e,t,s,n,i){super(e,t,s,n),this.$injector=e,this.$rootScope=t,this.ultraState=s,this.bbLocalize=n,this.currentCourse=i}process(e,t,s,n){return this._process().then(e=>{this.$rootScope.index.title=`${e} / ${this.currentCourse.course.name}`})}};S=Object(n.__decorate)([Object(n.__param)(0,Object(i.b)("$injector")),Object(n.__param)(1,Object(i.b)("$rootScope")),Object(n.__param)(2,Object(i.b)(o.d)),Object(n.__param)(3,Object(i.b)(a.serviceName)),Object(n.__param)(4,Object(i.b)(r.e))],S);class y extends S{}class C extends b{}m("BasePageTitleHandler",v),m("CoursePageTitleHandler",S);const I=[o.b,a.moduleName];angular.module(l,I).provider(c,class extends b{})},"tb/u":function(e,t){e.exports='<div>\n  <bb-user-avatar ng-repeat="user in displayUsers" user="user"></bb-user-avatar>\n</div>'},tcaZ:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s("D57K"),i=s("Llzl"),r=s("In+A"),o=s("5KgE"),a=s("aHpC");const l="ultra.components.directives.firstTimeContainer";let c=class{constructor(e){this.firstTimeHelper=e,this.manager=r.guidanceManager}};c=Object(n.__decorate)([Object(n.__param)(0,Object(a.b)(o.c))],c);class d{constructor(){this.restrict="AE",this.controller=c,this.link=(e,t,s,n)=>{n.manager.startQueue(),e.$on("hide-ftue-component",(e,t)=>{n.manager.hideComponent(t)})}}}i.module(l,[o.b]).directive("bbFirstTimeContainer",["$injector",e=>e.instantiate(d)])},"td+C":function(e,t,s){"use strict";(function(e){var n=s("nsO7"),i=s("zGdY"),r=s("IbyE"),o=s("Q/M7"),a=s("6vR2"),l=s("v6Sp"),c=s("oPIA"),d=s("ObAk"),u=s("x9Ok");t.a=new class{constructor(){this.helloMessageListener=e=>{var t,s,n;const i=Array.from(this.integrations.values()).find(t=>t.iframe.contentWindow===e.source);if(!i&&(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.type)!==c.o)return;if((null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.type)!==c.o)return void console.warn(`Received unexpected postMessage. Expected event type [${c.o}], but got [${null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.type}] instead`,e);if(!i)return void console.warn("Could not find a valid integration for message -- did the event come from an unexpected frame?");const r=Object(o.i)(i.url);if(Object(o.i)(i.url)!==e.origin)return void console.warn(`Message came from origin [${e.origin}], but we were expecting [${r}]. `+"Authorization requests must come from the same origin that was configured in the LTI placement.");const a=new MessageChannel;i.integrationChannel=a.port1,i.integrationChannel.onmessage=e=>{this.onIntegrationMessage(e.data,i)},i.iframe.contentWindow.postMessage({type:c.o},e.origin,[a.port2])},this.onIntegrationMessage=(e,t)=>{if(!e)return;const s=l.a.authScopes.get(e.type);if(s){if(!s(e,t))return}const n=this.integrationMessageEvents.get(e.type);n?n(e,t):console.warn(`No valid method to call with provided event type ${e.type}.`)},this.sendAuthorizedMessage=async(e,t)=>{if(!e||!e.token)return this.sendAuthorizationError(t,"Received authorized message without token");const s=e.token;try{const e=await Object(r.fetchAccessTokenInfo)(s);if(null==e.scope){const e=`Could not authenticate, no auth scopes provided for ${t}`;return this.sendAuthorizationError(t,e)}const n=new Set(e.scope.split(/\s+/));this.checkPremiumAccess(t,n),t.authScopes=n,t.integrationChannel.postMessage({type:c.c})}catch(e){const s=e,n=s.error&&s.error.error,i="invalid_request"===n,r=s.error&&s.error.error_description,o=i?"Expired or invalid token.":`Server side error occurred: ${n}, ${r}`;return this.sendAuthorizationError(t,o)}},this.checkPremiumAccess=(e,t)=>{if(!t.has(c.H)){const t="This integration does not have UEF access enabled.";this.sendAuthorizationError(e,t)}},this.sendAuthorizationError=(e,t)=>{const s={type:c.cb,errorInformation:t};this.sendMessage(s,e),this.removeIframe(e)},this.removeIframe=e=>{this.document.body.querySelector(`#${e.iframe.id}`).remove()},this.sendRouteEvent=e=>{const t=u.b.getCurrentRoute();this.sendMessage({type:c.i,eventType:c.fb.Route,routeName:t.currentRouteName,routeData:t.currentParams},e)},this.integrations=new Map,this.integrationMessageEvents=new Map,this.integrationSubscriptionManager=new d.a}async init(e){if(this.window=e,this.document=e.document,this.isSafeMode())return console.warn("In integration safe mode -- not loading integrations"),null;try{const e=await Object(i.getLtiPlacements)(r.session,{query:{type:i.PlacementType.UltraUI}});return this.window.addEventListener("message",this.helloMessageListener),this.initIntegrationMessageTypes(),this.initIntegrationSubscriptionCallbacks(),this.loadIntegrations(e),e}catch(e){return null}}loadIntegrations(t){!t||this.integrations&&this.integrations.size>0||t.results.forEach(t=>{if(t.availability.available!==i.PublicAvailability.Yes)return;const s=e(`<iframe id="${t.id}" src="${Object(o.c)(t.launchLink)}"></iframe>`).hide();this.document.body.appendChild(s[0]),this.integrations.set(t.id,{id:t.id,hasAuthorized:!1,iframe:s[0],url:t.url,authScopes:new Set})})}isSafeMode(){return"true"===Object(o.m)("noExtensions",this.window.location.href)}addIntegrationMessageType(e,t){this.integrationMessageEvents.get(e)||this.integrationMessageEvents.set(e,t)}addSubscriptionEventCallback(e,t){return this.integrationSubscriptionManager.onSubscriptionEventCallback(e,t)}addUnsubscriptionEventCallback(e,t){return this.integrationSubscriptionManager.onUnsubscriptionEventCallback(e,t)}initIntegrationMessageTypes(){this.addIntegrationMessageType(c.c,this.sendAuthorizedMessage),this.addIntegrationMessageType(c.bb,this.integrationSubscriptionManager.subscribeToEvents),this.addIntegrationMessageType(c.db,this.integrationSubscriptionManager.unsubscribeFromEvents)}initIntegrationSubscriptionCallbacks(){this.addSubscriptionEventCallback(c.fb.PortalNew,e=>{l.e.getUnownedPortals().forEach(t=>{e.integrationChannel.postMessage({type:c.i,eventType:c.fb.PortalNew,portalId:t.portalId,selector:t.selector,selectorData:t.selectorData})})}),this.addSubscriptionEventCallback(c.fb.Route,e=>{const t=u.b.getCurrentRoute();this.sendMessage({type:c.i,eventType:c.fb.Route,routeName:t.currentRouteName,routeData:t.currentParams},e)})}sendEventMessage(e,t){const s=this.integrationSubscriptionManager.getSubscribedIntegrations(e.eventType);s&&(t?[this.findIntegration(t)]:s).forEach(t=>{t&&this.sendMessage(Object(a.b)(e),t)})}findIntegration(e){return this.integrations.get(e)}sendMessage(e,t){let s;(s=Object(n.isString)(t)?this.findIntegration(t):t).integrationChannel.postMessage(Object(a.b)(e))}}}).call(this,s("5iHu"))},tfZW:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("D57K"),i=s("DN+C");class r{constructor(){this.overrideBundles={},this.baseLocaleMap={},this.pathMap={},this.overrideAddedHandlers=new Set,this.overridePathPromises={}}static getInstance(){return this.instance||(this.instance=new r),this.instance}onOverrideAdded(e){this.overrideAddedHandlers.add(e)}notifyOverrideAdded(e){this.overrideAddedHandlers.forEach(t=>{try{t(e)}catch(e){}})}static normalizeLocale(e){return e.toLocaleLowerCase().replace(/_/g,"-")}get root(){return this._root}get siteId(){return this._siteId}setOverrideLocation(e,t){e.endsWith("/")&&(e=e.substring(0,e.length-1)),this._root=e,this._siteId=t}addOverrideBundle(e,t){e=r.normalizeLocale(e);const s=r.normalizeLocale(t),n=r.getFallbackLocale(s);this.overrideBundles[e]={ultraLocale:s,localeForPath:t},this.baseLocaleMap[e]=this.baseLocaleMap[s]=n,this.notifyOverrideAdded(e)}getOverridePathForLocale(e){return e=r.normalizeLocale(e),this.overrideBundles[e]?(this.overridePathPromises[e]||(this.overridePathPromises[e]=this.internalGetOverridePath(e)),this.overridePathPromises[e]):Promise.resolve(null)}async internalGetOverridePath(e){const t=this.overrideBundles[e].ultraLocale,s=this.overrideBundles[e].localeForPath,n=await this.getPathToLocale(s);return t&&n?{path:n,ultraLocale:t}:null}static getFallbackLocale(e){return e.split("-").slice(0,-1).join("-")}getPreferredLocales(e){if(e=r.normalizeLocale(e),!this.overrideBundles[e])return[e];const t=this.overrideBundles[e].ultraLocale;return[t,r.getFallbackLocale(t)].filter(e=>!!e)}async getPathToLocale(e){if(!this._root||!this._siteId)return null;try{if(void 0===this.pathMap[e]){const t=`${this._root}/${this._siteId}/mapping.json`,s=await fetch(t);if(!s.ok)return this.pathMap[e]=null,null;const n=await s.json();if(!n[e])return this.pathMap[e]=null,null;this.pathMap[e]=`${this._root}${n[e][0].url}`}return this.pathMap[e]}catch(e){return null}}getBaseLocale(e){return e=r.normalizeLocale(e),void 0===this.baseLocaleMap[e]?"":this.baseLocaleMap[e]||"en"}static async loadFromRemotePath(e){try{const t=await fetch(e);return t.ok?await t.json():{}}catch(e){return{}}}}Object(n.__decorate)([Object(i.LRUMemoize)()],r,"normalizeLocale",null),Object(n.__decorate)([Object(i.LRUMemoize)(2)],r,"getFallbackLocale",null)},uC9d:function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("nsO7");const i="learnApiCacheMessageService";class r{constructor(){this.listen=n.noop,this.clearCache=n.noop}}class o{constructor(e){this.$rootScope=e,this.init=()=>{this.clearCacheOnLearnScreenClose()},this.clearCacheOnLearnScreenClose=()=>this.$rootScope.$on("$stateChangeStart",(e,t,s,n)=>{-1!==["base.admin","base.courses.peek.course.classic.outline"].indexOf(n.name)&&this.clearCache()}),this.clearCache=e=>this.cacheServiceCallback({type:"clear",pattern:e}),this.listen=e=>{this.cacheServiceCallback=e},this.init()}}o.$inject=["$rootScope"]},uNsL:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("Llzl"),i=s("nmzr"),r=s("0JpG"),o=s("TnpK");const a="ultra.course.content-collection.router";n.module(a,[r.moduleName,o.b]).config([o.c,e=>{e.peekState(i.ContentCollectionRoutes.CONTENT_COLLECTION,{url:"/contentcollection?parentId&positionBefore&positionAfter",require:()=>Promise.all([s.e(0),s.e(578)]).then(s.bind(null,"tsxV")),resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content-collection/content-collection")])]},panelClass:"full",pageTitle:"course.contentCollection.contentCollection",peekStates:["content-collection-edit","content-collection-picker","content-collection-settings"],peekViewName:"content-collection-child@"}).peekState("content-collection-edit",{url:"/edit",require:()=>s.e(630).then(s.bind(null,"klLK")),panelClass:"peek",pageTitle:"course.contentCollection.itemSettings",peekStates:[],params:{items:null,fileRow:null}}).peekState("content-collection-settings",{url:"/settings",require:()=>s.e(680).then(s.bind(null,"ks8w")),panelClass:"peek",pageTitle:"course.contentCollection.browserSettings",peekStates:[]}).peekState("content-collection-picker",{url:"/picker?pickerType&multi",require:()=>s.e(679).then(s.bind(null,"sSTc")),panelClass:"full",pageTitle:"course.contentCollection.browseContentCollection",peekStates:[],params:{pickerType:"File",multi:"true"}})}])},usTV:function(e,t){e.exports='<div class="square-toggle">\n  <input class="toggle-input input-one"\n         ng-checked="property === oneViewValue"\n         aria-checked="{{property === oneViewValue}}"\n         id="square-toggle-option-one-{{ ::squareToggle.oneControlId }}"\n         name="square-toggle-name-{{ ::squareToggle.radioGroupName }}"\n         type="radio"\n         value="{{ ::oneViewValue }}"\n         aria-controls="{{ ::oneAriaControls }}"\n         ng-click="squareToggle.handleClick($event)"\n         ng-keyup="squareToggle.handleKeyUp($event)"\n         enhanced-tooltip="true"\n         tooltip-template="{{ ::oneTooltipTemplate }}"\n         tooltip-scope="oneTooltipScope()"\n         tooltip-position="bottom"\n         tooltip-disable-on-mouse-over="true"\n         analytics-id="{{analyticsIdTagPrefix}}.option1.input.radio">\n  <label class="toggle-label input label-one js-label-{{oneIconClass}}"\n         for="square-toggle-option-one-{{ ::squareToggle.oneControlId }}">\n    <bb-svg-icon size="custom" icon="{{oneIconClass}}"></bb-svg-icon>\n    <span class="sr-only" bb-translate>{{ ::oneAriaLabel }}</span>\n  </label>\n  <input class="toggle-input input-two"\n         ng-checked="property === twoViewValue"\n         aria-checked="{{property === twoViewValue}}"\n         id="square-toggle-option-two-{{ ::squareToggle.twoControlId }}"\n         name="square-toggle-name-{{ ::squareToggle.radioGroupName }}"\n         type="radio"\n         value="{{ ::twoViewValue }}"\n         aria-controls="{{ ::twoAriaControls }}"\n         ng-click="squareToggle.handleClick($event)"\n         ng-keyup="squareToggle.handleKeyUp($event)"\n         enhanced-tooltip="true"\n         tooltip-template="{{ ::twoTooltipTemplate }}"\n         tooltip-scope="twoTooltipScope()"\n         tooltip-position="bottom"\n         tooltip-disable-on-mouse-over="true"\n         analytics-id="{{analyticsIdTagPrefix}}.option2.input.radio">\n  <label class="toggle-label input label-two js-label-{{twoIconClass}}"\n         for="square-toggle-option-two-{{ ::squareToggle.twoControlId }}">\n    <bb-svg-icon size="custom" icon="{{twoIconClass}}"></bb-svg-icon>\n    <span class="sr-only" bb-translate>{{ ::twoAriaLabel }}</span>\n  </label>\n  <a href="javascript:void(0);" class="button" role="presentation" tabindex="-1"\n     analytics-id="{{analyticsIdTagPrefix}}.presentation.link"></a>\n</div>\n'},vJBG:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("td+C"),i=s("oPIA"),r=s("IbyE"),o=s("3PCF"),a=s("9OUN"),l=s("TWlR");const c=new class{constructor(e){this.integrationService=e,this.registerOriginalityProvider=(e,t)=>{if(!e.submissionServicesUniqueHandle)return console.warn("Cannot register provider: no submissionServicesUniqueHandle was specified"),void this.integrationService.sendMessage({type:i.A,submissionServicesUniqueHandle:e.submissionServicesUniqueHandle,status:i.p.Failure,errorMessage:"submissionServicesUniqueHandle should be provided"},t);const s={submissionServicesUniqueHandle:e.submissionServicesUniqueHandle,integrationId:t.id};this.addIntegration(s),this.integrationService.sendMessage({type:i.A,submissionServicesUniqueHandle:e.submissionServicesUniqueHandle,status:i.p.Success},t)},this.saveOriginalityConfiguration=async(e,t)=>{var s;const n=this.listeners.get(t.uniqueHandle);if(!n)throw new Error(`No listener registered for ${t.uniqueHandle}`);try{const r=await this.saveSettingsMessenger.sendMessage({type:i.B,contentId:e.id,contentHandle:e.contentHandler.toString(),enabled:t.capabilities.OriginalityReport.enabled},n.integrationId);return r.success&&await this.saveSubmissionService(e.courseId,null===(s=e.getAssociatedGradingColumn())||void 0===s?void 0:s.id,t),r}catch(e){return{success:!1,error:this.localizationService.translateSync({key:"course.content.originalityReport.settings.errorSavingSettings",locale:this.localizationService.getAppLocale(),noWrap:!0,params:{integrationDisplayName:t.displayName}})}}},this.listeners=new Map}init(e,t){this.integrationService.addIntegrationMessageType(i.A,this.registerOriginalityProvider),this.ngRedux=t,this.subscribeToRedux(t),this.localizationService=e,this.integrationService.addIntegrationMessageType(i.A,this.registerOriginalityProvider),this.saveSettingsMessenger=Object(l.a)(i.B,{})}subscribeToRedux(e){e.connect(()=>({}),e=>Object(a.bindActionCreators)({loadSubmissionServices:r.actions.submissionServices.loadSubmissionServices,saveSubmissionService:r.actions.submissionServices.saveSubmissionService},e))(this)}addIntegration(e){this.listeners.set(e.submissionServicesUniqueHandle,e)}removeIntegration(e){this.listeners.delete(e.submissionServicesUniqueHandle)}async fetchDefaultOriginalityReportSubmissionService(e,t){await this.loadSubmissionServices(e,t);const s=r.select.submissionServices.getDefaultOriginalityReportSubmissionService(this.ngRedux.getState(),t);if(s&&(s.uniqueHandle===o.b||this.listeners.get(s.uniqueHandle)))return s}getOriginalityIntegrationByUniqueId(e){return this.listeners.get(e)}}(n.a)},vT39:function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return o}));var n=s("nsO7"),i=s("0JpG"),r=s("6Ksg");const o="ultra.directives.validate.bbmlmarkup.sanitize",a={style:e=>null,":default":t=>{const s=e("<span></span>");return s.text(t.text()),s}};class l extends r.a{constructor(){super(...arguments),this.validate=t=>{if(null===this.whitelist)return!0;let s=!0;if(1!==t[0].nodeType)return!0;const i=t[0].tagName.toLowerCase();if(Object.prototype.hasOwnProperty.call(this.whitelist,i)){const e=this.whitelist[i];n.each(Array.prototype.slice.apply(t[0].attributes),n=>{Object.prototype.hasOwnProperty.call(e,n.name.toLowerCase())||(t.removeAttr(n.name),s=!1)})}else{s=!1;const e=(a[i]||a[":default"])(t);if(null===e)return t.remove(),!1;t.replaceWith(e),t=e}return n.each(t.children(),t=>{s=this.validate(e(t))&&s}),s},this.getValidator=(t,s,i,r)=>t=>{const i=this.$q.defer();return this.initialWhitelist().then(()=>{let o=!0;const a=e("<span></span>");a.html(t),n.each(a,t=>{o=this.validate(e(t))&&o}),o||r.$setViewValue(s.html()),i.resolve()}),i.promise}}}angular.module(o,[i.moduleName]).directive("bbSanitizeBbmlMarkup",["$injector",e=>e.instantiate(l)])}).call(this,s("5iHu"))},vWx0:function(e,t,s){"use strict";s("JzsJ");var n=s("hlSw"),i=s("Llzl"),r=s("w9Zy"),o=s("bF8R"),a=s("vdfi"),l=s("Fvsw"),c=s("Qbdf"),d=s("jhBu"),u=s("nsO7"),h=s("yC9S"),m=s("5MwF"),p=s("Y/dt"),g=s("z6Q5"),b=s("fYJU"),f=s("12mu"),v=s("pjml"),S=s("lEL+"),y=s("0JpG"),C=s("TnpK"),I=s("E01l");const $="ultra.modules.groupattempt.activities",w="ultra.services.groupattempt.activities",T="ultra.services.groupattempt.activities.dialog",E=new RegExp("assessment\\.overview\\.attempt("+C.a.replace(/\./g,"\\.")+".+)?$"),k={USER_CANCELLED:"USER_CANCELLED",USER_RELEASE_CONTROL:"USER_RELEASE_CONTROL",USER_REJECT_CONTROL:"USER_REJECT_CONTROL"},P=i.module($,["ng"]);P.factory(w,["$injector","$q","$log","$http","$rootScope",b.b,S.b,C.d,function(e){const t=e.get("$q"),s=e.get("$http"),n=e.get("$rootScope"),i=e.get(b.b);return h.b.OnRootScope(n,"$stateChangeError",(function(t,s,n){E.test(s.name)&&e.get(C.d).go(s.name.replace(/\.attempt$/,""),n)})),{new:(e,n)=>{const r=(e,t)=>{e.userId=t.userId,e.queue=t.queue,e.groupAttemptId=t.groupAttemptId,e.status=t.status};let o=t.when(null);const a={myId:i.userId,request(){return o=o.then(()=>{const i=t.defer();return s.put(`${m.a.apiBasePath}/v1/courses/${e}/gradebook/groupAttempts/${n}/activities`,{}).then(e=>{r(this,e.data),i.resolve(this)}),i.promise})},keepAlive(i){o=o.then(o=>{const l=t.defer();return u.some(this.queue.concat(this.userId),e=>this.myId===e)?s({method:"PATCH",url:`${m.a.apiBasePath}/v1/courses/${e}/gradebook/groupAttempts/${n}/activities`}).then(e=>(r(this,e.data),t.when(i(this)).then(e=>{if(u.some(this.queue.concat(this.userId),e=>this.myId===e)&&e){const e=(new Date).getTime(),t=()=>{window.requestAnimationFrame(()=>{(new Date).getTime()-e>=5e3?a.keepAlive(i):t()})};t()}}))).finally(()=>{l.resolve(this)}):l.resolve(this),l.promise})},release(){return o=o.then(()=>{const i=t.defer();return s.delete(`${m.a.apiBasePath}/v1/courses/${e}/gradebook/groupAttempts/${n}/activities`).then(e=>{r(this,e.data),i.resolve(this)}),i.promise})},kickout:()=>o=o.then(()=>s.delete(`${m.a.apiBasePath}/v1/courses/${e}/gradebook/groupAttempts/${n}/activities/waiting`)),peek(){return o=o.then(()=>{const i=t.defer();return s.get(`${m.a.apiBasePath}/v1/courses/${e}/gradebook/groupAttempts/${n}/activities`).then(e=>{r(this,e.data),i.resolve(this)}),i.promise})}};return a}}}]),P.factory(T,["$injector","$q","$log","$http","$rootScope",y.serviceName,C.d,f.b,g.b,v.Jb.serviceName,function(e){const t=e.get(f.b),s=e.get("$rootScope"),n=e.get(g.b),i=e.get(v.Jb.serviceName),r=e.get(y.serviceName),o="features.course.content.assessment.group-attempt.activities",a=(e,s)=>{const r=t.open({template:I,scope:e,controller:["$scope",function(e){}]});return r.refresh=function(t){n.performBatch(()=>{const s=e.queuedUsers;e.owner&&(s[e.owner.id]=e.owner),e.queuedUsers={},t.userId&&t.userId!==(e.owner||{}).id&&i.$find(t.userId).$then(t=>{e.owner=t}),t.queue.forEach((t,n)=>{Object.prototype.hasOwnProperty.call(s,t)?e.queuedUsers[t]=s[t]:i.$find(t).$then(s=>{e.queuedUsers[t]=s})})})},r.scope=e,r.refresh(s),r.result.finally(()=>{r.scope.$destroy()}),r};return{openRequest:e=>{const t=s.$new();let n;return u.extend(t,{hideOK:!0,modalTranslateOptions:{title:{key:`${o}.title_group_member_editing`}},modalStrings:{instructions:r.translateSync({locale:null,key:`${o}.msg_taken_by_other_group_member`}),ok:r.translateSync({locale:null,key:`${o}.takecontrol`}),cancel:r.translateSync({locale:null,key:`${o}.cancel`})},queuedUsers:{},additionalClass:"requesting",okAction:()=>{t.$broadcast(k.USER_REQUEST_CONTROL)},cancelAction:()=>{n.dismiss()}}),n=a(t,e)},openNotify:e=>{const t=s.$new();let n;return u.extend(t,{hideOK:!1,modalTranslateOptions:{title:{key:`${o}.title_group_member_requesting`}},modalStrings:{instructions:r.translateSync({locale:null,key:`${o}.msg_taking_by_other_group_member`}),ok:r.translateSync({locale:null,key:`${o}.leave`}),cancel:r.translateSync({locale:null,key:`${o}.ignore`})},queuedUsers:{},additionalClass:"notifying",okAction:()=>{t.$broadcast(k.USER_RELEASE_CONTROL)},cancelAction:()=>{n.dismiss()}}),n=a(t,e)},openDeclined:e=>{const t=s.$new();let n;return u.extend(t,{hideCancel:!0,modalTranslateOptions:{title:{key:`${o}.title_group_member_request_decline`}},modalStrings:{instructions:r.translateSync({locale:null,key:`${o}.msg_control_request_declined`}),ok:r.translateSync({locale:null,key:`${o}.ok`})},queuedUsers:{},additionalClass:"declined",okAction:()=>{n.dismiss()}}),n=a(t,e)}}}]),P.directive("bbGroupAttemptActivitiesPeek",[C.d,S.b,w,function(e,t,s){return{restrict:"A",link:(n,i,r)=>{i.addClass("group-attempt-activities-observe");const o=n.$watch(r.bbGroupAttemptActivitiesPeek,r=>{if(r&&o(),r&&r.groupId&&r.isInProgress()){const o=s.new(e.params.courseId,r.id),a=()=>{o.peek().then(e=>{e.status&&(r.status=e.status),u.extend(n,{groupAttemptOwnerId:e.userId});const s="group-attempt-has-owner";e.userId?i.addClass(s):i.removeClass(s),t(a,n,5e3)})};a()}})}}}]);class A{constructor(e){let t;this.delegatee=e,this.isResolvingControl=!1,u.forEach(e,(e,t)=>{this[t]=e});const s=["$injector","$http","$q","$rootScope",S.b,C.d,v.m.serviceName];this.resolve=this.resolve||{};const n=e=>{const s=e.get("$q"),n=e.get("$rootScope"),i=e.get(S.b),r=e.get(C.d),o=e.get(v.m.serviceName),a=e.get(w),l=e.get(T);if(!this.isRelatedState(r.next.name))return s.when(!0);if(this.isResolvingControl)return s.reject();this.isResolvingControl=!0;const c=s.defer(),d=r.nextParams;return o.$new(d.courseId).contents.$find(d.contentId||d.assignmentId).$then(e=>{if(!e.isGroupContent)return c.resolve(!0),void(t=null);(t=a.new(d.courseId,d.attemptId)).peek().then(e=>{if(e.userId&&e.myId!==e.userId){n.$broadcast("hideInitialLoadingArea");const t=l.openRequest(e);t.result.then(()=>{},()=>{e.release(),c.reject()}),e.request().then(()=>{e.keepAlive(()=>e.myId===e.userId?(t.close(),c.resolve(!0),!1):e.queue.some(t=>e.myId===t)?(t.refresh(e),!0):(t.dismiss("ACCESS_CONTROL_TAKEN"),c.reject(),i(()=>{l.openDeclined(e)},n,200),!1))})}else c.resolve(!0)})}),c.promise.finally(()=>{this.isResolvingControl=!1})},r=this.resolve;if(r.translateGroupAttemptControl=[y.serviceName,e=>{e.loadBundle("features/course/content/assessment/group-attempt/activities/group-attempt-activities")}],r.attempt){const e=r.attempt;r.attempt=["contentData"].concat(s).concat((t,i)=>{const r=i.get("$q"),o=i.get(C.d);return r.when(i.invoke(s.concat(n))).then(()=>i.invoke(e,null,{contentData:t})).then(e=>this.isRelatedState(o.next.name)&&e.isSubmitted()?(i.get(C.d).goPeekState("assessment.overview.attempt.review",{attemptId:e.id}),r.reject()):e)})}else r.takeControlOnGroupAttempt=s.concat(n);const o=this,a=o.onExit;o.onExit=s.concat(e=>{this.isRelatedState(e.get(C.d).prev.name)&&(a&&e.invoke(a),t&&(t.release(),(o.__childScope||{$destroy:i.noop}).$destroy()))});const l=o.onEnter;o.onEnter=s.concat(e=>{const s=e.get("$rootScope"),n=e.get(T),i=e.get(C.d);if(!this.isRelatedState(i.next.name))return;if(l&&e.invoke(l),!t)return;let r,a=!1;const c=()=>{a=!0},d=()=>{a=!1},u=s.$new();u.$on(p.b,c),u.$on(p.d,c),u.$on(p.a,d),u.$on(p.c,d),o.__childScope=u,t.request().then(e=>{e.keepAlive(e=>!!a||!!this.isRelatedState(i.current.name)&&(e.userId!==e.myId?(i.leavePeekState(),!1):(e.userId===e.myId&&e.queue.length>0?r?r.refresh(e):((r=n.openNotify(e)).result.then(()=>{},()=>{e.kickout(),r=null}),r.scope.$on(k.USER_RELEASE_CONTROL,()=>{r.close(),s.$broadcast(p.e);const t=u.$on("$stateChangeAbort",(s,n)=>{"ABORTED_BY_FILE_UPLOAD"===(n||{}).reason&&(t(),e.kickout()),r=null})})):r&&(r.close(),r=null),!0)))})})}isRelatedState(e){return E.test(e)}}var R=s("JXhc"),O=s("gkef"),D=s("X455"),_=s("36CG"),N=s("+O05"),L=s("nmzr"),M=s("Sa5G"),x=s("zGdY"),j=s("0B2D"),G=s("kirn");s.d(t,"a",(function(){return U}));const U="ultra.course.content.assessment.routes";const F={onEnter:["contentData","attempt",r.e,C.d,"$stateParams",O.b,function(e,t,s,n,i,r){i.skipTransitionEvents||(!i.viewOriginalityReport||i.forceOpenFeedbackPanel?(n.isPeekPanelOpen()&&s.expandTopPanel(),function(e,t,s,n,i){var r;const o=null===(r=null==e?void 0:e.gradingColumn)||void 0===r?void 0:r.peerGrading,a=s.next.name.includes("assessment-submission-feedback"),l=s.next.name.includes("assessment-submission-feedback-tab"),c=s.next.name.includes("rubric"),d=!s.prev.name,u=i.isSmallBreakpoint();if(o||a||l||c||d||u)return!1;const h=N.a.studentCanViewAttemptGradeAndFeedback(t,e.gradeDetail);return n.forceOpenFeedbackPanel&&h}(e,t,n,i,r)&&n.goPeekState(L.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW_FEEDBACK_TAB,{attemptId:t.id})):n.goPeekState(L.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW_ORIGINALITY_TAB))}],onExit:["contentData",r.e,C.d,"$q","$stateParams",function(e,t,s,n,i){if(!i.skipTransitionEvents&&e.gradingColumn.isMultipleAttempts()){let i=n.when();s.isPeekPanelOpen()&&(i=t.shrinkTopPanel()),i.then(()=>{s.goPeekState("assessment.overview.multiple-attempt",{contentId:e.courseContent.id,columnId:e.gradingColumn.id,gradeId:e.gradeDetail.id,courseId:e.courseContent.courseId,viewOriginalityReport:this.viewOriginalityReport})})}}]};i.module(U,[d.a,C.b,a.c,R.c,$,c.b,_.a,N.g]).config([C.c,c.c,D.b,_.b,(e,t,i)=>{e.peekState("assessment",{abstract:!0,url:"/assessment/{contentId:_[0-9]+_1}?courseId",resolve:{[c.d]:t.resolve}}).peekState("assessment.open",{url:"/open",params:{contentId:null,courseId:null,isCollectExternalSubmissions:!1},routingFunction:[v.m.serviceName,d.b,C.d,(e,t,s)=>{const n=s.nextParams.contentId,i=s.nextParams.courseId,r=s.nextParams.isCollectExternalSubmissions;t.hasAnyCourseEntitlement([M.i.ViewAssessment,M.i.ModifyAssessment],i).then(e=>{if(e)s.goPeekState(L.GradeRoutes.GRADEBOOK_ITEM_ASSESSMENT,{courseId:i,contentId:n,gradeitemView:"details",assessmentType:"test"});else{let e=L.AssessmentRoutes.ASSESSMENT_OVERVIEW;r&&(e=L.AssessmentRoutes.ASSESSMENT_EXTERNAL_OVERVIEW),s.goPeekState(e,{courseId:i,contentId:n})}})}]}).peekState("assessment.overview",{url:"/overview",resolve:{contentData:[c.d,o.b,C.d,_.c,(e,t,s,n)=>t.loadContentAndGrades({course:e,contentId:s.nextParams.contentId,contentExtraExpand:"alignedGoals"}).then(e=>(n.setCurrentContent(e.courseContent),e))],[D.c]:i.resolve,translations:["$q",y.serviceName,(e,t)=>e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("components/services/proctoring")])],onEnter:["contentData",l.b,(e,t)=>{t.column=e.gradingColumn}],onExit:[l.b,e=>{e.column=null}]},peekViewName:"assessment-overview-peek@",allowChildPeekStates:!0,peekStates:["conversations",L.CourseRoutes.COURSE_MESSAGE,L.AssessmentRoutes.ASSESSMENT_PEER_GRADING],pageTitle:"course.content.assessment.overview.pageTitle",require:[()=>Promise.all([s.e(56),s.e(135)]).then(s.bind(null,"Xcx3")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(12),s.e(0),s.e(1),s.e(2),s.e(4),s.e(51)]).then(s.bind(null,"F2mp"))]}).peekState(L.AssessmentRoutes.ASSESSMENT_PEER_GRADING,{panelClass:"full",resolve:{translations:["$q",y.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/submission-grading"),t.loadBundle("features/course/grades/submissions-grading")])],currentColumn:n.a.currentColumn,currentContent:n.a.currentContent},url:"/peerReview?columnId&gradeId&userId&attemptId&initialPeerIndex",onExit:["currentColumn",r.e,C.d,(e,t,s)=>{s.goPeekState("assessment.overview",{})}],reloadOnSearch:!1,require:[()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(558)]).then(s.bind(null,"MbeC")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(14),s.e(0),s.e(1),s.e(2),s.e(4),s.e(41)]).then(s.bind(null,"fVgT"))],pageTitle:"course.grades.peer-grading.title",peekViewName:"peer-grading-peek",peekStates:[]}).peekState(`${L.AssessmentRoutes.ASSESSMENT_PEER_GRADING_SUBMISSION_FEEDBACK_TAB}`,{url:"/inline-feedback?&mode",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[y.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${L.AssessmentRoutes.ASSESSMENT_PEER_GRADING}@`]:{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(36)]).then(s.bind(null,"15AK"))}}}).peekState(L.AssessmentRoutes.ASSESSMENT_EXTERNAL_OVERVIEW,{url:"/external-overview",panelClass:"full",resolve:{contentData:[c.d,o.b,C.d,_.c,(e,t,s,n)=>t.loadContentAndGrades({course:e,contentId:s.nextParams.contentId}).then(e=>(n.setCurrentContent(e.courseContent),e))],[D.c]:i.resolve,currentContent:["contentData","$q",(e,t)=>t.when(e.courseContent)],currentColumn:["contentData","$q",(e,t)=>t.when(e.gradingColumn)],translations:["$q",y.serviceName,(e,t)=>e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])],onEnter:["contentData",l.b,(e,t)=>{t.column=e.gradingColumn}],onExit:[l.b,e=>{e.column=null}]},peekViewName:"assessment-overview-peek",allowChildPeekStates:!0,peekStates:["conversations",L.CourseRoutes.COURSE_MESSAGE,"rubric-view","rubric-evaluation"],require:[()=>Promise.all([s.e(56),s.e(626)]).then(s.bind(null,"2cT1")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(12),s.e(0),s.e(1),s.e(2),s.e(4),s.e(541)]).then(s.bind(null,"8sa/"))]}).peekState("assessment.overview.attempt",new A({url:"/attempt/{attemptId:_[0-9]+_1}",onEnter:[r.e,C.d,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],panelClass:"full",resolve:{currentContent:["contentData",_.c,(e,t)=>(t.setCurrentContent(e.courseContent),e.courseContent)],currentColumn:["contentData",e=>e.gradingColumn],attempt:["$q","contentData",v.m.serviceName,C.d,v.A.serviceName,v.E.serviceName,(e,t,s,n)=>{const i=n.nextParams.attemptId,r=t.courseContent.isGroupContent,o=s.$buildRaw({id:t.courseContent.courseId}).gradebook;return r?t.gradingColumn.getGroupAttemptByGroupAssociationId(t.courseContent.assignedGroups[0].groupAssociationId,!1,i).then(e=>{if(0===e.attempts.length&&e.isInProgress()){const t={expand:"attempts,attempts.toolAttemptDetail,toolAttemptDetail"};return e.withParams(t).$patch(["id"]).$asPromise()}return e.$asPromise()}):o.attempts.$find(i,{expand:["toolAttemptDetail","alignedGoals"].join(",")}).$then(e=>{t.attempt=e}).$asPromise()}]},params:{attemptId:null},peekStates:["conversations",L.CourseRoutes.COURSE_MESSAGE,"assessment-details","edit-file-settings","attempt-safe-assign-setting","rubric-evaluation","rubric-view",L.LtiRoutes.LTI,L.ContentMarketRoutes.CONTENT_MARKET,a.b,R.b],peekViewName:"assessment-attempt-peek",pageTitle:"course.content.assessment.details.pageTitle",require:[()=>s.e(616).then(s.bind(null,"mJUP")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(12),s.e(0),s.e(1),s.e(2),s.e(4),s.e(51)]).then(s.bind(null,"F2mp"))]})).peekState("assessment.overview.multiple-attempt",{panelClass:"peek",url:"/multiple-attempt?columnId&gradeId",resolve:{currentColumn:["contentData",e=>e.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise()]},params:{viewOriginalityReport:!1},pageTitle:"course.content.assessment.overview.multiple-attempt.pageTitle",require:[()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(553)]).then(s.bind(null,"ykN9"))]}).peekState(L.AssessmentRoutes.ASSESSMENT_ATTEMPT_IMS_PROCTORING,{url:"/proctoring/attempt?contentId&password&returnToProctoringToolOnEndAssessment",peekStates:["conversations",L.CourseRoutes.COURSE_MESSAGE,"edit-file-settings","attempt-safe-assign-setting","rubric-view",a.b,R.b],resolve:{translations:[y.serviceName,e=>e.loadAllBundles(["components/services/proctoring","features/course/content/assessment/assessment"])],[c.d]:t.resolve,contentData:[c.d,o.b,C.d,(e,t,s)=>t.loadContentAndGrades({course:e,contentId:s.nextParams.contentId})],currentContent:["contentData",e=>e.courseContent],currentColumn:["contentData",e=>e.gradingColumn],attempt:["contentData",N.h,C.d,(e,t,s)=>{const{gradingColumn:n,courseContent:i}=e,r=s.nextParams.password,o=i.isGroupContent,a=i.assignedGroups?i.assignedGroups[0].groupId:null;return t.launchAttempt(n,r,o,a)}],onEnter:["contentData","attempt",C.d,f.b,function(e,t,s,n){var i;const{courseContent:r}=e,o=null==t?void 0:t.$response;if((null==o?void 0:o.status)===x.HttpStatus.Forbidden)switch(null===(i=null==o?void 0:o.data)||void 0===i?void 0:i.code){case x.AttemptApiErrors.AttemptCompletedOrForceCompletion:s.goPeekState(L.AssessmentRoutes.ASSESSMENT_OVERVIEW,{contentId:r.id}).then(()=>{n.open({scope:this.$rootScope,template:j})});break;case x.AttemptApiErrors.AttemptPastDue:s.goPeekState(L.AssessmentRoutes.ASSESSMENT_OVERVIEW,{contentId:r.id}).then(()=>{n.open({scope:this.$rootScope,template:G})})}}]},require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(12),s.e(0),s.e(1),s.e(2),s.e(4),s.e(113)]).then(s.bind(null,"RTst")),pageTitle:"components.services.proctoring.delivery.attempt.pageTitle",peekViewName:"proctored-assessment-peek",panelClass:"full"}).peekState("assessment-details",{panelClass:"peek",url:"/details",resolve:{contentData:[c.d,o.b,C.d,_.c,(e,t,s,n)=>t.loadContentAndGrades({course:e,contentId:s.nextParams.contentId}).then(e=>(n.setCurrentContent(e.courseContent),e))],translations:["$q",y.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assessment/assessment")])]},params:{detailsView:!0,submitToGRD:null},require:[()=>Promise.all([s.e(56),s.e(135)]).then(s.bind(null,"Xcx3")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(12),s.e(0),s.e(1),s.e(2),s.e(4),s.e(51)]).then(s.bind(null,"F2mp"))],peekStates:["attempt-safe-assign-setting"]}).peekState(L.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW,{url:"/review?columnId&contentId",panelClass:"full",resolve:{contentData:["contentData",c.d,o.b,C.d,_.c,(e,t,s,n,i)=>e.gradeDetail.ui.groupAttempt?e:s.loadContentAndGrades({course:t,contentId:n.nextParams.contentId}).then(e=>(i.setCurrentContent(e.courseContent),e))],[D.c]:i.resolve},require:[()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(114)]).then(s.bind(null,"H0q3"))],...F,params:{commentPanelInitiallyOpen:!1,viewOriginalityReport:!1,forceOpenFeedbackPanel:!1,skipTransitionEvents:!1,peekStateToOpen:null},peekViewName:"assessment-attempt-review-peek",peekStates:["assessment-submission-feedback","conversations",L.CourseRoutes.COURSE_MESSAGE,L.GradeRoutes.SUBMISSION_DEEP_LINK,"rubric-view","originality-report",R.b]}).peekState(L.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW_FEEDBACK_TAB,{url:"/inline-feedback?attemptId&userId&mode",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[y.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${L.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW}@`]:{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(36)]).then(s.bind(null,"15AK"))}},peekStates:[L.LtiRoutes.LTI,L.GradeRoutes.SUBMISSION_DEEP_LINK]}).peekState(L.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW_RUBRICS_TAB,{url:"/inline-rubric",pageTitle:"course.rubricInline.title",panelClass:"full",views:{[`${L.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW}@`]:{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(12),s.e(0),s.e(1),s.e(2),s.e(4),s.e(53)]).then(s.bind(null,"5N8L"))}},peekStates:[L.LtiRoutes.LTI,L.GradeRoutes.SUBMISSION_DEEP_LINK]}).peekState(L.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW_ORIGINALITY_TAB,{url:"/originality-report",pageTitle:"course.content.originalityReport.routeDefinition.routeTitle",panelClass:"full",views:{[`${L.AssessmentRoutes.ASSESSMENT_ATTEMPT_REVIEW}@`]:{require:()=>s.e(63).then(s.bind(null,"djtz"))}},peekStates:[L.LtiRoutes.LTI,L.GradeRoutes.SUBMISSION_DEEP_LINK]}),e.peekState(L.AssessmentRoutes.ASSESSMENT_SETTINGS,{panelClass:"peek",url:"/assessmentSettings?contentId?focusEleId?subpanelId",require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(543)]).then(s.bind(null,"mUfJ")),pageTitle:"course.content.assessment.windowTitle",resolve:{translations:["$q",y.serviceName,(e,t)=>e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])]},peekViewName:"assessment-settings-peek",allowChildPeekStates:!0,peekStates:["assign-graders","course-group","goal-picker-legacy","rubric","proctoring-lti-tool","question-analysis"]}),e.peekState("assign-graders",{panelClass:"full",url:"/assignGraders",require:()=>s.e(629).then(s.bind(null,"BTMz")),pageTitle:"course.content.assessment.settings.delegatedGrading.assignGraders.pageTitle",resolve:{translations:[y.serviceName,e=>e.loadBundle("features/course/content/assessment/assessment")]},peekViewName:"assign-graders-peek"}),e.peekState("attempt-safe-assign-setting",{url:"/safeAssignSetting",require:()=>Promise.all([s.e(1),s.e(2),s.e(8),s.e(608)]).then(s.bind(null,"Sg/T")),params:{submitToGRD:null}}).peekState("assessment-submission-feedback",{url:"/feedback?userId",require:[()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(36)]).then(s.bind(null,"15AK")),()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(115)]).then(s.bind(null,"EPkw"))],resolve:{translations:[y.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")],offCanvasArgs:["offCanvasArgs",e=>(e.overlay=!1,e.disableFocusHandling=!0,e)]},pageTitle:"course.content.assessment.feedback.title"}).peekState(L.GradeRoutes.CREATE_OFFLINE_ATTEMPT,{url:"/create-attempt?expandId&userId&groupId&columnId&contentId",require:()=>s.e(619).then(s.bind(null,"IvpR")),resolve:{translations:[y.serviceName,e=>e.loadBundle("features/course/content/assessment/attempt/create/create-attempt")]},pageTitle:"course.content.assessment.attempt.create.createAttempt",panelClass:"peek"}).peekState("proctoring-lti-tool",{panelClass:"full",url:"/proctoringLtiTool?toolHref&toolSubtitle",resolve:{translations:[y.serviceName,e=>e.loadBundle("components/services/proctoring")]},require:()=>s.e(631).then(s.bind(null,"a478")),pageTitle:"components.services.proctoring.ltiTool.pageTitle"}).peekState(L.GradeRoutes.SUBMISSION_DEEP_LINK,{url:"/submission-deep-link?deepLinkAttemptId&peerIndex",panelClass:"full",require:[()=>s.e(147).then(s.bind(null,"c7nl")),()=>s.e(138).then(s.bind(null,"iA/f"))],peekStates:["assessment-submission-feedback"],peekViewName:"submission-deep-link"}).peekState(L.GradeRoutes.SUBMISSION_DEEP_LINK_FEEDBACK_TAB,{url:"/inline-feedback?mode&deepLinkAttemptId",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[y.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${L.GradeRoutes.SUBMISSION_DEEP_LINK}@`]:{require:()=>Promise.all([s.e(3),s.e(5),s.e(6),s.e(7),s.e(0),s.e(1),s.e(2),s.e(4),s.e(8),s.e(117)]).then(s.bind(null,"bKLL"))}},peekStates:["per-assessment-settings",L.LtiRoutes.LTI,L.GradeRoutes.SUBMISSION_DEEP_LINK]}).peekState(L.AssessmentRoutes.ASSESSMENT_ATTEMPT_RESPONDUS_REQUIREMENT,{url:"/respondusRequirement?contentId",resolve:{translations:[y.serviceName,e=>e.loadBundle("components/services/proctoring")]},panelClass:"full",require:[()=>s.e(663).then(s.bind(null,"nHSO"))],pageTitle:"components.services.proctoring.delivery.attempt.pageTitle"})}])},vYaK:function(e,t,s){"use strict";s.r(t),s.d(t,"serviceName",(function(){return u}));s("QLzv");var n=s("nsO7"),i=s("5MwF"),r=s("ZQey"),o=s("yCC5"),a=s("pjml"),l=s("Rjd/"),c=s("nkTj"),d=s("zGdY");const u=o.t;l.a.factory(u,["restmod","$q","$http",c.d,(e,t,s,l)=>{const c=l.createHooksToFetchParent("course"),u=e.model(i.a.apiBasePath+"/v1/courses").mix({announcements:{hasMany:o.e},assessments:{hasMany:o.f},calendarItems:{hasMany:o.v,path:"calendars/calendarItems"},calendars:{hasOne:o.u},collab:{hasOne:o.w},collabUltra:{hasOne:o.y,path:"collabultra"},contents:{hasMany:o.A},conversions:{hasMany:o.s,path:"convertToUltra"},forums:{hasMany:o.I,path:"discussionboards/default/forums"},entitlements:{hasMany:o.G},gradebook:{hasOne:o.Y},instructorsMembership:{mask:"CU",hasMany:o.N,path:"memberships?roleBucket="+d.CourseRoleBucket.Teaching},exports:{hasMany:o.H},ltiPlacements:{hasMany:o.ob},memberships:{hasMany:o.N,hooks:c},membershipInvites:{hasMany:o.O,path:"membershipInvites"},messageFolders:{hasMany:o.Q},conversations:{hasMany:o.B},notifications:{hasMany:o.rb},preferences:{hasMany:o.R},schedule:{hasMany:o.T},term:{belongsTo:o.tc,key:"termId"},users:{hasMany:o.N,hooks:c},groups:{hasMany:o.K},rubrics:{hasMany:o.Xb,path:"rubrics"},analyticsReports:{hasMany:o.c,path:"analyticsReports"},tools:{hasMany:o.wc,path:"tools"},contentHandlers:{hasMany:o.wc,path:"contentHandlers"},indicators:{mask:!0,hasMany:o.M,path:"contents/indicators"},startDate:{serialize:"date"},endDate:{serialize:"date"},scormReportItems:{hasMany:o.Zb,path:"scormReportContents"},studentPreview:{hasOne:o.bc,path:"spreview"},conversationCounts:{hasOne:o.B,path:"/conversations/counts"},ui:{mask:!0,init:()=>({convertToUltraTaskStatus:"?"})},isUndecided(){return d.CourseUltraStatus.Undecided===this.ultraStatus},isClassic(){return d.CourseUltraStatus.Undecided===this.ultraStatus||d.CourseUltraStatus.Classic===this.ultraStatus},isUltraConfirmed(){return d.CourseUltraStatus.Ultra===this.ultraStatus},isUltra(){return d.CourseUltraStatus.Ultra===this.ultraStatus||this.isUltraPreview()},isUltraPreview(){return d.CourseUltraStatus.UltraPreview===this.ultraStatus},setUltraStatusDecided(){return this.$send({method:"PATCH",url:this.$scope.$url()+"/"+this.id,data:{ultraStatus:d.CourseUltraStatus.Ultra}},(function(e){this.ultraStatus=e.data.ultraStatus})).$asPromise()},chooseClassicCourseView(){return this.$send({method:"PATCH",url:this.$scope.$url()+"/"+this.id,data:{ultraStatus:d.CourseUltraStatus.Classic}},(function(e){this.$unwrap(e.data)})).$asPromise()},isOpen(){return!0===this.isAvailable&&!1===this.isClosed},isOpenClassic(){return this.isOpen()&&this.isClassic()},isOpenNonClassic(){return this.isOpen()&&!this.isClassic()},isPrivate(){return!1===this.isAvailable},appearsAsPrivate(){return"effectiveAvailabilityUnprivileged"in this&&!this.effectiveAvailabilityUnprivileged},isComplete(){return!0===this.isAvailable&&!0===this.isClosed},getStatus(){return this.isAvailable?this.isClosed?r.a.Complete:r.a.Open:r.a.Private},setStatus(e,t){r.a.Complete.isEqualTo(e)?(this.isAvailable=!0,this.isClosed=!0,this.ui.status=r.a.Complete):r.a.Open.isEqualTo(e)?(this.isAvailable=!0,this.isClosed=!1,this.ui.status=r.a.Open):r.a.Private.isEqualTo(e)&&(this.isAvailable=!1,this.isClosed=!1,this.ui.status=r.a.Private),t&&(this.effectiveAvailability=t.effectiveAvailability,this.effectiveAvailabilityUnprivileged=t.effectiveAvailabilityUnprivileged)},canAccess(){return this.ui&&this.ui.isExternal?!!this.ui.externalUrl:this.isUndecided()?this.permissions&&this.permissions.chooseUltraStatus:this.effectiveAvailability},canChooseUltraStatus(){return this.permissions.chooseUltraStatus},canExport(){return this.permissions.export&&!this.isUltraPreview()},canArchive(){return this.permissions.archive&&!this.isUltraPreview()},canCopy(){return this.permissions.copy},canImport(){return this.permissions.import},convertToUltraCourse(){return this.ui.convertToUltraTaskId="",this.ui.convertToUltraTaskStatus="",this.$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/convertToUltra",data:{id:this.id}},e=>{this.ui.convertToUltraTaskId=e.data.taskId,this.ui.convertToUltraTaskStatus=e.data.taskStatus,this.ui.conversionTaskTitle=e.data.taskTitle,this.ui.showConversionInProgress=!0,this.ui.showConversionComplete=!1}).$asPromise()},undoCourseConversion(){return this.ui.convertToUltraTaskId="",this.ui.convertToUltraTaskStatus="",this.$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/undo",data:{id:this.id}},e=>{this.ui.convertToUltraTaskId=e.data.taskId,this.ui.convertToUltraTaskStatus=e.data.taskStatus,this.ui.conversionTaskTitle=e.data.taskTitle,this.ui.showConversionInProgress=!0,this.ui.showConversionComplete=!1}).$allow([400,404]).$asPromise()},refreshConvertToUltraStatus(){return this.$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/conversionStatus"},e=>{this.ui.convertToUltraTaskId=e.data.taskId,this.ui.convertToUltraTaskStatus=e.data.taskStatus,this.ui.conversionTaskTitle=e.data.taskTitle}).$allow([404,403]).$asPromise()},getInstructors(){return(this.instructorsMembership||[]).map(e=>e.user)},getBaseRoute(){return this.isOrganization?"base.organizations":"base.courses"},importContents(e,t){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/imports?fileName="+encodeURIComponent(e)+"&fileLocation="+t,data:{cxAction:"CX_ACTION_IMPORT",includeItems:["alignments","announcement","availabilityRule","assessment","content","calendar","collabSessions","glossary","gradebookItems","groups","discussionBoard","settings","staffInformation","tasks","blog","journal","rubric","customArea(bb-retention)","customArea(bb-wiki)"]}},(function(e){this.$unwrap(e.data)})).$asPromise()},copyCourse(e,t,s,n,i,r){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/copy",data:{srcCourseId:e,contentItems:t.contentItems,assessmentItems:t.assessmentItems,rubricItems:t.rubricItems,targetContentId:s,positionBefore:n,positionAfter:i,shouldSendNotifyEmail:r}},(function(e){this.$unwrap(e.data)})).$asPromise()},getImportCopyTaskStatus(e){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/"+e},(function(e){this.$unwrap(e.data)})).$allow([404]).$asPromise()},getGranularCopyTaskStatus(e=[]){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/ultraConversionReports?taskIds="+e.join()},(function(e){this.$unwrap(e.data)})).$allow([404]).$asPromise()},getTaskErrorDetailMessages(e,t){return t=t||this.$scope.$url()+`/${this.id}/ultraConversionReports/${e}/messages`,this.$scope.$build().$send({method:"GET",url:t},(function(e){this.$unwrap(e.data)})).$asPromise()},canConvert(){return this.permissions.convert},hasSchedule(){return!n.isEmpty(this.schedule)},getLocale(){return this.isLocaleEnforced&&this.locale},isToolAvailable(e){return this.tools.isToolAvailable(e)},getAnnouncementsCount(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/announcements/counts"},(function(e){this.$unwrap(e.data)})).$asPromise()},getCourseGroupSetCount(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/groupsets/count"},(function(e){this.$unwrap(e.data)})).$asPromise()},getChildrenCourses(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url().replace(i.a.apiBasePath,i.a.apiBasePath+"/public")+"/"+this.id+"/children?fields=id,childCourse.name"}).$allow([400]).$asPromise().then(e=>e.$response.data.results&&e.$response.data.results)},attendanceRecordsExist(){return this.$scope.$build().$send({method:"GET",url:`${this.$scope.$url()}/${this.$pk}/attendanceRecords`,params:{limit:"1"}}).$suppressErrorDialog().$asPromise().then(e=>e.$response.data.results&&e.$response.data.results.length>0)},$extend:{Model:{findCourseByCourseId(e,t=!1){let s=this.$collection().$send({method:"GET",url:this.$url()+"/find",params:{courseId:e}});return t&&(s=s.$allow([404])),s.$asPromise().then(e=>{if(e&&e.$response&&200===e.$response.status)return e.$response&&e.$response.data})}}},$hooks:{"after-fetch":function(){a.t.sortInstructorsMembership(this.instructorsMembership)},"after-feed":function(e){e.instructorsMembership&&this.instructorsMembership.$decode(e.instructorsMembership)}}});return u.mixinCourses=l.getDataMixin(u.findMany.bind(u),"courseId","course"),u}])},vdfi:function(e,t,s){"use strict";s.d(t,"c",(function(){return d})),s.d(t,"d",(function(){return u})),s.d(t,"a",(function(){return h})),s.d(t,"b",(function(){return m}));var n=s("nsO7"),i=s("Llzl"),r=s("0JpG"),o=s("hlSw"),a=s("TnpK"),l=s("3bn4"),c=s("zGdY");const d="ultra.course.content.assessment.content-goal-alignment",u="ultra.course.content.assessment.content-goal-alignment.service",h="content-goal-alignment",m="content-goal-alignment-for-student",p=["course","goal-alignment","goal"],g="refreshCache";class b{constructor(e){this.$q=null,this.defers=null,this.cachedGoalAlignment=null,this.isLoading=!1,this.$q=e}isReady(){return null!==this.cachedGoalAlignment||this.isLoading}updataState(){this.cachedGoalAlignment=null,this.isLoading=!0}getData(){if(null===this.cachedGoalAlignment){this.defers=this.defers||[];const e=this.$q.defer();return this.defers.push(e),e.promise}return this.cachedGoalAlignment}updateData(e){return this.cachedGoalAlignment=e,this.isLoading=!1,(this.defers||[]).forEach(e=>{e.resolve(this.cachedGoalAlignment)}),this.defers=null,this.cachedGoalAlignment}cleanData(){this.cachedGoalAlignment=null,this.isLoading=!1}}class f extends l.a{constructor(){super(...arguments),this.panelClass="peek content-assessment-goal-peek"}getCache(e){return f.cache=f.cache||new b(e)}resolveGoalAlignableContent(){return["$q","currentContent","currentCourse","currentColumn",r.serviceName,"$injector",g,(e,t,s,n,r,a,l=!1)=>{if(t&&!t.id)return e.when([]);const d=this.getCache(e);return!l&&d.isReady()?e.when(d.getData()):(d.updataState(),e.when(null).then(()=>{if(!t)return a.invoke(o.a.currentContent,null,{currentCourse:s,translations:{}}).then(e=>{t=e})}).then(()=>{if(!n)return a.invoke(o.a.currentColumn,null,{currentCourse:s,currentContent:t}).then(e=>{n=e})}).then(()=>e.all([s.contents.$find(t.id,{expand:"alignedGoals,permissions"}).$asPromise(),s.assessments.$buildRaw({id:t.getDeployedAssessment().assessment.id}).questions.$fetch({expand:"alignedGoals"}).$asPromise(),s.gradebook.columns.$find(n.id,{expand:["associatedRubrics","rubricAssociations.rubricDefinition.alignedGoals","rubricAssociations.rubricDefinition.permissions","rubricAssociations.rubricDefinition.rows.alignedGoals"].join(",")}).$asPromise(),r.loadBundle(`features/${p.join("/")}`)]).then(([e,t,n])=>{let o=1;const a=t.map(e=>{if(c.QuestionType.PresentationOnly!==e.questionType){const t=o++;return i.extend(e,{getContentTitleForGoalAlignment:()=>r.translateSync({locale:s.locale,key:"components.directives.assessment-question.question-title",params:{index:t}})})}return e});return this.groupGoals(s.contents.$buildRaw(e),a,n,r)})).then(e=>d.updateData(e)))}]}getPeekStateName(){return h}groupGoals(e,t,s,r){const o=s.rubricAssociations&&s.rubricAssociations.length>0?s.rubricAssociations[0].rubricDefinition:{},a=e.isTest()?"goalsAlignedWithTest":"goalsAlignedWithAssignment";return[{getContentTitleForGoalAlignment:()=>r.translateSync({locale:null,key:`${p.join(".")}.${a}`}),getContentIdForGoalAlignment:i.bind(e,e.getContentIdForGoalAlignment),isCurrentUserEligibleToAlignGoals:i.bind(e,e.isCurrentUserEligibleToAlignGoals),alignedGoals:e.alignedGoals?e.alignedGoals.map(t=>(t.content=e,t)):[],coreContent:e},{getContentTitleForGoalAlignment:()=>r.translateSync({locale:null,key:`${p.join(".")}.goalsAlignedWithQuestions`}),getContentIdForGoalAlignment:()=>e.getContentIdForGoalAlignment()+".all.questions",isCurrentUserEligibleToAlignGoals:()=>!1,alignedGoals:(()=>n.flatten(t.map(e=>e.alignedGoals?e.alignedGoals.map(t=>(t.content=e,t)):[])))()},{getContentTitleForGoalAlignment:()=>r.translateSync({locale:null,key:`${p.join(".")}.goalsAlignedWithRubric`}),getContentIdForGoalAlignment:()=>e.getContentIdForGoalAlignment()+".all.rubricrows",isCurrentUserEligibleToAlignGoals:()=>!1,alignedGoals:(()=>n.flatten((o.rows||[]).map(e=>e.alignedGoals.map(t=>(e.getContentTitleForGoalAlignment=()=>e.header,e.getContentIdForGoalAlignment=function(){return"blackboard.plugin.rubric.api.core.data.RubricRow;"+this.id},t.content=e,t)))))()}]}getOverrideSubTitle(){return["currentCourse","currentContent",(e,t)=>t.id?e.contents.$find(t.id).$asPromise().then(e=>e.title):""]}}f.$inject=["$injector","$q"];class v extends f{resolveGoalAlignableContent(e){return["$q","currentCourse","contentData",r.serviceName,(t,s,n,r)=>{let o=t.when(null);return e?o=t.when(e):n.courseContent.isGroupContent&&n.groupAttempt?o=n.gradingColumn.getGroupAttemptByGroupAssociationId(n.courseContent.assignedGroups[0].groupAssociationId):!n.courseContent.isGroupContent&&n.attempt&&(o=s.gradebook.attempts.$find(n.attempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise()),t.all([n.courseContent.alignedGoals?n.courseContent.$asPromise():s.contents.$find(n.courseContent.id,{expand:"alignedGoals"}).$asPromise(),o,s.gradebook.columns.$find(n.gradingColumn.id,{expand:["associatedRubrics","rubricAssociations.rubricDefinition.alignedGoals","rubricAssociations.rubricDefinition.permissions","rubricAssociations.rubricDefinition.rows.alignedGoals"].join(",")}).$allow([c.HttpStatus.Forbidden]).$asPromise(),r.loadBundle(`features/${p.join("/")}`),r.loadBundle("components/directives/assessment/assessment-question")]).then(([e,t,o])=>{const a=[];if(t&&t.$pk){const e=t.getToolAttemptDetailItem(n.gradingColumn.scoreProviderHandle);(e&&e.questionAttempts||[]).forEach(e=>{a.push(i.extend(e.question,{getContentTitleForGoalAlignment:()=>r.translateSync({locale:s.locale,key:"components.directives.assessment-question.question-title",params:{index:e.visibleQuestionNumber}}),getContentIdForGoalAlignment(){return`blackboard.data.qti.asi.AsiObject;${this.id}`},isCurrentUserEligibleToAlignGoals:()=>!1}))})}return this.groupGoals(e,a,o,r)})}]}getPeekStateName(){return m}getOverrideSubTitle(){return["contentData",e=>e.courseContent&&e.courseContent.title||""]}}i.module(d,[a.b,r.moduleName]).config([a.c,e=>{[new f,new v].forEach(t=>{e.peekState(t.getPeekStateName(),t)})}]).value(g,!1).service(u,["$injector",r.serviceName,function(e){return{alignedGoalsCount:-1,resolveGoalAlignableContents(t,s,i,r=!1){return e.invoke((new f).resolveGoalAlignableContent(),null,{currentCourse:t,currentContent:s,currentColumn:i,[g]:r}).then(e=>(this.alignedGoalsCount=n.flatten(n.compact(e.map(e=>e.alignedGoals))).length,[e,this.alignedGoalsCount]))},resolveGoalAlignableContentsForStudent:(t,s,i)=>e.invoke((new v).resolveGoalAlignableContent(i),null,{currentCourse:t,contentData:s}).then(e=>[e,n.flatten(n.compact(e.map(e=>e.alignedGoals))).length])}}])},vhkR:function(e,t,s){"use strict";s.d(t,"a",(function(){return k})),s.d(t,"b",(function(){return P}));var n=s("nsO7"),i=s("Llzl"),r=s("pjml"),o=s("VAMW"),a=s("4nF1"),l=s("Qbdf"),c=s("0JpG"),d=s("12mu"),u=s("sgjL"),h=s("TnpK"),m=s("Sa5G"),p=s("Q/M7"),g=s("fYJU"),b=s("yytE"),f=s("qZC8"),v=s("36CG"),S=s("jhBu"),y=s("e6jQ"),C=s("zGdY"),I=s("CY5M"),$=s("nmzr"),w=s("FBBZ"),T=s("6fZB"),E=s("IbyE");const k="ultra.components.services.lti",P="lti",A=333,R=250;class O{constructor(e){this.service=e,this.key=o.TransitService.Lti}getDomainConfigStatusType(e){const t=this.service.getDomainConfigStatusType(e);return t?t.toString():null}getPlacements(e,t=!1){return Object(T.a)(this.service.getPlacements(e,t))}async ltiLaunch({courseId:e,contentId:t,content:s,showPreLaunchPanel:n}){return this.service.ltiLaunch({courseId:e,contentId:t,content:s,showPreLaunchPanel:n})}}class D{constructor(e,t,s,n,i,r,a,l,c,d,u,h,m,p,g,b,f){this.$q=e,this.$rootScope=t,this.$stateParams=s,this.$window=n,this.cacheFactory=i,this.contextCourse=r,this.bbLocalize=a,this.modalService=l,this.postMessageDispatcherService=c,this.stateService=d,this.CourseModel=u,this.PartnerContentIdModel=h,this.PartnerSettingsModel=m,this.PlacementModel=p,this.contextUser=g,this.currentContent=b,this.entitlement=f,this.shortMaxAge=5e3,this.thirtyMinuteMaxAge=18e5,this.placementCache=i.createCache("PlacementCache",{deleteOnExpire:"passive",maxAge:this.thirtyMinuteMaxAge}),this.placementsCache=i.createCache("PlacementsCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge}),Object(o.registerService)(new O(this))}configureAndInitInlineLaunch(e,t){var s;const n=this.$q.defer(),i=this.contextCourse.courseId||this.$stateParams.courseId,r=null!==(s=this.$stateParams.contentId)&&void 0!==s?s:this.$stateParams.id,o=Object(I.configureLaunchArgs)({bbFileData:e,courseId:i,contentId:r});if(o.linkType){if(!m.f.ExternalLink.isEqualTo(o.linkType)&&t&&t.preventDefault(),o.linkRefId)return this.ltiLaunch(o)}else n.reject({errorMessage:"Failed to render the iframe from src"});return n.promise}getPlacements(e,t=!1){if(t)return this.PlacementModel.$search(e).$asPromise();let s=this.placementsCache.get(i.toJson(e||{}));return s||(s={promise:this.PlacementModel.$search(e).$asPromise()},this.placementsCache.put(i.toJson(e||{}),s)),s.promise}getAvailablePlacements(e,t=!1){return this.getPlacements(e,t).then(e=>e.filter(e=>e.isAvailable()))}ltiLaunch(e){var t;const s=this.$q.defer();let i;return e.gradeDetail&&E.ScoreProviderHandle.PartnerCloud.isEqualTo(e.gradeDetail.column.scoreProviderHandle)?(i=(null===(t=e.gradeDetail.ui)||void 0===t?void 0:t.attempt)?e.gradeDetail.ui.attempt.groupAttemptId?e.gradeDetail.ui.attempt.groupAttemptId:e.gradeDetail.ui.attempt.id:e.gradeDetail.lastAttemptId,this._getMembership(e.courseId).then(t=>{const n=Object(w.d)({gradableItemId:e.gradeDetail.column.id,courseId:e.gradeDetail.column.courseId,attemptId:i,membershipId:t.id,linkId:e.gradeDetail.column.linkId});this.launch(n,!0),s.resolve()})):this.$q.all([this.entitlement.hasCourseEntitlement(m.s.ViewAdmin,e.courseId),this._getContent(e.courseId,e.content,e.contentId,e.linkType,e.linkRefId)]).then(([t,i])=>{if(!i||!e.showPreLaunchPanel||t)return this._ltiLaunch(n.merge(e,{content:i})).then(s.resolve,s.reject);this._getMembership(e.courseId).then(t=>{if(!this._isGradable(i)||!this._isStudentInCourse(t))return this._ltiLaunch(n.merge(e,{content:i})).then(s.resolve,s.reject);this.stateService.goPeekState($.LtiRoutes.LTI_LAUNCH,{courseId:i.courseId,contentId:i.id}).then(()=>{e.showPreLaunchPanel||this.markCompleted(i.id,i.courseId,i),s.resolve()}).catch(e=>{s.reject({errorMessage:"Failed to open the gradable lti launch panel",errorResponse:e})})})}).catch(e=>{s.reject({errorMessage:"Failed to get entitlement or course content",errorResponse:e})}),s.promise}markCompleted(e,t,s){return(s?this.$q.resolve(s):this._getContent(t,null,e,null,null)).then(e=>{var t;return this.currentContent.setCurrentContent(e),e&&(null===(t=e.permissions)||void 0===t?void 0:t.canHaveReviewState)&&e.state!==C.ContentReviewState.Completed&&e.inSequence?e.updateState(C.ContentReviewState.Completed,!0):e})}launch(e,t=!1,s,n,i){e=p.c(e),e=p.a(e,"from_ultra","true");const r=p.b(e),o=this.contextCourse.courseId||this.$stateParams.courseId||r.course_id,a=this.$stateParams.contentId||this.$stateParams.id||r.content_id||r.parentId;return t?(this.$window.open(e),this.markCompleted(a,o),"lti-service: Link was launched in a new window."):s?e:(n?this.stateService.goPeekState($.LtiRoutes.LTI_LAUNCH_PEEK,{toolHref:e,courseId:o,contentId:a}).then(()=>{i&&this.stateService.goPeekState($.LtiRoutes.LTI_EDIT_CLOUD_DOCUMENT)}):this.stateService.goPeekState($.LtiRoutes.LTI_LAUNCH_FRAME,{toolHref:e}),this.markCompleted(a,o),"lti-service: Link was launched in a peek panel.")}_ltiLaunch(e){let t;if(e.content){t=this.getLaunchLinkFromContent(e.content);const s=this.getDomainConfigStatusType(e.content);if(!t){if(s&&r.K.LTIStatusType.NeedsApproval.isEqualTo(s)){const t=this.$rootScope.$new();return t.email=this._getSupportEmail(e.content),t.hasEmail=!!t.email,this.modalService.open({scope:t,template:b,resolve:{translations:[c.serviceName,e=>e.loadBundle("features/course/content/course-content")]}}),this.$q.resolve()}return this.$q.reject({errorMessage:"Attempted to launch an LTI link without a valid launchLink."})}if(void 0!==this.placementExists(e.content)&&!this.placementExists(e.content))return this.$q.reject({errorMessage:"The placement of this LTI Link does not exist"})}else t={link:this._getLaunchLinkFromLinkRef(e)};return this._initLaunchTarget(n.merge(e,{launchLink:t}))}_initLaunchTarget(e){const t=Object(I.getPartnerIdFromLinkRefId)(e.linkRefId);if(e.content)return this._launchFromContent(e.content,e.launchLink,t,e.launchSettings);if(m.f.LtiPlacement.isEqualTo(e.linkType))return this._getPlacementById(e.linkRefId).then(t=>{let s=e.launchLink.link,n=t.launchInNewWindow;return p.n(t.url)||(s=p.a(s,"target_override","window"),n=!0),C.PlacementType.ContentItemMessage===t.type&&(m.p.Inline.isEqualTo(this.$stateParams.mode)?(s=p.a(s,"inline","true"),this.$stateParams.id&&(s=p.a(s,"content_id",this.$stateParams.id))):(this.$stateParams.position&&(s=p.a(s,"position",this.$stateParams.position)),this.$stateParams.parentId&&(s=p.a(s,"content_id",this.$stateParams.parentId)),s=p.a(s,"inline","false"))),this.launch(s,n)},()=>this.launch(e.launchLink.link));if(m.f.PartnerCloud.isEqualTo(e.linkType))return this.PartnerSettingsModel.getSettingsById(t).then(t=>this.launch(e.launchLink.link,!t.responsive));if(m.f.LtiLink.isEqualTo(e.linkType)){const t=e.launchLink.link;return!e.launchInNewWindow&&e.url&&p.n(e.url)?this.$q.resolve(this.launch(t,!1,e.renderAsEmbed)):this.$q.resolve(this.launch(t,!0))}}_launchFromContent(e,t,s,n){const i=e.contentHandler;if(m.f.LtiPlacement.startsWith(i)||m.f.LtiLink.isEqualTo(i)){const s=I.LtiItemOrigin.CloudDocument===e.contentDetail[i.toString()].itemOrigin;return this.$q.resolve(this.launch(t.link,t.launchNewWindow,!1,s,n))}if(m.f.PartnerCloud.isEqualTo(i)){const n=e.contentDetail;return!s&&n&&n[m.f.PartnerCloud.handle]&&(s=n[m.f.PartnerCloud.handle].providerId),this.PartnerSettingsModel.getSettingsById(s).then(e=>this.launch(t.link,!e.responsive))}}getLaunchLinkFromContent(e){return Object(I.getLaunchLinkFromContent)(e)}_getPlacementById(e){let t=this.placementCache.get(e);return t||(t={promise:this.PlacementModel.$find(e).$asPromise()}).promise.then(()=>{this.placementCache.put(e,t)}),t.promise}_getLaunchLinkFromLinkRef(e){return Object(I.getLaunchLinkFromLinkRef)(e)}getDomainConfigStatusType(e){var t,s,n;return(null===(n=null===(s=null===(t=e.contentDetail)||void 0===t?void 0:t[e.contentHandler.toString()])||void 0===s?void 0:s.domainConfig)||void 0===n?void 0:n.statusType)?e.contentDetail[e.contentHandler.toString()].domainConfig.statusType:null}ltiToolProviderExists(e){var t,s;return null===(s=null===(t=e.contentDetail)||void 0===t?void 0:t[e.contentHandler.toString()])||void 0===s?void 0:s.existsLTIProvider}placementExists(e){var t,s;return null===(s=null===(t=e.contentDetail)||void 0===t?void 0:t[e.contentHandler.toString()])||void 0===s?void 0:s.existsPlacement}ltiEditColumn(e){this._getContent(e.courseId,e.ui.content,e.contentId,null,null).then(t=>{e.ui.content=t;const s=a.a.create(t).getEditState();this.stateService.goPeekState(s,{id:t.id})})}isLTILink(e){return null!=e.scoreProviderHandle&&(E.ScoreProviderHandle.PartnerCloud.isEqualTo(e.scoreProviderHandle)||E.ScoreProviderHandle.LTILink.isEqualTo(e.scoreProviderHandle))}populateNewPlacement(e,t){const s=r.p.ContentHandler.LtiPlacement.handle+"-"+t.handle;e.isAvailable=!1,e.isPartiallyVisible=!1,e.visibility=C.ContentVisibility.Hidden,e.contentHandler=new r.p.ContentHandler(s,null),e.permissions={edit:!0},e.contentDetail={},e.contentDetail[s]={},e.title=t.name.trim().substr(0,A),t.description&&t.description.length>0&&(e.description=t.description.trim().substr(0,R))}_isStudentInCourse(e){return e.isStudentMembership()}_isGradable(e){return!!(e&&e.contentDetail&&e.contentDetail[e.contentHandler.toString()]&&e.contentDetail[e.contentHandler.toString()].gradingColumn)&&!!e.contentDetail[e.contentHandler.toString()].gradingColumn}_getContent(e,t,s,n,i){return t?this.$q.when(t):s?this.CourseModel.$new(e).contents.$find(s).$asPromise():i&&m.f.PartnerCloud.isEqualTo(n)?this.PartnerContentIdModel.getContentIds(e,i).then(t=>t.contentIds&&t.contentIds.length>0?this.CourseModel.$new(e).contents.$find(t.contentIds[0]).$asPromise():this.$q.when(null)):this.$q.when(null)}_getMembership(e){return this.CourseModel.$new(e).users.$find(this.contextUser.userId).$asPromise()}_getSupportEmail(e){return e.contentDetail&&e.contentDetail[e.contentHandler.toString()]&&e.contentDetail[e.contentHandler.toString()].supportEmail?e.contentDetail[e.contentHandler.toString()].supportEmail:null}convertInlineLTILinkToBbMLLink(e){return e.map(e=>{var t,s;const r=e.data;m.f.LtiLink.isEqualTo(e.data.linkType)&&("iframe"===(null===(s=null===(t=e.data)||void 0===t?void 0:t.target)||void 0===s?void 0:s.toLowerCase())&&(r.bbtype="embedded-app",e.data.height&&(r.height=e.data.height),e.data.width&&(r.width=e.data.width),delete r.target),r.linkRefUuid||(r.linkRefUuid=Object(y.b)()));const o={type:i.isDefined(r)&&!m.f.ExternalLink.isEqualTo(r.linkType)?"lti":"external",title:e.title,url:"",data:n.escape(i.toJson(i.isDefined(r)?r:{}))};return i.isDefined(r)&&m.f.ExternalLink.isEqualTo(r.linkType)&&(o.url=r.url),o})}isEmbeddedGradable(e){let t=!1;return e.forEach(e=>{e.data.gradable&&(t=!0)}),t}returnToContentState(){const e=this.stateService.current.name.split(".peek.");let t=1;e.length>2&&(t=e[e.length-2]===$.ContentMarketRoutes.CONTENT_MARKET?2:1);const s=e.splice(0,e.length-t).join(".peek.");this.stateService.goPeekState(s)}_registerEmbedLinkEventHandler(e,t){this.postMessageDispatcherService.registerEventHandler("embedded-links",(t,s)=>{window!==s&&s.close(),this.returnToContentState();const n=t=>{const s=this.convertInlineLTILinkToBbMLLink(t);e(s.map(e=>({data:e.data,type:e.type.includes("lti")?"lti":"external",url:e.url,title:e.title})))};this.isEmbeddedGradable(t.items)?this.showEmbeddedNotGradableModal(n,t.items):n(t.items)},t,!0)}getOpenContentMarketConf(e){return t=>{this._registerEmbedLinkEventHandler(t,e),this.stateService.goPeekState($.ContentMarketRoutes.CONTENT_MARKET,{mode:"inline"})}}getOpenSystemContentMarketConf(e){return t=>{this._registerEmbedLinkEventHandler(t,e),this.stateService.goPeekState("system-content-market",{mode:"inline"})}}getEditorPluginOptions(e){return{getEmbedSrc:this.configureAndInitInlineLaunch.bind(this),openContentMarket:this.getOpenContentMarketConf(e)}}getYoutubeEditorPluginOptions(){return{courseId:this.contextCourse.courseId,getEmbedSrc:this.configureAndInitInlineLaunch.bind(this)}}showEmbeddedNotGradableModal(e,t){const s=this.$rootScope.$new(!0),n=this.modalService.open({scope:s,template:f,resolve:{translations:[c.serviceName,e=>e.loadBundle("features/course/content-market/content-market")]}});s.dismissCallback=()=>{e(t),n.dismiss()}}}D.$inject=["$q","$rootScope","$stateParams","$window","DSCacheFactory",l.e,c.serviceName,d.b,u.b,h.d,r.m.serviceName,r.S.serviceName,r.U.serviceName,r.L.serviceName,g.b,v.g,S.b];class _ extends D{}i.module(k,[l.b,u.a,h.b,v.d,r.N]).service(P,D).config(["$compileProvider",e=>{e.aHrefSanitizationWhitelist(/^\s*(https?|mailto):/)}])},w9Zy:function(e,t,s){"use strict";s.d(t,"d",(function(){return h})),s.d(t,"e",(function(){return m})),s.d(t,"b",(function(){return p})),s.d(t,"c",(function(){return g})),s.d(t,"a",(function(){return f}));var n=s("D57K"),i=(s("NLMr"),s("5iHu")),r=s("Llzl"),o=s("5MwF"),a=s("9zo4"),l=s("0JpG"),c=s("lEL+"),d=s("TT9l"),u=s("aHpC");const h="ultra.services.BbOffcanvas",m="bbOffcanvas",p="OffCanvasPanelClosed",g="OffCanvasPanelOpened";let b=class{constructor(e,t,s,n,i,r){this.$compile=e,this.$q=t,this.$rootScope=s,this.accessibility=n,this.bbLocalize=i,this.timeout=r,this.document=document,this.openElements=[],this.openElementsPromise=[]}open(e){return this.openOffcanvas(e)}openOffcanvas(e){return this.$q.when(e.template).then(t=>{const s=i(t);if(s.length>1&&!o.a.production)throw new Error("Current page has multiple root element! Please refactor the page to have only one root element");s.attr("data-base-state-name",e.stateName),0===this.openElements.length&&1===this.openElementsPromise.length&&s.addClass("first");const n=e.scope||this.$rootScope,r=(n.$newOffcanvasScope||n.$new).apply(n);this.$rootScope.bbOffcanvasOpened=!1,this.bbOffcanvasOpening=!0;const l=e.opened,c=e.close,u=this;if(e.trapFocus=!1,e.open=()=>{e.disableFocusHandling||u.accessibility.applyAccessibilityHandlingForPanel(s)},a.a.isLastNavigationByKeyboard&&i("body").addClass("hide-focus-outline"),e.opened=function(){u.$compile(s)(r);const t=(...e)=>{u.$rootScope.bbOffcanvasOpened=!0,u.bbOffcanvasOpening=!1,l&&l.apply(this,e),a.a.isLastNavigationByKeyboard&&i("body").removeClass("hide-focus-outline"),u.$rootScope.$broadcast(g)};u.$rootScope.$$phase?t():u.$rootScope.$apply(t),u.accessibility.isElementInActivePanel(i(document.activeElement))||u.accessibility.focusCorrectElementOnPanel(s),s.hasClass("peek")&&s.hasClass("overlay-disabled")&&!e.disableFocusHandling&&u.enableFocusSkipLinks(r)},e.close=(...t)=>(s.hasClass("peek")&&s.hasClass("overlay-disabled")&&!e.disableFocusHandling&&this.disableFocusSkipLinks(),c.apply(this,t)),e.closed=()=>{e.disableFocusHandling||this.accessibility.revertAccessibilityHandling(),this.$rootScope.$broadcast(p)},e.overlay||s.addClass("overlay-disabled"),e.disableFocusHandling){s.addClass("focus-handling-disabled"),s.attr("role","region"),s.attr("aria-label",this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(r),key:"global.panel"}));const e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(r),key:"global.focusJumpLink"});s.append('<button class="focus-skip-link focus-skip-link-disabled" tabindex="0">'+e+"</button>")}s.bbOffcanvas(e);const h=new f(s,this.accessibility);e.banner&&d.a.pushBanner({state:{stateName:e.stateName,panelClass:e.panelClass},orphan:()=>{h.setBanner()(void 0)},adopt:h.setBanner()}),h.open();const m=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(r),key:"global.close"}),b=s.find(".bb-close");return b&&b.length>0&&(b[0].setAttribute("aria-label",m),b[0].setAttribute("analytics-id",`bb-close.${e.pageTitle}`),s.find(".top-border").length>0&&b.addClass("has-top-border")),s.attr("data-page-title",this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(r),key:e.pageTitle})),h})}addBbOffcanvasElement(e){this.openElements.push(e),this.synchronizeOffcanvasDepth()}addBbOffcanvasElementPromise(e,t){this.openElementsPromise.push(this.$q.when(e)),this.openElementsPromise[this.openElementsPromise.length-1].then(e=>{e.name=t,this.addBbOffcanvasElement(e),this.openElementsPromise.pop()},()=>{this.openElementsPromise.pop()})}close(e){for(;0!==this.openElements.length;){const t=this.openElements.pop();if(this.synchronizeOffcanvasDepth(),t.close(),this.$rootScope.bbOffcanvasOpened&&t.name===e)break}this.$rootScope.$broadcast(p)}synchronizeOffcanvasDepth(){i(this.document.body).attr("bb-offcanvas-depth",this.openElements.length)}getElement(e){let t;return(t=this.openElementsPromise.length?this.$q.all(this.openElementsPromise):this.$q.when()).then(()=>this.openElements.filter(t=>t.name===e)[0])}getTopElement(){return this.getNthElementFromTop(0)}getNthElementFromTop(e){let t=null;return this.openElementsPromise.length>e?t=this.openElementsPromise[this.openElementsPromise.length-e-1]:this.openElements.length>e&&(t=this.openElements[this.openElements.length-e-1]),this.$q.when(t)}getCoursePanel(){let e;return(e=this.openElementsPromise.length?this.$q.all(this.openElementsPromise):this.$q.when()).then(()=>this.openElements.filter(e=>{const t=e.name.match(/base\.[A-Za-z]+\.peek\.course\.[A-Za-z]+\.peek$/);return t&&0!==t.length})[0])}showTopPanelCloseButton(){this.getTopElement().then(e=>{e&&e.showCloseButton()})}expandTopPanel(){this.getTopElement().then(e=>{e&&!e.isPanelExpanded()&&e.expandPanel()})}shrinkTopPanel(){return this.getTopElement().then(e=>{e&&e.isPanelExpanded()&&e.expandPanel()})}safeFocus(e){if(this.bbOffcanvasOpening){const t=this.$rootScope.$watch(()=>this.bbOffcanvasOpening,s=>{!1===s&&(t(),this.timeout(()=>{e.focus()},this.$rootScope,0,!1))})}else this.timeout(()=>{e.focus()},this.$rootScope,0,!1);this.accessibility.isFocusDelayed=!1}enableFocusSkipLinks(e){this.$q.all([this.getTopElement(),this.getNthElementFromTop(1)]).then(t=>{const[s,n]=t;if(null!=s&&null!=n){const t=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(e),key:"global.focusJumpLabel",noWrap:!0,params:{pageTitle:n.getElement().attr("data-page-title")}}),i=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(e),key:"global.focusJumpLabel",noWrap:!0,params:{pageTitle:s.getElement().attr("data-page-title")}});s.enableFocusSkipLink(n,t),n.enableFocusSkipLink(s,i)}})}disableFocusSkipLinks(){this.getTopElement().then(e=>{e&&e.disableFocusSkipLink()}),this.getNthElementFromTop(1).then(e=>{e&&e.disableFocusSkipLink()})}};b=Object(n.__decorate)([Object(n.__param)(0,Object(u.b)("$compile")),Object(n.__param)(1,Object(u.b)("$q")),Object(n.__param)(2,Object(u.b)("$rootScope")),Object(n.__param)(3,Object(u.b)(a.c)),Object(n.__param)(4,Object(u.b)(l.serviceName)),Object(n.__param)(5,Object(u.b)(c.b))],b);class f{constructor(e,t,s){this.element=e,this.accessibility=t,this.name=s}getElement(){return this.element}open(){this.element.addClass("hide-in-background"),this.element.bbOffcanvas("open")}close(){this.element.bbOffcanvas("remove")}setBanner(){return i(this.element)[0].setBanner}expandPanel(){this.element.bbOffcanvas("expandPanel")}isPanelExpanded(){return this.element.hasClass("full")}hideCloseButton(){this.element.find(".bb-close").addClass("bb-close-hide")}showCloseButton(){this.element.find(".bb-close.bb-close-hide").removeClass("bb-close-hide")}enableFocusSkipLink(e,t){this.element.find(".focus-skip-link").removeClass("focus-skip-link-disabled").attr("aria-label",t).on("click.focusSkip",()=>{this.element.hasClass("peek")?this.accessibility.revertAccessibilityHandling():(this.accessibility.applyAccessibilityHandlingForPanel(e.getElement()),this.accessibility.focusCorrectElementOnPanel(e.getElement()))})}disableFocusSkipLink(){this.element.find(".focus-skip-link").addClass("focus-skip-link-disabled").off("click.focusSkip")}}class v extends b{}r.module(h,[a.b,l.moduleName,c.a]).service(m,b)},w9mJ:function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r}));var n=s("Llzl");const i="ultra.service.promiseQueue",r="promiseQueue";class o{constructor(){this.queue=[],this.processing=!1,this.MAX_QUEUE_LENGTH=2e3}enqueue(e){this.queue.length<this.MAX_QUEUE_LENGTH?(this.queue.push(e),this.processQueue()):console.error("Maximum queue length reached. Item was not enqueued.")}enqueueArray(e){if(this.queue.length>0)throw Error("Queue is not currently empty. Cannot queue new array.");if(e.length>this.MAX_QUEUE_LENGTH)throw Error("Too many items to queue. "+e.length+" exceeds maximum of "+this.MAX_QUEUE_LENGTH);e.forEach(e=>{this.queue.push(e)}),this.processQueue()}processQueue(e){if(this.processing)return;const t=this.queue.shift();if(t){this.processing=!0;let s=e;try{t(e).then(e=>{s=e}).finally(()=>{this.processing=!1,this.processQueue(s)})}catch(e){throw this.processing=!1,e}}}_processQueue(){return this.processQueue()}}class a{constructor(){this.queues=Object.create(null)}getQueue(e){let t=this.queues[e];return t||(t=this.queues[e]=new o),t}}class l extends a{}n.module(i,[]).service(r,a)},wDWF:function(e,t,s){"use strict";function n(e){if(!e)return 0;let t=5381,s=e.length;for(;s;)t=33*t^e.charCodeAt(--s);return t>>>0}s.d(t,"a",(function(){return n}))},wQOJ:function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return u}));var n=s("D57K"),i=s("5MwF"),r=s("nbDY"),o=s.n(r),a=s("Q/M7"),l=s("aHpC"),c=s("Fvsw");const d="ultra.services.institutionApi",u="institutionApi";class h extends o.a{}h.V1=new h("1.0"),h.V2=new h("2.0");let m=class{constructor(e,t,s){this.$http=e,this.$q=t,this.context=s,this.getUserCanEdit=e=>this.canEditFetch(e).then(({canEdit:e})=>e,()=>!1),this.getUserCanView=e=>this.canEditFetch(e).then(({ipHasVisible:e})=>e>0,()=>!1),this.getEffectiveVariantIdWithPermissions=()=>{const e=this.context.getBrand(),t=e.isDefault?null:e.portalBrandId;return this.getEffectivePageVariantId(t).then(e=>this.canEditFetch(e).then(({canEdit:t,ipHasVisible:s})=>({variantId:e,canEdit:t,canView:s>0}))).catch(()=>({variantId:void 0,canEdit:!1,canView:!1}))},this.getModuleIsVisible=e=>this.getModuleVisibility(e).then(({visible:e})=>e,()=>!1),this.getHealth=()=>{if(this.ipHealthPromise)return this.ipHealthPromise;const e=a.c(i.a.institutionApiBasePath+"/health");return this.ipHealthPromise=this.$http.get(e,this._getConfig())},this._getConfig=()=>{return{headers:{Accept:`application/json; version=${h.V2.toString()}`}}}}importIP(){return Promise.all([s.e(3),s.e(17)]).then(s.t.bind(null,"26Ar",7)).then(({default:e})=>e)}canEditFetch(e){return this.$q.when(this.importIP().then(t=>t.pageService.canEditFetch(h.V2.toString(),e)))}getEffectivePageVariantId(e){return this.$q.when(this.importIP().then(t=>t.pageService.getEffectivePageVariantId(e)))}getModuleVisibility(e){return this.$q.when(this.importIP().then(t=>t.moduleService.getModuleVisibility(e)))}};m=Object(n.__decorate)([Object(n.__param)(0,Object(l.b)("$http")),Object(n.__param)(1,Object(l.b)("$q")),Object(n.__param)(2,Object(l.b)(c.b))],m);class p extends m{}angular.module(d,[c.a]).service(u,m)},wWlP:function(e,t,s){"use strict";const n=(()=>{const e=[],t=[];function s(){return e[e.length-1]}function n(){const e=s();t.forEach(t=>t(e))}return{add:function(t,s){e.push({key:t,value:s}),n()},addTopListener:function(e){t.push(e)},get:function(t){let s;for(let n=0;n<e.length;n++)if(t===e[n].key){s=e[n];break}return s},keys:function(){const t=[];for(let s=0;s<e.length;s++)t.push(e[s].key);return t},top:s,remove:function(t){let s=-1;for(let n=0;n<e.length;n++)if(t===e[n].key){s=n;break}const i=e.splice(s,1)[0];return n(),i},removeTop:function(){const t=e.splice(e.length-1,1)[0];return n(),t},length:function(){return e.length}}})();t.a=n},"x+T+":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return a}));var n=s("Llzl"),i=s("pjml");const r="ultra.service.entitlementCache",o="entitlementCache",a="SYSTEM_ENTITLEMENTS";class l{constructor(e,t,s){this.$q=e,this.CourseModel=t,this.EntitlementModel=s,this.entitlements=new Map,this.entitlementDefers=new Map}fetchSystemEntitlements(){return this.EntitlementModel.$collection().$fetch().$asPromise()}fetchCourseEntitlements(e){return this.CourseModel.$new(e).entitlements.$fetch().$asPromise()}loadCourseEntitlements(e){if(!e)return this.$q.resolve();if(this.hasCachedCourseEntitlements(e))return this.$q.resolve();const t=this.$q.defer();if(!this.entitlementDefers.has(e)){let t;this.entitlementDefers.set(e,new Set),(t=e===a?this.fetchSystemEntitlements():this.fetchCourseEntitlements(e)).then(t=>{const s=t.filter(e=>e.hasEntitlement()).map(e=>e.uid);this.entitlements.set(e,new Set(s)),this.entitlementDefers.get(e).forEach(e=>e.resolve())},t=>this.entitlementDefers.get(e).forEach(e=>e.reject(t))).finally(()=>this.entitlementDefers.delete(e))}return this.entitlementDefers.get(e).add(t),t.promise}getCachedCourseEntitlements(e){return this.hasCachedCourseEntitlements(e)?this.entitlements.get(e):new Set}hasCachedCourseEntitlements(e){return this.entitlements.has(e)}clearEntitlementCache(e){this.entitlements.delete(e)}}l.$inject=["$q",i.m.serviceName,i.y.serviceName];class c extends l{}n.module(r,[i.N]).service(o,l)},x9Ok:function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),s.d(t,"d",(function(){return l})),s.d(t,"a",(function(){return u}));var n=s("D57K"),i=s("Llzl"),r=s("aHpC"),o=s("ZzR9");const a="ultra.components.services.route.routeListener",l="routeListener";let c=class{constructor(e){this.$rootScope=e}addRouteListener(){this.$rootScope.$on(o.b.$stateChangeSuccess,(e,t,s)=>{const n=t.name;h.emitRouteEvent(u.Changed,n,s)}),this.$rootScope.$on(o.b.$stateChangeStart,(e,t,s)=>{const n=t.name;h.emitRouteEvent(u.Changing,n,s)})}};c=Object(n.__decorate)([Object(n.__param)(0,Object(r.b)("$rootScope"))],c);class d extends c{}var u;i.module(a,[]).service(l,c),function(e){e[e.Changed=0]="Changed",e[e.Changing=1]="Changing"}(u||(u={}));const h=new class{constructor(){this.subscribers={[u.Changed]:[],[u.Changing]:[]},this.subscribe((e,t)=>{this.currentRoute={currentRouteName:e,currentParams:t}})}subscribe(e,t=u.Changed){return this.subscribers[t].push(e),()=>{this.subscribers[t]=this.subscribers[t].filter(t=>t!==e)}}emitRouteEvent(e,t,s){this.subscribers[e].forEach(e=>e(t,s))}getCurrentRoute(){return this.currentRoute}};t.b=h},xjJw:function(e,t,s){var n=s("ziER"),i=s("5JeM"),r=new n({id:"icon-small-calendar",use:"icon-small-calendar-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-calendar"><path d="M1 15h14V2H1v13zM5 1v1h6V1H5zM5 12h1M1 6h14M5 9h1M10 12h1M10 9h1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(r);e.exports=r},y3by:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("nmzr"),i=s("Llzl"),r=s("0JpG"),o=s("TnpK");const a="ultra.course.content-market.router";i.module(a,[r.moduleName,o.b]).config([o.c,e=>{e.peekState(n.ContentMarketRoutes.CONTENT_MARKET,{url:"/contentmarket?parentId&positionBefore&positionAfter&position",require:()=>Promise.all([s.e(14),s.e(62),s.e(133),s.e(605)]).then(s.bind(null,"NZF1")),resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content-market/content-market"),t.loadBundle("features/course/books-and-tools/books-and-tools")])]},panelClass:"full",pageTitle:"course.contentMarket.contentMarketName",peekStates:["partner-tool",n.LtiRoutes.LTI],params:{mode:null}})}])},yA26:function(e,t,s){"use strict";s.r(t),s.d(t,"moduleName",(function(){return a})),s.d(t,"controllerName",(function(){return l})),s.d(t,"template",(function(){return c})),s.d(t,"requireName",(function(){return d})),s.d(t,"BbOffcanvasController",(function(){return u})),s.d(t,"Controller",(function(){return h}));var n=s("D57K"),i=s("Llzl"),r=s("w9Zy"),o=s("aHpC");const a="ultra.controllers.bbOffcanvas",l="BbOffcavasController",c="",d="components/services/bb-offcanvas/bb-offcanvas-controller";let u=class{constructor(e,t,s){const n=t.open({template:e.template,trapFocus:e.trapFocus,panelClass:e.panelClass||"peek",pageTitle:e.pageTitle,anchor:e.anchor,showType:e.showType,container:e.container,scope:e.scope||s,close:e.close,closed:e.closed,open:e.open,opened:e.opened,overlay:null==e.overlay||e.overlay,stateName:e.stateName,disableFocusHandling:!!e.disableFocusHandling,banner:e.banner});t.addBbOffcanvasElementPromise(n,e.stateName)}};u=Object(n.__decorate)([Object(n.__param)(0,Object(o.b)("offCanvasArgs")),Object(n.__param)(1,Object(o.b)(r.e)),Object(n.__param)(2,Object(o.b)("$scope"))],u);class h extends u{}i.module(a,[r.d]).controller(l,u)},yC9S:function(e,t,s){"use strict";(function(e){s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"c",(function(){return a}));var n=s("Llzl"),i=s("nsO7");class r{static OnRootScope(e,t,s){return r.unbindOnDestroy(e,e.$root.$on(t,s))}static OnScope(e,t,s){return r.unbindOnDestroy(e,e.$on(t,s))}static unbindOnDestroy(e,t){return e.$on("$destroy",t),t}static OnWindow(t,s,n){const o=e(window);o.on(t,s);const a=Object(i.once)(()=>o.off(t,s));return r.unbindOnDestroy(n,a),a}}function o(e){return t=>{if(!e.module&&!e.moduleName)throw Error("Component must define a module or moduleName");(e.module?e.module:n.module(e.moduleName,e.requireModules||[])).component(e.componentName,n.extend(e,{controller:t}))}}class a{constructor(e){this.$ngRedux=e}$onInit(){this.unsubscribeRedux=this.$ngRedux.connect(this.mapStateToProps.bind(this),this.selectActions()||this.mapDispatchToActions.bind(this))((e,t)=>{this.componentWillReceiveState(e),this.actions=t,this.props=e})}$onDestroy(){this.unsubscribeRedux()}selectActions(){return{}}mapDispatchToActions(e){return{}}}}).call(this,s("5iHu"))},yCC5:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"a",(function(){return a})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return c})),s.d(t,"Ub",(function(){return d})),s.d(t,"Vb",(function(){return u})),s.d(t,"h",(function(){return h})),s.d(t,"i",(function(){return m})),s.d(t,"j",(function(){return p})),s.d(t,"k",(function(){return g})),s.d(t,"u",(function(){return b})),s.d(t,"v",(function(){return f})),s.d(t,"D",(function(){return v})),s.d(t,"U",(function(){return S})),s.d(t,"kb",(function(){return y})),s.d(t,"vb",(function(){return C})),s.d(t,"Eb",(function(){return I})),s.d(t,"t",(function(){return $})),s.d(t,"w",(function(){return w})),s.d(t,"y",(function(){return T})),s.d(t,"x",(function(){return E})),s.d(t,"A",(function(){return k})),s.d(t,"E",(function(){return P})),s.d(t,"F",(function(){return A})),s.d(t,"H",(function(){return R})),s.d(t,"z",(function(){return O})),s.d(t,"s",(function(){return D})),s.d(t,"Yb",(function(){return _})),s.d(t,"I",(function(){return N})),s.d(t,"J",(function(){return L})),s.d(t,"P",(function(){return M})),s.d(t,"Q",(function(){return x})),s.d(t,"B",(function(){return j})),s.d(t,"C",(function(){return G})),s.d(t,"N",(function(){return U})),s.d(t,"O",(function(){return F})),s.d(t,"R",(function(){return B})),s.d(t,"S",(function(){return q})),s.d(t,"T",(function(){return H})),s.d(t,"K",(function(){return z})),s.d(t,"L",(function(){return V})),s.d(t,"M",(function(){return K})),s.d(t,"W",(function(){return W})),s.d(t,"G",(function(){return J})),s.d(t,"l",(function(){return Y})),s.d(t,"m",(function(){return Q})),s.d(t,"n",(function(){return Z})),s.d(t,"p",(function(){return X})),s.d(t,"o",(function(){return ee})),s.d(t,"q",(function(){return te})),s.d(t,"V",(function(){return se})),s.d(t,"X",(function(){return ne})),s.d(t,"cb",(function(){return ie})),s.d(t,"hb",(function(){return re})),s.d(t,"eb",(function(){return oe})),s.d(t,"fb",(function(){return ae})),s.d(t,"r",(function(){return le})),s.d(t,"gb",(function(){return ce})),s.d(t,"jb",(function(){return de})),s.d(t,"db",(function(){return ue})),s.d(t,"Y",(function(){return he})),s.d(t,"Z",(function(){return me})),s.d(t,"ib",(function(){return pe})),s.d(t,"bb",(function(){return ge})),s.d(t,"ab",(function(){return be})),s.d(t,"lb",(function(){return fe})),s.d(t,"mb",(function(){return ve})),s.d(t,"nb",(function(){return Se})),s.d(t,"pb",(function(){return ye})),s.d(t,"ob",(function(){return Ce})),s.d(t,"qb",(function(){return Ie})),s.d(t,"rb",(function(){return $e})),s.d(t,"sb",(function(){return we})),s.d(t,"tb",(function(){return Te})),s.d(t,"ub",(function(){return Ee})),s.d(t,"wb",(function(){return ke})),s.d(t,"Cb",(function(){return Pe})),s.d(t,"yb",(function(){return Ae})),s.d(t,"Ab",(function(){return Re})),s.d(t,"xb",(function(){return Oe})),s.d(t,"zb",(function(){return De})),s.d(t,"Bb",(function(){return _e})),s.d(t,"Db",(function(){return Ne})),s.d(t,"Fb",(function(){return Le})),s.d(t,"Gb",(function(){return Me})),s.d(t,"Jb",(function(){return xe})),s.d(t,"Ob",(function(){return je})),s.d(t,"Lb",(function(){return Ge})),s.d(t,"Pb",(function(){return Ue})),s.d(t,"Rb",(function(){return Fe})),s.d(t,"Ib",(function(){return Be})),s.d(t,"Qb",(function(){return qe})),s.d(t,"Nb",(function(){return He})),s.d(t,"Kb",(function(){return ze})),s.d(t,"Mb",(function(){return Ve})),s.d(t,"Hb",(function(){return Ke})),s.d(t,"Wb",(function(){return We})),s.d(t,"Sb",(function(){return Je})),s.d(t,"Tb",(function(){return Ye})),s.d(t,"Xb",(function(){return Qe})),s.d(t,"Zb",(function(){return Ze})),s.d(t,"ac",(function(){return Xe})),s.d(t,"cc",(function(){return et})),s.d(t,"dc",(function(){return tt})),s.d(t,"bc",(function(){return st})),s.d(t,"ec",(function(){return nt})),s.d(t,"fc",(function(){return it})),s.d(t,"gc",(function(){return rt})),s.d(t,"hc",(function(){return ot})),s.d(t,"ic",(function(){return at})),s.d(t,"jc",(function(){return lt})),s.d(t,"kc",(function(){return ct})),s.d(t,"lc",(function(){return dt})),s.d(t,"mc",(function(){return ut})),s.d(t,"nc",(function(){return ht})),s.d(t,"oc",(function(){return mt})),s.d(t,"pc",(function(){return pt})),s.d(t,"qc",(function(){return gt})),s.d(t,"rc",(function(){return bt})),s.d(t,"sc",(function(){return ft})),s.d(t,"tc",(function(){return vt})),s.d(t,"uc",(function(){return St})),s.d(t,"wc",(function(){return yt})),s.d(t,"vc",(function(){return Ct})),s.d(t,"xc",(function(){return It})),s.d(t,"yc",(function(){return $t})),s.d(t,"zc",(function(){return wt}));const n="AnalyticsEventModel",i="AnalyticsForLearnModel",r="AnnotationsModel",o="AnnouncementModel",a="AllyModel",l="AssessmentDetail",c="AssessmentExceptionModel",d="Question",u="QuestionAttempt",h="BlockedUserModel",m="BrandModel",p="CalendarModel",g="CalendarItemModel",b="CourseCalendarsModel",f="CourseCalendarItemModel",v="CourseDueDateCalendarItemModel",S="DueDateCalendarItemModel",y="InstitutionCalendarItemModel",C="OfficeHoursModel",I="PersonalCalendarItemModel",$="CourseModel",w="CourseCollab",T="CourseCollabUltra",E="CourseCollabSession",k="CourseContentModel",P="CourseEngagementParticipant",A="CourseEngagementUserStateModel",R="CourseExportModel",O="CourseConditionalReleaseModel",D="ConversionTaskModel",_="ScheduledTaskModel",N="CourseForumModel",L="CourseForumCountModel",M="CourseMessageModel",x="CourseMessageFolderModel",j="CourseConversationModel",G="CourseConversationMessageModel",U="CourseMembershipModel",F="CourseMembershipInviteModel",B="CoursePreferenceModel",q="CourseRole",H="CourseScheduleModel",z="CourseGroupModel",V="CourseGroupAssociationModel",K="CourseIndicatorModel",W="ExternalCourse",J="CourseEntitlementModel",Y="CloudDriveModel",Q="CloudDriveContent",Z="CloudDriveDownloadMessage",X="CloudDriveTask",ee="CloudDriveMeModel",te="CollabUltraPing",se="EntitlementModel",ne="FileModel",ie="GradeAttemptModel",re="GradeGroupAttemptModel",oe="GradeCategoryModel",ae="GradeColumnModel",le="ColumnSummaryModel",ce="GradeDetailModel",de="GradeSchemaModel",ue="GradeBulkViewModel",he="GradebookModel",me="GradebookSettingsModel",pe="GradeNotationModel",ge="GradedQuestionAttemptModel",be="GradedOriginalityModel",fe="InstitutionRoleModel",ve="LanguagesModel",Se="LtiDomainConfigModel",ye="LtiSettingsModel",Ce="LtiPlacementModel",Ie="MyPreferenceModel",$e="NotificationModel",we="NotificationGeneralSettingsModel",Te="NotificationSettingModel",Ee="NotificationSettingsContainerModel",ke="PartnerModel",Pe="PartnerStatusModel",Ae="PartnerCourseModel",Re="PartnerLinkedCourseModel",Oe="PartnerContentIdModel",De="PartnerGradeModel",_e="PartnerSettingsModel",Ne="PartnerToolModel",Le="PredictCourseModel",Me="PredictCourseSearch",xe="PredictFavoriteModel",je="PredictPreferences",Ge="PredictInstitutionPreference",Ue="PredictSettingsModel",Fe="PredictSystemSettingsModel",Be="PredictDynamicOptionModel",qe="PredictStudentModel",He="PredictPermissionsModel",ze="PredictFtueModel",Ve="PredictNoteModel",Ke="PredictCustomFieldSettingsModel",We="RiskBucketDistributionModel",Je="PrivacyPolicyModel",Ye="ProctoringServiceModel",Qe="Rubric",Ze="ScormReportItemModel",Xe="StreamModel",et="SystemInfoModel",tt="SystemPreferenceModel",st="StudentPreviewModel",nt="TargetedNotificationModel",it="TelemetryActivityVsGradeModel",rt="TelemetryContentActivityInDetailModel",ot="TelemetryCourseActivityModel",at="TelemetryCourseGradesModel",lt="TelemetryCourseNotificationsModel",ct="TelemetryDiscussionActivityModel",dt="TelemetryDiscussionXrayModel",ut="TelemetryMultimediaActivityInDetailModel",ht="TelemetryMultimediaStatisticsModel",mt="TelemetryNotificationsModel",pt="TelemetryNotificationUsersModel",gt="TelemetryStudentActivityModel",bt="TelemetryStudentGradesModel",ft="TelemetrySufficientDataModel",vt="TermModel",St="ThemeModel",yt="ToolAvailabilityModel",Ct="ToolsModel",It="TrialSupportTicketsModel",$t="UploadingFile",wt="UserModel"},yCJt:function(e,t){e.exports='<svg id="icon-large-avatar-multiple" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><g fill="none"  stroke-miterlimit="10"><path d="M37.685 17.545C37.976 12.214 41.593 8 46.012 8c4.609 0 8.345 4.583 8.345 10.237s-3.737 10.237-8.345 10.237c-1.683 0-3.25-.612-4.562-1.663"/><path d="M44.685 44.789h11.676C57.996 42.569 59 39.838 59 36.846c0-5.068-2.81-9.419-6.894-11.656M18.949 26.469c-1.387 1.26-3.103 2.005-4.962 2.005-4.609 0-8.345-4.583-8.345-10.237S9.379 8 13.987 8c4.39 0 7.988 4.158 8.32 9.438"/><path d="M7.894 25.191C3.81 27.428 1 31.779 1 36.847c0 2.992 1.004 5.722 2.639 7.943H15.27"/><g><ellipse cx="30" cy="27.514" rx="11.266" ry="13.223"/><path d="M19.619 32.661c-2.532 3.407-4.644 8.708-4.644 13.758 0 2.317.343 4.528.942 6.581h28.167c.599-2.054.942-4.264.942-6.581 0-5.09-2.075-10.343-4.644-13.758"/></g></g></svg>'},yDoS:function(e,t,s){},yGso:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("Llzl"),i=s("k9iv"),r=s("0JpG"),o=s("w9Zy"),a=s("Fvsw"),l=s("ZzN+"),c=s("pjml"),d=s("TnpK");const u="ultra.base.courses.routes";n.module(u,[i.c,r.moduleName,a.a,o.d,c.N,d.b,l.a]).config([d.c,e=>{e.peekState("external",{abstract:!0}).peekState("external.create",{url:"/external/create",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/base/courses/external/external-course")]},require:()=>Promise.all([s.e(16),s.e(29),s.e(144)]).then(s.bind(null,"hwlu")),pageTitle:"course.external.panelTitleAdd"}).peekState("external.edit",{url:"/external/edit/:id",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/base/courses/external/external-course")]},require:()=>Promise.all([s.e(16),s.e(29),s.e(144)]).then(s.bind(null,"hwlu")),pageTitle:"course.external.panelTitleEdit"}).peekState("external.description",{url:"/external/description/:courseId",resolve:{currentCourse:["$stateParams",c.m.serviceName,c.z.serviceName,(e,t,s)=>{const n=e.courseId;return s.$new(n).$fetch().$asPromise().then(e=>{const s=t.$new();return s.id=e.id,s.name=e.title,s.description=e.description,s.displayName=e.title,s})}],translations:[r.serviceName,e=>e.loadBundle("features/course/description/course-description")]},require:()=>s.e(142).then(s.bind(null,"8WQs")),pageTitle:"course.description.header"})}])},yXB1:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("Llzl"),i=s("0JpG"),r=s("TnpK");const o="ultra.course.exports.router";n.module(o,[r.b,i.moduleName]).config([r.c,e=>{e.peekState("exports",{url:"/exportsPanel",resolve:{translations:[i.serviceName,e=>e.loadBundle("features/course/exports/course-export")]},require:()=>s.e(606).then(s.bind(null,"m+3A")),pageTitle:"course.export.exportPanel.head"})}])},yZnR:function(e,t){e.exports='<bb-modal id="max-size-warning-modal" class="notification max-size-warning-modal"\n         modal-title-key="components.directives.fileUpload.maxSizeWarningTitle"\n         analytics-id-tag-prefix="max-size-warning-modal"\n         modal-aria-type="alertdialog"\n         >\n  <div name="modal-contents">\n    <p class="warning-message" bb-translate="components.directives.fileUpload.maxSizeWarningMessage" translate-values="{maxFileSize: calculateSizeInMib(maxFileSize)}"></p>\n    <div class="files-info">\n      <ul class="files-info-list">\n        <li ng-repeat="file in overSizedFiles">\n          <p class="file-info" bb-translate="components.directives.fileUpload.maxSizeWarningFiles" translate-values="{fileName: file.name, fileSize: calculateSizeInMib(file.size)}"></p>\n        </li>\n      </ul>\n    </div>\n    <p class="alternate-storage-info">\n      <span bb-translate translate-values="{alternateStorage}">\n        {{shouldRecommendAltStorageLocations ? \'components.directives.fileUpload.maxSizeWarningAlternateStorage\' : \'components.directives.fileUpload.maxSizeWarningNoAlternateStorage\'}}\n      </span>\n      <span ng-if="shouldIncludeSupportLink" ng-bind-html="supportLink"></span>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="closeModal()" analytics-id="components.directives.fileUpload.maxSizeWarningPrimary">\n      <bb-translate>components.directives.fileUpload.maxSizeWarningPrimary</bb-translate>\n  </button>\n</bb-modal>\n'},"yo/t":function(e,t){e.exports='<div>\n  <div class="notification-container {{::toastStatus()}}">\n    <div class="close-notification">&times;</div>\n    <div class="progress-indicator icon">\n      <i class="{{::toastIcon()}}"></i>\n    </div>\n    <span class="progress-status {{::toastClass()}}">\n    </span>\n  </div>\n</div>\n'},yytE:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="course.content.ltiNeedsApprovalTitle"\n          analytics-id-tag-prefix="course.content.ltiNeedsApproval">\n  <div name="modal-contents">\n    <p ng-if="hasEmail" bb-translate>course.content.ltiNeedsApprovalDescription</p>\n    <p ng-if="hasEmail"><a href="mailto:{{ ::email }}" analytics-id="components.services.lti.needsApproval.email.link">{{ ::email }}</a></p>\n    <p ng-if="!hasEmail" bb-translate>course.content.ltiNeedsApprovalDescriptionNoEmail</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="global.ok"\n          bb-translate>global.ok</button>\n</bb-modal>'},z6Q5:function(e,t,s){"use strict";var n=s("nsO7"),i=s("Llzl"),r=s("5MwF"),o=s("lEL+");const a=[];function l(){return a[a.length-1]}s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return u}));const c="ultra.service.batch-utility-rest-api",d="ultra.service.batch-utility-rest-api.service",u="batch-utility-rest-api-param",h=[];function m(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}class p{constructor(e,t,s,n){this.position=e,this.deferred=t,this.reqConfig=s,this.token=n}}let g=0;i.module(c,["ng",o.a]).config(["$httpProvider",function(e){e.interceptors.push(["$injector","$log",(e,t)=>{const s={};return{request(o){const a=e.get("$q");if(o.params&&o.params[u]&&new RegExp("^"+m(o.params[u].baseUrl)).test(o.url)){const c=a.defer(),d=o.params[u];return delete o.params[u],d.trackId=d.trackId||""+g++,Object.prototype.hasOwnProperty.call(s,d.trackId)||(s[d.trackId]={token:d,queue:[]},d.sendDeferred.promise.then((l=d.trackId,function(){const o=s[l],a=new RegExp("^"+m(o.token.baseUrl));!r.a.features.batchRestAPI&&o.token.batchUrl===r.a.apiBasePath+"/v1/utilities/batch"||1===o.queue.length?(delete s[l],e.get("$q").all(o.queue.map(t=>{const s=function(e){return t.deferred.resolve(i.extend({},t.reqConfig,{method:"JSONP",cache:{get:()=>[e.status,e.data,e.headers]}})),{statusCode:e.status,body:e.data,method:t.reqConfig.method,headers:{},relativeUrl:t.reqConfig.url.replace(r.a.apiBasePath+"/","")}};return e.get("$http")(t.reqConfig).then(s,s)})).then(e=>{o.token.finalDeferred.resolve(e)})):o.queue.length>1?e.get("$http")({method:"PUT",url:o.token.batchUrl,data:o.queue.map((e,s)=>{const i=e.reqConfig;return t.debug(`${i.method} ${i.url} will be sent by batch request "${o.token.batchUrl}?xb=${o.token.trackId}[${s}]"`),{method:i.method,relativeUrl:i.url.replace(a,"")+"?"+n(i.params).omitBy(n.isUndefined).map((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).value().join("&"),body:i.data}}),params:{xb:l}}).then(e=>{o.queue.forEach(t=>{const s=t.reqConfig,n=e.data[t.position];t.deferred.resolve(i.extend({},s,{method:"JSONP",cache:{get:()=>[n.statusCode,n.body,n.headers]}}))}),o.token.finalDeferred.resolve(e.data),delete s[l]}):(o.token.finalDeferred.resolve([]),delete s[l])}))),s[d.trackId].queue.push(new p(s[d.trackId].queue.length,c,o,d)),c.promise}var l;return a.when(o)}}}])}]).config(["$provide",function(e){e.decorator("$http",["$delegate",function(e){const t=function(t){var s;return h.length>0&&(t.params=t.params||{},Object.prototype.hasOwnProperty.call(t.params,u)||(t.params[u]=n.last(h))),l()&&l().$emit("BEFORE_REQUEST",t),void 0!==(s=(t.params||{})[u])&&(s.totalRequests=(s.totalRequests||0)+1),e(t)};return function(...e){n.each(e,(function(e){t[e]=function(s,n){return t(i.extend({},n||{},{method:e,url:s}))}}))}("get","delete","head","jsonp"),function(...e){n.each(e,(function(e){t[e]=function(s,n,r){return t(i.extend({},r||{},{method:e,url:s,data:n}))}}))}("post","put","patch"),function(...s){n.each(s,(function(s){Object.defineProperty(t,s,{enumerable:!0,get:()=>e[s],set(t){e[s]=t}})}))}("defaults","pendingRequests"),t}])}]).factory(d,["$rootScope","$q","$log",o.b,function(e,t,s,i){return{performBatch(e,t,s){const n=this.newToken.apply(this,Array.prototype.slice.call(arguments).splice(1));h.push(n);const i=this.awaitBatch(e);return n.autoSend=!0,i()},awaitBatch(e){if(0===h.length)throw new Error("No batch token in current context! Please invoke in the callstack of performBatch");const i=n.last(h);return i.autoSend=!1,()=>{let r;n.last(h)!==i&&h.push(i),i.autoSend=!0;try{r=e(i)}catch(e){s.error(e)}return h.pop(),i.autoSend&&i.send(),r?t.resolve(r):i.finalDeferred.promise}},newToken(e=r.a.apiBasePath+"/v1/utilities/batch",s=r.a.apiBasePath+"/"){const n=t.defer();return{send(){return this.totalRequests?this.sendDeferred.resolve():this.finalDeferred.resolve([]),this.finalDeferred.promise},sendDeferred:t.defer(),finalDeferred:n,batchUrl:e,baseUrl:s,autoSend:!1,promise:n.promise,totalRequests:0}}}}])},zFCC:function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return a}));var n=s("nsO7"),i=s("Llzl"),r=s("lEL+");const o="ultra.service.intersectionobserver.directive",a="bbIntersectionObserver";i.module(o,[r.a]).directive(a,[function(){return{restrict:"A",scope:!1,controller:["$scope","$element",r.b,function(e,t,s){if("IntersectionObserver"in window){const t=[],i=new IntersectionObserver(r=>{n(r).map(e=>({entry:e,data:n.find(t,t=>t.el===e.target)})).each(({entry:e,data:s})=>{s.fn(s.el,s.scope,e)&&(n.remove(t,t=>t.el===e.target),i.unobserve(e.target))}),s(n.noop,e)},{root:null,rootMargin:"0px",threshold:0});e.$on("$destroy",(function(){i.disconnect()})),Object.assign(this,{link(e,s,r){s.$on("$destroy",()=>{i.unobserve(e),n.remove(t,t=>t.el===e)}),i.observe(e),t.push({el:e,scope:s,fn:r})},unlink(e){i.unobserve(e),n.remove(t,t=>t.el===e)}})}else Object.assign(this,{link(e,t,s){s(e,t,{isIntersecting:!0,boundingClientRect:void 0,intersectionRatio:void 0,intersectionRect:void 0,rootBounds:void 0,target:e,time:void 0})},unlink:n.noop})}]}}])},zIHT:function(e,t){e.exports='<bb-modal id="student-preview-modal" role="alertdialog" class="notification" bb-translate-attrs="{\'aria-label\': \'components.services.studentPreview.modalTitleKey\'}"\n          modal-title-key="{{::courseOrgTokenPrefix}}.studentPreview.modalTitleKey" aria-describedby="first-time-confimation"\n          analytics-id-tag-prefix="course.outline.studentPreview.firstTimeConfirmation">\n  <div name="modal-contents">\n    <bb-svg-icon size="custom" icon="preview-user-avatar"></bb-svg-icon>\n    <p id="first-time-info" bb-translate>\n      {{::courseOrgTokenPrefix}}.studentPreview.firstTimeConfirmation\n    </p>\n  </div>\n  <button name="modal-footer-button-primary"\n          type="button"\n          class="button js-discard-changes js-primary-button"\n          ng-click="$parent.$close()"\n          analytics-id="course.outline.studentPreview.firstTimeConfirmation.startPreview.button">\n    <span bb-translate="components.services.studentPreview.startPreview"></span>\n  </button>\n  <button name="modal-footer-button-secondary"\n          type="button"\n          class="button button--secondary js-cancel-discard js-secondary-button"\n          ng-click="$parent.$dismiss()"\n          analytics-id="course.outline.studentPreview.cancel.button">\n    <span bb-translate="components.services.studentPreview.cancel"></span>\n  </button>\n</bb-modal>\n'},zJP2:function(e,t,s){"use strict";var n=s("9OUN"),i=s("IbyE"),r=s("oPIA"),o=s("td+C"),a=s("TWlR");t.a=new class{constructor(e){this.integrationService=e,this.registerProctoringProvider=(e,t)=>e.proctoringPlacementHandle?this.hasIntegration(e.proctoringPlacementHandle)?(console.warn(`Cannot register provider: ${e.proctoringPlacementHandle} already registered`),void this.integrationService.sendMessage({type:r.I,proctoringPlacementHandle:e.proctoringPlacementHandle,status:r.p.Failure,error:r.Z.ExistingRegistration,errorMessage:"proctoringPlacementHandle already registered"},t)):(this.addIntegration({proctoringPlacementHandle:e.proctoringPlacementHandle,integrationId:t.id}),void this.integrationService.sendMessage({type:r.I,proctoringPlacementHandle:e.proctoringPlacementHandle,status:r.p.Success},t)):(console.warn("Cannot register provider: proctoringPlacementHandle was not specified"),void this.integrationService.sendMessage({type:r.I,proctoringPlacementHandle:e.proctoringPlacementHandle,status:r.p.Failure,error:r.Z.MissingPlacementHandle,errorMessage:"proctoringPlacementHandle was not provided"},t)),this.listeners=new Map}init(e){this.integrationService.addIntegrationMessageType(r.I,this.registerProctoringProvider),this.correlatedMessenger=Object(a.a)(r.J,{}),this.ngRedux=e,this.subscribeToRedux(e)}getProctoringIntegration(e){return this.listeners.get(e)}addIntegration(e){this.listeners.set(e.proctoringPlacementHandle,e)}hasIntegration(e){return void 0!==this.getProctoringIntegration(e)}subscribeToRedux(e){e.connect(null,e=>Object(n.bindActionCreators)({loadProctoringServices:i.actions.proctoringServices.loadProctoringServices},e))(this)}async loadAvailableProctoringServices(){return await this.loadProctoringServices(),i.select.proctoringServices.getAvailableProctoringServices(this.ngRedux.getState())}async loadAvailableProctoringServicesWithIntegration(){return(await this.loadAvailableProctoringServices()).filter(e=>this.hasIntegration(e.handle))}async loadProctoringService(e){if(!e)return Promise.resolve(void 0);return await this.loadProctoringServices(),i.select.proctoringServices.getProctoringServices(this.ngRedux.getState()).find(t=>t.handle===e)}async promptIntegrationToSaveSettings(e,t,s,n){const i=this.getProctoringIntegration(e);if(!i)throw new Error(`No proctoring UEF integration registered for ${e}, or it is currently unavailable.`);return this.correlatedMessenger.sendMessage({type:r.J,courseUuid:t,contentId:s,enabled:n,proctoringPlacementHandle:e},i.integrationId)}}(o.a)},zXZW:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("Llzl"),i=s("4HXK");const r="ultra.services.errorHandler",o=["$delegate","$injector",(e,t)=>{let s;return Object.assign((function(n,r){e(n,r),s||(s=t.get(i.b)),"undefined"!=typeof NREUM&&NREUM.noticeError(n)}),e)}];n.module(r,[i.a]).config(["$provide",e=>{e.decorator("$exceptionHandler",o)}])},zYa8:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("Llzl"),i=s("ERkP"),r=s("1ZbL");function o(e,t,s){const o={Class:t=>i.createElement(e,{...t}),attributes:["color","className","titleAccess"]};n.module(t,[]).component(s,Object(r.a)(o))}},zlFc:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-forbidden.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-forbidden">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-forbidden.description</p>\n    <pre>{{ response | json }}</pre>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},zoPb:function(e,t,s){"use strict";s.r(t),s.d(t,"ConversionContentCategory",(function(){return l})),s.d(t,"ConversionReportStatus",(function(){return c})),s.d(t,"ConversionQueueTaskStatus",(function(){return d})),s.d(t,"serviceName",(function(){return u}));var n=s("yCC5"),i=s("Rjd/"),r=s("nkTj"),o=s("nbDY"),a=s.n(o);class l extends a.a{constructor(e,t,s){super(e),this.category=e,this.categoryKey=t,this.categoryImage=s,this.mediumIconsByCategory={Assessment:"test",Announcements:"announcements",Blog:"blog",Course:"course",CourseLink:"link",CourseSettings:"settings",DiscussionBoard:"discussion",Gradebook:"grades",Group:"groups",Message:"messages",ReleaseSettings:"settings",Rubric:"rubric",TableOfContents:"content-collection",Wiki:"wiki",Content:"document-blank"}}getLocalizableCategoryNameKey(){return this.categoryKey}getMediumCategoryIconOrDefault(){return this.mediumIconsByCategory[this.category]||"document-blank"}getCategoryIconName(){return this.categoryImage?this.categoryImage:"document-blank"}}l.Assessment=new l("Assessment","ultra.convert.category.assessment","test"),l.Announcements=new l("Announcements","ultra.convert.category.announcements","announcement"),l.Blog=new l("Blog","ultra.convert.category.blog","blog"),l.Collab=new l("Collab","ultra.convert.category.collab"),l.Course=new l("Course","ultra.convert.category.course","course"),l.CourseLink=new l("CourseLink","ultra.convert.category.courseLink","link"),l.CourseSettings=new l("CourseSettings","ultra.convert.category.courseSettings","settings"),l.Content=new l("Content","ultra.convert.category.content","document-blank"),l.ContentSettings=new l("ContentSettings","ultra.convert.category.contentSettings","settings"),l.DiscussionBoard=new l("DiscussionBoard","ultra.convert.category.discussionBoard","discussion"),l.Gradebook=new l("Gradebook","ultra.convert.category.gradebook","grades"),l.Group=new l("Group","ultra.convert.category.group","groups"),l.Message=new l("Message","ultra.convert.course.message.unsupported","messages"),l.ReleaseSettings=new l("ReleaseSettings","ultra.convert.category.releaseSettings","settings"),l.Rubric=new l("Rubric","ultra.convert.category.rubric","rubric"),l.TableOfContents=new l("TableOfContents","ultra.convert.category.tableOfContents","content-collection"),l.Task=new l("Task","ultra.convert.category.task"),l.Wiki=new l("Wiki","ultra.convert.category.wiki","wiki");class c extends a.a{}c.Success=new c("Success"),c.Failure=new c("Failure"),c.Partial=new c("Partial"),c.Unavailable=new c("Unavailable");class d extends a.a{}d.Waiting=new d("WAITING"),d.Assigned=new d("ASSIGNED"),d.Running=new d("RUNNING"),d.Complete=new d("COMPLETE"),d.CompleteErrors=new d("COMPLETE_ERRORS"),d.Incomplete=new d("INCOMPLETE");const u=n.s;i.a.factory(u,["restmod",r.d,(e,t)=>{return e.model().mix({$config:{primaryKey:"taskId"}})}])}});