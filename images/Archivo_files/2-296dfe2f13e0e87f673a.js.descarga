(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"8wib":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-settings",use:"icon-medium-settings-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-settings"><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4277 6.2062l-2.779.674a8.3399 8.3399 0 00-1.7651-1.7008l.5771-2.8038a.4939.4939 0 00-.3024-.5594l-1.9855-.7817a.4933.4933 0 00-.6028.2026l-1.4904 2.444a8.2935 8.2935 0 00-2.4509.0405L9.0563 1.333a.4956.4956 0 00-.6098-.1818l-1.9568.8509a.4934.4934 0 00-.2827.5703l.674 2.778a8.3417 8.3417 0 00-1.7018 1.7651l-2.8038-.5761a.4946.4946 0 00-.5594.3024l-.7817 1.9855a.495.495 0 00.2026.6028l2.444 1.4894a8.3611 8.3611 0 00.0406 2.4509l-2.3887 1.5734a.4952.4952 0 00-.1809.6098l.851 1.9568a.4938.4938 0 00.5692.2827l2.779-.6741a8.3178 8.3178 0 001.7652 1.7019l-.5772 2.8028a.4936.4936 0 00.3034.5594l1.9845.7827a.4946.4946 0 00.6029-.2026l1.4903-2.4441a8.3594 8.3594 0 002.451-.0405l1.5724 2.3877a.4943.4943 0 00.6097.1819l1.9569-.8509a.4953.4953 0 00.2836-.5703l-.674-2.7791a8.3321 8.3321 0 001.7008-1.7641l2.8038.5772a.4948.4948 0 00.5594-.3034l.7817-1.9855a.4938.4938 0 00-.2026-.6029l-2.444-1.4893a8.298 8.298 0 00-.0405-2.451l2.3887-1.5733a.4936.4936 0 00.1808-.6098l-.8509-1.9559a.4944.4944 0 00-.5693-.2836z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path fill-rule="evenodd" clip-rule="evenodd" d="M12 16c-2.2057 0-4-1.7943-4-4s1.7943-4 4-4 4 1.7943 4 4-1.7943 4-4 4z" stroke-width="2" /></symbol>'});s.add(o);e.exports=o},Fdwu:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=/<!--[^\r\n]*?-->|<[^\r\n]*?>/g},"Ij+l":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("5iHu"),s=n("nsO7"),o=n("Llzl"),a=n("yC9S"),l=n("lmMM"),c=n("nYZ0"),r=n("Qbdf"),d=n("Bu0u"),h=n("pjml"),u=n("lEL+"),p=n("TnpK"),b=n("W6wm"),g=n("AuQm"),m=n("k5nV");const v="ultra.components.directives.delete";class y{constructor(e,t,n,i,s,o,a,l,c){this.$q=e,this.scope=t,this.element=n,this.attrs=i,this.ultraState=s,this.courseModel=o,this.contextCourse=a,this.ContentService=l,this.timeout=c,this.isDeleteDisabled=!1,this.focusedElement=null,t.$watch("contentId",(e,t)=>{e!==t&&this.initialize()}),this.initialize()}initialize(){this.scope.unregisterAutoSave=s.once(this.scope.$root.$on("bb-autosave-form",(e,t,n)=>{if(g.AutoSaveMessage.Saving===t){const e=i(document.activeElement);e&&e.length&&(this.focusedElement=e[0]),this.scope.savingInProgress=!0}else this.scope.savingInProgress=!1,this.timeout(()=>{this.focusedElement&&(this.focusedElement.focus(),this.focusedElement=null)},this.scope,0)})),this.scope.$on("$destroy",this.scope.unregisterAutoSave),this.scope.parent=this.scope.$parent,a.b.OnRootScope(this.scope,"disable-delete",e=>{this.isDeleteDisabled=!0}),a.b.OnRootScope(this.scope,"enable-delete",e=>{this.isDeleteDisabled=!1});const e=this.contextCourse.courseId||this.scope.courseId&&this.scope.courseId();let t;if(e&&(t=this.courseModel.$new(e)),this.scope.contentId&&!e)throw new d.a({message:"A courseId must be provided when contentId is used"});if(this.requiredArgumentsSupplied=!0,this.scope.attrTranslateKey="components.directives.delete.control-delete-label",this.attrs.confirmationHandler&&(this.modalShowType="always",this.scope.attrTranslateKey="components.directives.delete.handlers."+this.attrs.confirmationHandler.replace("resource/","")),!this.scope.content||null!=this.scope.contentId&&this.scope.contentId!==this.scope.content.$pk){if(this.scope.contentId)this.contentPromise=t.contents.$new(this.scope.contentId).$fetch().$asPromise();else if(!this.attrs.deleteFunction||!this.attrs.confirmationHandler)throw this.requiredArgumentsSupplied=!1,new d.a({message:"a content object, a contentId string, or a confirmationHandler and deleteFunction must be provided."})}else this.contentPromise=this.scope.content&&this.scope.content.$asPromise&&this.scope.content.$asPromise()||this.$q.when(this.scope.content);this.contentPromise&&this.contentPromise.then(e=>{this.scope.content=e,this.scope.content.contentHandler&&!this.scope.attrTranslateKey&&(this.scope.attrTranslateKey="components.directives.delete.handlers."+this.scope.content.contentHandler.toString().replace("resource/",""))})}getConfirmationKeyAndShowType(){return this.$q.when(this.contentPromise).then(()=>{if(this.scope.content&&this.scope.content.$resolve(),this.attrs.confirmationHandler)return this.$q.when({confirmationKey:this.attrs.confirmationHandler,showType:this.modalShowType});let e;return this.ultraState.includes("**.outline.**")?e=b.a.CourseOutline:this.ultraState.includes("**.engagement.**")&&(e=b.a.Discussions),this.scope.content.$asPromise().then(t=>this.ContentService.generateDeleteConfirmationKey(t,e).then(e=>({confirmationKey:e.ui.deleteConfirmationKey,showType:e.ui.modalShowType})))})}deleteElement(){this.attrs.deleteFunction?(this.scope.deleteFunction(),this.scope.unregisterAutoSave()):this.ContentService.deleteContent(this.scope.content).then(()=>{this.scope.parent.contentCreateItem&&(this.scope.parent.contentCreateItem.confirmCancellation=!1),this.scope.unregisterAutoSave(),this.attrs.callbackFunction?this.scope.callbackFunction():this.ultraState.leavePeekState(this.ultraState.current.name)})}}y.$inject=["$q","scope","element","attrs",p.d,h.m.serviceName,r.e,c.f,u.b];class w{constructor(e){this.$injector=e,this.restrict="E",this.template=m,this.scope={content:"=?",contentId:"=?",courseId:"&?",deleteFunction:"&?",callbackFunction:"&?",displayMode:"@?",extraClass:"@?",choices:"=?"},this.link=(e,t,n)=>{e.delete=this.$injector.instantiate(y,{scope:e,element:t,attrs:n})}}}w.$inject=["$injector",p.d],o.module(v,[r.b,c.d,l.d,h.N,p.b]).directive("bbDelete",["$injector",e=>e.instantiate(w)])},PFA5:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("zYa8"),s=n("STfh");const o="ultra.components.directives.bbUiIcon.small.Invisible";Object(i.a)(s.Invisible,o,"bbUiIconSmallInvisible")},TR8k:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-conversation",use:"icon-medium-conversation-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-conversation"><path d="M4.5 18C6.433 18 8 16.433 8 14.5S6.433 11 4.5 11 1 12.567 1 14.5 2.567 18 4.5 18zM9 23c.2624-2.4862-1.873-5-4.5-5M23 7.5c0 3.5899-2.9101 6.5-6.5 6.5-1.0821 0-2.1025-.2644-3-.7322L11 15l.5-3.3464C10.5633 10.5273 10 9.0794 10 7.5 10 3.9101 12.9101 1 16.5 1S23 3.9101 23 7.5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},XjwN:function(e,t){e.exports='<div class="panel-header persistent-white-header mode-{{mode}} panel-header-directive"\n  bb-load-bundle="components/directives/panel-header"\n  ng-class="{\'is-editable\' : panelHeader.editMode,\n   \'has-slider\': hasSlider(),\n   \'can-edit\': canEdit,\n   \'has-controls\': showConversations() || showDelete() || showParticipants() || showSettings(),\n   \'has-visibility-toggle\': showVisibility()}">\n  <div class="panel-titles-container">\n    <div ng-if="showCourse()">\n      <div class="panel-sub-title js-vr-remove-random">\n        <span ng-if="::!panelHeaderTitleTranslateKey">{{panelHeader.panelHeaderTitle}}</span>\n        <span ng-if="::panelHeaderTitleTranslateKey" bb-translate>{{::panelHeaderTitleTranslateKey}}</span>\n      </div>\n    </div>\n    <div class="panel-title-texteditor">\n      <div class="editable-title-container" ng-show="!panelHeader.editMode">\n        \x3c!-- ULTRA-13692 Since there\'s already an "Edit" button, we don\'t want keyboard users to be able to focus on the title to edit it,\n             otherwise there would be two ways to edit the title, which is confusing. However, since this title has an event listener, it\'s\n             announced as "clickable" by screenreaders, so let\'s hide it with aria-hidden and add another instance of the header just for\n             screenreaders instead. --\x3e\n        <h1 class="sr-only" bb-focus="panelHeader.focusReadonlyPanelTitle()" tabindex="-1">{{panelTitle}}</h1>\n        <h1 class="panel-title secondary-title" ng-click="panelHeader.onEditMode()" tabindex="-1" aria-hidden="true"\n            ng-class="{\'student\' : !canEdit, \'is-hovered\': panelHeader.isEditButtonHovering}" title="{{panelTitle}}"\n            analytics-id="components.directives.content.panelHeader.secondaryTitle.header">{{panelTitle}}\n        </h1>\n        <button ng-if="canEdit" class="button super-clear edit-title" type="button"\n                ng-click="panelHeader.onEditMode()"\n                ng-mouseover="panelHeader.onEditButtonMouseOver()"\n                ng-mouseleave="panelHeader.onEditButtonMouseLeave()"\n                aria-label="{{ panelHeader.getAriaLabel() }}"\n                analytics-id="course.content.panelHeader.edit.button">\n          <bb-svg-icon size="small" icon="draw" aria-hidden="true"></bb-svg-icon>\n        </button>\n      </div>\n      <div class="panel-title-input-container" ng-show="panelHeader.editMode" bb-click-outside="panelHeader.onBlurTitle()">\n        <input\n          name="panel-title"\n          class="panel-header-title panel-title secondary-title"\n          type="text"\n          autocapitalize="off"\n          ng-keydown="panelHeader.pressKey($event)"\n          maxlength="{{maxLength}}"\n          ng-model ="panelTitle"\n          ng-model-options="{ getterSetter: true }"\n          ng-blur="panelHeader.onBlurTitle($event)"\n          ng-change="panelHeader.onChangeTitle()"\n          bb-translate-attrs="{\'aria-label\':\'{{::panelHeader.panelAriaLocalizationKey}}\'}"\n          bb-placeholder="{{::panelHeader.translatedPlaceholder}}"\n          translate-attrs-values="{{::localizationAttrsValues}}"\n          id="{{::panelHeader.getTeachingBubbleTargetElementId()}}"\n          ng-attr-aria-describedby="{{panelHeader.shouldShowTeachingBubble() ? panelHeader.getTeachingBubbleTooltipId() : undefined}}"\n          analytics-id="course.content.panelHeader.title.input.text"\n          >\n          <bb-ui-teaching-bubble\n            show="panelHeader.shouldShowTeachingBubble()"\n            dismiss="panelHeader.dismissTeachingBubble"\n            headline="panelHeader.getTeachingBubbleHeadline()"\n            message="panelHeader.getTeachingBubbleMessage()"\n            target-id="panelHeader.getTeachingBubbleTargetElementId()"\n            tooltip-id="panelHeader.getTeachingBubbleTooltipId()"\n            analytics-id="panelHeader.getTeachingBubbleAnalyticsId()">\n          </bb-ui-teaching-bubble>\n      </div>\n    </div>\n  </div>\n\n  <div\n    class="header-actions-menu button-group header-group"\n    ng-class="panelHeader.getButtonGroupClass()"\n    bb-first-time-container>\n\n    <ng-transclude ng-transclude-slot="panelHeaderActions"></ng-transclude>\n\n    <div ng-if="showVisibility()"\n         class="action-item item-visibility"\n         ng-class="{\'visibility-selector-disabled\': !panelHeader.isVisibilitySelectorEnabled()}">\n      <bb-content-visibility-membership-ftue></bb-content-visibility-membership-ftue>\n\n      <bb-content-visibility-selector ng-if="content" content="content"\n                                      is-visibility-selector-enabled="panelHeader.isVisibilitySelectorEnabled()"\n                                      onchange-func="panelHeader.onChangeVisibility()"\n                                      open-panel-on-restricted="openPanelOnRestricted()"\n                                      on-restricted-selected-func="panelHeader.onRestrictedSelected()"\n                                      validation-func="panelHeader.validateVisibilityChange(visibility)"\n                                      onblur-func="panelHeader.onBlurVisibility()"\n                                      disable-restricted="disableRestricted()"\n                                      has-medium-icon="false"></bb-content-visibility-selector>\n    </div>\n\n    <div class="ally-icons" ng-if="showAllyIcon() && panelHeader.canShowAlly">\n      <div class="small-ally-icon">\n        <bb-ally-show content-id="{{::content.id}}" show-alternative-formats-link="true" show-icon="true"\n          class="ally-icon"></bb-ally-show>\n      </div>\n      <div class="medium-ally-icon">\n        <bb-ally-show content-id="{{::content.id}}" show-alternative-formats-link="true" show-icon="true" icon-size="medium"\n          class="ally-icon"></bb-ally-show>\n      </div>\n    </div>\n\n    <div ng-if="showConversations() && content.ui.hasConversationAttached && content.attachedForumLink"\n         class="action-item conversation"\n         ui-sref-active="active">\n      <button ng-click="panelHeader.gotoConversation()"\n         bb-translate-attrs="{\'aria-label\':\'components.directives.header.conversationAriaLabel\', \'title\':\'components.directives.header.conversation\'}"\n         translate-attrs-values="{\'itemTitle\':\'{{panelTitle}}\'}"\n         class="button super-clear icon open-conversation"\n         type="button"\n         bb-guidance-target component-key="components.features.course.content.assessment.ftue.class-conversation"\n         analytics-id="panel.header.conversation.visibility.button">\n        <bb-svg-icon size="medium" icon="conversation"></bb-svg-icon>\n      </button>\n    </div>\n    <div ng-if="showDelete()"\n         class="action-item delete"\n         ng-class="{\'delete-button\': showDelete() && showSettings()}"\n         ui-sref-active="active">\n      <ng-switch on="panelHeader.getDeleteDirectiveArgumentType()">\n        <bb-delete ng-switch-when="ContentOnly" extra-class="standard-button" content="content" choices="choices" analytics-id="panel.header.content.only.switch"></bb-delete>\n        <bb-delete ng-switch-when="ContentAndDelete" extra-class="standard-button" content="content" delete-function="ondeleteFunc()" choices="choices" analytics-id="panel.header.content.delete.button.switch"></bb-delete>\n        <bb-delete ng-switch-when="ContentAndHandler" extra-class="standard-button" content="content" confirmation-handler="{{ondeleteConfirmHandler}}" choices="choices" analytics-id="panel.header.content.header.button.switch"></bb-delete>\n        <bb-delete ng-switch-when="ContentAndDeleteAndHandler" extra-class="standard-button" content="content" delete-function="ondeleteFunc()" confirmation-handler="{{ondeleteConfirmHandler}}" choices="choices" analytics-id="panel.header.content.delete.handler.button.switch"></bb-delete>\n        <bb-delete ng-switch-when="DeleteAndHandler" extra-class="standard-button" delete-function="ondeleteFunc()" confirmation-handler="{{ondeleteConfirmHandler}}" choices="choices" analytics-id="panel.header.delete.handler.button.switch"></bb-delete>\n      </ng-switch>\n    </div>\n    <div ng-if="showParticipants()"\n         class="action-item participants"\n         ui-sref-active="active">\n      \x3c!--TODO: need add real route here --\x3e\n      <a bb-peek-sref="discussion-participants"\n         bb-translate-attrs="{\'aria-label\':\'components.directives.header.participants\'}"\n         class="button super-clear icon"\n         analytics-id="components.directives.discussion.participants.link">\n        <bb-svg-icon ng-if="!content.isGroupContent" size="medium" icon="people"></bb-svg-icon>\n        <bb-svg-icon ng-if="content.isGroupContent" size="medium" icon="groups"></bb-svg-icon>\n      </a>\n    </div>\n\n    <div ng-if="showSettings() && !!settingsPeekRef"\n         class="action-item settings"\n         ui-sref-active="active">\n      <a class="button super-clear icon assessment-settings-button"\n         href="javascript:void(0);"\n         ng-class="{\'disabled\': settingsDisabled()}"\n         ng-click="panelHeader.openSettingsPanel()"\n         bb-translate-attrs="{\'aria-label\':\'{{settingsLabel}}\'}"\n         analytics-id="panel.header.open.settings.panel.link">\n        <bb-svg-icon size="medium" icon="{{::panelHeader.getSettingsIcon()}}"></bb-svg-icon>\n      </a>\n    </div>\n    <ng-transclude ng-transclude-slot="panelHeaderCustomIcons" />\n  </div>\n  <div class="graded-count-wrap" ng-if="showSubmissionsGrading()">\n    <div class="graded-count-wrap-col col-numbers">\n      <div class="graded-numbers"\n      ng-if="showSubmissionsGrading() && summary.$resolved"\n      bb-translate="components.directives.header.submissions-grading.gradedCount.numbers"\n      translate-values="{gradedCount: summary.numStudentsGraded(), totalCount: summary.numEligibleToBeGraded}"\n      >\n      </div>\n      <div class="filtered-numbers" ng-if="showSubmissionsGrading() && isFiltered" bb-translate="components.directives.header.submissions-grading.filteredCount.numbers"\n      translate-values="{filteredCount}">\n      </div>\n    </div>\n    <div class="graded-count-wrap-col">\n      <p class="graded-label" ng-if="showSubmissionsGrading() && summary.$resolved" bb-translate="components.directives.header.submissions-grading.gradedCount.plural"></p>\n      <p class="graded-label" ng-if="showSubmissionsGrading() && isFiltered" bb-translate="components.directives.header.submissions-grading.filteredCount.plural"></p>\n    </div>\n  </div>\n</div>\n'},ZKRZ:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-conversation",use:"icon-small-conversation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-conversation"><path d="M15 4.5C15 6.433 13.433 8 11.5 8c-.4457 0-.872-.0833-1.264-.2352L8 8l.25-2.1985A3.4905 3.4905 0 018 4.5C8 2.567 9.567 1 11.5 1S15 2.567 15 4.5zM7 15c0-2-2-4-4-4M3 11c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(o);e.exports=o},eAzf:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("Llzl"),s=n("1ZbL"),o=n("0JpG"),a=n("gqzd");const l="ultra.components.directives.moving-member-alert",c={Class:a.MovingMemberBanner,renderLocalized:!0,withProvider:!0};i.module(l,[o.moduleName]).component("bbMovingMemberAlertBanner",Object(s.a)(c))},jMVO:function(e,t,n){},k5nV:function(e,t){e.exports='<ng-switch on="displayMode" bb-load-bundle="components/directives/delete">\n  <a href="javascript:void(0);"\n    ng-switch-when="controls"\n    ng-if="delete.requiredArgumentsSupplied"\n    bb-confirmation-needed get-confirmation-key-and-show-type="delete.getConfirmationKeyAndShowType()"\n    choices="{{choices}}"\n    show-type="{{ delete.modalShowType }}"\n    ng-click="delete.deleteElement()"\n    bb-translate-attrs="{\'aria-label\': \'{{attrTranslateKey}}\'}"\n    ng-disabled="savingInProgress"\n    class="{{extraClass}}" role="button"\n    analytics-id="components.directives.delete.deleteElement.link" \n  >\n    <span class="valign">\n      <span class="valign-content">\n        <bb-svg-icon size="small" icon="trash" class="icon-fw replaced"></bb-svg-icon>\n        <span class="ellipse" bb-translate="components.directives.delete.control-delete-label"></span>\n      </span>\n    </span>\n  </a>\n  <button ng-if="delete.requiredArgumentsSupplied"\n          bb-confirmation-needed get-confirmation-key-and-show-type="delete.getConfirmationKeyAndShowType()"\n          choices="{{choices}}"\n          ng-click="delete.deleteElement()"\n          ng-disabled="delete.isDeleteDisabled"\n          bb-translate-attrs="{\'aria-label\': \'{{attrTranslateKey}}\', \'title\': \'{{attrTranslateKey}}\'}"\n          ng-switch-default\n          class="button clear icon {{extraClass}}" type="button"\n          analytics-id="components.directives.delete.deleteElement.button"\n  >\n    <bb-svg-icon size="small" icon="trash"></bb-svg-icon>\n  </button>\n</ng-switch>'},u4ux:function(e,t,n){"use strict";n("ZKRZ"),n("yCl+"),n("l+9M"),n("1NX5"),n("TR8k"),n("vgq2"),n("DUMb"),n("v0wN"),n("Ycix"),n("8wib");var i=n("Llzl"),s=n("nsO7"),o=n("9zo4"),a=n("cs5G"),l=n("nbDY"),c=n.n(l),r=n("0JpG"),d=n("w9Zy"),h=n("Qbdf"),u=n("Fvsw"),p=n("lEL+"),b=n("TnpK"),g=n("vYaK"),m=n("FpRh"),v=n("laCM"),y=n("sLTT"),w=n("M8+u"),f=n("1ZbL"),T=n("ERkP"),H=n("TUnR"),C=n("GuFu"),S=n("SToD");const B="ultra.features.course.content.group.course-group-visibility-ftue",E={Class:Object(S.a)(({localize:e})=>{const t=Object(C.useCourseOrgTokenResolver)("components.directives.content-visibility","components.directives.content-visibility.organization");return T.createElement(H.GuidanceFeatureAnnouncement,{componentKey:"components.directives.contentVisibility.groupVisibility",announcementTitle:e.translate("components.directives.content-visibility.groupVisibility.title"),content:e.translate(t("components.directives.content-visibility.groupVisibility.content")),buttonAriaLabel:e.translate("components.directives.content-visibility.groupVisibility.buttonAriaLabel"),doneButtonText:e.translate("components.directives.content-visibility.groupVisibility.doneButtonText"),linkHref:e.translate("components.directives.content-visibility.groupVisibility.moreInfoLinkUrl"),linkText:e.translate("components.directives.content-visibility.groupVisibility.moreInfoLinkText"),closeLabel:e.translate("global.close")})}),renderLocalized:!0,withProvider:!0};i.module(B,[r.moduleName]).component("bbCourseGroupVisibilityFtue",Object(f.a)(E));var z=n("Ij+l"),A=n("zmy6"),k=n("BEvj"),$=n("PoQW");class I extends T.Component{render(){const e=document.getElementById(this.props.targetId);if(!this.props.show)return null;const t=this.props.calloutProps||{},n={directionalHint:$.DirectionalHint.bottomLeftEdge,directionalHintFixed:!0,minPagePadding:0,preventDismissOnResize:!0,...t};return T.createElement(k.TeachingBubble,{analyticsId:this.props.analyticsId,targetElement:e,headline:this.props.headline,onDismiss:this.props.dismiss,calloutProps:n,teachingBubbleTooltipId:this.props.tooltipId},this.props.message)}}const x={Class:I,bindingNames:["analyticsId","targetId","tooltipId","headline","message","show","dismiss","calloutProps"],withThemeProvider:!1};i.module("ultra.components.directives.react-toolkit.teaching-bubble",[]).component("bbUiTeachingBubble",Object(f.a)(x));var F=n("eAzf"),M=n("PFA5"),P=n("e6jQ"),L=n("7/CN"),K=n("Fdwu"),D=n("+4Px"),j=n("pjml"),O=n("XjwN"),V=n("5KgE"),R=n("g66W");n.d(t,"b",(function(){return N})),n.d(t,"a",(function(){return J}));const N="ultra.components.directives.content.panelHeader",G="TEACHING_BUBBLE_COMPONENT_KEY";class q extends c.a{}q.ContentOnly=new q("ContentOnly"),q.ContentAndDelete=new q("ContentAndDelete"),q.ContentAndHandler=new q("ContentAndHandler"),q.ContentAndDeleteAndHandler=new q("ContentAndDeleteAndHandler"),q.DeleteAndHandler=new q("DeleteAndHandler"),q.None=new q("None");class J extends c.a{}J.Gear=new J("settings"),J.Info=new J("information");class U{constructor(e,t,n,i,o,a,l,c,r,d,h,u,p){if(this.scope=e,this.element=t,this.attrs=n,this.accessibility=i,this.timeout=o,this.bbOffcanvas=a,this.context=l,this.CourseModel=c,this.localize=r,this.ultraState=d,this.contextCourse=h,this.allyService=u,this.firstTimeHelper=p,this.isEditButtonHovering=!1,this.inputId=`bb-panel-header-input-${Object(P.b)()}`,this.teachingBubbleTooltipId=`bb-panel-header-tooltip-${Object(P.b)()}`,this.teachingBubbleHasBeenShown=!0,this.teachingBubbleAnalyticsId=`bb-panel-header-tooltip-${Object(P.b)()}`,this.shouldShowFtueTeachingBubble=!1,this.dismissTeachingBubble=()=>{var e,t;this.teachingBubbleHasBeenShown=!0,null===(t=(e=this.scope).dismissTeachingBubble)||void 0===t||t.call(e),this.scope.$apply()},this.getTeachingBubbleComponentKey=()=>Object(R.a)(`${G}_${this.scope.localizationKey}`,V.a),this.getAriaLabel=(()=>{const e=s.memoize(e=>this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:"components.directives.header.aria.edit",params:{title:e},noWrap:!0,noEscape:!0}));return()=>e(this.scope.panelTitle)})(),this.scope.panelHeader=this,this.accessibility.isFocusDelayed=!0,this.configure(),r.loadBundle("components/directives/panel-header").then(()=>{this.placeholderLocalizationKey&&(this.translatedPlaceholder=this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:this.placeholderLocalizationKey,params:{date:this.context.getServerTime()},noWrap:!0})),(!this.scope.panelTitle||this.scope.focusTitleForEdit&&this.scope.focusTitleForEdit())&&this.scope.canEdit?(this.onEditMode(),this.scope.keepTitleOnEdit&&this.scope.keepTitleOnEdit()?this.element.find(".panel-header-title").get(0).setSelectionRange(0,0):this.scope.panelTitle&&(this.scope.panelTitle=""),this.timeout(()=>{this.setTeachingBubbleState()},this.scope,0)):(this.editMode=!1,this.focusReadonlyPanelTitle()&&this.forceTitleFocus())}),this.scope.setPlaceholderAsDefaultTitle&&this.scope.setPlaceholderAsDefaultTitle()&&!this.scope.panelTitle){e.$watch(()=>this.element.find("input.panel-title").attr("placeholder"),e=>{e&&(this.scope.panelTitle=e)})}this.scope.$on("panel-header-force-edit-mode",(e,t)=>{this.editMode=t}),this.scope.$on("$destroy",()=>{this.setFtueTeachingBubbleAsShown()})}configure(){this.configureLocalizationKeys(),this.element.closest(".panel-wrap").addClass("has-bb-panel-header"),this.contextCourse.course?this.courseName=this.contextCourse.course.displayName:this.scope.$watch("::content",e=>{e&&this.CourseModel.$find(e.courseId).$then(e=>{this.courseName=e.displayName})}),this.scope.$watch("::content",e=>{e&&this.allyService.isAvailable().then(e=>{e&&(this.canShowAlly=!0,this.allyService.update(this.scope,this.scope.content.id,this.allyService.getXythosIdFromContentItem(this.scope.content)))})})}focusReadonlyPanelTitle(){const{disableTitleAutofocus:e,focusTitleForEdit:t}=this.scope;return!e&&!(null==t?void 0:t())}forceTitleFocus(){if(null!=this.scope.panelTitle)this.accessibility.focusCorrectElementOnPanel();else{const e=this.scope.$watch("panelTitle",t=>{null!=t&&(this.accessibility.focusCorrectElementOnPanel(),e())})}}get panelHeaderTitle(){return this.scope.panelHeaderTitle?this.scope.panelHeaderTitle:this.courseName}getTeachingBubbleTargetElementId(){return this.inputId}getTeachingBubbleTooltipId(){return this.teachingBubbleTooltipId}getTeachingBubbleAnalyticsId(){return this.teachingBubbleAnalyticsId}inputExists(){return this.element.find(`#${this.getTeachingBubbleTargetElementId()}`).length>0}getTeachingBubbleHeadline(){return this.localize.translateSync({key:this.teachingBubbleHeadlineLocalizationKey,locale:this.localize.getLocale(this.scope)})}getTeachingBubbleMessage(){return this.localize.translateSync({key:`components.directives.header.teachingBubble.${this.contextCourse.course&&this.contextCourse.course.isOrganization?"organization.":""}message`,locale:this.localize.getLocale(this.scope)})}setTeachingBubbleState(){if(this.scope.setTeachingBubbleAsFtue){const e=this.element.closest(".bb-offcanvas-panel").attr("data-base-state-name"),t=this.getTeachingBubbleComponentKey();this.firstTimeHelper.shouldShow(t,e,!1).then(e=>{this.shouldShowFtueTeachingBubble=e,this.teachingBubbleHasBeenShown=!this.shouldShowFtueTeachingBubble})}else this.teachingBubbleHasBeenShown=!1}setFtueTeachingBubbleAsShown(){if(this.scope.setTeachingBubbleAsFtue&&this.shouldShowFtueTeachingBubble){const e=this.getTeachingBubbleComponentKey();this.firstTimeHelper.hide(e)}}onBlurTitle(e){const t=e.target,n=e.relatedTarget;t&&n&&Object(L.d)(t)!==Object(L.d)(n)?this.scope.panelTitle&&this.scope.panelTitle.length||(this.scope.panelTitle=this.translatedPlaceholder,this.delayedTitleBlur()):(this.onReadMode(),this.scope.hasError||this.delayedTitleBlur())}delayedTitleBlur(){this.scope.onblurFuncTitle&&this.timeout(()=>{this.scope.onblurFuncTitle()},this.scope,0)}onChangeTitle(){var e,t;const n=!this.teachingBubbleHasBeenShown;this.teachingBubbleHasBeenShown=!0,this.scope.onchangeFuncTitle&&!this.scope.hasError&&this.scope.onchangeFuncTitle(),n&&(null===(t=(e=this.scope).dismissTeachingBubble)||void 0===t||t.call(e))}onBlurVisibility(){this.onReadMode(),this.scope.onblurFuncVisibility&&!this.scope.hasError&&this.scope.onblurFuncVisibility()}onChangeVisibility(){this.scope.onchangeFuncVisibility&&!this.scope.hasError&&this.scope.onchangeFuncVisibility()}onRestrictedSelected(){this.scope.onRestrictedSelectedFuncTitle&&!this.scope.hasError&&this.scope.onRestrictedSelectedFuncTitle()}validateVisibilityChange(e){if(this.scope.validationFuncVisibility){const t=this.scope.validationFuncVisibility({visibility:e});return void 0===t||t}return!0}onEditButtonMouseOver(){this.isEditButtonHovering=!0}onEditButtonMouseLeave(){this.isEditButtonHovering=!1}validateTitle(){this.autoTitle(),this.scope.panelTitle?this.editMode=!1:this.editMode=!0}onEditMode(){this.scope.canEdit?(this.editMode=!0,this.panelTitleOrig=this.scope.panelTitle,this.bbOffcanvas.safeFocus(this.element.find(".panel-header-title"))):this.editMode=!1}pressKey(e){if(13===e.keyCode){e.preventDefault(),e.stopPropagation(),this.element.find(".panel-header-title").get(0).blur()}else e.keyCode===D.g&&this.editMode&&this.scope.panelTitle!==this.panelTitleOrig&&(e.preventDefault(),e.stopPropagation(),this.scope.panelTitle=this.panelTitleOrig,this.editMode||this.bbOffcanvas.safeFocus(this.element.find(".panel-title")))}onReadMode(){this.scope.filterTitleTags&&this.scope.filterTitleTags()&&this.filterTitleTags(),this.validateTitle()}filterTitleTags(){this.scope.panelTitle&&(this.scope.panelTitle=this.scope.panelTitle.replace(K.a,""))}configureLocalizationKeys(){const e="components.directives.header";this.scope.localizationKey?(this.placeholderLocalizationKey=`${e}.placeholder.${this.scope.localizationKey}`,this.teachingBubbleHeadlineLocalizationKey=`${e}.teachingBubble.headline.${this.scope.localizationKey}`,this.panelAriaLocalizationKey=this.scope.ariaLocalizationKey?`${e}.aria.title.${this.scope.ariaLocalizationKey}`:this.placeholderLocalizationKey):this.scope.content&&this.scope.content.$then(()=>{if(this.scope.content.contentHandler){const t=this.scope.content.contentHandler.toString().replace("resource/","");this.placeholderLocalizationKey=`${e}.placeholder.${t}`,this.panelAriaLocalizationKey=this.scope.ariaLocalizationKey?`${e}.aria.title.${this.scope.ariaLocalizationKey}`:this.placeholderLocalizationKey,this.teachingBubbleHeadlineLocalizationKey=`${e}.teachingBubble.headline.${t}`}})}gotoConversation(e){this.ultraState.goPeekState("conversations",{courseId:this.scope.content.courseId,contentId:this.scope.content.id,groupId:e||"default"})}autoTitle(){if(!this.scope.panelTitle&&this.scope.autoTitle&&this.scope.autoTitle()){const e=this.translatedPlaceholder;this.scope.panelTitle=e}}shouldShowTeachingBubble(){return!this.teachingBubbleHasBeenShown&&this.scope.showEmptyTitleReminder&&this.inputExists()}getDeleteDirectiveArgumentType(){let e=q.None;return this.scope.content&&this.scope.content.contentHandler?(e=q.ContentOnly,this.attrs.ondeleteFunc?(e=q.ContentAndDelete,this.scope.ondeleteConfirmHandler&&(e=q.ContentAndDeleteAndHandler)):this.scope.ondeleteConfirmHandler&&(e=q.ContentAndHandler)):this.attrs.ondeleteFunc&&this.scope.ondeleteConfirmHandler&&(e=q.DeleteAndHandler),e}getButtonGroupClass(){let e=0,t=0;return this.scope.showConversations&&this.scope.showConversations()&&(e+=1,t+=1),this.scope.showParticipants&&this.scope.showParticipants()&&(e+=1),this.scope.showSettings&&this.scope.showSettings()&&(e+=1,t+=1),this.scope.showDelete&&this.scope.showDelete()&&(this.scope.showSettings&&this.scope.showSettings()||(e+=1),t+=1),"small-buttons-"+e+" large-buttons-"+t}getSettingsIcon(){return this.scope.settingsIcon?this.scope.settingsIcon:J.Gear.toString()}openSettingsPanel(){null!=this.scope.settingsDisabled&&this.scope.settingsDisabled()||this.ultraState.goPeekState(this.scope.settingsPeekRef)}isVisibilitySelectorEnabled(){return!this.scope.isVisibilitySelectorEnabled||this.scope.isVisibilitySelectorEnabled()}}U.$inject=["scope","element","attrs",o.c,p.b,d.e,u.b,j.m.serviceName,r.serviceName,b.d,h.e,a.b,V.c];class Z{constructor(e){this.$injector=e,this.restrict="E",this.template=O,this.transclude={panelHeaderCustomIcons:"?bbPanelHeaderCustomIcons",panelHeaderActions:"?bbPanelHeaderCustomActions"},this.scope={showCourse:"&?",panelHeaderTitle:"@?",panelHeaderTitleTranslateKey:"@?",content:"=",contentId:"=?",canEdit:"=",mode:"@?",hasError:"=?",hasSlider:"&?",showDelete:"&?",ondeleteFunc:"&?",ondeleteConfirmHandler:"@?",choices:"=?",showConversations:"&?",onconversationsFunc:"&?",showVisibility:"&?",onchangeFuncVisibility:"&?",onblurFuncVisibility:"&?",disableRestricted:"&?",openPanelOnRestricted:"&?",validationFuncVisibility:"&?",panelTitle:"=?",setPlaceholderAsDefaultTitle:"&?",localizationKey:"@",ariaLocalizationKey:"@",localizationAttrsValues:"@",onchangeFuncTitle:"&?",onblurFuncTitle:"&?",onRestrictedSelectedFuncTitle:"&?",maxLength:"=?",autoTitle:"&?",disableTitleAutofocus:"<?",focusTitleForEdit:"&?",keepTitleOnEdit:"&?",showSubmissionsGrading:"&?",summary:"=?",isFiltered:"=?",filteredCount:"=?",showAllyIcon:"&?",showSettings:"&?",settingsDisabled:"&?",settingsIcon:"@?",settingsPeekRef:"@?",settingsLabel:"@?",showParticipants:"&?",isVisibilitySelectorEnabled:"&?",filterTitleTags:"&?",showEmptyTitleReminder:"&?",dismissTeachingBubble:"&?",setTeachingBubbleAsFtue:"@?"},this.link=(e,t,n)=>{e.panelHeader=this.$injector.instantiate(U,{scope:e,element:t,attrs:n})}}}Z.$inject=["$injector",g.serviceName,j.m.serviceName],i.module(N,[o.b,d.d,M.a,y.a,w.a,B,z.a,A.a,b.b,F.a,"ultra.components.directives.react-toolkit.teaching-bubble",m.a,v.a,V.b]).directive("bbPanelHeader",["$injector",e=>e.instantiate(Z)])},v0wN:function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-medium-groups",use:"icon-medium-groups-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-groups"><g clip-path="url(#icon-medium-groups_clip0)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 23.0644C17.3246 21.1155 14.8704 20 12 20s-5.3246 1.1155-7 3.0644M12 20c2.7614 0 5-2.2386 5-5s-2.2386-5-5-5-5 2.2386-5 5 2.2386 5 5 5zM18.5 8C20.433 8 22 6.433 22 4.5S20.433 1 18.5 1 15 2.567 15 4.5 16.567 8 18.5 8z" /><path d="M23 11s-1-3-4.5-3c-2.1456 0-3.3517 1.1274-3.9639 2M5.5 8C3.567 8 2 6.433 2 4.5S3.567 1 5.5 1 9 2.567 9 4.5 7.433 8 5.5 8zM1 11s1-3 4.5-3c2.1456 0 3.3517 1.1274 3.9639 2" /></g><defs><clipPath id="icon-medium-groups_clip0"><path d="M0 0h24v24H0z" /></clipPath></defs></symbol>'});s.add(o);e.exports=o},"yCl+":function(e,t,n){var i=n("ziER"),s=n("5JeM"),o=new i({id:"icon-small-discussion",use:"icon-small-discussion-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-discussion"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="5" cy="8" r=".5" /><circle cx="8" cy="8" r=".5" /><circle cx="11" cy="8" r=".5" /></symbol>'});s.add(o);e.exports=o},zmy6:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));n("jMVO");var i=n("Llzl"),s=n("lEL+");const o="ultra.components.directives.placeholder";class a{constructor(t,n){this.$injector=t,this.timeout=n,this.restrict="A",this.scope=!1,this.require="?ngModel",this.link=(t,n,i,s)=>{if("input"!==n.prop("tagName").toLowerCase())throw new Error("Attempted to use bb-placeholder directive on a non-input element");const o=()=>{const i=n,s=i.attr("title"),o=i.prev("span");this.timeout(()=>{i.val()&&i.val()!==s?o.css("visibility","hidden"):(o.css("visibility",""),s&&o.css("margin-left",(t=>{const n=e("<div></div>").text(t).css("visibility","hidden").appendTo(document.body),i=n.width();return n.remove(),i})(s)+2+"px"))},t,0,!1)};n.wrap('<div class="bb-placeholder"></div>'),n.before('<span class="panel-title bb-placeholder__text">'+i.bbPlaceholder+"</span>"),n.on("cut",o),n.on("keydown",o),n.on("keyup",o),n.on("paste",o),n.on("change",o),n.on("blur",o),n.on("focus click",o),i.$observe("bbPlaceholder",e=>{n.prev("span").text(e),this.timeout(()=>{n.trigger("keydown")},t,0,!1)}),s&&t.$watch(()=>s.$modelValue,()=>{o()})}}}a.$inject=["$injector",s.b],i.module(o,[s.a]).directive("bbPlaceholder",["$injector",e=>e.instantiate(a)])}).call(this,n("5iHu"))}}]);